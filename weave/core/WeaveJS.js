'use strict';var COMPILED=false;var goog=goog||{};goog.global=this;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(val){return val!==void 0};
goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split('.');var cur=opt_objectToExportTo||goog.global;if(!(parts[0]in cur)&&cur.execScript)cur.execScript('var '+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&goog.isDef(opt_object))cur[part]=opt_object;else if(cur[part])cur=cur[part];else cur=cur[part]={}};
goog.define=function(name,defaultValue){var value=defaultValue;if(!COMPILED)if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,name))value=goog.global.CLOSURE_UNCOMPILED_DEFINES[name];else if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,name))value=goog.global.CLOSURE_DEFINES[name];goog.exportPath_(name,value)};goog.define('goog.DEBUG',true);goog.define('goog.LOCALE','en');
goog.define('goog.TRUSTED_SITE',true);goog.define('goog.STRICT_MODE_COMPATIBLE',false);goog.define('goog.DISALLOW_TEST_ONLY_CODE',COMPILED&&!goog.DEBUG);goog.define('goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING',false);goog.provide=function(name){if(!COMPILED)if(goog.isProvided_(name))throw Error('Namespace "'+name+'" already declared.');goog.constructNamespace_(name)};
goog.constructNamespace_=function(name,opt_obj){if(!COMPILED){delete goog.implicitNamespaces_[name];var namespace=name;while(namespace=namespace.substring(0,namespace.lastIndexOf('.'))){if(goog.getObjectByName(namespace))break;goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name,opt_obj)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(name){if(!goog.isString(name)||!name||name.search(goog.VALID_MODULE_RE_)==-1)throw Error('Invalid module identifier');if(!goog.isInModuleLoader_())throw Error('Module '+name+' has been loaded incorrectly.');if(goog.moduleLoaderState_.moduleName)throw Error('goog.module may only be called once per module.');goog.moduleLoaderState_.moduleName=name;if(!COMPILED){if(goog.isProvided_(name))throw Error('Namespace "'+name+'" already declared.');delete goog.implicitNamespaces_[name]}};
goog.module.get=function(name){return goog.module.getInternal_(name)};goog.module.getInternal_=function(name){if(!COMPILED)if(goog.isProvided_(name))return name in goog.loadedModules_?goog.loadedModules_[name]:goog.getObjectByName(name);else return null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};
goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw new Error('goog.module.declareTestMethods must be called from '+'within a goog.module');goog.moduleLoaderState_.declareTestMethods=true};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error('goog.module.declareLegacyNamespace must be called from '+'within a goog.module');if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error('goog.module must be called prior to '+'goog.module.declareLegacyNamespace.');goog.moduleLoaderState_.declareLegacyNamespace=true};
goog.setTestOnly=function(opt_message){if(goog.DISALLOW_TEST_ONLY_CODE){opt_message=opt_message||'';throw Error('Importing test-only code into non-debug environment'+(opt_message?': '+opt_message:'.'));}};goog.forwardDeclare=function(name){};if(!COMPILED){goog.isProvided_=function(name){return name in goog.loadedModules_||!goog.implicitNamespaces_[name]&&goog.isDefAndNotNull(goog.getObjectByName(name))};goog.implicitNamespaces_={'goog.module':true}}
goog.getObjectByName=function(name,opt_obj){var parts=name.split('.');var cur=opt_obj||goog.global;for(var part;part=parts.shift();)if(goog.isDefAndNotNull(cur[part]))cur=cur[part];else return null;return cur};goog.globalize=function(obj,opt_global){var global=opt_global||goog.global;for(var x in obj)global[x]=obj[x]};
goog.addDependency=function(relPath,provides,requires,opt_isModule){if(goog.DEPENDENCIES_ENABLED){var provide,require;var path=relPath.replace(/\\/g,'/');var deps=goog.dependencies_;for(var i=0;provide=provides[i];i++){deps.nameToPath[provide]=path;deps.pathIsModule[path]=!!opt_isModule}for(var j=0;require=requires[j];j++){if(!(path in deps.requires))deps.requires[path]={};deps.requires[path][require]=true}}};goog.define('goog.ENABLE_DEBUG_LOADER',true);goog.logToConsole_=function(msg){if(goog.global.console)goog.global.console['error'](msg)};
goog.require=function(name){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_)goog.maybeProcessDeferredDep_(name);if(goog.isProvided_(name))if(goog.isInModuleLoader_())return goog.module.getInternal_(name);else return null;if(goog.ENABLE_DEBUG_LOADER){var path=goog.getPathFromDeps_(name);if(path){goog.included_[path]=true;goog.writeScripts_();return null}}var errorMessage='goog.require could not find: '+name;goog.logToConsole_(errorMessage);throw Error(errorMessage);}};goog.basePath='';goog.global.CLOSURE_BASE_PATH;
goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error('unimplemented abstract method');};goog.addSingletonGetter=function(ctor){ctor.getInstance=function(){if(ctor.instance_)return ctor.instance_;if(goog.DEBUG)goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=ctor;return ctor.instance_=new ctor}};goog.instantiatedSingletons_=[];goog.define('goog.LOAD_MODULE_USING_EVAL',true);
goog.define('goog.SEAL_MODULE_EXPORTS',goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
if(goog.DEPENDENCIES_ENABLED){goog.included_={};goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var doc=goog.global.document;return typeof doc!='undefined'&&'write'in doc};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_())return;var doc=goog.global.document;var scripts=doc.getElementsByTagName('SCRIPT');for(var i=scripts.length-
1;i>=0;--i){var script=(scripts[i]);var src=script.src;var qmark=src.lastIndexOf('?');var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=='base.js'){goog.basePath=src.substr(0,l-7);return}}};goog.importScript_=function(src,opt_sourceText){var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(importScript(src,opt_sourceText))goog.dependencies_.written[src]=true};goog.IS_OLD_IE_=!goog.global.atob&&goog.global.document&&goog.global.document.all;goog.importModule_=function(src){var bootstrap=
'goog.retrieveAndExecModule_("'+src+'");';if(goog.importScript_('',bootstrap))goog.dependencies_.written[src]=true};goog.queuedModules_=[];goog.wrapModule_=function(srcUrl,scriptText){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON))return''+'goog.loadModule(function(exports) {'+'"use strict";'+scriptText+'\n'+';return exports'+'});'+'\n//# sourceURL\x3d'+srcUrl+'\n';else return''+'goog.loadModule('+goog.global.JSON.stringify(scriptText+'\n//# sourceURL\x3d'+srcUrl+'\n')+');'};goog.loadQueuedModules_=
function(){var count=goog.queuedModules_.length;if(count>0){var queue=goog.queuedModules_;goog.queuedModules_=[];for(var i=0;i<count;i++){var path=queue[i];goog.maybeProcessDeferredPath_(path)}}};goog.maybeProcessDeferredDep_=function(name){if(goog.isDeferredModule_(name)&&goog.allDepsAreAvailable_(name)){var path=goog.getPathFromDeps_(name);goog.maybeProcessDeferredPath_(goog.basePath+path)}};goog.isDeferredModule_=function(name){var path=goog.getPathFromDeps_(name);if(path&&goog.dependencies_.pathIsModule[path]){var abspath=
goog.basePath+path;return abspath in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(name){var path=goog.getPathFromDeps_(name);if(path&&path in goog.dependencies_.requires)for(var requireName in goog.dependencies_.requires[path])if(!goog.isProvided_(requireName)&&!goog.isDeferredModule_(requireName))return false;return true};goog.maybeProcessDeferredPath_=function(abspath){if(abspath in goog.dependencies_.deferred){var src=goog.dependencies_.deferred[abspath];delete goog.dependencies_.deferred[abspath];
goog.globalEval(src)}};goog.loadModule=function(moduleDef){var previousState=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined,declareTestMethods:false};var exports;if(goog.isFunction(moduleDef))exports=moduleDef.call(goog.global,{});else if(goog.isString(moduleDef))exports=goog.loadModuleFromSource_.call(goog.global,moduleDef);else throw Error('Invalid module definition');var moduleName=goog.moduleLoaderState_.moduleName;if(!goog.isString(moduleName)||!moduleName)throw Error('Invalid module name "'+
moduleName+'"');if(goog.moduleLoaderState_.declareLegacyNamespace)goog.constructNamespace_(moduleName,exports);else if(goog.SEAL_MODULE_EXPORTS&&Object.seal)Object.seal(exports);goog.loadedModules_[moduleName]=exports;if(goog.moduleLoaderState_.declareTestMethods)for(var entry in exports)if(entry.indexOf('test',0)===0||entry=='tearDown'||entry=='setUp'||entry=='setUpPage'||entry=='tearDownPage')goog.global[entry]=exports[entry]}finally{goog.moduleLoaderState_=previousState}};goog.loadModuleFromSource_=
function(source){var exports={};eval(arguments[0]);return exports};goog.writeScriptSrcNode_=function(src){goog.global.document.write('\x3cscript type\x3d"text/javascript" src\x3d"'+src+'"\x3e\x3c/'+'script\x3e')};goog.appendScriptSrcNode_=function(src){var doc=goog.global.document;var scriptEl=doc.createElement('script');scriptEl.type='text/javascript';scriptEl.src=src;scriptEl.defer=false;scriptEl.async=false;doc.head.appendChild(scriptEl)};goog.writeScriptTag_=function(src,opt_sourceText){if(goog.inHtmlDocument_()){var doc=
goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&doc.readyState=='complete'){var isDeps=/\bdeps.js$/.test(src);if(isDeps)return false;else throw Error('Cannot write "'+src+'" after document load');}var isOldIE=goog.IS_OLD_IE_;if(opt_sourceText===undefined)if(!isOldIE)if(goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING)goog.appendScriptSrcNode_(src);else goog.writeScriptSrcNode_(src);else{var state=" onreadystatechange\x3d'goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+
")' ";doc.write('\x3cscript type\x3d"text/javascript" src\x3d"'+src+'"'+state+'\x3e\x3c/'+'script\x3e')}else doc.write('\x3cscript type\x3d"text/javascript"\x3e'+opt_sourceText+'\x3c/'+'script\x3e');return true}else return false};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(script,scriptIndex){if(script.readyState=='complete'&&goog.lastNonModuleScriptIndex_==scriptIndex)goog.loadQueuedModules_();return true};goog.writeScripts_=function(){var scripts=[];var seenScript={};var deps=goog.dependencies_;
function visitNode(path){if(path in deps.written)return;if(path in deps.visited){if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}return}deps.visited[path]=true;if(path in deps.requires)for(var requireName in deps.requires[path])if(!goog.isProvided_(requireName))if(requireName in deps.nameToPath)visitNode(deps.nameToPath[requireName]);else throw Error('Undefined nameToPath for '+requireName);if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}}for(var path in goog.included_)if(!deps.written[path])visitNode(path);
for(var i=0;i<scripts.length;i++){var path=scripts[i];goog.dependencies_.written[path]=true}var moduleState=goog.moduleLoaderState_;goog.moduleLoaderState_=null;var loadingModule=false;for(var i=0;i<scripts.length;i++){var path=scripts[i];if(path)if(!deps.pathIsModule[path])goog.importScript_(goog.basePath+path);else{loadingModule=true;goog.importModule_(goog.basePath+path)}else{goog.moduleLoaderState_=moduleState;throw Error('Undefined script input');}}goog.moduleLoaderState_=moduleState};goog.getPathFromDeps_=
function(rule){if(rule in goog.dependencies_.nameToPath)return goog.dependencies_.nameToPath[rule];else return null};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS)goog.importScript_(goog.basePath+'deps.js')}goog.normalizePath_=function(path){var components=path.split('/');var i=0;while(i<components.length)if(components[i]=='.')components.splice(i,1);else if(i&&components[i]=='..'&&components[i-1]&&components[i-1]!='..')components.splice(--i,2);else i++;return components.join('/')};
goog.loadFileSync_=function(src){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(src);else{var xhr=new goog.global['XMLHttpRequest'];xhr.open('get',src,false);xhr.send();return xhr.responseText}};
goog.retrieveAndExecModule_=function(src){if(!COMPILED){var originalPath=src;src=goog.normalizePath_(src);var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var scriptText=goog.loadFileSync_(src);if(scriptText!=null){var execModuleScript=goog.wrapModule_(src,scriptText);var isOldIE=goog.IS_OLD_IE_;if(isOldIE){goog.dependencies_.deferred[originalPath]=execModuleScript;goog.queuedModules_.push(originalPath)}else importScript(src,execModuleScript)}else throw new Error('load of '+
src+'failed');}};
goog.typeOf=function(value){var s=typeof value;if(s=='object')if(value){if(value instanceof Array)return'array';else if(value instanceof Object)return s;var className=Object.prototype.toString.call((value));if(className=='[object Window]')return'object';if(className=='[object Array]'||typeof value.length=='number'&&typeof value.splice!='undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('splice'))return'array';if(className=='[object Function]'||typeof value.call!=
'undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('call'))return'function'}else return'null';else if(s=='function'&&typeof value.call=='undefined')return'object';return s};goog.isNull=function(val){return val===null};goog.isDefAndNotNull=function(val){return val!=null};goog.isArray=function(val){return goog.typeOf(val)=='array'};goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=='array'||type=='object'&&typeof val.length=='number'};
goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=='function'};goog.isString=function(val){return typeof val=='string'};goog.isBoolean=function(val){return typeof val=='boolean'};goog.isNumber=function(val){return typeof val=='number'};goog.isFunction=function(val){return goog.typeOf(val)=='function'};goog.isObject=function(val){var type=typeof val;return type=='object'&&val!=null||type=='function'};
goog.getUid=function(obj){return obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(obj){return!!obj[goog.UID_PROPERTY_]};goog.removeUid=function(obj){if('removeAttribute'in obj)obj.removeAttribute(goog.UID_PROPERTY_);try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_='closure_uid_'+(Math.random()*1E9>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;
goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=='object'||type=='array'){if(obj.clone)return obj.clone();var clone=type=='array'?[]:{};for(var key in obj)clone[key]=goog.cloneObject(obj[key]);return clone}return obj};goog.bindNative_=function(fn,selfObj,var_args){return(fn.call.apply(fn.bind,arguments))};
goog.bindJs_=function(fn,selfObj,var_args){if(!fn)throw new Error;if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else return function(){return fn.apply(selfObj,arguments)}};
goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf('native code')!=-1)goog.bind=goog.bindNative_;else goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=args.slice();newArgs.push.apply(newArgs,arguments);return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source)target[x]=source[x]};
goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(script){if(goog.global.execScript)goog.global.execScript(script,'JavaScript');else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval('var _evalTest_ \x3d 1;');if(typeof goog.global['_evalTest_']!='undefined'){try{delete goog.global['_evalTest_']}catch(ignore){}goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(script);else{var doc=goog.global.document;var scriptElt=doc.createElement('SCRIPT');
scriptElt.type='text/javascript';scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else throw Error('goog.globalEval not available');};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;
goog.getCssName=function(className,opt_modifier){var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split('-');var mapped=[];for(var i=0;i<parts.length;i++)mapped.push(getMapping(parts[i]));return mapped.join('-')};var rename;if(goog.cssNameMapping_)rename=goog.cssNameMappingStyle_=='BY_WHOLE'?getMapping:renameByParts;else rename=function(a){return a};if(opt_modifier)return className+'-'+rename(opt_modifier);else return rename(className)};
goog.setCssNameMapping=function(mapping,opt_style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=opt_style};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;goog.getMsg=function(str,opt_values){if(opt_values)str=str.replace(/\{\$([^}]+)}/g,function(match,key){return key in opt_values?opt_values[key]:match});return str};goog.getMsgWithFallback=function(a,b){return a};
goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};
goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor;childCtor.prototype.constructor=childCtor;childCtor.base=function(me,methodName,var_args){var args=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];return parentCtor.prototype[methodName].apply(me,args)}};
goog.base=function(me,opt_methodName,var_args){var caller=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!caller)throw Error('arguments.caller not defined.  goog.base() cannot be used '+'with strict mode code. See '+'http://www.ecma-international.org/ecma-262/5.1/#sec-C');if(caller.superClass_){var ctorArgs=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++)ctorArgs[i-1]=arguments[i];return caller.superClass_.constructor.apply(me,ctorArgs)}var args=new Array(arguments.length-
2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];var foundCaller=false;for(var ctor=me.constructor;ctor;ctor=ctor.superClass_&&ctor.superClass_.constructor)if(ctor.prototype[opt_methodName]===caller)foundCaller=true;else if(foundCaller)return ctor.prototype[opt_methodName].apply(me,args);if(me[opt_methodName]===caller)return me.constructor.prototype[opt_methodName].apply(me,args);else throw Error('goog.base called from a method of one name '+'to a method of a different name');};
goog.scope=function(fn){fn.call(goog.global)};if(!COMPILED)goog.global['COMPILED']=COMPILED;
goog.defineClass=function(superClass,def){var constructor=def.constructor;var statics=def.statics;if(!constructor||constructor==Object.prototype.constructor)constructor=function(){throw Error('cannot instantiate an interface (no constructor defined).');};var cls=goog.defineClass.createSealingConstructor_(constructor,superClass);if(superClass)goog.inherits(cls,superClass);delete def.constructor;delete def.statics;goog.defineClass.applyProperties_(cls.prototype,def);if(statics!=null)if(statics instanceof
Function)statics(cls);else goog.defineClass.applyProperties_(cls,statics);return cls};goog.defineClass.ClassDescriptor;goog.define('goog.defineClass.SEAL_CLASS_INSTANCES',goog.DEBUG);
goog.defineClass.createSealingConstructor_=function(ctr,superClass){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(superClass&&superClass.prototype&&superClass.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return ctr;var wrappedCtr=function(){var instance=ctr.apply(this,arguments)||this;instance[goog.UID_PROPERTY_]=instance[goog.UID_PROPERTY_];if(this.constructor===wrappedCtr)Object.seal(instance);return instance};return wrappedCtr}return ctr};
goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];goog.defineClass.applyProperties_=function(target,source){var key;for(key in source)if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key];for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++){key=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}};
goog.tagUnsealableClass=function(ctr){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES)ctr.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_='goog_defineClass_legacy_unsealable';goog.provide('weavejs.util.StandardLib');weavejs.util.StandardLib=function(){};weavejs.util.StandardLib.lodash;weavejs.util.StandardLib.ol;weavejs.util.StandardLib.formatNumber=function(number,precision){precision=typeof precision!=='undefined'?precision:-1;return String(number)};
weavejs.util.StandardLib.asNumber=function(value){if(value==null)return NaN;if(org.apache.flex.utils.Language.is(value,Number)||org.apache.flex.utils.Language.is(value,Date))return Number(value);try{var str=String(value);if(str=='')return NaN;if(str.charAt(0)==='#')return Number('0x'+str.substr(1));if(str.charAt(str.length-1)==='%')return Number(str.substr(0,-1))/100;return Number(str)}catch(e){}return NaN};weavejs.util.StandardLib.asString=function(value){if(value==null)return'';return String(value)};
weavejs.util.StandardLib.asBoolean=function(value){if(org.apache.flex.utils.Language.is(value,Boolean))return value;if(org.apache.flex.utils.Language.is(value,String))return weavejs.util.StandardLib.stringCompare(value,'true',true)==0;if(isNaN(value))return false;if(org.apache.flex.utils.Language.is(value,Number))return value!=0;return value};weavejs.util.StandardLib.isDefined=function(value){return value!==undefined&&value!==null&&!(org.apache.flex.utils.Language.is(value,Number)&&isNaN(value))};
weavejs.util.StandardLib.isUndefined=function(value,orEmptyString){orEmptyString=typeof orEmptyString!=='undefined'?orEmptyString:false;return value===undefined||value===null||org.apache.flex.utils.Language.is(value,Number)&&isNaN(value)||orEmptyString&&value===''};
weavejs.util.StandardLib.lpad=function(str,length,padString){padString=typeof padString!=='undefined'?padString:' ';if(str.length>=length)return str;while(str.length+padString.length<length)padString+=padString;return padString.substr(0,length-str.length)+str};
weavejs.util.StandardLib.rpad=function(str,length,padString){padString=typeof padString!=='undefined'?padString:' ';if(str.length>=length)return str;while(str.length+padString.length<length)padString+=padString;return str+padString.substr(0,length-str.length)};
weavejs.util.StandardLib.replace=function(string,findStr,replaceStr,moreFindAndReplace){moreFindAndReplace=Array.prototype.slice.call(arguments,3);string=string.split(findStr).join(replaceStr);while(moreFindAndReplace.length>1){findStr=moreFindAndReplace.shift();replaceStr=moreFindAndReplace.shift();string=string.split(findStr).join(replaceStr)}return string};weavejs.util.StandardLib.argRef=new RegExp('^(0|[1-9][0-9]*)}');
weavejs.util.StandardLib.substitute=function(format,args){args=Array.prototype.slice.call(arguments,1);if(format==null)return'';if(args.length==1&&org.apache.flex.utils.Language.is(args[0],Array))args=org.apache.flex.utils.Language.as(args[0],Array);var split=format.split('{');var output=split[0];for(var i=1;i<split.length;i++){var str=org.apache.flex.utils.Language.as(split[i],String);if(weavejs.util.StandardLib.argRef.test(str)){var j=str.indexOf('}');output+=args[str.substring(0,j)];output+=str.substring(j+
1)}else output+='{'+str}return output};
weavejs.util.StandardLib.unIndent=function(script,spacesPerTab){spacesPerTab=typeof spacesPerTab!=='undefined'?spacesPerTab:-1;if(script==null)return null;script=weavejs.util.StandardLib.replace(script,'\r\n','\n','\r','\n');script=weavejs.util.StandardLib.trim('.'+script).substr(1);var lines=script.split('\n');while(lines.length&&!weavejs.util.StandardLib.trim(lines[0]))lines.shift();if(!lines.length)return'';var commonIndent=Number.MAX_VALUE;var line;var foreachiter0_target=lines;for(var foreachiter0 in foreachiter0_target){line=
foreachiter0_target[foreachiter0];if(!weavejs.util.StandardLib.trim(line))continue;var lineIndent=0;while(line.charAt(lineIndent)=='\t')lineIndent++;commonIndent=Math.min(commonIndent,lineIndent)}for(var i=0;i<lines.length;i++){line=lines[i];var t=0;while(t<commonIndent&&line.charAt(t)=='\t')t++;var spaces='';if(spacesPerTab>=0)while(line.charAt(t)=='\t'){spaces+=weavejs.util.StandardLib.lpad('',spacesPerTab,'        ');t++}lines[i]=spaces+line.substr(t)}return lines.join('\n')};
weavejs.util.StandardLib.trim=function(str){if(str==null)return'';var startIndex=0;while(weavejs.util.StandardLib.isWhitespace(str.charAt(startIndex)))++startIndex;var endIndex=str.length-1;while(weavejs.util.StandardLib.isWhitespace(str.charAt(endIndex)))--endIndex;if(endIndex>=startIndex)return str.slice(startIndex,endIndex+1);else return''};
weavejs.util.StandardLib.isWhitespace=function(character){switch(character){case ' ':case '\t':case '\r':case '\n':case '\f':case '\u00a0':case '\u2028':case '\u2029':case '\u3000':return true;default:return false}};
weavejs.util.StandardLib.numberToBase=function(number,base,zeroPad){base=typeof base!=='undefined'?base:10;zeroPad=typeof zeroPad!=='undefined'?zeroPad:1;if(!isFinite(number))return null;var parts=Math.abs(number).toString(base).split('.');if(parts[0].length<zeroPad)parts[0]=weavejs.util.StandardLib.lpad(parts[0],zeroPad,'0');if(number<0)parts[0]='-'+parts[0];return parts.join('.')};weavejs.util.StandardLib.sign=function(value){if(value<0)return-1;return 1};
weavejs.util.StandardLib.constrain=function(value,min,max){if(value<min)return min;if(value>max)return max;return value};weavejs.util.StandardLib.normalize=function(value,min,max){if(value<min||value>max)return NaN;if(min==max)return value-min;return(value-min)/(max-min)};
weavejs.util.StandardLib.scale=function(inputValue,inputMin,inputMax,outputMin,outputMax){if(inputMin==inputMax){if(isNaN(inputValue))return NaN;if(inputValue>inputMax)return outputMax;return outputMin}return outputMin+(outputMax-outputMin)*(inputValue-inputMin)/(inputMax-inputMin)};
weavejs.util.StandardLib.roundSignificant=function(value,significantDigits){significantDigits=typeof significantDigits!=='undefined'?significantDigits:14;if(!isFinite(value))return value;var sign=value<0?-1:1;var absValue=Math.abs(value);var pow10;if(absValue<1){pow10=Math.pow(10,significantDigits);return sign*Math.round(absValue*pow10)/pow10}var log10=Math.ceil(Math.log(absValue)/Math.LN10);if(log10<significantDigits){pow10=Math.pow(10,significantDigits-log10);return sign*Math.round(absValue*pow10)/
pow10}else{pow10=Math.pow(10,log10-significantDigits);return sign*Math.round(absValue/pow10)*pow10}};weavejs.util.StandardLib.testRoundSignificant=function(){for(var pow=-5;pow<=5;pow++){var n=1234.5678*Math.pow(10,pow);for(var d=0;d<=9;d++)org.apache.flex.utils.Language.trace('roundSignificant(',n,',',d,') \x3d',weavejs.util.StandardLib.roundSignificant(n,d))}};weavejs.util.StandardLib.roundPrecision=function(number,precision){return Math.round(number/precision)*precision};
weavejs.util.StandardLib.suggestPrecision=function(n,d){return Math.pow(10,Math.min(0,Math.ceil(Math.log(n)/Math.LN10)-d))};
weavejs.util.StandardLib.interpolateColor=function(normValue,colors){colors=Array.prototype.slice.call(arguments,1);if(colors.length==1&&org.apache.flex.utils.Language.is(colors[0],Array))colors=colors[0];if(normValue<0||normValue>1||colors.length==0)return NaN;var maxIndex=colors.length-1;var leftIndex=org.apache.flex.utils.Language._int(maxIndex*normValue);var rightIndex=leftIndex+1;if(rightIndex==colors.length)return colors[leftIndex];var minColor=colors[leftIndex];var maxColor=colors[rightIndex];
normValue=normValue*maxIndex-leftIndex;var percentLeft=1-normValue;var percentRight=normValue;var R=16711680;var G=65280;var B=255;return percentLeft*(minColor&R)+percentRight*(maxColor&R)&R|percentLeft*(minColor&G)+percentRight*(maxColor&G)&G|percentLeft*(minColor&B)+percentRight*(maxColor&B)&B};weavejs.util.StandardLib.getColorLuma=function(color){return.3*((color&16711680)>>16)+.59*((color&65280)>>8)+.11*(color&255)};
weavejs.util.StandardLib.getHexColor=function(color){if(color!=(color&16777215))return null;return'#'+weavejs.util.StandardLib.numberToBase(color,16,6)};
weavejs.util.StandardLib.getNiceNumber=function(x,round){var exponent;var fractionalPart;var niceFractionalPart;if(x==0)return 0;exponent=Math.floor(Math.log(x)/Math.LN10);fractionalPart=x/Math.pow(10,exponent);if(round)if(fractionalPart<1.5)niceFractionalPart=1;else if(fractionalPart<3)niceFractionalPart=2;else if(fractionalPart<7)niceFractionalPart=5;else niceFractionalPart=10;else if(fractionalPart<=1)niceFractionalPart=1;else if(fractionalPart<=2)niceFractionalPart=2;else if(fractionalPart<5)niceFractionalPart=
5;else niceFractionalPart=10;return niceFractionalPart*Math.pow(10,exponent)};
weavejs.util.StandardLib.getNiceNumbersInRange=function(min,max,numberOfValuesInRange){if(min==max)return[min];var nfrac;var d;var graphmin;var graphmax;var range;var x;var i=0;var values=[];range=max-min;d=weavejs.util.StandardLib.getNiceNumber(range/(numberOfValuesInRange-1),true);graphmin=Math.floor(min/d)*d;graphmax=Math.ceil(max/d)*d;nfrac=Math.max(-Math.floor(Math.log(d)/Math.LN10),0);for(x=graphmin;x<graphmax+.5*d;x+=d)values[i++]=weavejs.util.StandardLib.roundSignificant(x);return values};
weavejs.util.StandardLib.mean=function(args){args=Array.prototype.slice.call(arguments,0);if(args.length==1&&org.apache.flex.utils.Language.is(args[0],Array))args=args[0];var sum=0;var foreachiter1_target=args;for(var foreachiter1 in foreachiter1_target){var value=foreachiter1_target[foreachiter1];sum+=value}return sum/args.length};
weavejs.util.StandardLib.sum=function(args){args=Array.prototype.slice.call(arguments,0);if(args.length==1&&org.apache.flex.utils.Language.is(args[0],Array))args=args[0];var sum=0;var foreachiter2_target=args;for(var foreachiter2 in foreachiter2_target){var value=foreachiter2_target[foreachiter2];sum+=value}return sum};weavejs.util.StandardLib.AS3_CASEINSENSITIVE=1;weavejs.util.StandardLib.AS3_DESCENDING=2;weavejs.util.StandardLib.AS3_UNIQUESORT=4;weavejs.util.StandardLib.AS3_RETURNINDEXEDARRAY=8;
weavejs.util.StandardLib.AS3_NUMERIC=16;weavejs.util.StandardLib.LODASH_ASCENDING='asc';weavejs.util.StandardLib.LODASH_DESCENDING='desc';weavejs.util.StandardLib._indexMap;
weavejs.util.StandardLib.as3SortOn=function(array,fieldNames,options){var __localFn0__=function(option){return option&weavejs.util.StandardLib.AS3_RETURNINDEXEDARRAY};var __localFn1__=function(option){return option&weavejs.util.StandardLib.AS3_UNIQUESORT};var __localFn2__=function(option){return option&weavejs.util.StandardLib.AS3_DESCENDING?weavejs.util.StandardLib.LODASH_DESCENDING:weavejs.util.StandardLib.LODASH_ASCENDING};var __localFn3__=function(option,index){var __localFn0__=function(item){if(item===
undefined||item===null)return'';return String(item[fieldName])};var __localFn1__=function(item){if(item===undefined||item===null)return'';return String(item[fieldName]).toLocaleLowerCase()};var customConvert;var fieldName=fieldNames[index];if(!(option&weavejs.util.StandardLib.AS3_NUMERIC))customConvert=__localFn0__;else if(option&weavejs.util.StandardLib.AS3_CASEINSENSITIVE)customConvert=__localFn1__;return customConvert||fieldNames[index]};var __localFn4__=function(item,index){weavejs.util.StandardLib._indexMap.set(item,
index)};var __localFn5__=function(item){return weavejs.util.StandardLib._indexMap.get(item)};if(!org.apache.flex.utils.Language.is(fieldNames,Array))fieldNames=[fieldNames];if(!org.apache.flex.utils.Language.is(options,Array))options=[options];var returnIndexedArray=options.some(__localFn0__);var uniqueSort=options.some(__localFn1__);var orders=options.map(__localFn2__);var iteratees=options.map(__localFn3__);if(!weavejs.util.StandardLib._indexMap)weavejs.util.StandardLib._indexMap=new weavejs.util.JS.Map;
weavejs.util.StandardLib._indexMap.clear();if(returnIndexedArray){if(!weavejs.util.StandardLib.arrayIsType(array,Object))weavejs.util.JS.error("Warning: Can't do an indexed array sort of non-objects reliably, as there's a higher chance of non-unique items.");array.forEach(__localFn4__)}var result=weavejs.util.StandardLib.lodash.sortByOrder(array,iteratees,orders);if(returnIndexedArray)result=result.map(__localFn5__);return result};weavejs.util.StandardLib._sortBuffer=[];
weavejs.util.StandardLib.sortOn=function(array,params,sortDirections,inPlace,returnSortedIndexArray){sortDirections=typeof sortDirections!=='undefined'?sortDirections:undefined;inPlace=typeof inPlace!=='undefined'?inPlace:true;returnSortedIndexArray=typeof returnSortedIndexArray!=='undefined'?returnSortedIndexArray:false;if(array.length==0)return inPlace?array:[];var values;var param;var sortDirection;var i;for(i=weavejs.util.StandardLib._sortBuffer.length;i<array.length;i++)weavejs.util.StandardLib._sortBuffer[i]=
[];if(params===array||!org.apache.flex.utils.Language.is(params,Array)){params=[params];if(sortDirections)sortDirections=[sortDirections]}var fields=new Array(params.length);var fieldOptions=new Array(params.length);for(var p=0;p<params.length;p++){param=params[p];sortDirection=sortDirections&&sortDirections[p]<0?weavejs.util.StandardLib.AS3_DESCENDING:0;i=array.length;if(org.apache.flex.utils.Language.is(param,Array))while(i--)weavejs.util.StandardLib._sortBuffer[i][p]=param[i];else if(org.apache.flex.utils.Language.is(param,
Function))while(i--)weavejs.util.StandardLib._sortBuffer[i][p]=param(array[i]);else if(org.apache.flex.utils.Language.is(param,weavejs.util.JS.Map)||org.apache.flex.utils.Language.is(param,weavejs.util.JS.WeakMap))while(i--)weavejs.util.StandardLib._sortBuffer[i][p]=param.get(array[i]);else if(typeof param==='object')while(i--)weavejs.util.StandardLib._sortBuffer[i][p]=param[array[i]];else while(i--)weavejs.util.StandardLib._sortBuffer[i][p]=array[i][param];fields[p]=p;fieldOptions[p]=weavejs.util.StandardLib.AS3_RETURNINDEXEDARRAY|
weavejs.util.StandardLib.guessSortMode(weavejs.util.StandardLib._sortBuffer,p)|sortDirection}values=weavejs.util.StandardLib._sortBuffer.slice(0,array.length);values=weavejs.util.StandardLib.as3SortOn(values,fields,fieldOptions);if(returnSortedIndexArray)return values;var array2=new Array(array.length);i=array.length;while(i--)array2[i]=array[values[i]];if(!inPlace)return array2;i=array.length;while(i--)array[i]=array2[i];return array};
weavejs.util.StandardLib.guessSortMode=function(array,itemProp){var foreachiter3_target=array;for(var foreachiter3 in foreachiter3_target){var item=foreachiter3_target[foreachiter3];var value=item[itemProp];if(value!==undefined)return org.apache.flex.utils.Language.is(value,Number)||org.apache.flex.utils.Language.is(value,Date)?16:0}return 0};
weavejs.util.StandardLib.getArrayType=function(a){if(a==null||a.length==0||a[0]==null)return null;var type=Object(a[0]).constructor;var foreachiter4_target=a;for(var foreachiter4 in foreachiter4_target){var item=foreachiter4_target[foreachiter4];if(item==null||item.constructor!=type)return null}return type};
weavejs.util.StandardLib.arrayIsType=function(a,type){var foreachiter5_target=a;for(var foreachiter5 in foreachiter5_target){var item=foreachiter5_target[foreachiter5];if(!org.apache.flex.utils.Language.is(item,type))return false}return true};weavejs.util.StandardLib.logTransform=function(normValue,factor){factor=typeof factor!=='undefined'?factor:1024;return Math.log(1+normValue*factor)/Math.log(1+factor)};
weavejs.util.StandardLib.formatDate=function(value,formatString,formatAsUniversalTime){formatString=typeof formatString!=='undefined'?formatString:null;formatAsUniversalTime=typeof formatAsUniversalTime!=='undefined'?formatAsUniversalTime:true;if(org.apache.flex.utils.Language.is(value,Number)){var date=new Date;date.setTime(org.apache.flex.utils.Language.as(value,Number));value=date}return String(value)};weavejs.util.StandardLib._timezoneMultiplier=6E4;
weavejs.util.StandardLib.compare=function(a,b,objectCompare){objectCompare=typeof objectCompare!=='undefined'?objectCompare:null;var c;if(a===b)return 0;if(a==null)return 1;if(b==null)return-1;var typeA=typeof a;var typeB=typeof b;if(typeA!=typeB)return weavejs.util.StandardLib.stringCompare(typeA,typeB);if(typeA=='boolean')return weavejs.util.StandardLib.numericCompare(Number(a),Number(b));if(typeA=='number')return weavejs.util.StandardLib.numericCompare(org.apache.flex.utils.Language.as(a,Number),
org.apache.flex.utils.Language.as(b,Number));if(typeA=='string')return weavejs.util.StandardLib.stringCompare(org.apache.flex.utils.Language.as(a,String),org.apache.flex.utils.Language.as(b,String));if(typeA!='object')return 1;if(org.apache.flex.utils.Language.is(a,Date)&&org.apache.flex.utils.Language.is(b,Date))return weavejs.util.StandardLib.dateCompare(org.apache.flex.utils.Language.as(a,Date),org.apache.flex.utils.Language.as(b,Date));if(org.apache.flex.utils.Language.is(a,Array)&&org.apache.flex.utils.Language.is(b,
Array)){var an=a.length;var bn=b.length;if(an<bn)return-1;if(an>bn)return 1;for(var i=0;i<an;i++){c=weavejs.util.StandardLib.compare(a[i],b[i]);if(c!=0)return c}return 0}if(objectCompare!=null){var result=objectCompare(a,b);if(isFinite(result))return result}var qna=String(a);var qnb=String(b);if(qna!=qnb)return weavejs.util.StandardLib.stringCompare(qna,qnb);var p;for(p in a)if(!b.hasOwnProperty(p))return-1;for(p in b){if(!a.hasOwnProperty(p))return 1;c=weavejs.util.StandardLib.compare(a[p],b[p]);
if(c!=0)return c}return 0};weavejs.util.StandardLib.numericCompare=function(a,b){if(isNaN(a)&&isNaN(b))return 0;if(isNaN(a))return 1;if(isNaN(b))return-1;if(a<b)return-1;if(a>b)return 1;return 0};
weavejs.util.StandardLib.stringCompare=function(a,b,caseInsensitive){caseInsensitive=typeof caseInsensitive!=='undefined'?caseInsensitive:false;if(a==null&&b==null)return 0;if(a==null)return 1;if(b==null)return-1;if(caseInsensitive){a=String(a).toLocaleLowerCase();b=String(b).toLocaleLowerCase()}var result=String(a).localeCompare(b);if(result<-1)result=-1;else if(result>1)result=1;return result};
weavejs.util.StandardLib.dateCompare=function(a,b){if(a==null&&b==null)return 0;if(a==null)return 1;if(b==null)return-1;var na=a.getTime();var nb=b.getTime();if(na<nb)return-1;if(na>nb)return 1;if(isNaN(na)&&isNaN(nb))return 0;if(isNaN(na))return 1;if(isNaN(nb))return-1;return 0};weavejs.util.StandardLib.ucs2encode=function(value){var output='';if(value>65535){value-=65536;output+=String.fromCharCode(value>>>10&1023|55296);value=56320|value&1023}return output+String.fromCharCode(value)};
weavejs.util.StandardLib.guid=function(){return weavejs.util.StandardLib.s4()+weavejs.util.StandardLib.s4()+'-'+weavejs.util.StandardLib.s4()+'-'+weavejs.util.StandardLib.s4()+'-'+weavejs.util.StandardLib.s4()+'-'+weavejs.util.StandardLib.s4()+weavejs.util.StandardLib.s4()+weavejs.util.StandardLib.s4()};weavejs.util.StandardLib.s4=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};
weavejs.util.StandardLib.byteArrayToString=function(byteArray){var CHUNK_SIZE=8192;var n=byteArray.length;if(n<=CHUNK_SIZE)return String.fromCharCode.apply(String,byteArray);var strings=[];for(var i=0;i<byteArray.length;)strings.push(String.fromCharCode.apply(null,byteArray.subarray(i,i+=CHUNK_SIZE)));return strings.join('')};weavejs.util.StandardLib.prototype.FLEXJS_CLASS_INFO={names:[{name:'StandardLib',qName:'weavejs.util.StandardLib'}]};goog.exportSymbol('weavejs.util.StandardLib',weavejs.util.StandardLib);
weavejs.util.StandardLib.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.util.JS');goog.require('weavejs.util.StandardLib');weavejs.util.JS=function(){};weavejs.util.JS.getGlobal=function(name){var Fn=Function;var fn=new Fn('return '+name+';');return fn()};weavejs.util.JS.global=weavejs.util.JS.getGlobal('this');weavejs.util.JS.console=weavejs.util.JS.getGlobal('console');weavejs.util.JS.Symbol=weavejs.util.JS.getGlobal('Symbol');
weavejs.util.JS.error=function(args){args=Array.prototype.slice.call(arguments,0);weavejs.util.JS.console.error.apply(weavejs.util.JS.console,args)};weavejs.util.JS.log=function(args){args=Array.prototype.slice.call(arguments,0);weavejs.util.JS.console.log.apply(weavejs.util.JS.console,args)};weavejs.util.JS.unnamedFunctionRegExp=/^\s*function\s*\([^\)]*\)\s*\{[^]*\}\s*$/m;
weavejs.util.JS.compile=function(script,paramNames,errorHandler){paramNames=typeof paramNames!=='undefined'?paramNames:null;errorHandler=typeof errorHandler!=='undefined'?errorHandler:null;var __localFn0__=function(){try{return func.apply(this,arguments)}catch(e){if(org.apache.flex.utils.Language.is(e,SyntaxError)){args.pop();args.push(script);try{func=Function['apply'](null,args)}catch(e2){if(org.apache.flex.utils.Language.is(e2,SyntaxError))func=Function['apply']();return weavejs.util.JS.handleScriptError(e2,
'compiling',script,paramNames,errorHandler)}try{return func.apply(this,arguments)}catch(e3){return weavejs.util.JS.handleScriptError(e3,'evaluating',script,paramNames,errorHandler)}}return weavejs.util.JS.handleScriptError(e,'evaluating',script,paramNames,errorHandler)}};try{script=weavejs.util.StandardLib.replace(script,'\r\n','\n','\r','\n');var isFunc=weavejs.util.JS.unnamedFunctionRegExp.test(script);if(isFunc)script='('+weavejs.util.StandardLib.trim(script)+')';var args=(paramNames||[]).concat('return eval('+
JSON.stringify(script)+');');var func=Function['apply'](null,args);if(isFunc)func=func();return __localFn0__}catch(e){weavejs.util.JS.handleScriptError(e,'compiling',script,paramNames,errorHandler);throw e;}return null};
weavejs.util.JS.handleScriptError=function(e,doingWhat,script,paramNames,errorHandler){script=weavejs.util.StandardLib.replace(script,'\n','\n\t');script=weavejs.util.StandardLib.trim(script);var paramsStr=paramNames&&paramNames.length?' with params ('+paramNames.join(', ')+')':'';e.message=weavejs.util.StandardLib.substitute('Error {0} script{1}:\n\t{2}\n{3}',doingWhat,paramsStr,script,e.message);if(errorHandler!=null)return errorHandler(e);else throw e;};weavejs.util.JS.ArrayBuffer=weavejs.util.JS.getGlobal('ArrayBuffer');
weavejs.util.JS.Uint8Array=weavejs.util.JS.getGlobal('Uint8Array');weavejs.util.JS.DataView=weavejs.util.JS.getGlobal('DataView');weavejs.util.JS.Promise=weavejs.util.JS.getGlobal('Promise');weavejs.util.JS.Map=weavejs.util.JS.getGlobal('Map');weavejs.util.JS.WeakMap=weavejs.util.JS.getGlobal('WeakMap');weavejs.util.JS.mapKeys=function(map){return map?weavejs.util.JS.toArray(map.keys()):[]};weavejs.util.JS.mapValues=function(map){return map?weavejs.util.JS.toArray(map.values()):[]};
weavejs.util.JS.mapEntries=function(map){return map?weavejs.util.JS.toArray(map.entries()):[]};weavejs.util.JS.isIterable=function(value){return value&&typeof value[weavejs.util.JS.Symbol.iterator]==='function'};
weavejs.util.JS.toArray=function(value){if(org.apache.flex.utils.Language.is(value,Array))return value;if(value&&typeof value[weavejs.util.JS.Symbol.iterator]==='function'){var iterator=value[weavejs.util.JS.Symbol.iterator]();var values=[];while(true){var next=iterator.next();if(next.done)break;values.push(next.value)}return values}if(Object.prototype.toString.call(value)==='[object Arguments]')return Array.prototype.slice.call(value);return null};weavejs.util.JS.objectKeys=function(object){return Object['keys'](object)};
weavejs.util.JS.isPrimitive=function(value){return value===null||typeof value!=='object'};
weavejs.util.JS.copyObject=function(object,allowNonPrimitiveRefs){allowNonPrimitiveRefs=typeof allowNonPrimitiveRefs!=='undefined'?allowNonPrimitiveRefs:false;if(object===null||typeof object!=='object')return object;var copy;if(org.apache.flex.utils.Language.is(object,Array))copy=[];else if(Object['getPrototypeOf'](Object['getPrototypeOf'](object)))if(allowNonPrimitiveRefs)copy=object;else throw new Error('copyObject() cannot copy non-primitive Objects');else copy={};for(var key in object)copy[key]=
weavejs.util.JS.copyObject(object[key],allowNonPrimitiveRefs);return copy};weavejs.util.JS.bindAll=function(instance){var proto=Object['getPrototypeOf'](instance);for(var key in proto){var prop=proto[key];if(typeof prop==='function'&&key!=='constructor')instance[key]=prop.bind(instance)}return instance};weavejs.util.JS.isClass=function(classDef){return typeof classDef==='function'&&classDef.prototype&&classDef.prototype.constructor===classDef};
weavejs.util.JS.asClass=function(classDef){return weavejs.util.JS.isClass(classDef)?classDef:null};weavejs.util.JS.setTimeout=function(func,delay,params){params=Array.prototype.slice.call(arguments,2);params.unshift(func,delay);return weavejs.util.JS.global['setTimeout'].apply(weavejs.util.JS.global,params)};weavejs.util.JS.clearTimeout=function(id){weavejs.util.JS.global['clearTimeout'](id)};
weavejs.util.JS.setInterval=function(func,delay,params){params=Array.prototype.slice.call(arguments,2);params.unshift(func,delay);return weavejs.util.JS.global['setInterval'].apply(weavejs.util.JS.global,params)};weavejs.util.JS.clearInterval=function(id){weavejs.util.JS.global['clearInterval'](id)};weavejs.util.JS.requestAnimationFrame=function(func){return weavejs.util.JS.global['requestAnimationFrame'].call(weavejs.util.JS.global,func)};
weavejs.util.JS.cancelAnimationFrame=function(id){weavejs.util.JS.global['cancelAnimationFrame'].call(weavejs.util.JS.global,id)};weavejs.util.JS.now=function(){return Date['now']()};weavejs.util.JS.hasProperty=function(object,prop){while(object!=null&&!Object['getOwnPropertyDescriptor'](object,prop))object=Object['getPrototypeOf'](object);return object!=null};weavejs.util.JS.getOwnPropertyNames=function(object){return Object['getOwnPropertyNames'](object)};
weavejs.util.JS.getPropertyNames=function(object,useCache){if(object==null||object===Object.prototype)return[];if(!weavejs.util.JS.map_obj_names){weavejs.util.JS.map_obj_names=new weavejs.util.JS.WeakMap;weavejs.util.JS.map_prop_skip=new weavejs.util.JS.Map}if(useCache&&weavejs.util.JS.map_obj_names.has(object))return weavejs.util.JS.map_obj_names.get(object);var names=weavejs.util.JS.getPropertyNames(Object['getPrototypeOf'](object),useCache);if(useCache)names=names.concat();++weavejs.util.JS.skip_id;
var name;var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){name=foreachiter0_target[foreachiter0];weavejs.util.JS.map_prop_skip.set(name,weavejs.util.JS.skip_id)}var ownNames=Object['getOwnPropertyNames'](object);var foreachiter1_target=ownNames;for(var foreachiter1 in foreachiter1_target){name=foreachiter1_target[foreachiter1];if(weavejs.util.JS.map_prop_skip.get(name)!==weavejs.util.JS.skip_id){weavejs.util.JS.map_prop_skip.set(name,weavejs.util.JS.skip_id);names.push(name)}}weavejs.util.JS.map_obj_names.set(object,
names);return names};weavejs.util.JS.map_obj_names;weavejs.util.JS.map_prop_skip;weavejs.util.JS.skip_id=0;weavejs.util.JS.prototype.FLEXJS_CLASS_INFO={names:[{name:'JS',qName:'weavejs.util.JS'}]};goog.exportSymbol('weavejs.util.JS',weavejs.util.JS);weavejs.util.JS.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.core.IClassRegistry');weavejs.api.core.IClassRegistry=function(){};weavejs.api.core.IClassRegistry.prototype.registerClass=function(definition,qualifiedName,interfaces,displayName){};weavejs.api.core.IClassRegistry.prototype.getClassName=function(definition){};weavejs.api.core.IClassRegistry.prototype.getDefinition=function(name){};weavejs.api.core.IClassRegistry.prototype.getClassInfo=function(class_or_instance){};
weavejs.api.core.IClassRegistry.prototype.registerSingletonImplementation=function(theInterface,theImplementation){};weavejs.api.core.IClassRegistry.prototype.getSingletonImplementation=function(theInterface){};weavejs.api.core.IClassRegistry.prototype.getSingletonInstance=function(theInterface){};weavejs.api.core.IClassRegistry.prototype.registerImplementation=function(theInterface,theImplementation,displayName){};weavejs.api.core.IClassRegistry.prototype.getImplementations=function(theInterface){};
weavejs.api.core.IClassRegistry.prototype.getDisplayName=function(theImplementation){};weavejs.api.core.IClassRegistry.prototype.FLEXJS_CLASS_INFO={names:[{name:'IClassRegistry',qName:'weavejs.api.core.IClassRegistry'}]};
weavejs.api.core.IClassRegistry.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'registerClass':{type:'void',declaredBy:'weavejs.api.core.IClassRegistry'},'getClassName':{type:'String',declaredBy:'weavejs.api.core.IClassRegistry'},'getDefinition':{type:'*',declaredBy:'weavejs.api.core.IClassRegistry'},'getClassInfo':{type:'Object',declaredBy:'weavejs.api.core.IClassRegistry'},'registerSingletonImplementation':{type:'Boolean',
declaredBy:'weavejs.api.core.IClassRegistry'},'getSingletonImplementation':{type:'Class',declaredBy:'weavejs.api.core.IClassRegistry'},'getSingletonInstance':{type:'*',declaredBy:'weavejs.api.core.IClassRegistry'},'registerImplementation':{type:'void',declaredBy:'weavejs.api.core.IClassRegistry'},'getImplementations':{type:'Array',declaredBy:'weavejs.api.core.IClassRegistry'},'getDisplayName':{type:'String',declaredBy:'weavejs.api.core.IClassRegistry'}}}}};goog.provide('weavejs.core.ClassRegistryImpl');goog.require('weavejs.util.JS');goog.require('weavejs.api.core.IClassRegistry');
weavejs.core.ClassRegistryImpl=function(){this.map_interface_singletonInstance=new weavejs.util.JS.Map;this.map_interface_singletonImplementation=new weavejs.util.JS.Map;this.map_interface_implementations=new weavejs.util.JS.Map;this.map_class_displayName=new weavejs.util.JS.Map;this.map_name_class=new weavejs.util.JS.Map;this.map_class_name=new weavejs.util.JS.Map;this.defaultPackages=[]};weavejs.core.ClassRegistryImpl.prototype.map_interface_singletonInstance;weavejs.core.ClassRegistryImpl.prototype.map_interface_singletonImplementation;
weavejs.core.ClassRegistryImpl.prototype.map_interface_implementations;weavejs.core.ClassRegistryImpl.prototype.map_class_displayName;weavejs.core.ClassRegistryImpl.prototype.map_name_class;weavejs.core.ClassRegistryImpl.prototype.map_class_name;weavejs.core.ClassRegistryImpl.prototype.defaultPackages;weavejs.core.ClassRegistryImpl.FLEXJS_CLASS_INFO='FLEXJS_CLASS_INFO';weavejs.core.ClassRegistryImpl.NAMES='names';weavejs.core.ClassRegistryImpl.NAME='name';weavejs.core.ClassRegistryImpl.QNAME='qName';
weavejs.core.ClassRegistryImpl.INTERFACES='interfaces';
weavejs.core.ClassRegistryImpl.prototype.registerClass=function(definition,qualifiedName,interfaces,displayName){interfaces=typeof interfaces!=='undefined'?interfaces:null;displayName=typeof displayName!=='undefined'?displayName:null;if(!this.map_name_class.has(qualifiedName))this.map_name_class.set(qualifiedName,definition);if(!this.map_class_name.has(definition))this.map_class_name.set(definition,qualifiedName);var shortName=qualifiedName.split('.').pop().split(':').pop();if(!this.map_name_class.has(shortName))this.map_name_class.set(shortName,
definition);var info;var items;var item;if(Object(definition.prototype).hasOwnProperty(weavejs.core.ClassRegistryImpl.FLEXJS_CLASS_INFO))info=definition.prototype[weavejs.core.ClassRegistryImpl.FLEXJS_CLASS_INFO];else info=definition.prototype[weavejs.core.ClassRegistryImpl.FLEXJS_CLASS_INFO]={};var found=false;items=info[weavejs.core.ClassRegistryImpl.NAMES]||(info[weavejs.core.ClassRegistryImpl.NAMES]=[]);var foreachiter0_target=items;for(var foreachiter0 in foreachiter0_target){item=foreachiter0_target[foreachiter0];
if(item[weavejs.core.ClassRegistryImpl.QNAME]==qualifiedName){found=true;break}}if(!found){item={};item[weavejs.core.ClassRegistryImpl.NAME]=shortName;item[weavejs.core.ClassRegistryImpl.QNAME]=qualifiedName;items.push(item)}items=info[weavejs.core.ClassRegistryImpl.INTERFACES]||(info[weavejs.core.ClassRegistryImpl.INTERFACES]=[]);var foreachiter1_target=interfaces;for(var foreachiter1 in foreachiter1_target){item=foreachiter1_target[foreachiter1];if(items.indexOf(item)<0)items.push(item);this.registerImplementation(item,
definition,displayName)}};weavejs.core.ClassRegistryImpl.prototype.getClassName=function(definition){if(!definition)return null;if(!definition.prototype)definition=definition.constructor;if(definition.prototype&&definition.prototype[weavejs.core.ClassRegistryImpl.FLEXJS_CLASS_INFO])return definition.prototype[weavejs.core.ClassRegistryImpl.FLEXJS_CLASS_INFO].names[0].qName;if(this.map_class_name.has(definition))return this.map_class_name.get(definition);return definition.name};
weavejs.core.ClassRegistryImpl.prototype.getDefinition=function(name){var def=this.map_name_class.get(name);if(def||!name)return def;def=this.evalChain(name);if(!def){var shortName=name.split('.').pop().split('::').pop();var foreachiter2_target=this.defaultPackages;for(var foreachiter2 in foreachiter2_target){var pkg=foreachiter2_target[foreachiter2];var qName=pkg?pkg+'.'+shortName:shortName;def=this.map_name_class.get(qName)||this.evalChain(qName);if(def)break}}if(def)this.map_name_class.set(name,
def);return def};weavejs.core.ClassRegistryImpl.prototype.evalChain=function(name){var chain=name.split('.');var def=weavejs.util.JS.global;var foreachiter3_target=chain;for(var foreachiter3 in foreachiter3_target){var key=foreachiter3_target[foreachiter3];if(!def)break;try{def=def[key]}catch(e){def=undefined}}return def};
weavejs.core.ClassRegistryImpl.prototype.getClassInfo=function(class_or_instance){if(!class_or_instance)return null;if(!class_or_instance.prototype)class_or_instance=class_or_instance.constructor;var info=class_or_instance&&class_or_instance.prototype&&class_or_instance.prototype.FLEXJS_REFLECTION_INFO;if(org.apache.flex.utils.Language.is(info,Function)){info=info();info.variables=info.variables();info.accessors=info.accessors();info.methods=info.methods()}return info};
weavejs.core.ClassRegistryImpl.prototype.registerSingletonImplementation=function(theInterface,theImplementation){if(!this.map_interface_singletonImplementation.get(theInterface)){this.verifyImplementation(theInterface,theImplementation);this.map_interface_singletonImplementation.set(theInterface,theImplementation)}return this.map_interface_singletonImplementation.get(theInterface)==theImplementation};weavejs.core.ClassRegistryImpl.prototype.getSingletonImplementation=function(theInterface){return this.map_interface_singletonImplementation.get(theInterface)};
weavejs.core.ClassRegistryImpl.prototype.getSingletonInstance=function(theInterface){if(!this.map_interface_singletonInstance.get(theInterface)){var classDef=this.getSingletonImplementation(theInterface);if(classDef)this.map_interface_singletonInstance.set(theInterface,new classDef)}return this.map_interface_singletonInstance.get(theInterface)};
weavejs.core.ClassRegistryImpl.prototype.registerImplementation=function(theInterface,theImplementation,displayName){displayName=typeof displayName!=='undefined'?displayName:null;this.verifyImplementation(theInterface,theImplementation);var array=this.map_interface_implementations.get(theInterface);if(!array)this.map_interface_implementations.set(theInterface,array=[]);if(displayName||!this.map_class_displayName.get(theImplementation))this.map_class_displayName.set(theImplementation,displayName||
this.getClassName(theImplementation).split(':').pop());if(array.indexOf(theImplementation)<0){array.push(theImplementation);array.sort(org.apache.flex.utils.Language.closure(this.compareDisplayNames,this,'compareDisplayNames'))}};weavejs.core.ClassRegistryImpl.prototype.getImplementations=function(theInterface){var array=this.map_interface_implementations.get(theInterface);return array?array.concat():[]};
weavejs.core.ClassRegistryImpl.prototype.getDisplayName=function(theImplementation){var str=this.map_class_displayName.get(theImplementation);return str};weavejs.core.ClassRegistryImpl.prototype.compareDisplayNames=function(impl1,impl2){var name1=this.map_class_displayName.get(impl1);var name2=this.map_class_displayName.get(impl2);if(name1<name2)return-1;if(name1>name2)return 1;return 0};
weavejs.core.ClassRegistryImpl.prototype.verifyImplementation=function(theInterface,theImplementation){if(!theInterface)throw new Error('interface cannot be '+theInterface);if(!theImplementation)throw new Error('implementation cannot be '+theImplementation);if(!org.apache.flex.utils.Language.is(theImplementation.prototype,theInterface))throw new Error(this.getClassName(theImplementation)+' does not implement '+this.getClassName(theInterface));};
weavejs.core.ClassRegistryImpl.partitionClassList=function(classes,interfaces){interfaces=Array.prototype.slice.call(arguments,1);var __localFn0__=function(impl,i,a){if(org.apache.flex.utils.Language.is(impl.prototype,interfaceClass)){partition.push(impl);return false}return true};if(interfaces.length==1&&org.apache.flex.utils.Language.is(interfaces[0],Array))interfaces=interfaces[0];var partitions=[];var foreachiter4_target=interfaces;for(var foreachiter4 in foreachiter4_target){var interfaceClass=
foreachiter4_target[foreachiter4];var partition=[];classes=classes.filter(__localFn0__);partitions.push(partition)}partitions.push(classes);return partitions};weavejs.core.ClassRegistryImpl.prototype.FLEXJS_CLASS_INFO={names:[{name:'ClassRegistryImpl',qName:'weavejs.core.ClassRegistryImpl'}],interfaces:[weavejs.api.core.IClassRegistry]};goog.exportSymbol('weavejs.core.ClassRegistryImpl',weavejs.core.ClassRegistryImpl);
weavejs.core.ClassRegistryImpl.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'map_interface_singletonInstance':{type:'Object'},'map_interface_singletonImplementation':{type:'Object'},'map_interface_implementations':{type:'Object'},'map_class_displayName':{type:'Object'},'map_name_class':{type:'Object'},'map_class_name':{type:'Object'},'defaultPackages':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'ClassRegistryImpl':{type:'',declaredBy:'weavejs.core.ClassRegistryImpl'},
'registerClass':{type:'void',declaredBy:'weavejs.core.ClassRegistryImpl'},'getClassName':{type:'String',declaredBy:'weavejs.core.ClassRegistryImpl'},'getDefinition':{type:'*',declaredBy:'weavejs.core.ClassRegistryImpl'},'getClassInfo':{type:'Object',declaredBy:'weavejs.core.ClassRegistryImpl'},'registerSingletonImplementation':{type:'Boolean',declaredBy:'weavejs.core.ClassRegistryImpl'},'getSingletonImplementation':{type:'Class',declaredBy:'weavejs.core.ClassRegistryImpl'},'getSingletonInstance':{type:'*',
declaredBy:'weavejs.core.ClassRegistryImpl'},'registerImplementation':{type:'void',declaredBy:'weavejs.core.ClassRegistryImpl'},'getImplementations':{type:'Array',declaredBy:'weavejs.core.ClassRegistryImpl'},'getDisplayName':{type:'String',declaredBy:'weavejs.core.ClassRegistryImpl'},'verifyImplementation':{type:'void',declaredBy:'weavejs.core.ClassRegistryImpl'}}}}};goog.provide('weavejs.api.core.ILocale');weavejs.api.core.ILocale=function(){};weavejs.api.core.ILocale.prototype.reverseLayout;weavejs.api.core.ILocale.prototype.getText=function(text){};weavejs.api.core.ILocale.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILocale',qName:'weavejs.api.core.ILocale'}]};
weavejs.api.core.ILocale.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'reverseLayout':{type:'Boolean',declaredBy:'weavejs.api.core.ILocale'},'data':{type:'Object',declaredBy:'weavejs.api.core.ILocale'}}},methods:function(){return{'getText':{type:'String',declaredBy:'weavejs.api.core.ILocale'}}}}};goog.provide('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableObject=function(){};weavejs.api.core.ILinkableObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableObject',qName:'weavejs.api.core.ILinkableObject'}]};weavejs.api.core.ILinkableObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.core.IProgressIndicator');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.IProgressIndicator=function(){};weavejs.api.core.IProgressIndicator.prototype.getTaskCount=function(){};weavejs.api.core.IProgressIndicator.prototype.addTask=function(taskToken,busyObject,description){};weavejs.api.core.IProgressIndicator.prototype.hasTask=function(taskToken){};weavejs.api.core.IProgressIndicator.prototype.updateTask=function(taskToken,progress){};
weavejs.api.core.IProgressIndicator.prototype.removeTask=function(taskToken){};weavejs.api.core.IProgressIndicator.prototype.getNormalizedProgress=function(){};weavejs.api.core.IProgressIndicator.prototype.FLEXJS_CLASS_INFO={names:[{name:'IProgressIndicator',qName:'weavejs.api.core.IProgressIndicator'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.core.IProgressIndicator.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getTaskCount':{type:'int',declaredBy:'weavejs.api.core.IProgressIndicator'},'addTask':{type:'void',declaredBy:'weavejs.api.core.IProgressIndicator'},'hasTask':{type:'Boolean',declaredBy:'weavejs.api.core.IProgressIndicator'},'updateTask':{type:'void',declaredBy:'weavejs.api.core.IProgressIndicator'},'removeTask':{type:'void',
declaredBy:'weavejs.api.core.IProgressIndicator'},'getNormalizedProgress':{type:'Number',declaredBy:'weavejs.api.core.IProgressIndicator'}}}}};goog.provide('weavejs.api.core.IScheduler');weavejs.api.core.IScheduler=function(){};weavejs.api.core.IScheduler.prototype.frameCallbacks;weavejs.api.core.IScheduler.prototype.callLater=function(relevantContext,method,parameters){};weavejs.api.core.IScheduler.prototype.startTask=function(relevantContext,iterativeTask,priority,finalCallback,description){};weavejs.api.core.IScheduler.prototype.FLEXJS_CLASS_INFO={names:[{name:'IScheduler',qName:'weavejs.api.core.IScheduler'}]};
weavejs.api.core.IScheduler.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'frameCallbacks':{type:'ICallbackCollection',declaredBy:'weavejs.api.core.IScheduler'}}},methods:function(){return{'callLater':{type:'void',declaredBy:'weavejs.api.core.IScheduler'},'startTask':{type:'void',declaredBy:'weavejs.api.core.IScheduler'}}}}};goog.provide('weavejs.api.core.ISessionManager');weavejs.api.core.ISessionManager=function(){};weavejs.api.core.ISessionManager.prototype.getCallbackCollection=function(linkableObject){};weavejs.api.core.ISessionManager.prototype.getLinkableObjectFromCallbackCollection=function(callbackCollection){};weavejs.api.core.ISessionManager.prototype.newLinkableChild=function(linkableParent,linkableChildType,callback,useGroupedCallback){};
weavejs.api.core.ISessionManager.prototype.registerLinkableChild=function(linkableParent,linkableChild,callback,useGroupedCallback){};weavejs.api.core.ISessionManager.prototype.newDisposableChild=function(disposableParent,disposableChildType){};weavejs.api.core.ISessionManager.prototype.registerDisposableChild=function(disposableParent,disposableChild){};weavejs.api.core.ISessionManager.prototype.getOwner=function(child){};weavejs.api.core.ISessionManager.prototype.getLinkableOwner=function(child){};
weavejs.api.core.ISessionManager.prototype.getLinkableDescendants=function(root,filter){};weavejs.api.core.ISessionManager.prototype.assignBusyTask=function(taskToken,busyObject){};weavejs.api.core.ISessionManager.prototype.unassignBusyTask=function(taskToken){};weavejs.api.core.ISessionManager.prototype.linkableObjectIsBusy=function(linkableObject){};weavejs.api.core.ISessionManager.prototype.setSessionState=function(linkableObject,newState,removeMissingDynamicObjects){};
weavejs.api.core.ISessionManager.prototype.getSessionState=function(linkableObject){};weavejs.api.core.ISessionManager.prototype.computeDiff=function(oldState,newState){};weavejs.api.core.ISessionManager.prototype.combineDiff=function(baseDiff,diffToAdd){};weavejs.api.core.ISessionManager.prototype.copySessionState=function(source,destination){};weavejs.api.core.ISessionManager.prototype.linkSessionState=function(primary,secondary){};
weavejs.api.core.ISessionManager.prototype.unlinkSessionState=function(first,second){};weavejs.api.core.ISessionManager.prototype.disposeObject=function(object){};weavejs.api.core.ISessionManager.prototype.objectWasDisposed=function(object){};weavejs.api.core.ISessionManager.prototype.getPath=function(root,descendant){};weavejs.api.core.ISessionManager.prototype.getObject=function(root,path){};weavejs.api.core.ISessionManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'ISessionManager',qName:'weavejs.api.core.ISessionManager'}]};
weavejs.api.core.ISessionManager.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getCallbackCollection':{type:'ICallbackCollection',declaredBy:'weavejs.api.core.ISessionManager'},'getLinkableObjectFromCallbackCollection':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ISessionManager'},'newLinkableChild':{type:'*',declaredBy:'weavejs.api.core.ISessionManager'},'registerLinkableChild':{type:'*',declaredBy:'weavejs.api.core.ISessionManager'},
'newDisposableChild':{type:'*',declaredBy:'weavejs.api.core.ISessionManager'},'registerDisposableChild':{type:'*',declaredBy:'weavejs.api.core.ISessionManager'},'getOwner':{type:'Object',declaredBy:'weavejs.api.core.ISessionManager'},'getLinkableOwner':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ISessionManager'},'getLinkableDescendants':{type:'Array',declaredBy:'weavejs.api.core.ISessionManager'},'assignBusyTask':{type:'void',declaredBy:'weavejs.api.core.ISessionManager'},'unassignBusyTask':{type:'void',
declaredBy:'weavejs.api.core.ISessionManager'},'linkableObjectIsBusy':{type:'Boolean',declaredBy:'weavejs.api.core.ISessionManager'},'setSessionState':{type:'void',declaredBy:'weavejs.api.core.ISessionManager'},'getSessionState':{type:'Object',declaredBy:'weavejs.api.core.ISessionManager'},'computeDiff':{type:'*',declaredBy:'weavejs.api.core.ISessionManager'},'combineDiff':{type:'Object',declaredBy:'weavejs.api.core.ISessionManager'},'copySessionState':{type:'void',declaredBy:'weavejs.api.core.ISessionManager'},
'linkSessionState':{type:'void',declaredBy:'weavejs.api.core.ISessionManager'},'unlinkSessionState':{type:'void',declaredBy:'weavejs.api.core.ISessionManager'},'disposeObject':{type:'void',declaredBy:'weavejs.api.core.ISessionManager'},'objectWasDisposed':{type:'Boolean',declaredBy:'weavejs.api.core.ISessionManager'},'getPath':{type:'Array',declaredBy:'weavejs.api.core.ISessionManager'},'getObject':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ISessionManager'}}}}};goog.provide('weavejs.api.data.IAttributeColumnCache');weavejs.api.data.IAttributeColumnCache=function(){};weavejs.api.data.IAttributeColumnCache.prototype.getColumn=function(dataSource,metadata){};weavejs.api.data.IAttributeColumnCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'IAttributeColumnCache',qName:'weavejs.api.data.IAttributeColumnCache'}]};
weavejs.api.data.IAttributeColumnCache.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getColumn':{type:'IAttributeColumn',declaredBy:'weavejs.api.data.IAttributeColumnCache'}}}}};goog.provide('weavejs.api.data.ICSVParser');weavejs.api.data.ICSVParser=function(){};weavejs.api.data.ICSVParser.prototype.parseCSV=function(csvData){};weavejs.api.data.ICSVParser.prototype.createCSV=function(rows){};weavejs.api.data.ICSVParser.prototype.parseCSVRow=function(csvData){};weavejs.api.data.ICSVParser.prototype.createCSVRow=function(row){};weavejs.api.data.ICSVParser.prototype.convertRowsToRecords=function(rows,headerDepth){};
weavejs.api.data.ICSVParser.prototype.getRecordFieldNames=function(records,includeNullFields,headerDepth){};weavejs.api.data.ICSVParser.prototype.convertRecordsToRows=function(records,columnOrder,allowBlankColumns,headerDepth){};weavejs.api.data.ICSVParser.prototype.FLEXJS_CLASS_INFO={names:[{name:'ICSVParser',qName:'weavejs.api.data.ICSVParser'}]};
weavejs.api.data.ICSVParser.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'parseCSV':{type:'Array',declaredBy:'weavejs.api.data.ICSVParser'},'createCSV':{type:'String',declaredBy:'weavejs.api.data.ICSVParser'},'parseCSVRow':{type:'Array',declaredBy:'weavejs.api.data.ICSVParser'},'createCSVRow':{type:'String',declaredBy:'weavejs.api.data.ICSVParser'},'convertRowsToRecords':{type:'Array',declaredBy:'weavejs.api.data.ICSVParser'},
'getRecordFieldNames':{type:'Array',declaredBy:'weavejs.api.data.ICSVParser'},'convertRecordsToRows':{type:'Array',declaredBy:'weavejs.api.data.ICSVParser'}}}}};goog.provide('weavejs.api.data.IQualifiedKeyManager');weavejs.api.data.IQualifiedKeyManager=function(){};weavejs.api.data.IQualifiedKeyManager.prototype.getQKey=function(keyType,localName){};weavejs.api.data.IQualifiedKeyManager.prototype.getQKeys=function(keyType,keyStrings){};weavejs.api.data.IQualifiedKeyManager.prototype.convertToQKeys=function(objects){};weavejs.api.data.IQualifiedKeyManager.prototype.getAllKeyTypes=function(){};weavejs.api.data.IQualifiedKeyManager.prototype.getAllQKeys=function(keyType){};
weavejs.api.data.IQualifiedKeyManager.prototype.stringToQKey=function(qkeyString){};weavejs.api.data.IQualifiedKeyManager.prototype.numberToQKey=function(qkeyNumber){};weavejs.api.data.IQualifiedKeyManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'IQualifiedKeyManager',qName:'weavejs.api.data.IQualifiedKeyManager'}]};
weavejs.api.data.IQualifiedKeyManager.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getQKey':{type:'IQualifiedKey',declaredBy:'weavejs.api.data.IQualifiedKeyManager'},'getQKeys':{type:'Array',declaredBy:'weavejs.api.data.IQualifiedKeyManager'},'convertToQKeys':{type:'Array',declaredBy:'weavejs.api.data.IQualifiedKeyManager'},'getAllKeyTypes':{type:'Array',declaredBy:'weavejs.api.data.IQualifiedKeyManager'},
'getAllQKeys':{type:'Array',declaredBy:'weavejs.api.data.IQualifiedKeyManager'},'stringToQKey':{type:'IQualifiedKey',declaredBy:'weavejs.api.data.IQualifiedKeyManager'},'numberToQKey':{type:'IQualifiedKey',declaredBy:'weavejs.api.data.IQualifiedKeyManager'}}}}};goog.provide('weavejs.api.data.IStatisticsCache');weavejs.api.data.IStatisticsCache=function(){};weavejs.api.data.IStatisticsCache.prototype.getColumnStatistics=function(column){};weavejs.api.data.IStatisticsCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'IStatisticsCache',qName:'weavejs.api.data.IStatisticsCache'}]};
weavejs.api.data.IStatisticsCache.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getColumnStatistics':{type:'IColumnStatistics',declaredBy:'weavejs.api.data.IStatisticsCache'}}}}};goog.provide('weavejs.api.net.IURLRequestUtils');weavejs.api.net.IURLRequestUtils=function(){};weavejs.api.net.IURLRequestUtils.prototype.request=function(relevantContext,urlRequest){};weavejs.api.net.IURLRequestUtils.prototype.saveLocalFile=function(weaveRoot,name,byteArray){};weavejs.api.net.IURLRequestUtils.prototype.getLocalFile=function(weaveRoot,name){};weavejs.api.net.IURLRequestUtils.prototype.removeLocalFile=function(weaveRoot,name){};
weavejs.api.net.IURLRequestUtils.prototype.getLocalFileNames=function(weaveRoot){};weavejs.api.net.IURLRequestUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'IURLRequestUtils',qName:'weavejs.api.net.IURLRequestUtils'}]};
weavejs.api.net.IURLRequestUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'request':{type:'WeavePromise',declaredBy:'weavejs.api.net.IURLRequestUtils'},'saveLocalFile':{type:'String',declaredBy:'weavejs.api.net.IURLRequestUtils'},'getLocalFile':{type:'Array',declaredBy:'weavejs.api.net.IURLRequestUtils'},'removeLocalFile':{type:'void',declaredBy:'weavejs.api.net.IURLRequestUtils'},'getLocalFileNames':{type:'Array',
declaredBy:'weavejs.api.net.IURLRequestUtils'}}}}};goog.provide('weavejs.api.ui.IEditorManager');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.ui.IEditorManager=function(){};weavejs.api.ui.IEditorManager.prototype.setLabel=function(object,label){};weavejs.api.ui.IEditorManager.prototype.getLabel=function(object){};weavejs.api.ui.IEditorManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'IEditorManager',qName:'weavejs.api.ui.IEditorManager'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.ui.IEditorManager.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'setLabel':{type:'void',declaredBy:'weavejs.api.ui.IEditorManager'},'getLabel':{type:'String',declaredBy:'weavejs.api.ui.IEditorManager'}}}}};goog.provide('weavejs.WeaveAPI');goog.require('weavejs.core.ClassRegistryImpl');weavejs.WeaveAPI=function(){};weavejs.WeaveAPI.debugAsyncStack=false;weavejs.WeaveAPI.debugLocale=false;weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE=0;weavejs.WeaveAPI.TASK_PRIORITY_HIGH=1;weavejs.WeaveAPI.TASK_PRIORITY_NORMAL=2;weavejs.WeaveAPI.TASK_PRIORITY_LOW=3;weavejs.WeaveAPI._classRegistry=null;
Object.defineProperties(weavejs.WeaveAPI,{ClassRegistry:{get:function(){if(!weavejs.WeaveAPI._classRegistry)weavejs.WeaveAPI._classRegistry=new weavejs.core.ClassRegistryImpl;return weavejs.WeaveAPI._classRegistry}},SessionManager:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.core.ISessionManager)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.ISessionManager)}},
Scheduler:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.core.IScheduler)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.IScheduler)}},ProgressIndicator:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.core.IProgressIndicator)||
weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.IProgressIndicator)}},AttributeColumnCache:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.data.IAttributeColumnCache)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.IAttributeColumnCache)}},StatisticsCache:{get:function(){return(weavejs.WeaveAPI._classRegistry||
org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.data.IStatisticsCache)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.IStatisticsCache)}},QKeyManager:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.data.IQualifiedKeyManager)||
weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.IQualifiedKeyManager)}},CSVParser:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.data.ICSVParser)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.ICSVParser)}},URLRequestUtils:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,
weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.net.IURLRequestUtils)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.net.IURLRequestUtils)}},Locale:{get:function(){return(weavejs.WeaveAPI._classRegistry||org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.core.ILocale)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.ILocale)}},EditorManager:{get:function(){return(weavejs.WeaveAPI._classRegistry||
org.apache.flex.utils.Language.as(weavejs.WeaveAPI.ClassRegistry,weavejs.core.ClassRegistryImpl)).map_interface_singletonInstance.get(weavejs.api.ui.IEditorManager)||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.ui.IEditorManager)}}});weavejs.WeaveAPI.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveAPI',qName:'weavejs.WeaveAPI'}]};goog.exportSymbol('weavejs.WeaveAPI',weavejs.WeaveAPI);
weavejs.WeaveAPI.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.core.DynamicState');weavejs.api.core.DynamicState=function(){};
weavejs.api.core.DynamicState.create=function(objectName,className,sessionState){objectName=typeof objectName!=='undefined'?objectName:null;className=typeof className!=='undefined'?className:null;sessionState=typeof sessionState!=='undefined'?sessionState:null;var obj={};obj[weavejs.api.core.DynamicState.OBJECT_NAME]=objectName||null;obj[weavejs.api.core.DynamicState.CLASS_NAME]=className||null;obj[weavejs.api.core.DynamicState.SESSION_STATE]=sessionState;return obj};
weavejs.api.core.DynamicState.OBJECT_NAME='objectName';weavejs.api.core.DynamicState.CLASS_NAME='className';weavejs.api.core.DynamicState.SESSION_STATE='sessionState';weavejs.api.core.DynamicState.BYPASS_DIFF='bypassDiff';
weavejs.api.core.DynamicState.isDynamicState=function(object,handleBypassDiff){handleBypassDiff=typeof handleBypassDiff!=='undefined'?handleBypassDiff:false;if(typeof object!=='object')return false;var matchCount=0;for(var name in object)if(name===weavejs.api.core.DynamicState.OBJECT_NAME||name===weavejs.api.core.DynamicState.CLASS_NAME||name===weavejs.api.core.DynamicState.SESSION_STATE)matchCount++;else if(handleBypassDiff&&name===weavejs.api.core.DynamicState.BYPASS_DIFF)continue;else return false;
return matchCount==3};
weavejs.api.core.DynamicState.isDynamicStateArray=function(state,handleBypassDiff){handleBypassDiff=typeof handleBypassDiff!=='undefined'?handleBypassDiff:false;var array=org.apache.flex.utils.Language.as(state,Array);if(!array)return false;var result=false;var foreachiter0_target=array;for(var foreachiter0 in foreachiter0_target){var item=foreachiter0_target[foreachiter0];if(typeof item==='string')continue;if(weavejs.api.core.DynamicState.isDynamicState(item,handleBypassDiff))result=true;else return false}return result};
weavejs.api.core.DynamicState.alterSessionStateToBypassDiff=function(object){if(weavejs.api.core.DynamicState.isDynamicState(object)){object[weavejs.api.core.DynamicState.BYPASS_DIFF]=true;object=object[weavejs.api.core.DynamicState.SESSION_STATE]}if(typeof object==='object')for(var key in object)weavejs.api.core.DynamicState.alterSessionStateToBypassDiff(object[key])};
weavejs.api.core.DynamicState.removeTypeFromState=function(state,recursive){recursive=typeof recursive!=='undefined'?recursive:true;if(weavejs.api.core.DynamicState.isDynamicStateArray(state)){var newState={};var foreachiter1_target=state;for(var foreachiter1 in foreachiter1_target){var typedState=foreachiter1_target[foreachiter1];if(typeof typedState==='object')newState[typedState[weavejs.api.core.DynamicState.OBJECT_NAME]||'']=recursive?weavejs.api.core.DynamicState.removeTypeFromState(typedState[weavejs.api.core.DynamicState.SESSION_STATE],
true):typedState[weavejs.api.core.DynamicState.SESSION_STATE]}return newState}if(recursive&&typeof state==='object')for(var key in state)state[key]=weavejs.api.core.DynamicState.removeTypeFromState(state[key],true);return state};
weavejs.api.core.DynamicState.traverseState=function(state,path,newValue){newValue=typeof newValue!=='undefined'?newValue:undefined;if(!path.length)return newValue===undefined?state:newValue;if(!state)return undefined;var property=path[0];path=path.slice(1);if(weavejs.api.core.DynamicState.isDynamicStateArray(state,true)){var i;if(org.apache.flex.utils.Language.is(property,Number))i=property;else for(i=0;i<state.length;i++)if(state[i][weavejs.api.core.DynamicState.OBJECT_NAME]==property||!property&&
!state[i][weavejs.api.core.DynamicState.OBJECT_NAME])break;var typedState=state[i];if(!typedState)return undefined;if(path.length)return weavejs.api.core.DynamicState.traverseState(typedState[weavejs.api.core.DynamicState.SESSION_STATE],path,newValue);return newValue===undefined?typedState[weavejs.api.core.DynamicState.SESSION_STATE]:typedState[weavejs.api.core.DynamicState.SESSION_STATE]=newValue}if(path.length)return weavejs.api.core.DynamicState.traverseState(state[property],path,newValue);return newValue===
undefined?state[property]:state[property]=newValue};weavejs.api.core.DynamicState.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicState',qName:'weavejs.api.core.DynamicState'}]};goog.exportSymbol('weavejs.api.core.DynamicState',weavejs.api.core.DynamicState);weavejs.api.core.DynamicState.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.core.IDisposableObject');weavejs.api.core.IDisposableObject=function(){};weavejs.api.core.IDisposableObject.prototype.dispose=function(){};weavejs.api.core.IDisposableObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDisposableObject',qName:'weavejs.api.core.IDisposableObject'}]};
weavejs.api.core.IDisposableObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'dispose':{type:'void',declaredBy:'weavejs.api.core.IDisposableObject'}}}}};goog.provide('weavejs.core.CallbackEntry');goog.require('weavejs.api.core.IDisposableObject');weavejs.core.CallbackEntry=function(context,callback){this.context=context;this.callback=callback;if(context)weavejs.WeaveAPI.SessionManager.registerDisposableChild(context,this);if(weavejs.WeaveAPI.debugAsyncStack)this.addCallback_stackTrace=new Error(weavejs.core.CallbackEntry.STACK_TRACE_ADD)};weavejs.core.CallbackEntry.prototype.context=null;weavejs.core.CallbackEntry.prototype.callback=null;
weavejs.core.CallbackEntry.prototype.recursionCount=0;weavejs.core.CallbackEntry.prototype.schedule=0;weavejs.core.CallbackEntry.prototype.addCallback_stackTrace=null;weavejs.core.CallbackEntry.prototype.removeCallback_stackTrace=null;weavejs.core.CallbackEntry.prototype.dispose=function(){if(weavejs.WeaveAPI.debugAsyncStack&&this.callback!=null)this.removeCallback_stackTrace=new Error(weavejs.core.CallbackEntry.STACK_TRACE_REMOVE);this.context=null;this.callback=null};
weavejs.core.CallbackEntry.STACK_TRACE_ADD='This is the stack trace from when the callback was added.';weavejs.core.CallbackEntry.STACK_TRACE_REMOVE='This is the stack trace from when the callback was removed.';weavejs.core.CallbackEntry.prototype.FLEXJS_CLASS_INFO={names:[{name:'CallbackEntry',qName:'weavejs.core.CallbackEntry'}],interfaces:[weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.core.CallbackEntry',weavejs.core.CallbackEntry);
weavejs.core.CallbackEntry.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'context':{type:'Object'},'callback':{type:'Function'},'recursionCount':{type:'uint'},'schedule':{type:'int'},'addCallback_stackTrace':{type:'Error'},'removeCallback_stackTrace':{type:'Error'}}},accessors:function(){return{}},methods:function(){return{'CallbackEntry':{type:'',declaredBy:'weavejs.core.CallbackEntry'},'dispose':{type:'void',declaredBy:'weavejs.core.CallbackEntry'}}}}};goog.provide('weavejs.util.Dictionary2D');weavejs.util.Dictionary2D=function(weakPrimaryKeys,weakSecondaryKeys,defaultType){weakPrimaryKeys=typeof weakPrimaryKeys!=='undefined'?weakPrimaryKeys:false;weakSecondaryKeys=typeof weakSecondaryKeys!=='undefined'?weakSecondaryKeys:false;defaultType=typeof defaultType!=='undefined'?defaultType:null;this.map=weakPrimaryKeys?new weavejs.util.JS.WeakMap:new weavejs.util.JS.Map;this.weak1=weakPrimaryKeys;this.weak2=weakSecondaryKeys;this.defaultType=defaultType};
weavejs.util.Dictionary2D.prototype.map;weavejs.util.Dictionary2D.prototype.weak1;weavejs.util.Dictionary2D.prototype.weak2;weavejs.util.Dictionary2D.prototype.defaultType;weavejs.util.Dictionary2D.prototype.get=function(key1,key2){var value=undefined;var map2=this.map.get(key1);if(map2)value=map2.get(key2);if(value===undefined&&this.defaultType){value=new this.defaultType;this.set(key1,key2,value)}return value};
weavejs.util.Dictionary2D.prototype.set=function(key1,key2,value){var map2=this.map.get(key1);if(map2==null){map2=this.weak2?new weavejs.util.JS.WeakMap:new weavejs.util.JS.Map;this.map.set(key1,map2)}map2.set(key2,value)};weavejs.util.Dictionary2D.prototype.primaryKeys=function(){if(this.weak1)weavejs.util.Dictionary2D.throwWeakIterationError();return weavejs.util.JS.mapKeys(this.map)};
weavejs.util.Dictionary2D.prototype.secondaryKeys=function(key1){if(this.weak2)weavejs.util.Dictionary2D.throwWeakIterationError();return weavejs.util.JS.mapKeys(this.map.get(key1))};weavejs.util.Dictionary2D.prototype.removeAllPrimary=function(key1){this.map['delete'](key1)};
weavejs.util.Dictionary2D.prototype.removeAllSecondary=function(key2){if(this.weak1)weavejs.util.Dictionary2D.throwWeakIterationError();this._key2ToRemove=key2;this.map.forEach(org.apache.flex.utils.Language.closure(this.removeAllSecondary_each,this,'removeAllSecondary_each'),this)};weavejs.util.Dictionary2D.prototype._key2ToRemove;weavejs.util.Dictionary2D.prototype.removeAllSecondary_each=function(map2,key1){map2['delete'](this._key2ToRemove)};
weavejs.util.Dictionary2D.prototype.remove=function(key1,key2){var value=undefined;var map2=this.map.get(key1);if(map2){value=map2.get(key2);map2['delete'](key2);if(this.weak2||map2.size)return value;this.map['delete'](key1)}return value};weavejs.util.Dictionary2D.throwWeakIterationError=function(){throw new Error('WeakMap cannot be iterated over');};
weavejs.util.Dictionary2D.prototype.forEach=function(key1_key2_value,thisArg){if(this.weak1||this.weak2)weavejs.util.Dictionary2D.throwWeakIterationError();this.forEach_fn=key1_key2_value;this.forEach_this=thisArg;this.map.forEach(org.apache.flex.utils.Language.closure(this.forEach1,this,'forEach1'),this);this.forEach_fn=null;this.forEach_this=null;this.forEach_key1=null;this.forEach_map2=null};weavejs.util.Dictionary2D.prototype.forEach_fn;weavejs.util.Dictionary2D.prototype.forEach_this;weavejs.util.Dictionary2D.prototype.forEach_key1;
weavejs.util.Dictionary2D.prototype.forEach_map2;weavejs.util.Dictionary2D.prototype.forEach1=function(map2,key1){if(this.forEach_fn==null)return;this.forEach_key1=key1;this.forEach_map2=map2;map2.forEach(org.apache.flex.utils.Language.closure(this.forEach2,this,'forEach2'),this)};weavejs.util.Dictionary2D.prototype.forEach2=function(value,key2){if(this.forEach_fn!=null&&this.forEach_fn.call(this.forEach_this,this.forEach_key1,key2,value))this.forEach_fn=null};
weavejs.util.Dictionary2D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Dictionary2D',qName:'weavejs.util.Dictionary2D'}]};goog.exportSymbol('weavejs.util.Dictionary2D',weavejs.util.Dictionary2D);
weavejs.util.Dictionary2D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'map':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'Dictionary2D':{type:'',declaredBy:'weavejs.util.Dictionary2D'},'get':{type:'*',declaredBy:'weavejs.util.Dictionary2D'},'set':{type:'void',declaredBy:'weavejs.util.Dictionary2D'},'primaryKeys':{type:'Array',declaredBy:'weavejs.util.Dictionary2D'},'secondaryKeys':{type:'Array',declaredBy:'weavejs.util.Dictionary2D'},
'removeAllPrimary':{type:'void',declaredBy:'weavejs.util.Dictionary2D'},'removeAllSecondary':{type:'void',declaredBy:'weavejs.util.Dictionary2D'},'remove':{type:'*',declaredBy:'weavejs.util.Dictionary2D'},'forEach':{type:'void',declaredBy:'weavejs.util.Dictionary2D'}}}}};goog.provide('weavejs.core.GroupedCallbackEntry');goog.require('weavejs.core.CallbackEntry');goog.require('weavejs.util.Dictionary2D');weavejs.core.GroupedCallbackEntry=function(context,groupedCallback){this.targets=[];weavejs.core.GroupedCallbackEntry.base(this,'constructor',context,groupedCallback);if(!weavejs.core.GroupedCallbackEntry._initialized){weavejs.core.GroupedCallbackEntry._initialized=true;weavejs.WeaveAPI.Scheduler.frameCallbacks.addImmediateCallback(null,weavejs.core.GroupedCallbackEntry._handleGroupedCallbacks)}};
goog.inherits(weavejs.core.GroupedCallbackEntry,weavejs.core.CallbackEntry);
weavejs.core.GroupedCallbackEntry.addGroupedCallback=function(callbackCollection,relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){if(!relevantContext)relevantContext=weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER;callbackCollection.removeCallback(relevantContext,groupedCallback);var entry=weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.get(relevantContext,groupedCallback);if(!entry){entry=new weavejs.core.GroupedCallbackEntry(relevantContext,groupedCallback);
weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.set(relevantContext,groupedCallback,entry)}entry.targets.push(callbackCollection);if(delayWhileBusy)entry.delayWhileBusy=true;callbackCollection.addImmediateCallback(relevantContext,org.apache.flex.utils.Language.closure(entry.trigger,entry,'trigger'),triggerCallbackNow)};
weavejs.core.GroupedCallbackEntry.removeGroupedCallback=function(callbackCollection,relevantContext,groupedCallback){if(!relevantContext)relevantContext=weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER;var entry=weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.get(relevantContext,groupedCallback);if(entry){callbackCollection.removeCallback(relevantContext,org.apache.flex.utils.Language.closure(entry.trigger,entry,'trigger'));var index=entry.targets.indexOf(callbackCollection);if(index>=
0){entry.targets.splice(index,1);if(entry.targets.length==0)weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.remove(relevantContext,groupedCallback)}}};
weavejs.core.GroupedCallbackEntry._handleGroupedCallbacks=function(){var i;var entry;for(i=0;i<weavejs.core.GroupedCallbackEntry._triggeredEntries.length;i++){entry=weavejs.core.GroupedCallbackEntry._triggeredEntries[i];entry.handleGroupedCallback()}var foreachiter0_target=weavejs.core.GroupedCallbackEntry._triggeredEntries;for(var foreachiter0 in foreachiter0_target){entry=foreachiter0_target[foreachiter0];entry.handled=entry.triggered=entry.triggeredAgain=false}weavejs.core.GroupedCallbackEntry._triggeredEntries.length=
0};weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER={};weavejs.core.GroupedCallbackEntry._initialized=false;weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry=new weavejs.util.Dictionary2D(true,true);weavejs.core.GroupedCallbackEntry._triggeredEntries=[];weavejs.core.GroupedCallbackEntry.prototype.handled=false;weavejs.core.GroupedCallbackEntry.prototype.triggered=false;weavejs.core.GroupedCallbackEntry.prototype.triggeredAgain=false;
weavejs.core.GroupedCallbackEntry.prototype.delayWhileBusy=false;weavejs.core.GroupedCallbackEntry.prototype.targets;weavejs.core.GroupedCallbackEntry.prototype.trigger=function(){if(!this.triggered){weavejs.core.GroupedCallbackEntry._triggeredEntries.push(this);this.triggered=true}else if(this.handled&&!this.triggeredAgain){weavejs.core.GroupedCallbackEntry._triggeredEntries.push(this);this.triggeredAgain=true}};
weavejs.core.GroupedCallbackEntry.prototype.handleGroupedCallback=function(){if(!this.callback){Weave.dispose(this);return}for(var i=0;i<this.targets.length;i++){var target=this.targets[i];if(weavejs.WeaveAPI.SessionManager.objectWasDisposed(target))this.targets.splice(i--,1);else if(this.delayWhileBusy&&weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(target))return}if(this.targets.length==0){this.dispose();weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.remove(this.context,this.callback);
return}if(this.recursionCount==0){this.recursionCount++;this.callback.apply(this.context===weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER?this.callback['this']:this.context);this.handled=true;this.recursionCount--}};
weavejs.core.GroupedCallbackEntry.prototype.dispose=function(){var foreachiter1_target=this.targets;for(var foreachiter1 in foreachiter1_target){var target=foreachiter1_target[foreachiter1];weavejs.core.GroupedCallbackEntry.removeGroupedCallback(target,this.context,this.callback)}weavejs.core.GroupedCallbackEntry.base(this,'dispose')};weavejs.core.GroupedCallbackEntry.prototype.FLEXJS_CLASS_INFO={names:[{name:'GroupedCallbackEntry',qName:'weavejs.core.GroupedCallbackEntry'}]};
goog.exportSymbol('weavejs.core.GroupedCallbackEntry',weavejs.core.GroupedCallbackEntry);
weavejs.core.GroupedCallbackEntry.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'handled':{type:'Boolean'},'triggered':{type:'Boolean'},'triggeredAgain':{type:'Boolean'},'delayWhileBusy':{type:'Boolean'},'targets':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'GroupedCallbackEntry':{type:'',declaredBy:'weavejs.core.GroupedCallbackEntry'},'trigger':{type:'void',declaredBy:'weavejs.core.GroupedCallbackEntry'},'handleGroupedCallback':{type:'void',
declaredBy:'weavejs.core.GroupedCallbackEntry'},'dispose':{type:'void',declaredBy:'weavejs.core.GroupedCallbackEntry'}}}}};goog.provide('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ICallbackCollection=function(){};weavejs.api.core.ICallbackCollection.prototype.addImmediateCallback=function(relevantContext,callback,runCallbackNow,alwaysCallLast){};weavejs.api.core.ICallbackCollection.prototype.addGroupedCallback=function(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){};
weavejs.api.core.ICallbackCollection.prototype.addDisposeCallback=function(relevantContext,callback,allowDelay){};weavejs.api.core.ICallbackCollection.prototype.removeCallback=function(relevantContext,callback){};weavejs.api.core.ICallbackCollection.prototype.triggerCallbacks=function(){};weavejs.api.core.ICallbackCollection.prototype.triggerCounter;weavejs.api.core.ICallbackCollection.prototype.delayCallbacks=function(){};weavejs.api.core.ICallbackCollection.prototype.resumeCallbacks=function(){};
weavejs.api.core.ICallbackCollection.prototype.FLEXJS_CLASS_INFO={names:[{name:'ICallbackCollection',qName:'weavejs.api.core.ICallbackCollection'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.core.ICallbackCollection.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'triggerCounter':{type:'uint',declaredBy:'weavejs.api.core.ICallbackCollection'},'callbacksAreDelayed':{type:'Boolean',declaredBy:'weavejs.api.core.ICallbackCollection'}}},methods:function(){return{'addImmediateCallback':{type:'void',declaredBy:'weavejs.api.core.ICallbackCollection'},'addGroupedCallback':{type:'void',declaredBy:'weavejs.api.core.ICallbackCollection'},
'addDisposeCallback':{type:'void',declaredBy:'weavejs.api.core.ICallbackCollection'},'removeCallback':{type:'void',declaredBy:'weavejs.api.core.ICallbackCollection'},'triggerCallbacks':{type:'void',declaredBy:'weavejs.api.core.ICallbackCollection'},'delayCallbacks':{type:'void',declaredBy:'weavejs.api.core.ICallbackCollection'},'resumeCallbacks':{type:'void',declaredBy:'weavejs.api.core.ICallbackCollection'}}}}};goog.provide('weavejs.core.CallbackCollection');goog.require('weavejs.core.GroupedCallbackEntry');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.IDisposableObject');weavejs.core.CallbackCollection=function(preCallback){preCallback=typeof preCallback!=='undefined'?preCallback:null;this._callbackEntries=[];this._triggerCounter=weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT;this._disposeCallbackEntries=[];this._preCallback=preCallback};weavejs.core.CallbackCollection.prototype._linkableObject;
weavejs.core.CallbackCollection.prototype._lastTriggerStackTrace;weavejs.core.CallbackCollection.prototype._oldEntries;weavejs.core.CallbackCollection.prototype._callbackEntries;weavejs.core.CallbackCollection.prototype._preCallback=null;weavejs.core.CallbackCollection.prototype._delayCount=0;weavejs.core.CallbackCollection.prototype._runCallbacksIsPending=false;weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT=1;weavejs.core.CallbackCollection.prototype._triggerCounter;
weavejs.core.CallbackCollection.prototype.addImmediateCallback=function(relevantContext,callback,runCallbackNow,alwaysCallLast){runCallbackNow=typeof runCallbackNow!=='undefined'?runCallbackNow:false;alwaysCallLast=typeof alwaysCallLast!=='undefined'?alwaysCallLast:false;if(callback==null)return;this.removeCallback(relevantContext,callback);var entry=new weavejs.core.CallbackEntry(relevantContext,callback);if(alwaysCallLast)entry.schedule=1;this._callbackEntries.push(entry);if(runCallbackNow){entry.recursionCount++;
callback.apply(relevantContext||callback['this']);entry.recursionCount--}};weavejs.core.CallbackCollection.prototype.triggerCallbacks=function(){if(weavejs.WeaveAPI.debugAsyncStack)this._lastTriggerStackTrace=new Error(weavejs.core.CallbackCollection.STACK_TRACE_TRIGGER);if(this._delayCount>0){this._triggerCounter++;this._runCallbacksIsPending=true;return}this._runCallbacksImmediately()};weavejs.core.CallbackCollection.prototype._runCallbacksCompleted;
weavejs.core.CallbackCollection.prototype._runCallbacksImmediately=function(preCallbackParams){preCallbackParams=Array.prototype.slice.call(arguments,0);this._triggerCounter++;this._runCallbacksIsPending=false;this._runCallbacksCompleted=false;for(var schedule=0;schedule<2;schedule++)for(var i=0;i<this._callbackEntries.length;i++){if(this._runCallbacksCompleted&&this._preCallback==null)break;var entry=this._callbackEntries[i];if(entry.schedule!=schedule)continue;var shouldRemoveEntry;if(entry.callback==
null)shouldRemoveEntry=true;else if(org.apache.flex.utils.Language.is(entry.context,weavejs.core.CallbackCollection))shouldRemoveEntry=org.apache.flex.utils.Language.as(entry.context,weavejs.core.CallbackCollection)._wasDisposed;else shouldRemoveEntry=weavejs.WeaveAPI.SessionManager.objectWasDisposed(entry.context);if(shouldRemoveEntry){Weave.dispose(entry);var removed=this._callbackEntries.splice(i--,1);if(weavejs.WeaveAPI.debugAsyncStack)this._oldEntries=this._oldEntries?this._oldEntries.concat(removed):
removed;continue}if(entry.recursionCount==0||this._preCallback!=null){entry.recursionCount++;if(this._preCallback!=null)this._preCallback.apply(this,preCallbackParams);entry.callback.apply(entry.context||entry.callback['this']);entry.recursionCount--}}this._runCallbacksCompleted=true};
weavejs.core.CallbackCollection.prototype.removeCallback=function(relevantContext,callback){weavejs.core.GroupedCallbackEntry.removeGroupedCallback(this,relevantContext,callback);for(var outerLoop=0;outerLoop<2;outerLoop++){var entries=outerLoop==0?this._callbackEntries:this._disposeCallbackEntries;for(var index=0;index<entries.length;index++){var entry=entries[index];if(entry.callback===callback&&entry.context===relevantContext)Weave.dispose(entry)}}};
weavejs.core.CallbackCollection.prototype.delayCallbacks=function(){this._delayCount++};weavejs.core.CallbackCollection.prototype.resumeCallbacks=function(){if(this._delayCount>0)this._delayCount--;if(this._delayCount==0){if(this._runCallbacksIsPending)this.triggerCallbacks();if(this._wasDisposed)this.runDisposeCallbacks()}};
weavejs.core.CallbackCollection.prototype.addDisposeCallback=function(relevantContext,callback,allowDelay){allowDelay=typeof allowDelay!=='undefined'?allowDelay:false;var entry;var foreachiter0_target=this._disposeCallbackEntries;for(var foreachiter0 in foreachiter0_target){entry=foreachiter0_target[foreachiter0];if(entry.callback===callback&&entry.context===relevantContext)return}entry=new weavejs.core.CallbackEntry(relevantContext,callback);if(allowDelay)entry.schedule=1;this._disposeCallbackEntries.push(entry)};
weavejs.core.CallbackCollection.prototype._disposeCallbackEntries;weavejs.core.CallbackCollection.prototype.dispose=function(){var entry;if(weavejs.WeaveAPI.debugAsyncStack)this._oldEntries=this._oldEntries?this._oldEntries.concat(this._callbackEntries):this._callbackEntries.concat();var foreachiter1_target=this._callbackEntries;for(var foreachiter1 in foreachiter1_target){entry=foreachiter1_target[foreachiter1];Weave.dispose(entry)}this._callbackEntries.length=0;this._wasDisposed=true;this.runDisposeCallbacks()};
weavejs.core.CallbackCollection.prototype.runDisposeCallbacks=function(){var foreachiter2_target=this._disposeCallbackEntries;for(var foreachiter2 in foreachiter2_target){var entry=foreachiter2_target[foreachiter2];if(entry.schedule>0&&this._delayCount>0)continue;if(entry.callback!=null&&!weavejs.WeaveAPI.SessionManager.objectWasDisposed(entry.context)){entry.callback.apply(entry.context||entry.callback['this']);Weave.dispose(entry)}}};weavejs.core.CallbackCollection.prototype._wasDisposed=false;
weavejs.core.CallbackCollection.prototype.addGroupedCallback=function(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;delayWhileBusy=typeof delayWhileBusy!=='undefined'?delayWhileBusy:true;weavejs.core.GroupedCallbackEntry.addGroupedCallback(this,relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy)};weavejs.core.CallbackCollection.STACK_TRACE_TRIGGER='This is the stack trace from when the callbacks were last triggered.';
Object.defineProperties(weavejs.core.CallbackCollection.prototype,{triggerCounter:{get:function(){return this._triggerCounter}},callbacksAreDelayed:{get:function(){return this._delayCount>0}},wasDisposed:{get:function(){return this._wasDisposed}}});weavejs.core.CallbackCollection.prototype.FLEXJS_CLASS_INFO={names:[{name:'CallbackCollection',qName:'weavejs.core.CallbackCollection'}],interfaces:[weavejs.api.core.ICallbackCollection,weavejs.api.core.IDisposableObject]};
goog.exportSymbol('weavejs.core.CallbackCollection',weavejs.core.CallbackCollection);
weavejs.core.CallbackCollection.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'triggerCounter':{type:'uint',declaredBy:'weavejs.core.CallbackCollection'},'callbacksAreDelayed':{type:'Boolean',declaredBy:'weavejs.core.CallbackCollection'},'wasDisposed':{type:'Boolean',declaredBy:'weavejs.core.CallbackCollection'}}},methods:function(){return{'CallbackCollection':{type:'',declaredBy:'weavejs.core.CallbackCollection'},'addImmediateCallback':{type:'void',
declaredBy:'weavejs.core.CallbackCollection'},'triggerCallbacks':{type:'void',declaredBy:'weavejs.core.CallbackCollection'},'removeCallback':{type:'void',declaredBy:'weavejs.core.CallbackCollection'},'delayCallbacks':{type:'void',declaredBy:'weavejs.core.CallbackCollection'},'resumeCallbacks':{type:'void',declaredBy:'weavejs.core.CallbackCollection'},'addDisposeCallback':{type:'void',declaredBy:'weavejs.core.CallbackCollection'},'dispose':{type:'void',declaredBy:'weavejs.core.CallbackCollection'},
'addGroupedCallback':{type:'void',declaredBy:'weavejs.core.CallbackCollection'}}}}};goog.provide('weavejs.api.core.ILinkableVariable');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableVariable=function(){};weavejs.api.core.ILinkableVariable.prototype.getSessionState=function(){};weavejs.api.core.ILinkableVariable.prototype.setSessionState=function(value){};weavejs.api.core.ILinkableVariable.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableVariable',qName:'weavejs.api.core.ILinkableVariable'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.core.ILinkableVariable.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getSessionState':{type:'Object',declaredBy:'weavejs.api.core.ILinkableVariable'},'setSessionState':{type:'void',declaredBy:'weavejs.api.core.ILinkableVariable'}}}}};goog.provide('weavejs.core.LinkableVariable');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableVariable');
weavejs.core.LinkableVariable=function(sessionStateType,verifier,defaultValue,defaultValueTriggersCallbacks){sessionStateType=typeof sessionStateType!=='undefined'?sessionStateType:null;verifier=typeof verifier!=='undefined'?verifier:null;defaultValue=typeof defaultValue!=='undefined'?defaultValue:undefined;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableVariable.base(this,'constructor');if(sessionStateType!=
Object){this._sessionStateType=sessionStateType;this._primitiveType=this._sessionStateType==String||this._sessionStateType==Number||this._sessionStateType==Boolean}this._verifier=verifier;if(defaultValue!==undefined){this.setSessionState(defaultValue);if(defaultValueTriggersCallbacks&&this.triggerCounter>weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT)weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._defaultValueTrigger,this,'_defaultValueTrigger'))}};
goog.inherits(weavejs.core.LinkableVariable,weavejs.core.CallbackCollection);weavejs.core.LinkableVariable.prototype._verifier=null;weavejs.core.LinkableVariable.prototype._sessionStateWasSet=false;weavejs.core.LinkableVariable.prototype._primitiveType=false;weavejs.core.LinkableVariable.prototype._sessionStateType=null;weavejs.core.LinkableVariable.prototype._sessionStateInternal=undefined;weavejs.core.LinkableVariable.prototype._sessionStateExternal=undefined;
weavejs.core.LinkableVariable.prototype._locked=false;weavejs.core.LinkableVariable.prototype._bypassDiff=true;weavejs.core.LinkableVariable.prototype._defaultValueTrigger=function(){if(!this.wasDisposed&&this.triggerCounter==weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT+1)this.triggerCallbacks()};weavejs.core.LinkableVariable.prototype.verifyValue=function(value){return this._verifier==null||this._verifier(value)};weavejs.core.LinkableVariable.prototype.getSessionStateType=function(){return this._sessionStateType};
weavejs.core.LinkableVariable.prototype.getSessionState=function(){if(this._sessionStateExternal===undefined)return null;return this._sessionStateExternal};
weavejs.core.LinkableVariable.prototype.setSessionState=function(value){if(this._locked)return;if(this._sessionStateType!=null)value=org.apache.flex.utils.Language.as(value,this._sessionStateType);if(this._verifier!=null&&!this._verifier(value))return;var wasCopied=false;var type=null;if(value==null)value=null;else{type=typeof value;if(type=='object'&&value.constructor!=Object&&value.constructor!=Array){value=weavejs.util.JS.copyObject(value);wasCopied=true}}if(this._sessionStateWasSet&&this.sessionStateEquals(value))return;
if(type=='object'){if(!wasCopied)value=weavejs.util.JS.copyObject(value);if(this._bypassDiff)weavejs.api.core.DynamicState.alterSessionStateToBypassDiff(value);this._sessionStateExternal=value;this._sessionStateInternal=weavejs.util.JS.copyObject(value)}else this._sessionStateExternal=this._sessionStateInternal=value;this._sessionStateWasSet=true;this.triggerCallbacks()};
weavejs.core.LinkableVariable.prototype.sessionStateEquals=function(otherSessionState){if(this._primitiveType)return this._sessionStateInternal==otherSessionState;return weavejs.util.StandardLib.compare(this._sessionStateInternal,otherSessionState,org.apache.flex.utils.Language.closure(this.objectCompare,this,'objectCompare'))==0};
weavejs.core.LinkableVariable.prototype.objectCompare=function(a,b){if(weavejs.api.core.DynamicState.isDynamicState(a,true)&&weavejs.api.core.DynamicState.isDynamicState(b,true)&&a[weavejs.api.core.DynamicState.CLASS_NAME]==b[weavejs.api.core.DynamicState.CLASS_NAME]&&a[weavejs.api.core.DynamicState.OBJECT_NAME]==b[weavejs.api.core.DynamicState.OBJECT_NAME])return weavejs.util.StandardLib.compare(a[weavejs.api.core.DynamicState.SESSION_STATE],b[weavejs.api.core.DynamicState.SESSION_STATE],org.apache.flex.utils.Language.closure(this.objectCompare,
this,'objectCompare'));return NaN};weavejs.core.LinkableVariable.prototype.detectChanges=function(){if(!this.sessionStateEquals(this._sessionStateExternal))this.triggerCallbacks()};weavejs.core.LinkableVariable.prototype.lock=function(){this._locked=true};weavejs.core.LinkableVariable.prototype.dispose=function(){weavejs.core.LinkableVariable.base(this,'dispose');this._sessionStateInternal=undefined;this._sessionStateExternal=undefined};
Object.defineProperties(weavejs.core.LinkableVariable.prototype,{locked:{get:function(){return this._locked}},state:{get:function(){return this.getSessionState()},set:function(value){this.setSessionState(value)}}});weavejs.core.LinkableVariable.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableVariable',qName:'weavejs.core.LinkableVariable'}],interfaces:[weavejs.api.core.ILinkableVariable,weavejs.api.core.ICallbackCollection,weavejs.api.core.IDisposableObject]};
goog.exportSymbol('weavejs.core.LinkableVariable',weavejs.core.LinkableVariable);
weavejs.core.LinkableVariable.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'locked':{type:'Boolean',declaredBy:'weavejs.core.LinkableVariable'},'state':{type:'Object',declaredBy:'weavejs.core.LinkableVariable'}}},methods:function(){return{'LinkableVariable':{type:'',declaredBy:'weavejs.core.LinkableVariable'},'getSessionStateType':{type:'Class',declaredBy:'weavejs.core.LinkableVariable'},'getSessionState':{type:'Object',declaredBy:'weavejs.core.LinkableVariable'},
'setSessionState':{type:'void',declaredBy:'weavejs.core.LinkableVariable'},'detectChanges':{type:'void',declaredBy:'weavejs.core.LinkableVariable'},'lock':{type:'void',declaredBy:'weavejs.core.LinkableVariable'},'dispose':{type:'void',declaredBy:'weavejs.core.LinkableVariable'}}}}};goog.provide('weavejs.core.LinkableBoolean');goog.require('weavejs.core.LinkableVariable');
weavejs.core.LinkableBoolean=function(defaultValue,verifier,defaultValueTriggersCallbacks){defaultValue=typeof defaultValue!=='undefined'?defaultValue:undefined;verifier=typeof verifier!=='undefined'?verifier:null;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableBoolean.base(this,'constructor',Boolean,verifier,defaultValue,defaultValueTriggersCallbacks)};goog.inherits(weavejs.core.LinkableBoolean,weavejs.core.LinkableVariable);
weavejs.core.LinkableBoolean.prototype.getSessionState=function(){if(this._sessionStateExternal===undefined)return false;return this._sessionStateExternal};weavejs.core.LinkableBoolean.prototype.setSessionState=function(value){if(org.apache.flex.utils.Language.is(value,String))value=value==='true';weavejs.core.LinkableBoolean.base(this,'setSessionState',value?true:false)};
Object.defineProperties(weavejs.core.LinkableBoolean.prototype,{value:{get:function(){if(this._sessionStateExternal===undefined)return false;return this._sessionStateExternal},set:function(value){this.setSessionState(value)}}});weavejs.core.LinkableBoolean.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableBoolean',qName:'weavejs.core.LinkableBoolean'}]};goog.exportSymbol('weavejs.core.LinkableBoolean',weavejs.core.LinkableBoolean);
weavejs.core.LinkableBoolean.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'value':{type:'Boolean',declaredBy:'weavejs.core.LinkableBoolean'}}},methods:function(){return{'LinkableBoolean':{type:'',declaredBy:'weavejs.core.LinkableBoolean'},'getSessionState':{type:'Object',declaredBy:'weavejs.core.LinkableBoolean'},'setSessionState':{type:'void',declaredBy:'weavejs.core.LinkableBoolean'}}}}};goog.provide('weavejs.core.LogEntry');weavejs.core.LogEntry=function(id,forward,backward,triggerDelay,diffDuration){this.id=id;this.forward=forward;this.backward=backward;this.triggerDelay=triggerDelay;this.diffDuration=diffDuration};weavejs.core.LogEntry.prototype.id;weavejs.core.LogEntry.prototype.forward;weavejs.core.LogEntry.prototype.backward;weavejs.core.LogEntry.prototype.triggerDelay;weavejs.core.LogEntry.prototype.diffDuration;
weavejs.core.LogEntry.convertGenericObjectsToLogEntries=function(array,defaultTriggerDelay){for(var i=0;i<array.length;i++){var o=array[i];if(!org.apache.flex.utils.Language.is(o,weavejs.core.LogEntry))array[i]=new weavejs.core.LogEntry(o.id,o.forward,o.backward,o.triggerDelay||defaultTriggerDelay,o.diffDuration)}return array};weavejs.core.LogEntry.prototype.FLEXJS_CLASS_INFO={names:[{name:'LogEntry',qName:'weavejs.core.LogEntry'}]};goog.exportSymbol('weavejs.core.LogEntry',weavejs.core.LogEntry);
weavejs.core.LogEntry.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'id':{type:'int'},'forward':{type:'Object'},'backward':{type:'Object'},'triggerDelay':{type:'int'},'diffDuration':{type:'int'}}},accessors:function(){return{}},methods:function(){return{'LogEntry':{type:'',declaredBy:'weavejs.core.LogEntry'}}}}};goog.provide('weavejs.core.SessionStateLog');goog.require('weavejs.core.LinkableBoolean');goog.require('weavejs.core.LogEntry');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableVariable');
weavejs.core.SessionStateLog=function(subject,syncDelay){syncDelay=typeof syncDelay!=='undefined'?syncDelay:0;this.enableLogging=weavejs.WeaveAPI.SessionManager.registerLinkableChild(this,new weavejs.core.LinkableBoolean(true),org.apache.flex.utils.Language.closure(this.synchronizeNow,this,'synchronizeNow'));this._syncTime=weavejs.util.JS.now();this._undoHistory=[];this._redoHistory=[];this._subject=subject;this._syncDelay=syncDelay;this._prevState=weavejs.util.JS.copyObject(weavejs.WeaveAPI.SessionManager.getSessionState(this._subject));
weavejs.WeaveAPI.SessionManager.registerDisposableChild(this._subject,this);var cc=weavejs.WeaveAPI.SessionManager.getCallbackCollection(this._subject);cc.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.immediateCallback,this,'immediateCallback'));cc.addGroupedCallback(this,org.apache.flex.utils.Language.closure(this.groupedCallback,this,'groupedCallback'))};weavejs.core.SessionStateLog.debug=false;weavejs.core.SessionStateLog.enableHistoryRewrite=true;
weavejs.core.SessionStateLog.prototype.dispose=function(){if(this._undoHistory==null)throw new Error('SessionStateLog.dispose() called more than once');this._subject=null;this._undoHistory=null;this._redoHistory=null};weavejs.core.SessionStateLog.prototype._subject;weavejs.core.SessionStateLog.prototype._syncDelay;weavejs.core.SessionStateLog.prototype._prevState=null;weavejs.core.SessionStateLog.prototype._undoHistory;weavejs.core.SessionStateLog.prototype._redoHistory;
weavejs.core.SessionStateLog.prototype._nextId=0;weavejs.core.SessionStateLog.prototype._undoActive=false;weavejs.core.SessionStateLog.prototype._redoActive=false;weavejs.core.SessionStateLog.prototype._syncTime;weavejs.core.SessionStateLog.prototype._triggerDelay=-1;weavejs.core.SessionStateLog.prototype._saveTime=0;weavejs.core.SessionStateLog.prototype._savePending=false;weavejs.core.SessionStateLog.prototype.enableLogging;
weavejs.core.SessionStateLog.prototype.squashHistory=function(directionalSquashCount){var sm=weavejs.WeaveAPI.SessionManager;var cc=sm.getCallbackCollection(this);cc.delayCallbacks();this.synchronizeNow();var count=weavejs.util.StandardLib.constrain(directionalSquashCount,-this._undoHistory.length,this._redoHistory.length);if(count<-1||count>1){cc.triggerCallbacks();var entries;if(count<0)entries=this._undoHistory.splice(this._undoHistory.length+count,-count);else entries=this._redoHistory.splice(0,
count);var entry;var squashBackward=null;var squashForward=null;var totalDuration=0;var totalDelay=0;var last=entries.length-1;for(var i=0;i<=last;i++){entry=org.apache.flex.utils.Language.as(entries[last-i],weavejs.core.LogEntry);squashBackward=sm.combineDiff(squashBackward,entry.backward);entry=org.apache.flex.utils.Language.as(entries[i],weavejs.core.LogEntry);squashForward=sm.combineDiff(squashForward,entry.forward);totalDuration+=entry.diffDuration;totalDelay+=entry.triggerDelay}entry=new weavejs.core.LogEntry(this._nextId++,
squashForward,squashBackward,totalDelay,totalDuration);if(count<0)this._undoHistory.push(entry);else this._redoHistory.unshift(entry)}cc.resumeCallbacks()};
weavejs.core.SessionStateLog.prototype.clearHistory=function(directional){directional=typeof directional!=='undefined'?directional:0;var cc=weavejs.WeaveAPI.SessionManager.getCallbackCollection(this);cc.delayCallbacks();this.synchronizeNow();if(directional<=0){if(this._undoHistory.length>0)cc.triggerCallbacks();this._undoHistory.length=0}if(directional>=0){if(this._redoHistory.length>0)cc.triggerCallbacks();this._redoHistory.length=0}cc.resumeCallbacks()};
weavejs.core.SessionStateLog.prototype.immediateCallback=function(){if(!this.enableLogging.value)return;this._saveTime=Number.MAX_VALUE;if(!this._savePending){this._savePending=true;this.saveDiff()}if(weavejs.core.SessionStateLog.debug&&(this._undoActive||this._redoActive)){var state=weavejs.WeaveAPI.SessionManager.getSessionState(this._subject);var forwardDiff=weavejs.WeaveAPI.SessionManager.computeDiff(this._prevState,state);weavejs.util.JS.log('immediate diff:',forwardDiff)}};
weavejs.core.SessionStateLog.prototype.groupedCallback=function(){if(!this.enableLogging.value)return;this.immediateCallback();this._saveTime=weavejs.util.JS.now()+this._syncDelay;if(weavejs.core.SessionStateLog.debug&&(this._undoActive||this._redoActive)){var state=weavejs.WeaveAPI.SessionManager.getSessionState(this._subject);var forwardDiff=weavejs.WeaveAPI.SessionManager.computeDiff(this._prevState,state);weavejs.util.JS.log('grouped diff:',forwardDiff)}};
weavejs.core.SessionStateLog.prototype.saveDiff=function(immediately){immediately=typeof immediately!=='undefined'?immediately:false;if(!this.enableLogging.value){this._savePending=false;return}var currentTime=weavejs.util.JS.now();if(this._triggerDelay<0)this._triggerDelay=currentTime-this._syncTime;if(!immediately&&weavejs.util.JS.now()<this._saveTime){weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this.saveDiff,this,'saveDiff'));return}var sm=weavejs.WeaveAPI.SessionManager;
var cc=sm.getCallbackCollection(this);cc.delayCallbacks();var state=sm.getSessionState(this._subject);var forwardDiff=weavejs.util.JS.copyObject(sm.computeDiff(this._prevState,state));if(forwardDiff!==undefined){var diffDuration=currentTime-(this._syncTime+this._triggerDelay);var backwardDiff=weavejs.util.JS.copyObject(sm.computeDiff(state,this._prevState));var oldEntry;var newEntry;if(this._undoActive){oldEntry=org.apache.flex.utils.Language.as(this._redoHistory[0],weavejs.core.LogEntry);newEntry=
new weavejs.core.LogEntry(this._nextId++,backwardDiff,forwardDiff,oldEntry.triggerDelay,oldEntry.diffDuration);if(weavejs.core.SessionStateLog.enableHistoryRewrite)this._redoHistory[0]=newEntry;else if(weavejs.util.StandardLib.compare(oldEntry.forward,newEntry.forward)!=0)this._redoHistory.unshift(newEntry)}else{newEntry=new weavejs.core.LogEntry(this._nextId++,forwardDiff,backwardDiff,this._triggerDelay,diffDuration);if(this._redoActive){oldEntry=org.apache.flex.utils.Language.as(this._undoHistory.pop(),
weavejs.core.LogEntry);newEntry.triggerDelay=oldEntry.triggerDelay;newEntry.diffDuration=oldEntry.diffDuration;if(!weavejs.core.SessionStateLog.enableHistoryRewrite&&weavejs.util.StandardLib.compare(oldEntry.forward,newEntry.forward)==0)newEntry=oldEntry}this._undoHistory.push(newEntry)}if(weavejs.core.SessionStateLog.debug)this.debugHistory(newEntry);this._syncTime=currentTime;cc.triggerCallbacks();this._prevState=weavejs.util.JS.copyObject(state)}if(this._undoActive||this._redoActive)this._syncTime=
currentTime;this._undoActive=false;this._redoActive=false;this._savePending=false;this._triggerDelay=-1;cc.resumeCallbacks()};weavejs.core.SessionStateLog.prototype.synchronizeNow=function(){this.saveDiff(true)};weavejs.core.SessionStateLog.prototype.undo=function(numberOfSteps){numberOfSteps=typeof numberOfSteps!=='undefined'?numberOfSteps:1;this.applyDiffs(-numberOfSteps)};
weavejs.core.SessionStateLog.prototype.redo=function(numberOfSteps){numberOfSteps=typeof numberOfSteps!=='undefined'?numberOfSteps:1;this.applyDiffs(numberOfSteps)};
weavejs.core.SessionStateLog.prototype.applyDiffs=function(delta){var stepsRemaining=Math.min(Math.abs(delta),delta<0?this._undoHistory.length:this._redoHistory.length);if(stepsRemaining>0){var logEntry;var diff;var debug=weavejs.core.SessionStateLog.debug&&stepsRemaining==1;if(this._savePending&&!this._undoActive&&!this._redoActive)this.synchronizeNow();var sm=weavejs.WeaveAPI.SessionManager;var combine=stepsRemaining>2;var baseDiff=null;sm.getCallbackCollection(this._subject).delayCallbacks();if(!this.enableLogging.value){var state=
sm.getSessionState(this._subject);baseDiff=sm.computeDiff(state,this._prevState);if(baseDiff!=null)combine=true}while(stepsRemaining-- >0){if(delta<0){logEntry=this._undoHistory.pop();this._redoHistory.unshift(logEntry);diff=logEntry.backward}else{logEntry=this._redoHistory.shift();this._undoHistory.push(logEntry);diff=logEntry.forward}if(debug)weavejs.util.JS.log('apply',delta<0?'undo':'redo',logEntry.id+':',diff);if(stepsRemaining==0&&this.enableLogging.value)this._prevState=weavejs.util.JS.copyObject(sm.getSessionState(this._subject));
if(combine){baseDiff=sm.combineDiff(baseDiff,diff);if(stepsRemaining<=1){sm.setSessionState(this._subject,baseDiff,false);combine=false}}else sm.setSessionState(this._subject,diff,false);if(debug){var newState=sm.getSessionState(this._subject);var resultDiff=sm.computeDiff(this._prevState,newState);weavejs.util.JS.log('resulting diff:',resultDiff)}}sm.getCallbackCollection(this._subject).resumeCallbacks();this._undoActive=delta<0&&this._savePending;this._redoActive=delta>0&&this._savePending;if(!this._savePending)this._prevState=
weavejs.util.JS.copyObject(sm.getSessionState(this._subject));sm.getCallbackCollection(this).triggerCallbacks()}};
weavejs.core.SessionStateLog.prototype.debugHistory=function(logEntry){var h=this._undoHistory.concat();for(var i=0;i<h.length;i++)h[i]=h[i].id;var f=this._redoHistory.concat();for(i=0;i<f.length;i++)f[i]=f[i].id;if(logEntry){weavejs.util.JS.log('\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c');weavejs.util.JS.log('NEW HISTORY (backward) '+
logEntry.id+':',logEntry.backward);weavejs.util.JS.log('\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d');weavejs.util.JS.log('NEW HISTORY (forward) '+logEntry.id+':',logEntry.forward);weavejs.util.JS.log('\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e')}org.apache.flex.utils.Language.trace('undo ['+
h+']','redo ['+f+']')};weavejs.core.SessionStateLog.prototype.getSessionState=function(){var cc=weavejs.WeaveAPI.SessionManager.getCallbackCollection(this);cc.delayCallbacks();this.synchronizeNow();var state={'version':0,'currentState':this._prevState,'undoHistory':this._undoHistory.concat(),'redoHistory':this._redoHistory.concat(),'nextId':this._nextId};cc.resumeCallbacks();return state};
weavejs.core.SessionStateLog.prototype.setSessionState=function(state){var cc=weavejs.WeaveAPI.SessionManager.getCallbackCollection(this);cc.delayCallbacks();this.enableLogging.delayCallbacks();try{var version=state.version;switch(version){case 0:this._prevState=state.currentState;this._undoHistory=weavejs.core.LogEntry.convertGenericObjectsToLogEntries(state.undoHistory,this._syncDelay);this._redoHistory=weavejs.core.LogEntry.convertGenericObjectsToLogEntries(state.redoHistory,this._syncDelay);this._nextId=
state.nextId;break;default:throw new Error('Weave history format version '+version+' is unsupported.');}this._undoActive=false;this._redoActive=false;this._savePending=false;this._saveTime=0;this._triggerDelay=-1;this._syncTime=weavejs.util.JS.now();weavejs.WeaveAPI.SessionManager.setSessionState(this._subject,this._prevState)}finally{this.enableLogging.resumeCallbacks();cc.triggerCallbacks();cc.resumeCallbacks()}};
Object.defineProperties(weavejs.core.SessionStateLog.prototype,{undoHistory:{get:function(){return this._undoHistory}},redoHistory:{get:function(){return this._redoHistory}}});weavejs.core.SessionStateLog.prototype.FLEXJS_CLASS_INFO={names:[{name:'SessionStateLog',qName:'weavejs.core.SessionStateLog'}],interfaces:[weavejs.api.core.ILinkableVariable,weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.core.SessionStateLog',weavejs.core.SessionStateLog);
weavejs.core.SessionStateLog.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'enableLogging':{type:'LinkableBoolean'}}},accessors:function(){return{'undoHistory':{type:'Array',declaredBy:'weavejs.core.SessionStateLog'},'redoHistory':{type:'Array',declaredBy:'weavejs.core.SessionStateLog'}}},methods:function(){return{'SessionStateLog':{type:'',declaredBy:'weavejs.core.SessionStateLog'},'dispose':{type:'void',declaredBy:'weavejs.core.SessionStateLog'},'squashHistory':{type:'void',
declaredBy:'weavejs.core.SessionStateLog'},'clearHistory':{type:'void',declaredBy:'weavejs.core.SessionStateLog'},'synchronizeNow':{type:'void',declaredBy:'weavejs.core.SessionStateLog'},'undo':{type:'void',declaredBy:'weavejs.core.SessionStateLog'},'redo':{type:'void',declaredBy:'weavejs.core.SessionStateLog'},'getSessionState':{type:'Object',declaredBy:'weavejs.core.SessionStateLog'},'setSessionState':{type:'void',declaredBy:'weavejs.core.SessionStateLog'}}}}};goog.provide('weavejs.api.core.ILinkableCompositeObject');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableCompositeObject=function(){};weavejs.api.core.ILinkableCompositeObject.prototype.getSessionState=function(){};weavejs.api.core.ILinkableCompositeObject.prototype.setSessionState=function(newState,removeMissingDynamicObjects){};
weavejs.api.core.ILinkableCompositeObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableCompositeObject',qName:'weavejs.api.core.ILinkableCompositeObject'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.core.ILinkableCompositeObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getSessionState':{type:'Array',declaredBy:'weavejs.api.core.ILinkableCompositeObject'},'setSessionState':{type:'void',declaredBy:'weavejs.api.core.ILinkableCompositeObject'}}}}};goog.provide('weavejs.api.core.ILinkableDynamicObject');goog.require('weavejs.api.core.ILinkableCompositeObject');weavejs.api.core.ILinkableDynamicObject=function(){};weavejs.api.core.ILinkableDynamicObject.prototype.internalObject;weavejs.api.core.ILinkableDynamicObject.prototype.requestGlobalObject=function(name,objectType,lockObject){};weavejs.api.core.ILinkableDynamicObject.prototype.requestLocalObject=function(objectType,lockObject){};
weavejs.api.core.ILinkableDynamicObject.prototype.requestLocalObjectCopy=function(objectToCopy){};weavejs.api.core.ILinkableDynamicObject.prototype.lock=function(){};weavejs.api.core.ILinkableDynamicObject.prototype.removeObject=function(){};weavejs.api.core.ILinkableDynamicObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableDynamicObject',qName:'weavejs.api.core.ILinkableDynamicObject'}],interfaces:[weavejs.api.core.ILinkableCompositeObject]};
weavejs.api.core.ILinkableDynamicObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'internalObject':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},'target':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},'targetPath':{type:'Array',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},'foundPlaceholder':{type:'Boolean',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},
'locked':{type:'Boolean',declaredBy:'weavejs.api.core.ILinkableDynamicObject'}}},methods:function(){return{'requestGlobalObject':{type:'*',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},'requestLocalObject':{type:'*',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},'requestLocalObjectCopy':{type:'void',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},'lock':{type:'void',declaredBy:'weavejs.api.core.ILinkableDynamicObject'},'removeObject':{type:'void',declaredBy:'weavejs.api.core.ILinkableDynamicObject'}}}}};goog.provide('weavejs.api.core.ILinkableHashMap');goog.require('weavejs.api.core.ILinkableCompositeObject');weavejs.api.core.ILinkableHashMap=function(){};weavejs.api.core.ILinkableHashMap.prototype.typeRestriction;weavejs.api.core.ILinkableHashMap.prototype.setNameOrder=function(newOrder){};weavejs.api.core.ILinkableHashMap.prototype.getNames=function(filter,filterIncludesPlaceholders){};weavejs.api.core.ILinkableHashMap.prototype.getObjects=function(filter,filterIncludesPlaceholders){};
weavejs.api.core.ILinkableHashMap.prototype.toObject=function(filter,filterIncludesPlaceholders){};weavejs.api.core.ILinkableHashMap.prototype.toMap=function(filter,filterIncludesPlaceholders){};weavejs.api.core.ILinkableHashMap.prototype.getName=function(object){};weavejs.api.core.ILinkableHashMap.prototype.getObject=function(name){};weavejs.api.core.ILinkableHashMap.prototype.setObject=function(name,object,lockObject){};
weavejs.api.core.ILinkableHashMap.prototype.requestObject=function(name,classDef,lockObject){};weavejs.api.core.ILinkableHashMap.prototype.requestObjectCopy=function(name,objectToCopy){};weavejs.api.core.ILinkableHashMap.prototype.renameObject=function(oldName,newName){};weavejs.api.core.ILinkableHashMap.prototype.objectIsLocked=function(name){};weavejs.api.core.ILinkableHashMap.prototype.removeObject=function(name){};weavejs.api.core.ILinkableHashMap.prototype.removeAllObjects=function(){};
weavejs.api.core.ILinkableHashMap.prototype.generateUniqueName=function(baseName){};weavejs.api.core.ILinkableHashMap.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableHashMap',qName:'weavejs.api.core.ILinkableHashMap'}],interfaces:[weavejs.api.core.ILinkableCompositeObject]};
weavejs.api.core.ILinkableHashMap.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'typeRestriction':{type:'Class',declaredBy:'weavejs.api.core.ILinkableHashMap'},'childListCallbacks':{type:'IChildListCallbackInterface',declaredBy:'weavejs.api.core.ILinkableHashMap'}}},methods:function(){return{'setNameOrder':{type:'void',declaredBy:'weavejs.api.core.ILinkableHashMap'},'getNames':{type:'Array',declaredBy:'weavejs.api.core.ILinkableHashMap'},
'getObjects':{type:'Array',declaredBy:'weavejs.api.core.ILinkableHashMap'},'toObject':{type:'Object',declaredBy:'weavejs.api.core.ILinkableHashMap'},'toMap':{type:'Object',declaredBy:'weavejs.api.core.ILinkableHashMap'},'getName':{type:'String',declaredBy:'weavejs.api.core.ILinkableHashMap'},'getObject':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ILinkableHashMap'},'setObject':{type:'void',declaredBy:'weavejs.api.core.ILinkableHashMap'},'requestObject':{type:'*',declaredBy:'weavejs.api.core.ILinkableHashMap'},
'requestObjectCopy':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ILinkableHashMap'},'renameObject':{type:'ILinkableObject',declaredBy:'weavejs.api.core.ILinkableHashMap'},'objectIsLocked':{type:'Boolean',declaredBy:'weavejs.api.core.ILinkableHashMap'},'removeObject':{type:'void',declaredBy:'weavejs.api.core.ILinkableHashMap'},'removeAllObjects':{type:'void',declaredBy:'weavejs.api.core.ILinkableHashMap'},'generateUniqueName':{type:'String',declaredBy:'weavejs.api.core.ILinkableHashMap'}}}}};goog.provide('weavejs.path.WeavePath');weavejs.path.WeavePath=function(weave,basePath){this.weave=weave;this._path=weavejs.path.WeavePath._A(basePath,1);this._parent=null};weavejs.path.WeavePath.prototype.weave;weavejs.path.WeavePath.prototype._path;weavejs.path.WeavePath.prototype._parent;
weavejs.path.WeavePath._A=function(args,option){option=typeof option!=='undefined'?option:0;if(args.length==option&&org.apache.flex.utils.Language.is(args[0],Array))return[].concat(args[0],Array.prototype.slice.call(args,1));return Array.prototype.slice.call(args)};
weavejs.path.WeavePath.prototype.push=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var newWeavePath=new this.constructor(this.weave,this.getPath(relativePath));newWeavePath._parent=this;return newWeavePath};weavejs.path.WeavePath.prototype.pop=function(){if(this._parent)return this._parent;else weavejs.path.WeavePath._failMessage('pop','stack is empty');return null};
weavejs.path.WeavePath.prototype.request=function(relativePath_objectType){relativePath_objectType=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_objectType,2);if(!weavejs.path.WeavePath._assertParams('request',args))return this;var type=args.pop();var relativePath=args;var classDef;var className;if(weavejs.util.JS.isClass(type)){classDef=weavejs.util.JS.asClass(type);className=Weave.className(classDef)}else{className=org.apache.flex.utils.Language.as(type,
String);classDef=Weave.getDefinition(className);if(!classDef)throw new Error(weavejs.util.StandardLib.substitute('No class definition for {0}',className));}var objectPath=this._path.concat(relativePath);if(!objectPath.length){if(Object(this.weave.root).constructor==classDef)return this;throw new Error('Cannot request an object at the root path');}var parentPath=objectPath.concat();var childName=parentPath.pop();var parent=Weave.followPath(this.weave.root,parentPath);var hashMap=org.apache.flex.utils.Language.as(parent,
weavejs.api.core.ILinkableHashMap);var dynamicObject=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableDynamicObject);var child=null;if(hashMap){if(org.apache.flex.utils.Language.is(childName,Number))childName=hashMap.getNames()[childName];child=hashMap.requestObject(org.apache.flex.utils.Language.as(childName,String),classDef,false)}else if(dynamicObject)child=dynamicObject.requestGlobalObject(org.apache.flex.utils.Language.as(childName,String),classDef,false);else child=Weave.followPath(this.weave.root,
objectPath);if(child&&child.constructor==classDef)return this;throw new Error(weavejs.util.StandardLib.substitute('Request for {0} failed at path {1}',org.apache.flex.utils.Language.as(type,String)||Weave.className(type),JSON.stringify(objectPath)));};
weavejs.path.WeavePath.prototype.remove=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);if(this._path.length+relativePath.length==0)throw new Error('Cannot remove root object');var parentPath=this._path.concat(relativePath);var childName=parentPath.pop();var parent=Weave.followPath(this.weave.root,parentPath);var hashMap=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);if(hashMap){if(org.apache.flex.utils.Language.is(childName,
Number))childName=hashMap.getNames()[childName];if(hashMap.objectIsLocked(org.apache.flex.utils.Language.as(childName,String)))throw new Error('Object is locked and cannot be removed: '+this.push(relativePath));hashMap.removeObject(org.apache.flex.utils.Language.as(childName,String));return this}var dynamicObject=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableDynamicObject);if(dynamicObject){if(dynamicObject.locked)throw new Error('Object is locked and cannot be removed: '+this.push(relativePath));
dynamicObject.removeObject();return this}if(parent)throw new Error('Parent object does not support dynamic children, so cannot remove child: '+this.push(relativePath));else throw new Error('No parent from which to remove a child: '+this.push(relativePath));};
weavejs.path.WeavePath.prototype.reorder=function(orderedNames){orderedNames=Array.prototype.slice.call(arguments,0);orderedNames=weavejs.path.WeavePath._A(orderedNames,1);if(weavejs.path.WeavePath._assertParams('reorder',orderedNames)){var hashMap=org.apache.flex.utils.Language.as(this.getObject(),weavejs.api.core.ILinkableHashMap);if(hashMap)if(orderedNames)hashMap.setNameOrder(orderedNames);weavejs.path.WeavePath._failMessage('reorder','path does not refer to an ILinkableHashMap: '+this)}return this};
weavejs.path.WeavePath.prototype.state=function(relativePath_state){relativePath_state=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_state,2);if(weavejs.path.WeavePath._assertParams('state',args)){var state=args.pop();var obj=this.getObject(args);if(obj)Weave.setState(obj,state,true);else weavejs.path.WeavePath._failObject('state',this.getPath(args))}return this};
weavejs.path.WeavePath.prototype.diff=function(relativePath_diff){relativePath_diff=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_diff,2);if(weavejs.path.WeavePath._assertParams('diff',args)){var diff=args.pop();var obj=this.getObject(args);if(obj)Weave.setState(obj,diff,false);else weavejs.path.WeavePath._failObject('diff',this.getPath(args))}return this};
weavejs.path.WeavePath.prototype.addCallback=function(relevantContext,callback,triggerCallbackNow,immediateMode,delayWhileBusy){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;immediateMode=typeof immediateMode!=='undefined'?immediateMode:false;delayWhileBusy=typeof delayWhileBusy!=='undefined'?delayWhileBusy:true;if(typeof relevantContext==='function'&&typeof callback!=='function'){if(arguments.length>3)delayWhileBusy=immediateMode;if(arguments.length>2)immediateMode=
triggerCallbackNow;if(arguments.length>1)triggerCallbackNow=callback;if(arguments.length>0)callback=org.apache.flex.utils.Language.as(relevantContext,Function);relevantContext=null}else if(!weavejs.path.WeavePath._assertParams('addCallback',arguments,2))return this;if(!relevantContext)callback['this']=this;var object=this.getObject();if(!object)throw new Error('No ILinkableObject to which to add a callback: '+this);if(immediateMode)Weave.getCallbacks(object).addImmediateCallback(relevantContext,callback,
triggerCallbackNow,false);else Weave.getCallbacks(object).addGroupedCallback(relevantContext,callback,triggerCallbackNow,delayWhileBusy);return this};
weavejs.path.WeavePath.prototype.removeCallback=function(relevantContext,callback){var object=this.getObject();if(!object)throw new Error('No ILinkableObject from which to remove a callback: '+this);if(arguments.length==1&&typeof relevantContext==='function'){callback=org.apache.flex.utils.Language.as(relevantContext,Function);relevantContext=null}else if(!weavejs.path.WeavePath._assertParams('removeCallback',arguments,2))return this;Weave.getCallbacks(object).removeCallback(relevantContext||this,
callback);return this};weavejs.path.WeavePath.prototype.exec=function(script_or_function,callback){callback=typeof callback!=='undefined'?callback:null;if(weavejs.path.WeavePath._assertParams('exec',arguments)){var result=this.getValue(script_or_function);if(callback!=null)callback.call(this,result)}return this};
weavejs.path.WeavePath.prototype.call=function(func,args){args=Array.prototype.slice.call(arguments,1);if(!func)weavejs.path.WeavePath._assertParams('call',[]);else func.apply(this,args);return this};
weavejs.path.WeavePath.prototype.forEach=function(items,visitorFunction){if(weavejs.path.WeavePath._assertParams('forEach',arguments,2))if(org.apache.flex.utils.Language.is(items,Array)&&Array.prototype.forEach)items.forEach(visitorFunction,this);else for(var key in items)visitorFunction.call(this,items[key],key,items);return this};
weavejs.path.WeavePath.prototype.forEachName=function(relativePath_visitorFunction){relativePath_visitorFunction=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_visitorFunction,2);if(weavejs.path.WeavePath._assertParams('forEachName',args)){var visitorFunction=org.apache.flex.utils.Language.as(args.pop(),Function);this.getNames(args).forEach(visitorFunction,this)}return this};
weavejs.path.WeavePath.prototype.forEachChild=function(relativePath_visitorFunction){relativePath_visitorFunction=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_visitorFunction,2);if(weavejs.path.WeavePath._assertParams('forEachChild',args)){var visitorFunction=args.pop();this.getChildren(args).forEach(visitorFunction,this)}return this};
weavejs.path.WeavePath.prototype.trace=function(args){args=Array.prototype.slice.call(arguments,0);weavejs.util.JS.log.apply(Weave,weavejs.path.WeavePath._A(args));return this};weavejs.path.WeavePath.prototype.getPath=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);return this._path.concat(weavejs.path.WeavePath._A(relativePath,1))};
weavejs.path.WeavePath.prototype._getChildNames=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var object=this.getObject(relativePath);if(object){if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableHashMap))return org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap).getNames();if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableDynamicObject))return[null];
return weavejs.WeaveAPI.SessionManager['getLinkablePropertyNames'](object,true)}throw new Error('No ILinkableObject for which to get child names at '+this);};weavejs.path.WeavePath.prototype.getNames=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);return this._getChildNames(relativePath)};
weavejs.path.WeavePath.prototype.getChildren=function(relativePath){var self=this;relativePath=Array.prototype.slice.call(arguments,0);var __localFn0__=function(name){return this.push(relativePath.concat(name))};relativePath=weavejs.path.WeavePath._A(relativePath,1);return this._getChildNames(relativePath).map(__localFn0__,this)};
weavejs.path.WeavePath.prototype.getType=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var object=this.getObject(relativePath);if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableHashMap)&&this.getType('class'))return org.apache.flex.utils.Language.as(this.getState('class'),String);return Weave.className(object)};
weavejs.path.WeavePath.prototype.getSimpleType=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var type=Weave.className(this.getObject(relativePath));return type&&type.split('.').pop().split(':').pop()};
weavejs.path.WeavePath.prototype.getState=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var obj=this.getObject(relativePath);if(obj)return Weave.getState(obj);else weavejs.util.JS.error('Warning: No ILinkableObject from which to get session state at '+this.push(relativePath));return null};
weavejs.path.WeavePath.prototype.getTypedState=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);return weavejs.WeaveAPI.SessionManager['getTypedStateTree'](this.getObject(relativePath))};
weavejs.path.WeavePath.prototype.getUntypedState=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var state=weavejs.util.JS.copyObject(this.getState(relativePath));return weavejs.api.core.DynamicState.removeTypeFromState(state)};
weavejs.path.WeavePath.prototype.getDiff=function(relativePath_previousState){relativePath_previousState=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_previousState,2);if(weavejs.path.WeavePath._assertParams('getDiff',args)){var previousState=args.pop();var obj=this.getObject(args);if(obj)return Weave.computeDiff(previousState,Weave.getState(obj));else weavejs.util.JS.error('Warning: No ILinkableObject from which to get diff at '+this.push(args))}return null};
weavejs.path.WeavePath.prototype.getReverseDiff=function(relativePath_otherState){relativePath_otherState=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_otherState,2);if(weavejs.path.WeavePath._assertParams('getReverseDiff',args)){var otherState=args.pop();var obj=this.getObject(args);if(obj)return Weave.computeDiff(Weave.getState(obj),otherState);else weavejs.util.JS.error('Warning: No ILinkableObject from which to get reverse diff at '+this.push(args))}return null};
weavejs.path.WeavePath.prototype.getValue=function(script_or_function,args){args=Array.prototype.slice.call(arguments,1);if(!script_or_function)weavejs.path.WeavePath._assertParams('getValue',[]);if(org.apache.flex.utils.Language.is(script_or_function,String))script_or_function=weavejs.util.JS.compile(script_or_function);return script_or_function.apply(this.getObject(),args)};
weavejs.path.WeavePath.prototype.getObject=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);return Weave.followPath(this.weave.root,this.getPath(relativePath))};weavejs.path.WeavePath.prototype.toString=function(){return'WeavePath('+JSON.stringify(this._path)+')'};
weavejs.path.WeavePath._assertParams=function(methodName,args,minLength){minLength=typeof minLength!=='undefined'?minLength:1;if(!minLength)minLength=1;if(args.length<minLength){var min_params=minLength==1?'one parameter':minLength+' parameters';weavejs.path.WeavePath._failMessage(methodName,'requires at least '+min_params);return false}return true};weavejs.path.WeavePath._failPath=function(methodName,path){weavejs.path.WeavePath._failMessage(methodName,'command failed',path)};
weavejs.path.WeavePath._failObject=function(methodName,path){weavejs.path.WeavePath._failMessage(methodName,'object does not exist',path)};weavejs.path.WeavePath._failMessage=function(methodName,message,path){path=typeof path!=='undefined'?path:null;var str='WeavePath.'+methodName+'(): '+message;if(path)str+=' (path: '+JSON.stringify(path)+')';throw new Error(str);};
weavejs.path.WeavePath.migrate=function(source,destination){var typedState=source.getValue('WeaveAPI.SessionManager.getTypedStateTree(this)');var delayed=[];weavejs.path.WeavePath._setTypedState(destination.path(),typedState,delayed);for(var i=delayed.length-1;i>=0;i--){var cc=delayed[i];cc.resumeCallbacks()}};
weavejs.path.WeavePath._setTypedState=function(path,typedState,delayedCallbacks){var type=typedState[weavejs.api.core.DynamicState.CLASS_NAME];var state=typedState[weavejs.api.core.DynamicState.SESSION_STATE];var hasChildren=weavejs.api.core.DynamicState.isDynamicStateArray(state);var def=Weave.getDefinition(type);if(def)path.request(def);else if(hasChildren)path.request(weavejs.WeaveAPI.ClassRegistry.getImplementations(weavejs.api.core.ILinkableHashMap)[0]).push('class').request('LinkableString').state(type);
else path.request('LinkableVariable');var cc=Weave.getCallbacks(path.getObject());cc.delayCallbacks();delayedCallbacks.push(cc);if(hasChildren){var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){typedState=foreachiter0_target[foreachiter0];type=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(type==='Array')path.state(typedState[weavejs.api.core.DynamicState.SESSION_STATE]);else weavejs.path.WeavePath._setTypedState(path.push(typedState[weavejs.api.core.DynamicState.OBJECT_NAME]),
typedState,delayedCallbacks)}}else path.state(state)};weavejs.path.WeavePath.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePath',qName:'weavejs.path.WeavePath'}]};goog.exportSymbol('weavejs.path.WeavePath',weavejs.path.WeavePath);
weavejs.path.WeavePath.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'weave':{type:'Weave'}}},accessors:function(){return{}},methods:function(){return{'WeavePath':{type:'',declaredBy:'weavejs.path.WeavePath'},'push':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'pop':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'request':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'remove':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'reorder':{type:'WeavePath',
declaredBy:'weavejs.path.WeavePath'},'state':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'diff':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'addCallback':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'removeCallback':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'exec':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'call':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'forEach':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'forEachName':{type:'WeavePath',
declaredBy:'weavejs.path.WeavePath'},'forEachChild':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'trace':{type:'WeavePath',declaredBy:'weavejs.path.WeavePath'},'getPath':{type:'Array',declaredBy:'weavejs.path.WeavePath'},'getNames':{type:'Array',declaredBy:'weavejs.path.WeavePath'},'getChildren':{type:'Array',declaredBy:'weavejs.path.WeavePath'},'getType':{type:'String',declaredBy:'weavejs.path.WeavePath'},'getSimpleType':{type:'String',declaredBy:'weavejs.path.WeavePath'},'getState':{type:'Object',
declaredBy:'weavejs.path.WeavePath'},'getTypedState':{type:'Object',declaredBy:'weavejs.path.WeavePath'},'getUntypedState':{type:'Object',declaredBy:'weavejs.path.WeavePath'},'getDiff':{type:'Object',declaredBy:'weavejs.path.WeavePath'},'getReverseDiff':{type:'Object',declaredBy:'weavejs.path.WeavePath'},'getValue':{type:'Object',declaredBy:'weavejs.path.WeavePath'},'getObject':{type:'ILinkableObject',declaredBy:'weavejs.path.WeavePath'},'toString':{type:'String',declaredBy:'weavejs.path.WeavePath'}}}}};goog.provide('weavejs.api.data.Aggregation');weavejs.api.data.Aggregation=function(){};weavejs.api.data.Aggregation.SAME='same';weavejs.api.data.Aggregation.FIRST='first';weavejs.api.data.Aggregation.LAST='last';weavejs.api.data.Aggregation.MEAN='mean';weavejs.api.data.Aggregation.SUM='sum';weavejs.api.data.Aggregation.MIN='min';weavejs.api.data.Aggregation.MAX='max';weavejs.api.data.Aggregation.COUNT='count';
weavejs.api.data.Aggregation.ALL_TYPES=[weavejs.api.data.Aggregation.SAME,weavejs.api.data.Aggregation.FIRST,weavejs.api.data.Aggregation.LAST,weavejs.api.data.Aggregation.MEAN,weavejs.api.data.Aggregation.SUM,weavejs.api.data.Aggregation.MIN,weavejs.api.data.Aggregation.MAX,weavejs.api.data.Aggregation.COUNT];weavejs.api.data.Aggregation.DEFAULT=weavejs.api.data.Aggregation.SAME;weavejs.api.data.Aggregation.AMBIGUOUS_DATA='Ambiguous data';
weavejs.api.data.Aggregation.HELP={'same':'Keep the value only if it is the same for each record in the group.','first':'Use the first of a group of values.','last':'Use the last of a group of values.','mean':'Calculate the mean (average) from a group of numeric values.','sum':'Calculate the sum (total) from a group of numeric values.','min':'Use the minimum of a group of numeric values.','max':'Use the maximum of a group of numeric values.','count':'Count the number of values in a group.'};
weavejs.api.data.Aggregation.prototype.FLEXJS_CLASS_INFO={names:[{name:'Aggregation',qName:'weavejs.api.data.Aggregation'}]};goog.exportSymbol('weavejs.api.data.Aggregation',weavejs.api.data.Aggregation);weavejs.api.data.Aggregation.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.DataType');weavejs.api.data.DataType=function(){};weavejs.api.data.DataType.NUMBER='number';weavejs.api.data.DataType.STRING='string';weavejs.api.data.DataType.DATE='date';weavejs.api.data.DataType.GEOMETRY='geometry';weavejs.api.data.DataType.ALL_TYPES=[weavejs.api.data.DataType.NUMBER,weavejs.api.data.DataType.STRING,weavejs.api.data.DataType.DATE,weavejs.api.data.DataType.GEOMETRY];
weavejs.api.data.DataType.getClass=function(dataType){switch(dataType){case weavejs.api.data.DataType.NUMBER:return Number;case weavejs.api.data.DataType.DATE:return Date;case weavejs.api.data.DataType.GEOMETRY:return Array;default:return String}};
weavejs.api.data.DataType.getDataTypeFromData=function(data){var foreachiter0_target=data;for(var foreachiter0 in foreachiter0_target){var value=foreachiter0_target[foreachiter0];if(org.apache.flex.utils.Language.is(value,Number))return weavejs.api.data.DataType.NUMBER;if(org.apache.flex.utils.Language.is(value,Date))return weavejs.api.data.DataType.DATE;if(value!=null)return weavejs.api.data.DataType.STRING}return null};
weavejs.api.data.DataType.prototype.FLEXJS_CLASS_INFO={names:[{name:'DataType',qName:'weavejs.api.data.DataType'}]};goog.exportSymbol('weavejs.api.data.DataType',weavejs.api.data.DataType);weavejs.api.data.DataType.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.DateFormat');weavejs.api.data.DateFormat=function(){};weavejs.api.data.DateFormat.getSuggestions=function(){return weavejs.api.data.DateFormat.ADDITIONAL_SUGGESTIONS.concat(weavejs.api.data.DateFormat.FOR_AUTO_DETECT)};weavejs.api.data.DateFormat.ADDITIONAL_SUGGESTIONS=['%Y'];
weavejs.api.data.DateFormat.FOR_AUTO_DETECT=['%-d-%b-%y','%b-%-d-%y','%-d-%b-%Y','%b-%-d-%Y','%Y-%b-%-d','%-d/%b/%y','%b/%-d/%y','%-d/%b/%Y','%b/%-d/%Y','%Y/%b/%-d','%-d.%b.%y','%b.%-d.%y','%-d.%b.%Y','%b.%-d.%Y','%Y.%b.%-d','%-d-%-m-%y','%-m-%-d-%y','%-d-%-m-%Y','%-m-%-d-%Y','%-d/%-m/%y','%-m/%-d/%y','%-d/%-m/%Y','%-m/%-d/%Y','%Y/%-m/%-d','%-d.%-m.%y','%-m.%-d.%y','%-d.%-m.%Y','%-m.%-d.%Y','%Y.%-m.%-d','%H:%M','%H:%M:%S','%H:%M:%S.%Q','%a, %d %b %Y %H:%M:%S %z','%Y-%m-%d','%y-%m-%d','%Y-%m-%d %T',
'%y-%m-%d %T','%Y-%m-%dT%T','%y-%m-%dT%T','%Y-%m-%dT%TZ','%y-%m-%dT%TZ','%Y-%m-%d %TZ','%y-%m-%d %TZ','%Y%m%dT%TZ','%y%m%dT%TZ','%Y%m%d %TZ','%y%m%d %TZ','%Y-%b-%d %T','%Y-%b-%d %H:%M:%S','%Y-%b-%d %H:%M:%S.%Q','%d-%b-%Y %T','%d-%b-%Y %H:%M:%S','%d-%b-%Y %H:%M:%S.%Q'];
weavejs.api.data.DateFormat.convertDateFormat_c_to_moment=function(format){if(format&&format.indexOf('%')>=0)return weavejs.util.StandardLib.replace.apply(weavejs.util.StandardLib,[format].concat(weavejs.api.data.DateFormat.dateFormat_replacements_c_to_moment));return format};
weavejs.api.data.DateFormat.dateFormat_replacements_c_to_moment=['%Y','YYYY','%y','YY','%B','MMMM','%b','MMM','%m','MM','%-m','M','%d','DD','%-d','D','%u','E','%p','A','%H','HH','%-H','H','%I','hh','%-I','h','%A','dddd','%a','ddd','%M','mm','%-M','m','%S','ss','%s','X','%Q','SSS','%z','zz','%Z','z','%%','%'];weavejs.api.data.DateFormat.prototype.FLEXJS_CLASS_INFO={names:[{name:'DateFormat',qName:'weavejs.api.data.DateFormat'}]};goog.exportSymbol('weavejs.api.data.DateFormat',weavejs.api.data.DateFormat);
weavejs.api.data.DateFormat.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.EntityType');weavejs.api.data.EntityType=function(){};weavejs.api.data.EntityType.TABLE='table';weavejs.api.data.EntityType.COLUMN='column';weavejs.api.data.EntityType.HIERARCHY='hierarchy';weavejs.api.data.EntityType.CATEGORY='category';weavejs.api.data.EntityType.ALL_TYPES=[weavejs.api.data.EntityType.TABLE,weavejs.api.data.EntityType.COLUMN,weavejs.api.data.EntityType.HIERARCHY,weavejs.api.data.EntityType.CATEGORY];
weavejs.api.data.EntityType.prototype.FLEXJS_CLASS_INFO={names:[{name:'EntityType',qName:'weavejs.api.data.EntityType'}]};goog.exportSymbol('weavejs.api.data.EntityType',weavejs.api.data.EntityType);weavejs.api.data.EntityType.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.ColumnMetadata');goog.require('weavejs.api.data.Aggregation');goog.require('weavejs.api.data.DataType');goog.require('weavejs.api.data.DateFormat');goog.require('weavejs.api.data.EntityType');weavejs.api.data.ColumnMetadata=function(){};weavejs.api.data.ColumnMetadata.ENTITY_TYPE='entityType';weavejs.api.data.ColumnMetadata.TITLE='title';weavejs.api.data.ColumnMetadata.NUMBER='number';weavejs.api.data.ColumnMetadata.STRING='string';
weavejs.api.data.ColumnMetadata.KEY_TYPE='keyType';weavejs.api.data.ColumnMetadata.DATA_TYPE='dataType';weavejs.api.data.ColumnMetadata.PROJECTION='projection';weavejs.api.data.ColumnMetadata.AGGREGATION='aggregation';weavejs.api.data.ColumnMetadata.DATE_FORMAT='dateFormat';weavejs.api.data.ColumnMetadata.DATE_DISPLAY_FORMAT='dateDisplayFormat';weavejs.api.data.ColumnMetadata.OVERRIDE_BINS='overrideBins';weavejs.api.data.ColumnMetadata.MIN='min';weavejs.api.data.ColumnMetadata.MAX='max';
weavejs.api.data.ColumnMetadata.getAllMetadata=function(column){var meta={};var names=column.getMetadataPropertyNames();var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];meta[name]=column.getMetadata(name)}return meta};
weavejs.api.data.ColumnMetadata.getSuggestedPropertyValues=function(propertyName){switch(propertyName){case weavejs.api.data.ColumnMetadata.ENTITY_TYPE:return weavejs.api.data.EntityType.ALL_TYPES;case weavejs.api.data.ColumnMetadata.DATA_TYPE:return weavejs.api.data.DataType.ALL_TYPES;case weavejs.api.data.ColumnMetadata.DATE_DISPLAY_FORMAT:case weavejs.api.data.ColumnMetadata.DATE_FORMAT:return weavejs.api.data.DateFormat.getSuggestions();case weavejs.api.data.ColumnMetadata.AGGREGATION:return weavejs.api.data.Aggregation.ALL_TYPES;
default:return[]}};weavejs.api.data.ColumnMetadata.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnMetadata',qName:'weavejs.api.data.ColumnMetadata'}]};goog.exportSymbol('weavejs.api.data.ColumnMetadata',weavejs.api.data.ColumnMetadata);weavejs.api.data.ColumnMetadata.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.core.LinkablePlaceholder');goog.require('weavejs.core.LinkableVariable');weavejs.core.LinkablePlaceholder=function(classDef){weavejs.core.LinkablePlaceholder.base(this,'constructor');if(!classDef)throw new Error('classDef cannot be null');this.classDef=classDef;this._bypassDiff=classDef===weavejs.core.LinkableVariable||org.apache.flex.utils.Language.is(classDef.prototype,weavejs.core.LinkableVariable)};goog.inherits(weavejs.core.LinkablePlaceholder,weavejs.core.LinkableVariable);
weavejs.core.LinkablePlaceholder.prototype.classDef;weavejs.core.LinkablePlaceholder.prototype.instance;weavejs.core.LinkablePlaceholder.prototype.getClass=function(){return this.classDef};weavejs.core.LinkablePlaceholder.prototype.getInstance=function(){return this.instance};
weavejs.core.LinkablePlaceholder.prototype.setInstance=function(instance){if(Weave.wasDisposed(this))throw new Error('LinkablePlaceholder was already disposed');if(!org.apache.flex.utils.Language.is(instance,this.classDef))throw new Error('Unexpected object type');this.instance=instance;weavejs.core.LinkablePlaceholder.replace(this,instance)};weavejs.core.LinkablePlaceholder.prototype.setSessionState=function(value){weavejs.core.LinkablePlaceholder.base(this,'setSessionState',value)};
weavejs.core.LinkablePlaceholder.replace=function(oldObject,newObject){var owner=Weave.getOwner(oldObject);var oldPlaceholder=org.apache.flex.utils.Language.as(oldObject,weavejs.core.LinkablePlaceholder);var lhm=org.apache.flex.utils.Language.as(owner,weavejs.api.core.ILinkableHashMap);var ldo=org.apache.flex.utils.Language.as(owner,weavejs.api.core.ILinkableDynamicObject);if(!lhm&&!ldo)throw new Error('Unable to replace object because owner is not an ILinkableHashMap or ILinkableDynamicObject');
var ownerCC=Weave.getCallbacks(owner);ownerCC.delayCallbacks();try{var sessionState=undefined;if(Weave.getCallbacks(oldObject).triggerCounter!=weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT)sessionState=Weave.getState(oldObject);if(oldPlaceholder)Weave.getCallbacks(oldPlaceholder).delayCallbacks();if(lhm)lhm.setObject(lhm.getName(oldObject),newObject);else if(ldo)ldo.target=newObject;if(sessionState!==undefined)Weave.setState(newObject,sessionState);if(oldPlaceholder)Weave.getCallbacks(oldPlaceholder).resumeCallbacks()}finally{ownerCC.resumeCallbacks()}};
weavejs.core.LinkablePlaceholder.getClass=function(object){var placeholder=org.apache.flex.utils.Language.as(object,weavejs.core.LinkablePlaceholder);if(placeholder)return placeholder.getClass();if(object)return object.constructor;return null};
weavejs.core.LinkablePlaceholder.setInstance=function(possiblePlaceholder,instance){if(possiblePlaceholder===instance)return;var placeholder=org.apache.flex.utils.Language.as(possiblePlaceholder,weavejs.core.LinkablePlaceholder);if(!placeholder)throw new Error('Attempted to put an instance where there was no placeholder for it.');placeholder.setInstance(instance)};
weavejs.core.LinkablePlaceholder.replaceInstanceWithPlaceholder=function(instance){if(!instance||org.apache.flex.utils.Language.is(instance,weavejs.core.LinkablePlaceholder)||Weave.wasDisposed(instance))return;var placeholder=new weavejs.core.LinkablePlaceholder(weavejs.core.LinkablePlaceholder.getClass(instance));try{weavejs.core.LinkablePlaceholder.replace(instance,placeholder)}catch(e){Weave.dispose(placeholder);throw e;}};
weavejs.core.LinkablePlaceholder.whenReady=function(relevantContext,possiblePlaceholder,onReady){var __localFn0__=function(){var instance=lp.getInstance();if(instance)onReady(instance)};var lp=Weave.AS(possiblePlaceholder,weavejs.core.LinkablePlaceholder);if(lp)Weave.getCallbacks(lp).addDisposeCallback(relevantContext,__localFn0__,true);else if(possiblePlaceholder&&!Weave.wasDisposed(relevantContext))onReady(possiblePlaceholder)};
weavejs.core.LinkablePlaceholder.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkablePlaceholder',qName:'weavejs.core.LinkablePlaceholder'}]};goog.exportSymbol('weavejs.core.LinkablePlaceholder',weavejs.core.LinkablePlaceholder);
weavejs.core.LinkablePlaceholder.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'LinkablePlaceholder':{type:'',declaredBy:'weavejs.core.LinkablePlaceholder'},'getClass':{type:'Class',declaredBy:'weavejs.core.LinkablePlaceholder'},'getInstance':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkablePlaceholder'},'setInstance':{type:'void',declaredBy:'weavejs.core.LinkablePlaceholder'},'setSessionState':{type:'void',
declaredBy:'weavejs.core.LinkablePlaceholder'}}}}};goog.provide('weavejs.util.WeavePromiseHandler');weavejs.util.WeavePromiseHandler=function(onFulfilled,onRejected,next){this.next=next;this.onFulfilled=onFulfilled;this.onRejected=onRejected};weavejs.util.WeavePromiseHandler.prototype.onFulfilled;weavejs.util.WeavePromiseHandler.prototype.onRejected;weavejs.util.WeavePromiseHandler.prototype.next;weavejs.util.WeavePromiseHandler.prototype.isNew=true;
weavejs.util.WeavePromiseHandler.prototype.onResult=function(result){this.isNew=false;try{if(this.onFulfilled!=null)this.next.setResult(this.onFulfilled(result));else this.next.setResult(result)}catch(e){this.next.setError(e)}};weavejs.util.WeavePromiseHandler.prototype.onError=function(error){this.isNew=false;try{if(this.onRejected!=null)this.next.setResult(this.onRejected(error));else this.next.setError(error)}catch(e){this.next.setError(e)}};
weavejs.util.WeavePromiseHandler.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePromiseHandler',qName:'weavejs.util.WeavePromiseHandler'}]};goog.exportSymbol('weavejs.util.WeavePromiseHandler',weavejs.util.WeavePromiseHandler);
weavejs.util.WeavePromiseHandler.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'onFulfilled':{type:'Function'},'onRejected':{type:'Function'},'next':{type:'WeavePromise'},'isNew':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'WeavePromiseHandler':{type:'',declaredBy:'weavejs.util.WeavePromiseHandler'},'onResult':{type:'void',declaredBy:'weavejs.util.WeavePromiseHandler'},'onError':{type:'void',declaredBy:'weavejs.util.WeavePromiseHandler'}}}}};goog.provide('weavejs.util.WeavePromise');goog.require('weavejs.util.WeavePromiseHandler');goog.require('weavejs.api.core.IDisposableObject');
weavejs.util.WeavePromise=function(relevantContext,resolver){resolver=typeof resolver!=='undefined'?resolver:null;this.handlers=[];this.dependencies=[];if(weavejs.WeaveAPI.debugAsyncStack)this.stackTrace_created=new Error('WeavePromise created');if(org.apache.flex.utils.Language.is(relevantContext,weavejs.util.WeavePromise)){this.rootPromise=org.apache.flex.utils.Language.as(relevantContext,weavejs.util.WeavePromise).rootPromise;this.relevantContext=relevantContext=this.rootPromise.relevantContext}else{this.rootPromise=
this;this.relevantContext=relevantContext||this}if(relevantContext)Weave.disposableChild(relevantContext,this);if(resolver!=null)resolver(org.apache.flex.utils.Language.closure(this.setResult,this,'setResult'),org.apache.flex.utils.Language.closure(this.setError,this,'setError'))};weavejs.util.WeavePromise._callNewHandlersSeparately=false;weavejs.util.WeavePromise.prototype.stackTrace_created;weavejs.util.WeavePromise.prototype.stackTrace_resolved;weavejs.util.WeavePromise.prototype.rootPromise;weavejs.util.WeavePromise.prototype.relevantContext;
weavejs.util.WeavePromise.prototype.result=undefined;weavejs.util.WeavePromise.prototype.error=undefined;weavejs.util.WeavePromise.prototype.handlers;weavejs.util.WeavePromise.prototype.dependencies;
weavejs.util.WeavePromise.prototype.setResult=function(result){if(Weave.wasDisposed(this.relevantContext))return this;if(weavejs.WeaveAPI.debugAsyncStack)this.stackTrace_resolved=new Error('WeavePromise resolved');this.result=undefined;this.error=undefined;var wp=org.apache.flex.utils.Language.as(result,weavejs.util.WeavePromise);if(wp)wp._notify(this);else if(weavejs.util.WeavePromise.isThenable(result))result.then(org.apache.flex.utils.Language.closure(this.setResult,this,'setResult'),org.apache.flex.utils.Language.closure(this.setError,
this,'setError'));else{this.result=org.apache.flex.utils.Language.as(result,Object);this.callHandlers()}return this};weavejs.util.WeavePromise.asPromise=function(obj){var wp=org.apache.flex.utils.Language.as(obj,weavejs.util.WeavePromise);if(wp)return wp.getPromise();return weavejs.util.WeavePromise.isThenable(obj)?obj:null};weavejs.util.WeavePromise.isThenable=function(obj){return obj&&typeof obj.then==='function'};weavejs.util.WeavePromise.prototype.getResult=function(){return this.result};
weavejs.util.WeavePromise.prototype.setError=function(error){if(Weave.wasDisposed(this.relevantContext))return this;if(weavejs.WeaveAPI.debugAsyncStack)this.stackTrace_resolved=new Error('WeavePromise resolved');this.result=undefined;this.error=org.apache.flex.utils.Language.as(error,Object);this.callHandlers();return this};weavejs.util.WeavePromise.prototype.getError=function(){return this.error};
weavejs.util.WeavePromise.prototype.callHandlers=function(newHandlersOnly){newHandlersOnly=typeof newHandlersOnly!=='undefined'?newHandlersOnly:false;if(this.dependencies.some(Weave.isBusy))return;if(this.result===undefined&&this.error===undefined)return;if(this.handlers.length==0&&this.error!==undefined)weavejs.util.JS.error(this.error);var shouldCallLater=false;for(var i=0;i<this.handlers.length;i++){var handler=this.handlers[i];if(weavejs.util.WeavePromise._callNewHandlersSeparately){if(newHandlersOnly!=
handler.isNew){shouldCallLater=handler.isNew;continue}}else if(newHandlersOnly&&!handler.isNew)continue;if(this.result!==undefined)handler.onResult(this.result);else if(this.error!==undefined)handler.onError(this.error)}if(shouldCallLater)weavejs.WeaveAPI.Scheduler.callLater(this.relevantContext,org.apache.flex.utils.Language.closure(this.callHandlers,this,'callHandlers'),[true])};
weavejs.util.WeavePromise.prototype.then=function(onFulfilled,onRejected){onFulfilled=typeof onFulfilled!=='undefined'?onFulfilled:null;onRejected=typeof onRejected!=='undefined'?onRejected:null;if(Weave.wasDisposed(this.relevantContext))return this;var next=new weavejs.util.WeavePromise(this);this.handlers.push(new weavejs.util.WeavePromiseHandler(onFulfilled,onRejected,next));if(this.result!==undefined||this.error!==undefined)weavejs.WeaveAPI.Scheduler.callLater(this.relevantContext,org.apache.flex.utils.Language.closure(this.callHandlers,
this,'callHandlers'),[true]);return next};weavejs.util.WeavePromise.prototype._notify=function(next){if(Weave.wasDisposed(this.relevantContext))return;var foreachiter0_target=this.handlers;for(var foreachiter0 in foreachiter0_target){var handler=foreachiter0_target[foreachiter0];if(handler.next===next)return}this.handlers.push(new weavejs.util.WeavePromiseHandler(null,null,next));if(this.result!==undefined)next.setResult(this.result);else if(this.error!==undefined)next.setError(this.error)};
weavejs.util.WeavePromise.prototype.depend=function(linkableObjects){linkableObjects=Array.prototype.slice.call(arguments,0);var foreachiter1_target=linkableObjects;for(var foreachiter1 in foreachiter1_target){var dependency=foreachiter1_target[foreachiter1];if(this.dependencies.indexOf(dependency)<0)this.dependencies.push(dependency);Weave.getCallbacks(dependency).addGroupedCallback(this.relevantContext,org.apache.flex.utils.Language.closure(this.callHandlers,this,'callHandlers'),true)}return this};
weavejs.util.WeavePromise.prototype.getPromise=function(){var self=this;var __localFn0__=function(resolve,reject){var_resolve=resolve;var_reject=reject};var var_resolve,var_reject;var promise=new weavejs.util.JS.Promise(__localFn0__);promise._WeavePromise=this;this.then(var_resolve,var_reject);return promise};weavejs.util.WeavePromise.prototype.dispose=function(){Weave.dispose(this);this.dependencies.length=0;this.handlers.length=0};
weavejs.util.WeavePromise.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePromise',qName:'weavejs.util.WeavePromise'}],interfaces:[weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.util.WeavePromise',weavejs.util.WeavePromise);
weavejs.util.WeavePromise.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'WeavePromise':{type:'',declaredBy:'weavejs.util.WeavePromise'},'setResult':{type:'WeavePromise',declaredBy:'weavejs.util.WeavePromise'},'getResult':{type:'Object',declaredBy:'weavejs.util.WeavePromise'},'setError':{type:'WeavePromise',declaredBy:'weavejs.util.WeavePromise'},'getError':{type:'Object',declaredBy:'weavejs.util.WeavePromise'},
'then':{type:'WeavePromise',declaredBy:'weavejs.util.WeavePromise'},'depend':{type:'WeavePromise',declaredBy:'weavejs.util.WeavePromise'},'getPromise':{type:'Object',declaredBy:'weavejs.util.WeavePromise'},'dispose':{type:'void',declaredBy:'weavejs.util.WeavePromise'}}}}};goog.provide('weavejs.util.WeaveTreeItem');weavejs.util.WeaveTreeItem=function(params){params=typeof params!=='undefined'?params:null;this._recursion={};this._cache={};this._counter={};if(org.apache.flex.utils.Language.is(params,String)){this.label=org.apache.flex.utils.Language.as(params,String);this.data=params}else for(var key in params)this[key]=params[key]};
weavejs.util.WeaveTreeItem.createItems=function(WeaveTreeItem_implementation,items){var __localFn0__=function(item,i,a){return weavejs.util.WeaveTreeItem._mapItem(WeaveTreeItem_implementation||weavejs.util.WeaveTreeItem,item)};var n=0;while(n!=items.length){n=items.length;items=Array.prototype.concat.apply([],items)}return items.map(__localFn0__).filter(weavejs.util.WeaveTreeItem._filterItemsRemoveNulls)};
weavejs.util.WeaveTreeItem._mapItem=function(WeaveTreeItem_implementation,item){if(weavejs.util.JS.isClass(item))return new item;if(org.apache.flex.utils.Language.is(item,String)||item!=null&&Object(item).constructor==Object)return new WeaveTreeItem_implementation(item);return item};weavejs.util.WeaveTreeItem._filterItemsRemoveNulls=function(item,i,a){return item!=null};weavejs.util.WeaveTreeItem.prototype.childItemClass;weavejs.util.WeaveTreeItem.prototype._recursion;
weavejs.util.WeaveTreeItem.prototype._label='';weavejs.util.WeaveTreeItem.prototype._children=null;weavejs.util.WeaveTreeItem.prototype._dependency=null;weavejs.util.WeaveTreeItem.prototype._cache;weavejs.util.WeaveTreeItem.prototype.cacheSettings;weavejs.util.WeaveTreeItem.prototype._counter;
weavejs.util.WeaveTreeItem.prototype.getBoolean=function(param,recursionName){if(!this._recursion[recursionName])try{this._recursion[recursionName]=true;if(this.isSimpleObject(param,'not'))param=!this.getBoolean(param['not'],'not_'+recursionName);if(this.isSimpleObject(param,'or'))param=this.getBoolean(param['or'],'or_'+recursionName);if(org.apache.flex.utils.Language.is(param,Function))param=this.evalFunction(org.apache.flex.utils.Language.as(param,Function));if(org.apache.flex.utils.Language.is(param,
weavejs.api.core.ILinkableVariable))param=org.apache.flex.utils.Language.as(param,weavejs.api.core.ILinkableVariable).getSessionState();if(org.apache.flex.utils.Language.is(param,Array)){var breakValue=recursionName.indexOf('or_')==0;var foreachiter0_target=param;for(var foreachiter0 in foreachiter0_target){param=foreachiter0_target[foreachiter0];param=this.getBoolean(param,'item_'+recursionName);if(param?breakValue:!breakValue)break}}param=param?true:false}finally{this._recursion[recursionName]=
false}return param};weavejs.util.WeaveTreeItem.prototype.isSimpleObject=function(object,singlePropertyName){var found=false;for(var key in object){if(found)return false;if(key!==singlePropertyName)return false;found=true}return found};
weavejs.util.WeaveTreeItem.prototype.getString=function(param,recursionName){if(!this._recursion[recursionName])try{this._recursion[recursionName]=true;if(org.apache.flex.utils.Language.is(param,Function))param=this.evalFunction(org.apache.flex.utils.Language.as(param,Function));else param=param||''}finally{this._recursion[recursionName]=false}return param};
weavejs.util.WeaveTreeItem.prototype.getObject=function(param,recursionName){if(!this._recursion[recursionName])try{this._recursion[recursionName]=true;if(org.apache.flex.utils.Language.is(param,Function))param=this.evalFunction(org.apache.flex.utils.Language.as(param,Function))}finally{this._recursion[recursionName]=false}return param};weavejs.util.WeaveTreeItem.prototype.evalFunction=function(func){try{return func.call(this,this)}catch(e){weavejs.util.JS.error(e)}};
weavejs.util.WeaveTreeItem.prototype.isCached=function(id){if(this.cacheSettings&&this.cacheSettings.hasOwnProperty(id)&&!this.cacheSettings[id])return false;if(this._dependency&&Weave.wasDisposed(this._dependency))this.dependency=null;return this._dependency&&this._counter[id]===Weave.getCallbacks(this._dependency).triggerCounter};
weavejs.util.WeaveTreeItem.prototype.cache=function(id,newValue){newValue=typeof newValue!=='undefined'?newValue:undefined;if(arguments.length==1)return this._cache[id];if(this._dependency&&Weave.wasDisposed(this._dependency))this.dependency=null;if(this._dependency){this._counter[id]=Weave.getCallbacks(this._dependency).triggerCounter;this._cache[id]=newValue}return newValue};weavejs.util.WeaveTreeItem.prototype.data=null;
Object.defineProperties(weavejs.util.WeaveTreeItem.prototype,{label:{get:function(){var id='label';if(this.isCached(id))return this._cache[id];var str=this.getString(this._label,id);if(!str&&org.apache.flex.utils.Language.is(this.data,String))str=org.apache.flex.utils.Language.as(this.data,String);return this.cache(id,str)},set:function(value){this._counter['label']=undefined;this._label=value}},children:{get:function(){var id='children';var items;if(this.isCached(id))items=this._cache[id];else items=
org.apache.flex.utils.Language.as(this.getObject(this._children,id),Array);if(items){var iOut=0;for(var i=0;i<items.length;i++){var item=weavejs.util.WeaveTreeItem._mapItem(this.childItemClass,items[i]);if(item!=null)items[iOut++]=item}items.length=iOut}return this.cache(id,items)},set:function(value){this._counter['children']=undefined;this._children=value}},dependency:{get:function(){if(this._dependency&&Weave.wasDisposed(this._dependency))this.dependency=null;return this._dependency},set:function(value){if(this._dependency!=
value)this._counter={};this._dependency=value}}});weavejs.util.WeaveTreeItem.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveTreeItem',qName:'weavejs.util.WeaveTreeItem'}]};goog.exportSymbol('weavejs.util.WeaveTreeItem',weavejs.util.WeaveTreeItem);
weavejs.util.WeaveTreeItem.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'cacheSettings':{type:'Object'},'data':{type:'Object'}}},accessors:function(){return{'label':{type:'*',declaredBy:'weavejs.util.WeaveTreeItem'},'children':{type:'*',declaredBy:'weavejs.util.WeaveTreeItem'},'dependency':{type:'ILinkableObject',declaredBy:'weavejs.util.WeaveTreeItem'}}},methods:function(){return{'WeaveTreeItem':{type:'',declaredBy:'weavejs.util.WeaveTreeItem'}}}}};goog.provide('weavejs.api.core.ILinkableObjectWithBusyStatus');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableObjectWithBusyStatus=function(){};weavejs.api.core.ILinkableObjectWithBusyStatus.prototype.isBusy=function(){};weavejs.api.core.ILinkableObjectWithBusyStatus.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableObjectWithBusyStatus',qName:'weavejs.api.core.ILinkableObjectWithBusyStatus'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.core.ILinkableObjectWithBusyStatus.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'isBusy':{type:'Boolean',declaredBy:'weavejs.api.core.ILinkableObjectWithBusyStatus'}}}}};goog.provide('weavejs.api.core.ILinkableObjectWithNewPaths');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableObjectWithNewPaths=function(){};weavejs.api.core.ILinkableObjectWithNewPaths.prototype.deprecatedPathRewrite=function(relativePath){};weavejs.api.core.ILinkableObjectWithNewPaths.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableObjectWithNewPaths',qName:'weavejs.api.core.ILinkableObjectWithNewPaths'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.core.ILinkableObjectWithNewPaths.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'deprecatedPathRewrite':{type:'Array',declaredBy:'weavejs.api.core.ILinkableObjectWithNewPaths'}}}}};goog.provide('weavejs.api.core.ILinkableObjectWithNewProperties');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableObjectWithNewProperties=function(){};weavejs.api.core.ILinkableObjectWithNewProperties.prototype.deprecatedStateMapping;weavejs.api.core.ILinkableObjectWithNewProperties.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableObjectWithNewProperties',qName:'weavejs.api.core.ILinkableObjectWithNewProperties'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.core.ILinkableObjectWithNewProperties.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'deprecatedStateMapping':{type:'Object',declaredBy:'weavejs.api.core.ILinkableObjectWithNewProperties'}}},methods:function(){return{}}}};goog.provide('weavejs.api.data.IWeaveTreeNode');weavejs.api.data.IWeaveTreeNode=function(){};weavejs.api.data.IWeaveTreeNode.prototype.equals=function(other){};weavejs.api.data.IWeaveTreeNode.prototype.getLabel=function(){};weavejs.api.data.IWeaveTreeNode.prototype.isBranch=function(){};weavejs.api.data.IWeaveTreeNode.prototype.hasChildBranches=function(){};weavejs.api.data.IWeaveTreeNode.prototype.getChildren=function(){};
weavejs.api.data.IWeaveTreeNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveTreeNode',qName:'weavejs.api.data.IWeaveTreeNode'}]};
weavejs.api.data.IWeaveTreeNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'equals':{type:'Boolean',declaredBy:'weavejs.api.data.IWeaveTreeNode'},'getLabel':{type:'String',declaredBy:'weavejs.api.data.IWeaveTreeNode'},'isBranch':{type:'Boolean',declaredBy:'weavejs.api.data.IWeaveTreeNode'},'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.api.data.IWeaveTreeNode'},'getChildren':{type:'Array',declaredBy:'weavejs.api.data.IWeaveTreeNode'}}}}};goog.provide('weavejs.core.SessionManager');goog.require('weavejs.util.WeaveTreeItem');goog.require('weavejs.api.core.ILinkableObjectWithNewPaths');goog.require('weavejs.api.core.ISessionManager');goog.require('weavejs.api.data.IWeaveTreeNode');
weavejs.core.SessionManager=function(){this.d2d_object_name_tree=new weavejs.util.Dictionary2D(true,false,weavejs.core.SessionManager.WeaveTreeItemExt);this._treeCallbacks=new weavejs.core.CallbackCollection;this.map_obj_getSessionStateIgnore=new weavejs.util.JS.WeakMap;this.map_child_owner=new weavejs.util.JS.WeakMap;this.d2d_owner_child=new weavejs.util.Dictionary2D(true,false);this.d2d_child_parent=new weavejs.util.Dictionary2D(true,false);this.d2d_parent_child=new weavejs.util.Dictionary2D(true,
false);this.map_task_stackTrace=new weavejs.util.JS.Map;this.d2d_owner_task=new weavejs.util.Dictionary2D(false,false);this.d2d_task_owner=new weavejs.util.Dictionary2D(false,false);this.map_busyTraversal=new weavejs.util.JS.WeakMap;this.array_busyTraversal=[];this.map_unbusyTriggerCounts=new weavejs.util.JS.Map;this.map_unbusyStackTraces=new weavejs.util.JS.WeakMap;this.map_ILinkableObject_ICallbackCollection=new weavejs.util.JS.WeakMap;this.map_ICallbackCollection_ILinkableObject=new weavejs.util.JS.WeakMap;
this.map_disposed=new weavejs.util.JS.WeakMap;this.d2d_lhs_rhs_setState=new weavejs.util.Dictionary2D(true,true)};weavejs.core.SessionManager.debugUnbusy=false;
weavejs.core.SessionManager.prototype.newLinkableChild=function(linkableParent,linkableChildType,callback,useGroupedCallback){callback=typeof callback!=='undefined'?callback:null;useGroupedCallback=typeof useGroupedCallback!=='undefined'?useGroupedCallback:false;if(!Weave.isLinkable(linkableParent))throw new Error('newLinkableChild(): Parent does not implement ILinkableObject.');if(!linkableChildType)throw new Error('newLinkableChild(): Child type parameter cannot be null.');if(!Weave.isLinkable(linkableChildType)){var childQName=
Weave.className(linkableChildType);if(Weave.getDefinition(childQName))throw new Error('newLinkableChild(): Child class does not implement ILinkableObject.');else throw new Error('newLinkableChild(): Child class inaccessible via qualified class name: '+childQName);}var linkableChild=org.apache.flex.utils.Language.as(new linkableChildType,weavejs.api.core.ILinkableObject);return this.registerLinkableChild(linkableParent,linkableChild,callback,useGroupedCallback)};
weavejs.core.SessionManager.prototype.registerLinkableChild=function(linkableParent,linkableChild,callback,useGroupedCallback){callback=typeof callback!=='undefined'?callback:null;useGroupedCallback=typeof useGroupedCallback!=='undefined'?useGroupedCallback:false;if(!Weave.isLinkable(linkableParent))throw new Error('registerLinkableChild(): Parent does not implement ILinkableObject.');if(!Weave.isLinkable(linkableChild))throw new Error('registerLinkableChild(): Child parameter cannot be null.');if(linkableParent==
linkableChild)throw new Error('registerLinkableChild(): Invalid attempt to register sessioned property having itself as its parent');if(callback!=null){var cc=this.getCallbackCollection(linkableChild);if(useGroupedCallback)cc.addGroupedCallback(org.apache.flex.utils.Language.as(linkableParent,weavejs.api.core.ILinkableObject),callback);else cc.addImmediateCallback(org.apache.flex.utils.Language.as(linkableParent,weavejs.api.core.ILinkableObject),callback)}this.registerDisposableChild(linkableParent,
linkableChild);if(this.d2d_child_parent.get(linkableChild,linkableParent)===undefined){this.d2d_child_parent.set(linkableChild,linkableParent,true);this.d2d_parent_child.set(linkableParent,linkableChild,true);var parentCC=this.getCallbackCollection(org.apache.flex.utils.Language.as(linkableParent,weavejs.api.core.ILinkableObject));this.getCallbackCollection(linkableChild).addImmediateCallback(linkableParent,org.apache.flex.utils.Language.closure(parentCC.triggerCallbacks,parentCC,'triggerCallbacks'),
false,true)}this._treeCallbacks.triggerCallbacks();return linkableChild};weavejs.core.SessionManager.prototype.newDisposableChild=function(disposableParent,disposableChildType){return this.registerDisposableChild(disposableParent,new disposableChildType)};
weavejs.core.SessionManager.prototype.registerDisposableChild=function(disposableParent,disposableChild){if(!disposableParent)throw new Error('registerDisposableChild(): Parent parameter cannot be null.');if(!disposableChild)throw new Error('registerDisposableChild(): Child parameter cannot be null.');var handler;if(this.objectWasDisposed(disposableParent))throw new Error('registerDisposableChild(): Parent was previously disposed');if(!this.map_child_owner.has(disposableChild)){this.map_child_owner.set(disposableChild,
disposableParent);this.d2d_owner_child.set(disposableParent,disposableChild,true);if(this.objectWasDisposed(disposableChild))throw new Error('registerDisposableChild(): Child was previously disposed');handler=Weave.getAsyncInstanceHandler(disposableChild.constructor);if(handler!=null)handler(disposableChild)}return disposableChild};
weavejs.core.SessionManager.prototype.unregisterLinkableChild=function(parent,child){if(!parent)throw new Error('unregisterLinkableChild(): Parent parameter cannot be null.');if(!child)throw new Error('unregisterLinkableChild(): Child parameter cannot be null.');this.d2d_child_parent.remove(child,parent);this.d2d_parent_child.remove(parent,child);this.getCallbackCollection(child).removeCallback(parent,org.apache.flex.utils.Language.closure(this.getCallbackCollection(parent).triggerCallbacks,this.getCallbackCollection(parent),
'triggerCallbacks'));this._treeCallbacks.triggerCallbacks()};weavejs.core.SessionManager.prototype.excludeLinkableChildFromSessionState=function(parent,child){if(parent==null||child==null){weavejs.util.JS.error('SessionManager.excludeLinkableChildFromSessionState(): Parameters to this function cannot be null.');return}if(this.d2d_child_parent.get(child,parent))this.d2d_child_parent.set(child,parent,false);if(this.d2d_parent_child.get(parent,child))this.d2d_parent_child.set(parent,child,false)};
weavejs.core.SessionManager.prototype._getRegisteredChildren=function(parent){return this.d2d_parent_child.secondaryKeys(parent)};weavejs.core.SessionManager.prototype.getOwner=function(child){return this.map_child_owner.get(child)};weavejs.core.SessionManager.prototype.getLinkableOwner=function(child){return org.apache.flex.utils.Language.as(this.map_child_owner.get(child),weavejs.api.core.ILinkableObject)};weavejs.core.SessionManager.prototype.d2d_object_name_tree;
weavejs.core.SessionManager.prototype.getSessionStateTree=function(root,objectName){if(!root)return null;var treeItem=this.d2d_object_name_tree.get(root,objectName);if(!treeItem.data){treeItem.data=root;treeItem.children=org.apache.flex.utils.Language.closure(this.getTreeItemChildren,this,'getTreeItemChildren');var lhm=org.apache.flex.utils.Language.as(root,weavejs.api.core.ILinkableHashMap);treeItem.dependency=lhm?lhm.childListCallbacks:root}if(objectName)treeItem.label=objectName;return treeItem};
weavejs.core.SessionManager.prototype.getTreeItemChildren=function(treeItem){var object=org.apache.flex.utils.Language.as(treeItem.data,weavejs.api.core.ILinkableObject);var children=[];var names;var childObject;var ignoreList=new weavejs.util.JS.WeakMap;var lhm=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap);if(lhm){names=lhm.getNames();var childObjects=lhm.getObjects();for(var i=0;i<names.length;i++){childObject=childObjects[i];if(this.d2d_child_parent.get(childObject,
lhm)){if(ignoreList.has(childObject))continue;ignoreList.set(childObject,true);children.push(this.getSessionStateTree(childObject,names[i]))}}}else{var ldo=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableDynamicObject);if(ldo)names=ldo.targetPath?null:[null];else if(object){names=this.getLinkablePropertyNames(object);var className=Weave.className(object)}var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(ldo)childObject=
ldo.internalObject;else childObject=object[name];if(!childObject)continue;if(this.d2d_child_parent.get(childObject,object)){if(ignoreList.has(childObject))continue;ignoreList.set(childObject,true);children.push(this.getSessionStateTree(childObject,name))}}}if(children.length==0)children=null;return children};weavejs.core.SessionManager.prototype.getTypedStateTree=function(root){return this.getTypedStateFromTreeNode(this.getSessionStateTree(root,null))};
weavejs.core.SessionManager.prototype.getTypedStateFromTreeNode=function(node,i,a){i=typeof i!=='undefined'?i:0;a=typeof a!=='undefined'?a:null;var state;var children=node.children;if(org.apache.flex.utils.Language.is(node.data,weavejs.api.core.ILinkableVariable)||!children)state=this.getSessionState(org.apache.flex.utils.Language.as(node.data,weavejs.api.core.ILinkableObject));else state=children.map(org.apache.flex.utils.Language.closure(this.getTypedStateFromTreeNode,this,'getTypedStateFromTreeNode'));
return weavejs.api.core.DynamicState.create(node.label,Weave.className(node.data),state)};weavejs.core.SessionManager.prototype.addTreeCallback=function(relevantContext,groupedCallback,triggerCallbackNow){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;this._treeCallbacks.addGroupedCallback(relevantContext,groupedCallback,triggerCallbackNow)};
weavejs.core.SessionManager.prototype.removeTreeCallback=function(relevantContext,groupedCallback){this._treeCallbacks.removeCallback(relevantContext,groupedCallback)};weavejs.core.SessionManager.prototype._treeCallbacks;weavejs.core.SessionManager.prototype.copySessionState=function(source,destination){var sessionState=this.getSessionState(source);this.setSessionState(destination,sessionState,true)};
weavejs.core.SessionManager.prototype.applyDiffForLinkableVariable=function(base,diff){if(base===null||diff===null||typeof base!=='object'||typeof diff!=='object'||org.apache.flex.utils.Language.is(diff,Array))return diff;for(var key in diff){var value=diff[key];if(value===undefined)delete base[key];else base[key]=this.applyDiffForLinkableVariable(base[key],value)}return base};weavejs.core.SessionManager.DEPRECATED_STATE_MAPPING='deprecatedStateMapping';
weavejs.core.SessionManager.DEPRECATED_PATH_REWRITE='deprecatedPathRewrite';
weavejs.core.SessionManager.traverseAndSetState=function(state,mapping,removeMissingDynamicObjects){removeMissingDynamicObjects=typeof removeMissingDynamicObjects!=='undefined'?removeMissingDynamicObjects:true;var ilo=org.apache.flex.utils.Language.as(mapping,weavejs.api.core.ILinkableObject);if(ilo)Weave.setState(ilo,state,removeMissingDynamicObjects);else if(org.apache.flex.utils.Language.is(mapping,Function))mapping(state,removeMissingDynamicObjects);else if(org.apache.flex.utils.Language.is(mapping,
Array)){var foreachiter1_target=mapping;for(var foreachiter1 in foreachiter1_target){var item=foreachiter1_target[foreachiter1];weavejs.core.SessionManager.traverseAndSetState(state,item,removeMissingDynamicObjects)}}else if(state&&typeof state==='object'&&typeof mapping==='object')for(var key in mapping){var value=weavejs.api.core.DynamicState.traverseState(state,[key]);if(value!==undefined)weavejs.core.SessionManager.traverseAndSetState(value,mapping[key],removeMissingDynamicObjects)}};
weavejs.core.SessionManager.prototype.setSessionState=function(linkableObject,newState,removeMissingDynamicObjects){removeMissingDynamicObjects=typeof removeMissingDynamicObjects!=='undefined'?removeMissingDynamicObjects:true;if(linkableObject==null){weavejs.util.JS.error('SessionManager.setSessionState(): linkableObject cannot be null.');return}var lv=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableVariable);if(lv){if(removeMissingDynamicObjects==false&&newState&&Weave.className(newState)==
'Object')lv.setSessionState(this.applyDiffForLinkableVariable(weavejs.util.JS.copyObject(lv.getSessionState()),newState));else lv.setSessionState(newState);return}var lco=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableCompositeObject);if(lco){if(org.apache.flex.utils.Language.is(newState,String))newState=[newState];if(newState!=null&&!org.apache.flex.utils.Language.is(newState,Array)){var array=[];for(var key in newState)array.push(weavejs.api.core.DynamicState.create(key,
null,newState[key]));newState=array}lco.setSessionState(org.apache.flex.utils.Language.as(newState,Array),removeMissingDynamicObjects);return}if(newState==null)return;var objectCC=this.getCallbackCollection(linkableObject);objectCC.delayCallbacks();var name;var propertyNames=this.getLinkablePropertyNames(linkableObject);var foundMissingProperty=false;var hasDeprecatedStateMapping=org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ILinkableObjectWithNewProperties)||weavejs.util.JS.hasProperty(linkableObject,
weavejs.core.SessionManager.DEPRECATED_STATE_MAPPING);var foreachiter2_target=propertyNames;for(var foreachiter2 in foreachiter2_target){name=foreachiter2_target[foreachiter2];if(!newState.hasOwnProperty(name)){if(removeMissingDynamicObjects&&hasDeprecatedStateMapping)foundMissingProperty=true;continue}var property=null;try{property=org.apache.flex.utils.Language.as(linkableObject[name],weavejs.api.core.ILinkableObject)}catch(e){weavejs.util.JS.error('SessionManager.setSessionState(): Unable to get property "'+
name+'" of class "'+Weave.className(linkableObject)+'"',e)}if(property==null)continue;if(!this.d2d_child_parent.get(property,linkableObject))continue;this.setSessionState(property,newState[name],removeMissingDynamicObjects)}if(hasDeprecatedStateMapping){var doMapping=false;if(foundMissingProperty){var foreachiter3_target=propertyNames;for(var foreachiter3 in foreachiter3_target){name=foreachiter3_target[foreachiter3];if(!newState.hasOwnProperty(name)){doMapping=true;break}}}else for(name in newState){try{property=
org.apache.flex.utils.Language.as(linkableObject[name],weavejs.api.core.ILinkableObject)}catch(e){weavejs.util.JS.error('SessionManager.setSessionState(): Unable to get property "'+name+'" of class "'+Weave.className(linkableObject)+'"',e)}if(!property||!Weave.isLinkable(property)||!this.d2d_child_parent.get(property,linkableObject)){doMapping=true;break}}if(doMapping){var mapping=linkableObject[weavejs.core.SessionManager.DEPRECATED_STATE_MAPPING];if(org.apache.flex.utils.Language.is(mapping,Function))mapping.call(linkableObject,
newState,removeMissingDynamicObjects);else weavejs.core.SessionManager.traverseAndSetState(newState,mapping,removeMissingDynamicObjects)}}objectCC.resumeCallbacks()};weavejs.core.SessionManager.prototype.map_obj_getSessionStateIgnore;
weavejs.core.SessionManager.prototype.getSessionState=function(linkableObject){if(linkableObject==null){weavejs.util.JS.error('SessionManager.getSessionState(): linkableObject cannot be null.');return null}var result=null;if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ILinkableVariable))result=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableVariable).getSessionState();else if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ILinkableCompositeObject))result=
org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableCompositeObject).getSessionState();else{var propertyNames=this.getLinkablePropertyNames(linkableObject,true);var resultNames=[];var resultProperties=[];var property=null;var i;var foreachiter4_target=propertyNames;for(var foreachiter4 in foreachiter4_target){var name=foreachiter4_target[foreachiter4];try{property=null;property=org.apache.flex.utils.Language.as(linkableObject[name],weavejs.api.core.ILinkableObject)}catch(e){weavejs.util.JS.error('Unable to get property "'+
name+'" of class "'+Weave.className(linkableObject)+'"')}if(property!=null&&!this.map_obj_getSessionStateIgnore.get(property)){if(!this.d2d_child_parent.get(property,linkableObject))continue;this.map_obj_getSessionStateIgnore.set(property,true);resultNames.push(name);resultProperties.push(property)}else;}if(resultNames.length>0){result=new Object;for(i=0;i<resultNames.length;i++){var value=this.getSessionState(resultProperties[i]);property=org.apache.flex.utils.Language.as(resultProperties[i],weavejs.api.core.ILinkableObject);
if(value==null&&!org.apache.flex.utils.Language.is(property,weavejs.api.core.ILinkableVariable)&&!org.apache.flex.utils.Language.is(property,weavejs.api.core.ILinkableCompositeObject))continue;result[resultNames[i]]=value}}}this.map_obj_getSessionStateIgnore.set(linkableObject,undefined);return result};weavejs.core.SessionManager.LINKABLE_PROPERTIES='linkableProperties';
weavejs.core.SessionManager.prototype.getLinkablePropertyNames=function(linkableObject,filtered){filtered=typeof filtered!=='undefined'?filtered:false;if(linkableObject==null){weavejs.util.JS.error('SessionManager.getLinkablePropertyNames(): linkableObject cannot be null.');return[]}var propertyNames;var linkableNames;var name;var property;var info=weavejs.WeaveAPI.ClassRegistry.getClassInfo(linkableObject);if(info&&false){if(!info[weavejs.core.SessionManager.LINKABLE_PROPERTIES]){info[weavejs.core.SessionManager.LINKABLE_PROPERTIES]=
propertyNames=[];var foreachiter5_target=[info.variables,info.accessors];for(var foreachiter5 in foreachiter5_target){var lookup=foreachiter5_target[foreachiter5];for(name in lookup)if(Weave.isLinkable(Weave.getDefinition(lookup[name].type)))propertyNames.push(name)}}propertyNames=info[weavejs.core.SessionManager.LINKABLE_PROPERTIES];if(!filtered)return propertyNames}else if(Weave.isAsyncClass(linkableObject['constructor']))propertyNames=weavejs.util.JS.getOwnPropertyNames(linkableObject);else propertyNames=
weavejs.util.JS.getPropertyNames(linkableObject,true);linkableNames=[];var foreachiter6_target=propertyNames;for(var foreachiter6 in foreachiter6_target){name=foreachiter6_target[foreachiter6];property=linkableObject[name];if(Weave.isLinkable(property))if(!filtered||this.d2d_child_parent.get(property,linkableObject))linkableNames.push(name)}return linkableNames};weavejs.core.SessionManager.prototype.map_child_owner;weavejs.core.SessionManager.prototype.d2d_owner_child;weavejs.core.SessionManager.prototype.d2d_child_parent;
weavejs.core.SessionManager.prototype.d2d_parent_child;weavejs.core.SessionManager.prototype.getLinkableDescendants=function(root,filter){filter=typeof filter!=='undefined'?filter:null;var result=[];if(root)this.internalGetDescendants(result,root,filter,new weavejs.util.JS.WeakMap,Number.MAX_VALUE);if(result.length>0&&result[0]==root)result.shift();return result};
weavejs.core.SessionManager.prototype.internalGetDescendants=function(output,root,filter,ignoreList,depth){if(root==null||ignoreList.has(root))return;ignoreList.set(root,true);if(filter==null||org.apache.flex.utils.Language.is(root,filter))output.push(root);if(--depth<=0)return;var children=this.d2d_parent_child.secondaryKeys(root);var foreachiter7_target=children;for(var foreachiter7 in foreachiter7_target){var child=foreachiter7_target[foreachiter7];this.internalGetDescendants(output,child,filter,
ignoreList,depth)}};weavejs.core.SessionManager.prototype.map_task_stackTrace;weavejs.core.SessionManager.prototype.d2d_owner_task;weavejs.core.SessionManager.prototype.d2d_task_owner;weavejs.core.SessionManager.prototype.map_busyTraversal;weavejs.core.SessionManager.prototype.array_busyTraversal;weavejs.core.SessionManager.prototype.map_unbusyTriggerCounts;weavejs.core.SessionManager.prototype.map_unbusyStackTraces;
weavejs.core.SessionManager.prototype.disposeBusyTaskPointers=function(disposedObject){this.d2d_owner_task.removeAllPrimary(disposedObject);this.d2d_task_owner.removeAllSecondary(disposedObject)};
weavejs.core.SessionManager.prototype.assignBusyTask=function(taskToken,busyObject){if(weavejs.WeaveAPI.debugAsyncStack)this.map_task_stackTrace.set(taskToken,new Error('Stack trace when task was last assigned'));if(this.d2d_task_owner.get(taskToken,busyObject))return;if(weavejs.util.WeavePromise.isThenable(taskToken)&&!weavejs.WeaveAPI.ProgressIndicator.hasTask(taskToken)){var unassign=this.unassignBusyTask.bind(this,taskToken);taskToken.then(unassign,unassign)}this.d2d_owner_task.set(busyObject,
taskToken,true);this.d2d_task_owner.set(taskToken,busyObject,true)};
weavejs.core.SessionManager.prototype.unassignBusyTask=function(taskToken){if(weavejs.WeaveAPI.ProgressIndicator.hasTask(taskToken)){weavejs.WeaveAPI.ProgressIndicator.removeTask(taskToken);return}var owners=this.d2d_task_owner.secondaryKeys(taskToken);this.d2d_task_owner.removeAllPrimary(taskToken);var foreachiter8_target=owners;for(var foreachiter8 in foreachiter8_target){var owner=foreachiter8_target[foreachiter8];this.d2d_owner_task.remove(owner,taskToken);var map_task=this.d2d_owner_task.map.get(owner);
if(map_task&&map_task.size)continue;this.map_unbusyTriggerCounts.set(owner,this.getCallbackCollection(owner).triggerCounter);weavejs.WeaveAPI.Scheduler.startTask(null,org.apache.flex.utils.Language.closure(this.unbusyTrigger,this,'unbusyTrigger'),weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE);if(weavejs.WeaveAPI.debugAsyncStack){var stackTrace=new Error('Stack trace when last task was unassigned');this.map_unbusyStackTraces.set(owner,{assigned:this.map_task_stackTrace.get(taskToken),unassigned:stackTrace,
token:taskToken})}}};
weavejs.core.SessionManager.prototype.unbusyTrigger=function(stopTime){while(this.map_unbusyTriggerCounts.size){if(weavejs.util.JS.now()>stopTime)return 0;var entries=weavejs.util.JS.mapEntries(this.map_unbusyTriggerCounts);var foreachiter9_target=entries;for(var foreachiter9 in foreachiter9_target){var owner_triggerCount=foreachiter9_target[foreachiter9];var owner=owner_triggerCount[0];var triggerCount=owner_triggerCount[1];this.map_unbusyTriggerCounts['delete'](owner);var cc=this.getCallbackCollection(owner);
if(org.apache.flex.utils.Language.is(cc,weavejs.core.CallbackCollection)?org.apache.flex.utils.Language.as(cc,weavejs.core.CallbackCollection).wasDisposed:this.objectWasDisposed(owner))continue;if(cc.triggerCounter!=triggerCount)continue;if(this.linkableObjectIsBusy(owner))continue;if(weavejs.WeaveAPI.debugAsyncStack&&weavejs.core.SessionManager.debugUnbusy){var stackTraces=this.map_unbusyStackTraces.get(owner);weavejs.util.JS.log('Triggering callbacks because they have not triggered since owner has becoming unbusy:',
owner);weavejs.util.JS.log(stackTraces.assigned);weavejs.util.JS.log(stackTraces.unassigned)}cc.triggerCallbacks()}}return 1};
weavejs.core.SessionManager.prototype.linkableObjectIsBusy=function(linkableObject){if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ICallbackCollection))linkableObject=this.getLinkableObjectFromCallbackCollection(org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ICallbackCollection));if(!linkableObject)return false;var busy=false;this.array_busyTraversal[this.array_busyTraversal.length]=linkableObject;this.map_busyTraversal.set(linkableObject,true);outerLoop:for(var i=
0;i<this.array_busyTraversal.length;i++){linkableObject=this.array_busyTraversal[i];var ilowbs=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableObjectWithBusyStatus);if(ilowbs){if(ilowbs.isBusy()){busy=true;break}continue}var tasks=this.d2d_owner_task.secondaryKeys(linkableObject);var foreachiter10_target=tasks;for(var foreachiter10 in foreachiter10_target){var task=foreachiter10_target[foreachiter10];if(weavejs.WeaveAPI.debugAsyncStack)var stackTrace=this.map_task_stackTrace.get(task);
busy=true;break outerLoop}var children=this.d2d_parent_child.secondaryKeys(linkableObject);var foreachiter11_target=children;for(var foreachiter11 in foreachiter11_target){var child=foreachiter11_target[foreachiter11];if(!this.map_busyTraversal.get(child)){this.array_busyTraversal[this.array_busyTraversal.length]=child;this.map_busyTraversal.set(child,true)}}}var foreachiter12_target=this.array_busyTraversal;for(var foreachiter12 in foreachiter12_target){linkableObject=foreachiter12_target[foreachiter12];
this.map_busyTraversal.set(linkableObject,false)}this.array_busyTraversal.length=0;return busy};weavejs.core.SessionManager.prototype.map_ILinkableObject_ICallbackCollection;weavejs.core.SessionManager.prototype.map_ICallbackCollection_ILinkableObject;
weavejs.core.SessionManager.prototype.getCallbackCollection=function(linkableObject){if(linkableObject==null)return null;if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ICallbackCollection))return org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ICallbackCollection);var objectCC=this.map_ILinkableObject_ICallbackCollection.get(linkableObject);if(objectCC==null){objectCC=new weavejs.core.CallbackCollection;if(weavejs.WeaveAPI.debugAsyncStack)org.apache.flex.utils.Language.as(objectCC,
weavejs.core.CallbackCollection)._linkableObject=linkableObject;this.map_ILinkableObject_ICallbackCollection.set(linkableObject,objectCC);this.map_ICallbackCollection_ILinkableObject.set(objectCC,linkableObject);this.registerDisposableChild(linkableObject,objectCC)}return objectCC};weavejs.core.SessionManager.prototype.getLinkableObjectFromCallbackCollection=function(callbackCollection){return this.map_ICallbackCollection_ILinkableObject.get(callbackCollection)||callbackCollection};
weavejs.core.SessionManager.prototype.objectWasDisposed=function(object){if(object==null)return false;if(!this.d2d_owner_child.map.has(object)){this.d2d_owner_child.map.set(object,new weavejs.util.JS.Map);var handler=Weave.getAsyncInstanceHandler(object.constructor);if(handler!=null)handler(object)}if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableObject)){var cc=org.apache.flex.utils.Language.as(this.getCallbackCollection(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableObject)),
weavejs.core.CallbackCollection);if(cc)return cc.wasDisposed}return this.map_disposed.has(object)};weavejs.core.SessionManager.prototype.map_disposed;weavejs.core.SessionManager.DISPOSE='dispose';
weavejs.core.SessionManager.prototype.disposeObject=function(object){var self=this;var __localFn0__=function(){self.debugDisposedObject(linkableObject,error)};if(object!=null&&!this.map_disposed.get(object)){this.map_disposed.set(object,true);this.disposeBusyTaskPointers(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableObject));try{if(org.apache.flex.utils.Language.is(object,weavejs.api.core.IDisposableObject))org.apache.flex.utils.Language.as(object,weavejs.api.core.IDisposableObject).dispose();
else if(typeof object[weavejs.core.SessionManager.DISPOSE]==='function')object[weavejs.core.SessionManager.DISPOSE]()}catch(e){weavejs.util.JS.error(e)}var linkableObject=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableObject);if(linkableObject){var objectCC=this.getCallbackCollection(linkableObject);if(objectCC!=linkableObject)this.disposeObject(objectCC)}var parents=this.d2d_child_parent.secondaryKeys(object);var foreachiter13_target=parents;for(var foreachiter13 in foreachiter13_target){var parent=
foreachiter13_target[foreachiter13];this.d2d_parent_child.remove(parent,object)}this.d2d_child_parent.removeAllPrimary(object);var owner=this.map_child_owner.get(object);if(owner!=null){this.d2d_owner_child.remove(owner,object);this.map_child_owner['delete'](object)}var children=this.d2d_owner_child.secondaryKeys(object);this.d2d_owner_child.removeAllPrimary(object);this.d2d_parent_child.removeAllPrimary(object);var foreachiter14_target=children;for(var foreachiter14 in foreachiter14_target){var child=
foreachiter14_target[foreachiter14];this.disposeObject(child)}if(weavejs.WeaveAPI.debugAsyncStack&&linkableObject){var error=new Error('This is the stack trace from when the object was previously disposed.');objectCC.addImmediateCallback(null,__localFn0__)}this._treeCallbacks.triggerCallbacks()}};
weavejs.core.SessionManager.prototype.debugDisposedObject=function(disposedObject,disposedError){var obj;var ownerPath=[];do{obj=this.getLinkableOwner(obj);if(obj)ownerPath.unshift(obj)}while(obj);var parents=this.d2d_child_parent.secondaryKeys(disposedObject);var children=this.d2d_parent_child.secondaryKeys(disposedObject);var sessionState=this.getSessionState(disposedObject);var msg='WARNING: An object triggered callbacks after previously being disposed.';if(org.apache.flex.utils.Language.is(disposedObject,
weavejs.api.core.ILinkableVariable))msg+=' (value \x3d '+org.apache.flex.utils.Language.as(disposedObject,weavejs.api.core.ILinkableVariable).getSessionState()+')';weavejs.util.JS.error(disposedError);weavejs.util.JS.error(msg,disposedObject)};
weavejs.core.SessionManager.prototype._getPaths=function(root,descendant){var results=[];var parents=this.d2d_child_parent.secondaryKeys(descendant);var foreachiter15_target=parents;for(var foreachiter15 in foreachiter15_target){var parent=foreachiter15_target[foreachiter15];var name=this._getChildPropertyName(org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableObject),descendant);if(name!=null){var result=this._getPaths(root,org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableObject));
if(result!=null){result.push(name);results.push(result)}}}if(results.length==0)return root==null?results:null;return results};
weavejs.core.SessionManager.prototype._getChildPropertyName=function(parent,child){if(org.apache.flex.utils.Language.is(parent,weavejs.api.core.ILinkableHashMap))return org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap).getName(child);var names=this.getLinkablePropertyNames(parent);var foreachiter16_target=names;for(var foreachiter16 in foreachiter16_target){var name=foreachiter16_target[foreachiter16];if(parent[name]==child)return name}return null};
weavejs.core.SessionManager.prototype.getPath=function(root,descendant){if(!root||!descendant)return null;var tree=this.getSessionStateTree(root,null);var path=this._getPath(tree,descendant);return path};
weavejs.core.SessionManager.prototype._getPath=function(tree,descendant){if(tree.data==descendant)return[];var children=tree.children;var foreachiter17_target=children;for(var foreachiter17 in foreachiter17_target){var child=foreachiter17_target[foreachiter17];var path=this._getPath(child,descendant);if(path){path.unshift(child.label);return path}}return null};
weavejs.core.SessionManager.prototype.getObject=function(root,path){if(!path)return null;var object=root;for(var i=0;i<path.length;i++){var propertyName=path[i];if(object==null||this.map_disposed.get(object))return null;if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableHashMap))if(org.apache.flex.utils.Language.is(propertyName,Number))object=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap).getObjects()[propertyName];else object=org.apache.flex.utils.Language.as(object,
weavejs.api.core.ILinkableHashMap).getObject(String(propertyName));else if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableDynamicObject))object=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableDynamicObject).internalObject;else if(org.apache.flex.utils.Language.is(object[propertyName],weavejs.api.core.ILinkableObject))object=object[propertyName];else{if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableObjectWithNewPaths)||weavejs.util.JS.hasProperty(object,
weavejs.core.SessionManager.DEPRECATED_PATH_REWRITE)){var rewrittenPath=object[weavejs.core.SessionManager.DEPRECATED_PATH_REWRITE](path.slice(i));if(rewrittenPath)return this.getObject(object,rewrittenPath)}if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableObjectWithNewProperties)||weavejs.util.JS.hasProperty(object,weavejs.core.SessionManager.DEPRECATED_STATE_MAPPING))return this.getObjectFromDeprecatedPath(object[weavejs.core.SessionManager.DEPRECATED_STATE_MAPPING],path,i);
return null}}return this.map_disposed.get(object)?null:object};
weavejs.core.SessionManager.prototype.getObjectFromDeprecatedPath=function(mapping,path,startAtIndex){var object;if(org.apache.flex.utils.Language.is(mapping,Array)){var foreachiter18_target=mapping;for(var foreachiter18 in foreachiter18_target){var item=foreachiter18_target[foreachiter18];object=this.getObjectFromDeprecatedPath(item,path,startAtIndex);if(object)return object}return null}for(var i=startAtIndex;i<path.length;i++){if(!mapping||typeof mapping!=='object')return null;mapping=mapping[path[i]];
object=org.apache.flex.utils.Language.as(mapping,weavejs.api.core.ILinkableObject);if(object)return i+1==path.length?object:this.getObject(object,path.slice(i+1))}return null};weavejs.core.SessionManager.prototype.d2d_lhs_rhs_setState;
weavejs.core.SessionManager.prototype.linkSessionState=function(primary,secondary){var self=this;var __localFn0__=function(){self.setSessionState(primary,self.getSessionState(secondary),true)};var __localFn1__=function(){self.setSessionState(secondary,self.getSessionState(primary),true)};if(primary==null||secondary==null){weavejs.util.JS.error('SessionManager.linkSessionState(): Parameters to this function cannot be null.');return}if(primary==secondary){weavejs.util.JS.error('Warning! Attempt to link session state of an object with itself');
return}if(org.apache.flex.utils.Language.is(this.d2d_lhs_rhs_setState.get(primary,secondary),Function))return;var setPrimary=__localFn0__;var setSecondary=__localFn1__;this.d2d_lhs_rhs_setState.set(primary,secondary,setPrimary);this.d2d_lhs_rhs_setState.set(secondary,primary,setSecondary);this.getCallbackCollection(secondary).addImmediateCallback(primary,setPrimary);this.getCallbackCollection(primary).addImmediateCallback(secondary,setSecondary,true)};
weavejs.core.SessionManager.prototype.unlinkSessionState=function(first,second){if(first==null||second==null){weavejs.util.JS.error('SessionManager.unlinkSessionState(): Parameters to this function cannot be null.');return}var setFirst=org.apache.flex.utils.Language.as(this.d2d_lhs_rhs_setState.remove(first,second),Function);var setSecond=org.apache.flex.utils.Language.as(this.d2d_lhs_rhs_setState.remove(second,first),Function);this.getCallbackCollection(second).removeCallback(first,setFirst);this.getCallbackCollection(first).removeCallback(second,
setSecond)};weavejs.core.SessionManager.DIFF_DELETE='delete';
weavejs.core.SessionManager.prototype.computeDiff=function(oldState,newState){if(oldState==null)oldState=null;if(newState==null)newState=null;var type=typeof oldState;var diffValue;if(typeof newState!=type)return weavejs.util.JS.copyObject(newState);if(type=='xml')throw new Error('XML is not supported as a primitive session state type.');else if(type=='number'){if(isNaN(org.apache.flex.utils.Language.as(oldState,Number))&&isNaN(org.apache.flex.utils.Language.as(newState,Number)))return undefined;
if(oldState!=newState)return newState;return undefined}else if(oldState===null||newState===null||type!='object'){if(oldState!==newState)return weavejs.util.JS.copyObject(newState);return undefined}else if(org.apache.flex.utils.Language.is(oldState,Array)&&org.apache.flex.utils.Language.is(newState,Array)){if(!weavejs.api.core.DynamicState.isDynamicStateArray(oldState)&&!weavejs.api.core.DynamicState.isDynamicStateArray(newState)){if(weavejs.util.StandardLib.compare(oldState,newState)==0)return undefined;
return weavejs.util.JS.copyObject(newState)}var i;var typedState;var changeDetected=false;var oldLookup={};var objectName;var className;var sessionState;for(i=0;i<oldState.length;i++){typedState=oldState[i];objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];oldLookup[objectName||'']=typedState}if(oldState.length!=newState.length)changeDetected=true;var result=[];for(i=0;i<newState.length;i++){typedState=newState[i];objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];className=
typedState[weavejs.api.core.DynamicState.CLASS_NAME];sessionState=typedState[weavejs.api.core.DynamicState.SESSION_STATE];var oldTypedState=oldLookup[objectName||''];delete oldLookup[objectName||''];if(oldTypedState!=null&&oldTypedState[weavejs.api.core.DynamicState.CLASS_NAME]==className){className=null;diffValue=this.computeDiff(oldTypedState[weavejs.api.core.DynamicState.SESSION_STATE],sessionState);if(diffValue===undefined){result.push(objectName);if(!changeDetected&&oldState[i][weavejs.api.core.DynamicState.OBJECT_NAME]!=
objectName)changeDetected=true;continue}sessionState=diffValue}else sessionState=weavejs.util.JS.copyObject(sessionState);result.push(weavejs.api.core.DynamicState.create(objectName||null,className,sessionState));changeDetected=true}for(objectName in oldLookup){result.push(weavejs.api.core.DynamicState.create(objectName||null,weavejs.core.SessionManager.DIFF_DELETE));changeDetected=true}if(changeDetected)return result;return undefined}else{var diff=undefined;for(var oldName in oldState){diffValue=
this.computeDiff(oldState[oldName],newState[oldName]);if(diffValue!==undefined){if(!diff)diff={};if(newState.hasOwnProperty(oldName))diff[oldName]=diffValue;else diff[oldName]=undefined}}for(var newName in newState)if(oldState[newName]===undefined&&newState[newName]!==undefined){if(!diff)diff={};diff[newName]=weavejs.util.JS.copyObject(newState[newName])}return diff}};
weavejs.core.SessionManager.prototype.combineDiff=function(baseDiff,diffToAdd){if(baseDiff==null)baseDiff=null;if(diffToAdd==null)diffToAdd=null;var baseType=typeof baseDiff;var diffType=typeof diffToAdd;if(baseDiff==null||diffToAdd==null||baseType!=diffType||baseType!='object')baseDiff=weavejs.util.JS.copyObject(diffToAdd);else if(org.apache.flex.utils.Language.is(baseDiff,Array)&&org.apache.flex.utils.Language.is(diffToAdd,Array)){var i;if(weavejs.api.core.DynamicState.isDynamicStateArray(baseDiff)||
weavejs.api.core.DynamicState.isDynamicStateArray(diffToAdd)){var typedState;var objectName;var baseLookup={};for(i=0;i<baseDiff.length;i++){typedState=baseDiff[i];if(org.apache.flex.utils.Language.is(typedState,String)||typedState==null)objectName=org.apache.flex.utils.Language.as(typedState,String);else objectName=org.apache.flex.utils.Language.as(typedState[weavejs.api.core.DynamicState.OBJECT_NAME],String);baseLookup[objectName]=typedState;baseDiff[i]=objectName}for(i=0;i<diffToAdd.length;i++){typedState=
diffToAdd[i];if(org.apache.flex.utils.Language.is(typedState,String)||typedState==null)objectName=org.apache.flex.utils.Language.as(typedState,String);else objectName=org.apache.flex.utils.Language.as(typedState[weavejs.api.core.DynamicState.OBJECT_NAME],String);if(baseLookup.hasOwnProperty(objectName)){for(var j=org.apache.flex.utils.Language.as(baseDiff,Array).indexOf(objectName);j<baseDiff.length-1;j++)baseDiff[j]=baseDiff[j+1];baseDiff[baseDiff.length-1]=objectName}else baseDiff.push(objectName);
var oldTypedState=baseLookup[objectName];if(org.apache.flex.utils.Language.is(oldTypedState,String)||oldTypedState==null)baseLookup[objectName]=weavejs.util.JS.copyObject(typedState);else if(!(org.apache.flex.utils.Language.is(typedState,String)||typedState==null)){var className=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(className&&className!=oldTypedState[weavejs.api.core.DynamicState.CLASS_NAME])baseLookup[objectName]=weavejs.util.JS.copyObject(typedState);else oldTypedState[weavejs.api.core.DynamicState.SESSION_STATE]=
this.combineDiff(oldTypedState[weavejs.api.core.DynamicState.SESSION_STATE],typedState[weavejs.api.core.DynamicState.SESSION_STATE])}}for(i=0;i<baseDiff.length;i++)baseDiff[i]=baseLookup[baseDiff[i]]}else{i=baseDiff.length=diffToAdd.length;while(i--){var value=diffToAdd[i];if(value==null||typeof value!='object')baseDiff[i]=value;else baseDiff[i]=this.combineDiff(baseDiff[i],value)}}}else for(var newName in diffToAdd)baseDiff[newName]=this.combineDiff(baseDiff[newName],diffToAdd[newName]);return baseDiff};
weavejs.core.SessionManager.prototype.testDiff=function(){var states=[[{objectName:'a',className:'aClass',sessionState:'aVal'},{objectName:'b',className:'bClass',sessionState:'bVal1'}],[{objectName:'b',className:'bClass',sessionState:'bVal2'},{objectName:'a',className:'aClass',sessionState:'aVal'}],[{objectName:'a',className:'aNewClass',sessionState:'aVal'},{objectName:'b',className:'bClass',sessionState:null}],[{objectName:'b',className:'bClass',sessionState:null}]];var diffs=[];var combined=[];
var baseDiff=null;for(var i=1;i<states.length;i++){var diff=this.computeDiff(states[i-1],states[i]);diffs.push(diff);baseDiff=this.combineDiff(baseDiff,diff);combined.push(weavejs.util.JS.copyObject(baseDiff))}weavejs.util.JS.log('diffs',diffs);weavejs.util.JS.log('combined',combined)};weavejs.core.SessionManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'SessionManager',qName:'weavejs.core.SessionManager'}],interfaces:[weavejs.api.core.ISessionManager]};
goog.exportSymbol('weavejs.core.SessionManager',weavejs.core.SessionManager);
weavejs.core.SessionManager.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'newLinkableChild':{type:'*',declaredBy:'weavejs.core.SessionManager'},'registerLinkableChild':{type:'*',declaredBy:'weavejs.core.SessionManager'},'newDisposableChild':{type:'*',declaredBy:'weavejs.core.SessionManager'},'registerDisposableChild':{type:'*',declaredBy:'weavejs.core.SessionManager'},'unregisterLinkableChild':{type:'void',
declaredBy:'weavejs.core.SessionManager'},'excludeLinkableChildFromSessionState':{type:'void',declaredBy:'weavejs.core.SessionManager'},'getOwner':{type:'Object',declaredBy:'weavejs.core.SessionManager'},'getLinkableOwner':{type:'ILinkableObject',declaredBy:'weavejs.core.SessionManager'},'getSessionStateTree':{type:'WeaveTreeItem',declaredBy:'weavejs.core.SessionManager'},'getTypedStateTree':{type:'Object',declaredBy:'weavejs.core.SessionManager'},'addTreeCallback':{type:'void',declaredBy:'weavejs.core.SessionManager'},
'removeTreeCallback':{type:'void',declaredBy:'weavejs.core.SessionManager'},'copySessionState':{type:'void',declaredBy:'weavejs.core.SessionManager'},'setSessionState':{type:'void',declaredBy:'weavejs.core.SessionManager'},'getSessionState':{type:'Object',declaredBy:'weavejs.core.SessionManager'},'getLinkablePropertyNames':{type:'Array',declaredBy:'weavejs.core.SessionManager'},'getLinkableDescendants':{type:'Array',declaredBy:'weavejs.core.SessionManager'},'assignBusyTask':{type:'void',declaredBy:'weavejs.core.SessionManager'},
'unassignBusyTask':{type:'void',declaredBy:'weavejs.core.SessionManager'},'linkableObjectIsBusy':{type:'Boolean',declaredBy:'weavejs.core.SessionManager'},'getCallbackCollection':{type:'ICallbackCollection',declaredBy:'weavejs.core.SessionManager'},'getLinkableObjectFromCallbackCollection':{type:'ILinkableObject',declaredBy:'weavejs.core.SessionManager'},'objectWasDisposed':{type:'Boolean',declaredBy:'weavejs.core.SessionManager'},'disposeObject':{type:'void',declaredBy:'weavejs.core.SessionManager'},
'_getPaths':{type:'Array',declaredBy:'weavejs.core.SessionManager'},'getPath':{type:'Array',declaredBy:'weavejs.core.SessionManager'},'getObject':{type:'ILinkableObject',declaredBy:'weavejs.core.SessionManager'},'linkSessionState':{type:'void',declaredBy:'weavejs.core.SessionManager'},'unlinkSessionState':{type:'void',declaredBy:'weavejs.core.SessionManager'},'computeDiff':{type:'*',declaredBy:'weavejs.core.SessionManager'},'combineDiff':{type:'Object',declaredBy:'weavejs.core.SessionManager'},'testDiff':{type:'void',
declaredBy:'weavejs.core.SessionManager'}}}}};weavejs.core.SessionManager.WeaveTreeItemExt=function(){weavejs.core.SessionManager.WeaveTreeItemExt.base(this,'constructor')};goog.inherits(weavejs.core.SessionManager.WeaveTreeItemExt,weavejs.util.WeaveTreeItem);weavejs.core.SessionManager.WeaveTreeItemExt.prototype.equals=function(other){var otherExt=org.apache.flex.utils.Language.as(other,weavejs.core.SessionManager.WeaveTreeItemExt);return this.data==otherExt.data};
weavejs.core.SessionManager.WeaveTreeItemExt.prototype.getLabel=function(){return this.label};weavejs.core.SessionManager.WeaveTreeItemExt.prototype.isBranch=function(){return this.children!=null};weavejs.core.SessionManager.WeaveTreeItemExt.prototype.hasChildBranches=function(){var foreachiter19_target=this.children;for(var foreachiter19 in foreachiter19_target){var child=foreachiter19_target[foreachiter19];if(child.isBranch())return true}return false};
weavejs.core.SessionManager.WeaveTreeItemExt.prototype.getChildren=function(){return this.children};weavejs.core.SessionManager.WeaveTreeItemExt.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveTreeItemExt',qName:'weavejs.core.SessionManager.WeaveTreeItemExt'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};goog.exportSymbol('weavejs.core.SessionManager.WeaveTreeItemExt',weavejs.core.SessionManager.WeaveTreeItemExt);
weavejs.core.SessionManager.WeaveTreeItemExt.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'equals':{type:'Boolean',declaredBy:'weavejs.core.SessionManager.WeaveTreeItemExt'},'getLabel':{type:'String',declaredBy:'weavejs.core.SessionManager.WeaveTreeItemExt'},'isBranch':{type:'Boolean',declaredBy:'weavejs.core.SessionManager.WeaveTreeItemExt'},'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.core.SessionManager.WeaveTreeItemExt'},
'getChildren':{type:'Array',declaredBy:'weavejs.core.SessionManager.WeaveTreeItemExt'}}}}};goog.provide('weavejs.core.LinkableWatcher');goog.require('weavejs.core.SessionManager');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkableWatcher=function(typeRestriction,immediateCallback,groupedCallback){typeRestriction=typeof typeRestriction!=='undefined'?typeRestriction:null;immediateCallback=typeof immediateCallback!=='undefined'?immediateCallback:null;groupedCallback=typeof groupedCallback!=='undefined'?groupedCallback:null;this._pathDependencies=new weavejs.util.Dictionary2D;this._typeRestriction=typeRestriction;if(immediateCallback!=null)Weave.getCallbacks(this).addImmediateCallback(null,immediateCallback);
if(groupedCallback!=null)Weave.getCallbacks(this).addGroupedCallback(null,groupedCallback)};weavejs.core.LinkableWatcher.prototype._typeRestriction;weavejs.core.LinkableWatcher.prototype._root;weavejs.core.LinkableWatcher.prototype._target;weavejs.core.LinkableWatcher.prototype._foundRoot=false;weavejs.core.LinkableWatcher.prototype._foundTarget=true;weavejs.core.LinkableWatcher.prototype._targetPath;weavejs.core.LinkableWatcher.prototype._pathDependencies;
weavejs.core.LinkableWatcher.prototype._warned=false;
weavejs.core.LinkableWatcher.prototype.internalSetTarget=function(newTarget){if(newTarget&&this._foundTarget&&this._typeRestriction){var classDef=weavejs.core.LinkablePlaceholder.getClass(newTarget);if(!(classDef===this._typeRestriction||org.apache.flex.utils.Language.is(classDef.prototype,this._typeRestriction)))newTarget=null}if(this._target==newTarget)return;if(this._target){Weave.getCallbacks(this._target).removeCallback(this,org.apache.flex.utils.Language.closure(this._handleTargetTrigger,this,
'_handleTargetTrigger'));Weave.getCallbacks(this._target).removeCallback(this,org.apache.flex.utils.Language.closure(this._handleTargetDispose,this,'_handleTargetDispose'));if(Weave.getOwner(this._target)==this)Weave.dispose(this._target);else org.apache.flex.utils.Language.as(weavejs.WeaveAPI.SessionManager,weavejs.core.SessionManager).unregisterLinkableChild(this,this._target)}this._target=newTarget;if(this._target){Weave.linkableChild(this,this._target);Weave.getCallbacks(this._target).removeCallback(this,
org.apache.flex.utils.Language.closure(Weave.getCallbacks(this).triggerCallbacks,Weave.getCallbacks(this),'triggerCallbacks'));Weave.getCallbacks(this._target).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._handleTargetTrigger,this,'_handleTargetTrigger'),false,true);Weave.getCallbacks(this._target).addDisposeCallback(this,org.apache.flex.utils.Language.closure(this._handleTargetDispose,this,'_handleTargetDispose'))}if(this._foundTarget)this._handleTargetTrigger()};
weavejs.core.LinkableWatcher.prototype._handleTargetTrigger=function(){if(this._foundTarget)Weave.getCallbacks(this).triggerCallbacks();else this.handlePath()};weavejs.core.LinkableWatcher.prototype._handleTargetDispose=function(){if(this._targetPath)this.handlePath();else{this._target=null;Weave.getCallbacks(this).triggerCallbacks()}};
weavejs.core.LinkableWatcher.prototype.handlePath=function(){var self=this;var __localFn0__=function(){if(!self._foundRoot&&!self.root)weavejs.util.JS.error('Warning:',error)};if(!this._targetPath){this._foundTarget=true;this.internalSetTarget(null);return}this._foundRoot=this.root!=null;if(!this._foundRoot&&!this._warned){var error=new Error('LinkableWatcher has a targetPath but no root');weavejs.WeaveAPI.Scheduler.callLater(this,__localFn0__);this._warned=true}var node=Weave.followPath(this._root,
this._targetPath);if(!node){node=this._root;var subPath=[];var foreachiter0_target=this._targetPath;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(org.apache.flex.utils.Language.is(node,weavejs.api.core.ILinkableCompositeObject))this.addPathDependency(org.apache.flex.utils.Language.as(node,weavejs.api.core.ILinkableCompositeObject),name);subPath[0]=name;var child=Weave.followPath(node,subPath);if(child)node=child;else{if(org.apache.flex.utils.Language.is(node,
weavejs.api.core.ILinkableHashMap))node=org.apache.flex.utils.Language.as(node,weavejs.api.core.ILinkableHashMap).childListCallbacks;if(org.apache.flex.utils.Language.is(node,weavejs.api.core.ILinkableDynamicObject))node=null;var lostTarget=this._foundTarget;this._foundTarget=false;this.internalSetTarget(node);if(lostTarget)Weave.getCallbacks(this).triggerCallbacks();return}}}this._foundTarget=!this._typeRestriction||org.apache.flex.utils.Language.is(node,this._typeRestriction);this.internalSetTarget(node)};
weavejs.core.LinkableWatcher.prototype.addPathDependency=function(parent,pathElement){var lhm=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);if(lhm&&org.apache.flex.utils.Language.is(pathElement,String))return;var ldo=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableDynamicObject);if(ldo)pathElement=null;if(!this._pathDependencies.get(parent,pathElement)){var child=Weave.followPath(parent,[pathElement]);this._pathDependencies.set(parent,pathElement,child);
var dependencyCallbacks=this.getDependencyCallbacks(parent);dependencyCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.handlePathDependencies,this,'handlePathDependencies'));dependencyCallbacks.addDisposeCallback(this,org.apache.flex.utils.Language.closure(this.handlePathDependencies,this,'handlePathDependencies'))}};
weavejs.core.LinkableWatcher.prototype.getDependencyCallbacks=function(parent){var lhm=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);if(lhm)return lhm.childListCallbacks;return Weave.getCallbacks(parent)};weavejs.core.LinkableWatcher.prototype.handlePathDependencies=function(){this._pathDependencies.forEach(org.apache.flex.utils.Language.closure(this.handlePathDependencies_each,this,'handlePathDependencies_each'),this)};
weavejs.core.LinkableWatcher.prototype.handlePathDependencies_each=function(parent,pathElement,child){var newChild=Weave.followPath(parent,[pathElement]);if(Weave.wasDisposed(parent)||child!=newChild){this.resetPathDependencies();this.handlePath();return true}return false};
weavejs.core.LinkableWatcher.prototype.resetPathDependencies=function(){this._pathDependencies.map.forEach(org.apache.flex.utils.Language.closure(this.resetPathDependencies_each,this,'resetPathDependencies_each'),this);this._pathDependencies=new weavejs.util.Dictionary2D};weavejs.core.LinkableWatcher.prototype.resetPathDependencies_each=function(map_child,parent){this.getDependencyCallbacks(parent).removeCallback(this,org.apache.flex.utils.Language.closure(this.handlePathDependencies,this,'handlePathDependencies'))};
weavejs.core.LinkableWatcher.prototype.dispose=function(){this._targetPath=null;this._target=null;this._root=null};
Object.defineProperties(weavejs.core.LinkableWatcher.prototype,{root:{get:function(){if(!this._root){var weave=Weave.getWeave(this);this._root=weave?weave.root:Weave.getRoot(this);if(this._root&&!this._foundRoot&&!this._foundTarget)this.handlePath()}return this._root},set:function(object){if(this.root!=object){var cc=Weave.getCallbacks(this);cc.delayCallbacks();this._root=object;if(this._targetPath){this.resetPathDependencies();this.handlePath()}cc.triggerCallbacks();cc.resumeCallbacks()}}},target:{get:function(){if(!this._foundRoot&&
!this._foundTarget)this.handlePath();return this._foundTarget?this._target:null},set:function(newTarget){var cc=Weave.getCallbacks(this);cc.delayCallbacks();this.targetPath=null;this.internalSetTarget(newTarget);cc.resumeCallbacks()}},foundPlaceholder:{get:function(){return org.apache.flex.utils.Language.is(this._target,weavejs.core.LinkablePlaceholder)}},targetPath:{get:function(){return this._targetPath?this._targetPath.concat():null},set:function(path){if(path&&path.length==0)path=null;if(weavejs.util.StandardLib.compare(this._targetPath,
path)!=0){var cc=Weave.getCallbacks(this);cc.delayCallbacks();this.resetPathDependencies();this._targetPath=path;this.handlePath();cc.triggerCallbacks();cc.resumeCallbacks()}}}});weavejs.core.LinkableWatcher.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableWatcher',qName:'weavejs.core.LinkableWatcher'}],interfaces:[weavejs.api.core.ILinkableObject,weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.core.LinkableWatcher',weavejs.core.LinkableWatcher);
weavejs.core.LinkableWatcher.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'root':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableWatcher'},'target':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableWatcher'},'foundPlaceholder':{type:'Boolean',declaredBy:'weavejs.core.LinkableWatcher'},'targetPath':{type:'Array',declaredBy:'weavejs.core.LinkableWatcher'}}},methods:function(){return{'LinkableWatcher':{type:'',declaredBy:'weavejs.core.LinkableWatcher'},
'dispose':{type:'void',declaredBy:'weavejs.core.LinkableWatcher'}}}}};goog.provide('weavejs.core.LinkableDynamicObject');goog.require('weavejs.core.LinkablePlaceholder');goog.require('weavejs.core.LinkableWatcher');goog.require('weavejs.core.SessionManager');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.ILinkableDynamicObject');
weavejs.core.LinkableDynamicObject=function(typeRestriction){typeRestriction=typeof typeRestriction!=='undefined'?typeRestriction:null;this.cc=Weave.disposableChild(this,weavejs.core.CallbackCollection);weavejs.core.LinkableDynamicObject.base(this,'constructor',typeRestriction)};goog.inherits(weavejs.core.LinkableDynamicObject,weavejs.core.LinkableWatcher);weavejs.core.LinkableDynamicObject.prototype.cc;weavejs.core.LinkableDynamicObject.prototype._locked=false;
weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME='Array';weavejs.core.LinkableDynamicObject.prototype.getSessionState=function(){var obj=this.targetPath||this.target;if(!obj)return[];var className=Weave.className(weavejs.core.LinkablePlaceholder.getClass(obj));var sessionState=org.apache.flex.utils.Language.as(obj,Array)||Weave.getState(org.apache.flex.utils.Language.as(obj,weavejs.api.core.ILinkableObject));return[weavejs.api.core.DynamicState.create(null,className,sessionState)]};
weavejs.core.LinkableDynamicObject.prototype.setSessionState=function(newState,removeMissingDynamicObjects){if(newState==null)return;try{this.cc.delayCallbacks();if(!newState.length){if(removeMissingDynamicObjects)this.target=null;return}if(!weavejs.api.core.DynamicState.isDynamicStateArray(newState,true)){this.targetPath=newState;return}if(newState.length>1){this.handleDeprecatedSessionState(newState,removeMissingDynamicObjects);return}var dynamicState=newState[0];var className=dynamicState[weavejs.api.core.DynamicState.CLASS_NAME];
var objectName=dynamicState[weavejs.api.core.DynamicState.OBJECT_NAME];var sessionState=dynamicState[weavejs.api.core.DynamicState.SESSION_STATE];if(className=='weave.core::GlobalObjectReference'||className=='GlobalObjectReference'){className=weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME;sessionState=[objectName]}if(className==weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME||!className&&this.targetPath)this.targetPath=org.apache.flex.utils.Language.as(sessionState,Array);else if(className==
weavejs.core.SessionManager.DIFF_DELETE)this.target=null;else{var prevTarget=this.target;var classDef=Weave.getDefinition(className);if(className||removeMissingDynamicObjects)this.setLocalObjectType(classDef);var targetClassDef=weavejs.core.LinkablePlaceholder.getClass(this.target);if(!className&&this.target||classDef&&(targetClassDef===classDef||org.apache.flex.utils.Language.is(targetClassDef.prototype,classDef)))Weave.setState(this.target,sessionState,prevTarget!=this.target||removeMissingDynamicObjects)}}finally{this.cc.resumeCallbacks()}};
weavejs.core.LinkableDynamicObject.prototype.internalSetTarget=function(newTarget){if(newTarget===this||Weave.getDescendants(newTarget,weavejs.core.LinkableDynamicObject).indexOf(this)>=0)newTarget=null;weavejs.core.LinkableDynamicObject.base(this,'internalSetTarget',newTarget)};
weavejs.core.LinkableDynamicObject.prototype.setLocalObjectType=function(classDef){if(this._locked)return;this.cc.delayCallbacks();this.targetPath=null;if(Weave.isLinkable(classDef)&&(this._typeRestriction==null||classDef===this._typeRestriction||org.apache.flex.utils.Language.is(classDef.prototype,this._typeRestriction))){if(classDef!=weavejs.core.LinkablePlaceholder.getClass(this.target))if(Weave.isAsyncClass(classDef))org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,
this,'target',new weavejs.core.LinkablePlaceholder(classDef));else org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',new classDef)}else org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',null);this.cc.resumeCallbacks()};
weavejs.core.LinkableDynamicObject.prototype.requestLocalObject=function(objectType,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;if(org.apache.flex.utils.Language.is(objectType,String))objectType=Weave.getDefinition(String(objectType),true);this.cc.delayCallbacks();if(objectType)this.setLocalObjectType(objectType);else this.target=null;if(lockObject)this._locked=true;this.cc.resumeCallbacks();if(objectType)return org.apache.flex.utils.Language.as(this.target,objectType);
return this.target};
weavejs.core.LinkableDynamicObject.prototype.requestGlobalObject=function(name,objectType,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;if(org.apache.flex.utils.Language.is(objectType,String))objectType=Weave.getDefinition(String(objectType),true);if(!name)return this.requestLocalObject(objectType,lockObject);if(!this._locked){this.cc.delayCallbacks();this.targetPath=[name];Weave.getRoot(this).requestObject(name,objectType,lockObject);if(lockObject)this._locked=true;this.cc.resumeCallbacks()}if(objectType)return org.apache.flex.utils.Language.as(this.target,
objectType);return this.target};weavejs.core.LinkableDynamicObject.prototype.requestLocalObjectCopy=function(objectToCopy){this.cc.delayCallbacks();var classDef=weavejs.core.LinkablePlaceholder.getClass(objectToCopy);var object=this.requestLocalObject(classDef,false);if(object!=null&&objectToCopy!=null)Weave.copyState(objectToCopy,object);this.cc.resumeCallbacks()};
weavejs.core.LinkableDynamicObject.prototype.handleDeprecatedSessionState=function(newState,removeMissingDynamicObjects){var i=newState.length;while(i--){var item=newState[i];if(org.apache.flex.utils.Language.is(item,String))item=weavejs.api.core.DynamicState.create(null,weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME,[item]);if(!weavejs.api.core.DynamicState.isDynamicState(item))break;if(item[weavejs.api.core.DynamicState.CLASS_NAME]==weavejs.core.SessionManager.DIFF_DELETE){if(this.globalName==
(item[weavejs.api.core.DynamicState.OBJECT_NAME]||null))this.target=null}else{this.setSessionState([item],removeMissingDynamicObjects);return}}if(removeMissingDynamicObjects)this.target=null};weavejs.core.LinkableDynamicObject.prototype.lock=function(){this._locked=true};weavejs.core.LinkableDynamicObject.prototype.removeObject=function(){if(!this._locked)org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',null)};
weavejs.core.LinkableDynamicObject.prototype.dispose=function(){this.cc.dispose();weavejs.core.LinkableDynamicObject.base(this,'dispose')};weavejs.core.LinkableDynamicObject.prototype.addImmediateCallback=function(relevantContext,callback,runCallbackNow,alwaysCallLast){runCallbackNow=typeof runCallbackNow!=='undefined'?runCallbackNow:false;alwaysCallLast=typeof alwaysCallLast!=='undefined'?alwaysCallLast:false;this.cc.addImmediateCallback(relevantContext,callback,runCallbackNow,alwaysCallLast)};
weavejs.core.LinkableDynamicObject.prototype.addGroupedCallback=function(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;delayWhileBusy=typeof delayWhileBusy!=='undefined'?delayWhileBusy:true;this.cc.addGroupedCallback(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy)};
weavejs.core.LinkableDynamicObject.prototype.addDisposeCallback=function(relevantContext,callback,allowDelay){allowDelay=typeof allowDelay!=='undefined'?allowDelay:false;this.cc.addDisposeCallback(relevantContext,callback,allowDelay)};weavejs.core.LinkableDynamicObject.prototype.removeCallback=function(relevantContext,callback){this.cc.removeCallback(relevantContext,callback)};weavejs.core.LinkableDynamicObject.prototype.triggerCallbacks=function(){this.cc.triggerCallbacks()};
weavejs.core.LinkableDynamicObject.prototype.delayCallbacks=function(){this.cc.delayCallbacks()};weavejs.core.LinkableDynamicObject.prototype.resumeCallbacks=function(){this.cc.resumeCallbacks()};
Object.defineProperties(weavejs.core.LinkableDynamicObject.prototype,{internalObject:{get:function(){return this.target}},target:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.core.LinkableDynamicObject,this,'target')},set:function(newTarget){if(this._locked||this.target===newTarget)return;if(!newTarget){org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',null);return}this.cc.delayCallbacks();var path=Weave.findPath(Weave.getRoot(this),
newTarget);if(path)this.targetPath=path;else{var owner=Weave.getOwner(newTarget);if(owner===this||!owner)org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',newTarget);else org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',null)}this.cc.resumeCallbacks()}},targetPath:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.core.LinkableDynamicObject,this,'targetPath')},set:function(path){if(this._locked)return;
org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'targetPath',path)}},globalName:{get:function(){if(this._targetPath&&this._targetPath.length==1)return this._targetPath[0];return null},set:function(newGlobalName){if(this._locked)return;if(!newGlobalName)newGlobalName=null;var oldGlobalName=this.globalName;if(oldGlobalName==newGlobalName)return;this.cc.delayCallbacks();if(newGlobalName==null)this.requestLocalObjectCopy(this.internalObject);else{var root=Weave.getRoot(this);
if(this.target&&!this.targetPath&&!root.getObject(newGlobalName))root.requestObjectCopy(newGlobalName,this.internalObject);this.targetPath=[newGlobalName]}this.cc.resumeCallbacks()}},locked:{get:function(){return this._locked}},triggerCounter:{get:function(){return this.cc.triggerCounter}},callbacksAreDelayed:{get:function(){return this.cc.callbacksAreDelayed}}});
weavejs.core.LinkableDynamicObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableDynamicObject',qName:'weavejs.core.LinkableDynamicObject'}],interfaces:[weavejs.api.core.ILinkableDynamicObject,weavejs.api.core.ICallbackCollection]};goog.exportSymbol('weavejs.core.LinkableDynamicObject',weavejs.core.LinkableDynamicObject);
weavejs.core.LinkableDynamicObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'internalObject':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableDynamicObject'},'target':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableDynamicObject'},'targetPath':{type:'Array',declaredBy:'weavejs.core.LinkableDynamicObject'},'globalName':{type:'String',declaredBy:'weavejs.core.LinkableDynamicObject'},'locked':{type:'Boolean',declaredBy:'weavejs.core.LinkableDynamicObject'},
'triggerCounter':{type:'uint',declaredBy:'weavejs.core.LinkableDynamicObject'},'callbacksAreDelayed':{type:'Boolean',declaredBy:'weavejs.core.LinkableDynamicObject'}}},methods:function(){return{'LinkableDynamicObject':{type:'',declaredBy:'weavejs.core.LinkableDynamicObject'},'getSessionState':{type:'Array',declaredBy:'weavejs.core.LinkableDynamicObject'},'setSessionState':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'requestLocalObject':{type:'*',declaredBy:'weavejs.core.LinkableDynamicObject'},
'requestGlobalObject':{type:'*',declaredBy:'weavejs.core.LinkableDynamicObject'},'requestLocalObjectCopy':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'lock':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'removeObject':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'dispose':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'addImmediateCallback':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'addGroupedCallback':{type:'void',
declaredBy:'weavejs.core.LinkableDynamicObject'},'addDisposeCallback':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'removeCallback':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'triggerCallbacks':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'delayCallbacks':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'},'resumeCallbacks':{type:'void',declaredBy:'weavejs.core.LinkableDynamicObject'}}}}};goog.provide('weavejs.api.data.IKeyFilter');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IKeyFilter=function(){};weavejs.api.data.IKeyFilter.prototype.containsKey=function(key){};weavejs.api.data.IKeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'IKeyFilter',qName:'weavejs.api.data.IKeyFilter'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.data.IKeyFilter.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'containsKey':{type:'Boolean',declaredBy:'weavejs.api.data.IKeyFilter'}}}}};goog.provide('weavejs.api.data.IKeySet');goog.require('weavejs.api.data.IKeyFilter');weavejs.api.data.IKeySet=function(){};weavejs.api.data.IKeySet.prototype.keys;weavejs.api.data.IKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'IKeySet',qName:'weavejs.api.data.IKeySet'}],interfaces:[weavejs.api.data.IKeyFilter]};
weavejs.api.data.IKeySet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.api.data.IKeySet'}}},methods:function(){return{}}}};goog.provide('weavejs.api.data.IAttributeColumn');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.data.IKeySet');weavejs.api.data.IAttributeColumn=function(){};weavejs.api.data.IAttributeColumn.prototype.getMetadata=function(propertyName){};weavejs.api.data.IAttributeColumn.prototype.getMetadataPropertyNames=function(){};weavejs.api.data.IAttributeColumn.prototype.getValueFromKey=function(key,dataType){};
weavejs.api.data.IAttributeColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'IAttributeColumn',qName:'weavejs.api.data.IAttributeColumn'}],interfaces:[weavejs.api.core.ICallbackCollection,weavejs.api.data.IKeySet]};
weavejs.api.data.IAttributeColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getMetadata':{type:'String',declaredBy:'weavejs.api.data.IAttributeColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.api.data.IAttributeColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.api.data.IAttributeColumn'}}}}};goog.provide('weavejs.api.data.IColumnWrapper');goog.require('weavejs.api.data.IAttributeColumn');weavejs.api.data.IColumnWrapper=function(){};weavejs.api.data.IColumnWrapper.prototype.getInternalColumn=function(){};weavejs.api.data.IColumnWrapper.prototype.FLEXJS_CLASS_INFO={names:[{name:'IColumnWrapper',qName:'weavejs.api.data.IColumnWrapper'}],interfaces:[weavejs.api.data.IAttributeColumn]};
weavejs.api.data.IColumnWrapper.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getInternalColumn':{type:'IAttributeColumn',declaredBy:'weavejs.api.data.IColumnWrapper'}}}}};goog.provide('weavejs.data.column.DynamicColumn');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.api.data.IColumnWrapper');
weavejs.data.column.DynamicColumn=function(columnTypeRestriction){columnTypeRestriction=typeof columnTypeRestriction!=='undefined'?columnTypeRestriction:null;this.d2d_type_key=new weavejs.util.Dictionary2D(true,true);if(columnTypeRestriction==null)columnTypeRestriction=weavejs.api.data.IAttributeColumn;else if(!org.apache.flex.utils.Language.is(columnTypeRestriction.prototype,weavejs.api.data.IAttributeColumn)){weavejs.util.JS.error('DynamicColumn(): columnTypeRestriction does not implement IAttributeColumn:',
columnTypeRestriction);columnTypeRestriction=weavejs.api.data.IAttributeColumn}weavejs.data.column.DynamicColumn.base(this,'constructor',columnTypeRestriction)};goog.inherits(weavejs.data.column.DynamicColumn,weavejs.core.LinkableDynamicObject);weavejs.data.column.DynamicColumn.prototype.getInternalColumn=function(){return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn)};
weavejs.data.column.DynamicColumn.prototype.getMetadata=function(propertyName){if(this.internalObject)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn).getMetadata(propertyName);return null};weavejs.data.column.DynamicColumn.prototype.getMetadataPropertyNames=function(){if(this.internalObject)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn).getMetadataPropertyNames();return[]};
weavejs.data.column.DynamicColumn.prototype.containsKey=function(key){var col=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn);return col?col.containsKey(key):false};weavejs.data.column.DynamicColumn.cache=true;weavejs.data.column.DynamicColumn.prototype.d2d_type_key;weavejs.data.column.DynamicColumn.prototype._cacheCounter=0;
weavejs.data.column.DynamicColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(!dataType)dataType=Array;if(!weavejs.data.column.DynamicColumn.cache){var col=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn);return col?col.getValueFromKey(key,dataType):undefined}if(this.triggerCounter!=this._cacheCounter){this._cacheCounter=this.triggerCounter;this.d2d_type_key=new weavejs.util.Dictionary2D(true,true)}var value=
this.d2d_type_key.get(dataType,key);if(value===undefined){col=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn);if(col)value=col.getValueFromKey(key,dataType);this.d2d_type_key.set(dataType,key,value===undefined?weavejs.data.column.DynamicColumn.UNDEFINED:value)}return value===weavejs.data.column.DynamicColumn.UNDEFINED?undefined:value};weavejs.data.column.DynamicColumn.UNDEFINED={};
Object.defineProperties(weavejs.data.column.DynamicColumn.prototype,{keys:{get:function(){return this.getInternalColumn()?this.getInternalColumn().keys:[]}}});weavejs.data.column.DynamicColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicColumn',qName:'weavejs.data.column.DynamicColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};goog.exportSymbol('weavejs.data.column.DynamicColumn',weavejs.data.column.DynamicColumn);
weavejs.data.column.DynamicColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.DynamicColumn'}}},methods:function(){return{'DynamicColumn':{type:'',declaredBy:'weavejs.data.column.DynamicColumn'},'getInternalColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.column.DynamicColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.DynamicColumn'},'getMetadataPropertyNames':{type:'Array',
declaredBy:'weavejs.data.column.DynamicColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.DynamicColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.DynamicColumn'}}}}};goog.provide('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.data.IColumnWrapper');weavejs.data.column.ExtendedDynamicColumn=function(){this._internalDynamicColumn=Weave.linkableChild(this,weavejs.data.column.DynamicColumn);weavejs.data.column.ExtendedDynamicColumn.base(this,'constructor');Weave.linkableChild(this,weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn))};
goog.inherits(weavejs.data.column.ExtendedDynamicColumn,weavejs.core.CallbackCollection);weavejs.data.column.ExtendedDynamicColumn.prototype.getInternalColumn=function(){return this.internalDynamicColumn.getInternalColumn()};weavejs.data.column.ExtendedDynamicColumn.prototype._internalDynamicColumn;weavejs.data.column.ExtendedDynamicColumn.prototype.getMetadata=function(propertyName){return this.internalDynamicColumn.getMetadata(propertyName)};
weavejs.data.column.ExtendedDynamicColumn.prototype.getMetadataPropertyNames=function(){return this.internalDynamicColumn.getMetadataPropertyNames()};weavejs.data.column.ExtendedDynamicColumn.prototype.containsKey=function(key){return this.internalDynamicColumn.containsKey(key)};weavejs.data.column.ExtendedDynamicColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;return this.internalDynamicColumn.getValueFromKey(key,dataType)};
Object.defineProperties(weavejs.data.column.ExtendedDynamicColumn.prototype,{internalDynamicColumn:{get:function(){return this._internalDynamicColumn}},keys:{get:function(){return this.internalDynamicColumn.keys}}});weavejs.data.column.ExtendedDynamicColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ExtendedDynamicColumn',qName:'weavejs.data.column.ExtendedDynamicColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};goog.exportSymbol('weavejs.data.column.ExtendedDynamicColumn',weavejs.data.column.ExtendedDynamicColumn);
weavejs.data.column.ExtendedDynamicColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'internalDynamicColumn':{type:'DynamicColumn',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'},'keys':{type:'Array',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'}}},methods:function(){return{'ExtendedDynamicColumn':{type:'',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'},'getInternalColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'},
'getMetadata':{type:'String',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.ExtendedDynamicColumn'}}}}};goog.provide('weavejs.core.LinkableString');goog.require('weavejs.core.LinkableVariable');
weavejs.core.LinkableString=function(defaultValue,verifier,defaultValueTriggersCallbacks){defaultValue=typeof defaultValue!=='undefined'?defaultValue:null;verifier=typeof verifier!=='undefined'?verifier:null;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableString.base(this,'constructor',String,verifier,arguments.length?defaultValue:undefined,defaultValueTriggersCallbacks)};
goog.inherits(weavejs.core.LinkableString,weavejs.core.LinkableVariable);weavejs.core.LinkableString.prototype.setSessionState=function(value){weavejs.core.LinkableString.base(this,'setSessionState',value==null?null:String(value))};Object.defineProperties(weavejs.core.LinkableString.prototype,{value:{get:function(){if(this._sessionStateExternal===undefined)return null;return this._sessionStateExternal},set:function(value){this.setSessionState(value)}}});
weavejs.core.LinkableString.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableString',qName:'weavejs.core.LinkableString'}]};goog.exportSymbol('weavejs.core.LinkableString',weavejs.core.LinkableString);
weavejs.core.LinkableString.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'value':{type:'String',declaredBy:'weavejs.core.LinkableString'}}},methods:function(){return{'LinkableString':{type:'',declaredBy:'weavejs.core.LinkableString'},'setSessionState':{type:'void',declaredBy:'weavejs.core.LinkableString'}}}}};goog.provide('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.data.IAttributeColumn');weavejs.data.column.AbstractAttributeColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;weavejs.data.column.AbstractAttributeColumn.base(this,'constructor');if(metadata)this.setMetadata(metadata)};goog.inherits(weavejs.data.column.AbstractAttributeColumn,weavejs.core.CallbackCollection);
weavejs.data.column.AbstractAttributeColumn.prototype._metadata=null;weavejs.data.column.AbstractAttributeColumn.prototype.setMetadata=function(metadata){if(this._metadata!==null)throw new Error('Cannot call setMetadata() if already set');this._metadata=weavejs.data.column.AbstractAttributeColumn.copyValues(metadata);this._metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)};
weavejs.data.column.AbstractAttributeColumn.copyValues=function(object){var copy={};for(var key in object){var value=object[key];if(org.apache.flex.utils.Language.is(value,Array))copy[key]=JSON.stringify(value);else copy[key]=value}return copy};weavejs.data.column.AbstractAttributeColumn.prototype.getMetadata=function(propertyName){var value=null;if(this._metadata)value=this._metadata[propertyName]||null;return value};
weavejs.data.column.AbstractAttributeColumn.prototype.getMetadataPropertyNames=function(){return weavejs.util.JS.objectKeys(this._metadata)};weavejs.data.column.AbstractAttributeColumn.prototype.dataTask;weavejs.data.column.AbstractAttributeColumn.prototype.dataCache;weavejs.data.column.AbstractAttributeColumn.prototype.containsKey=function(key){return this.dataTask.map_key_arrayData.has(key)};
weavejs.data.column.AbstractAttributeColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var array=this.dataTask.map_key_arrayData.get(key);if(!array)return dataType===String?'':undefined;if(!dataType||dataType===Array)return array;var value=this.dataCache.get(dataType,key);if(value===undefined){value=this.generateValue(key,dataType);if(org.apache.flex.utils.Language.is(!value,dataType))throw new Error('generateValue() did not produce a value of the requested type. Expected '+
Weave.className(dataType)+', got '+Weave.className(value));this.dataCache.set(dataType,key,value)}return value};weavejs.data.column.AbstractAttributeColumn.prototype.generateValue=function(key,dataType){return null};Object.defineProperties(weavejs.data.column.AbstractAttributeColumn.prototype,{keys:{get:function(){return this.dataTask.uniqueKeys}}});
weavejs.data.column.AbstractAttributeColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'AbstractAttributeColumn',qName:'weavejs.data.column.AbstractAttributeColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.exportSymbol('weavejs.data.column.AbstractAttributeColumn',weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.AbstractAttributeColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.AbstractAttributeColumn'}}},methods:function(){return{'AbstractAttributeColumn':{type:'',declaredBy:'weavejs.data.column.AbstractAttributeColumn'},'setMetadata':{type:'void',declaredBy:'weavejs.data.column.AbstractAttributeColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.AbstractAttributeColumn'},
'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.column.AbstractAttributeColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.AbstractAttributeColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.AbstractAttributeColumn'}}}}};goog.provide('weavejs.data.column.CSVColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IAttributeColumn');
weavejs.data.column.CSVColumn=function(){this.title=Weave.linkableChild(this,weavejs.core.LinkableString);this.data=Weave.linkableChild(this,weavejs.core.LinkableVariable,org.apache.flex.utils.Language.closure(this.invalidate,this,'invalidate'));this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString,org.apache.flex.utils.Language.closure(this.invalidate,this,'invalidate'));this.numericMode=Weave.linkableChild(this,weavejs.core.LinkableBoolean,org.apache.flex.utils.Language.closure(this.invalidate,
this,'invalidate'));this._keys=[];this._stringValues=[];this._numberValues=[];weavejs.data.column.CSVColumn.base(this,'constructor');this.numericMode.value=false};goog.inherits(weavejs.data.column.CSVColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.CSVColumn.prototype.getMetadata=function(propertyName){switch(propertyName){case weavejs.api.data.ColumnMetadata.TITLE:return this.title.value;case weavejs.api.data.ColumnMetadata.KEY_TYPE:return this.keyType.value;case weavejs.api.data.ColumnMetadata.DATA_TYPE:return this.numericMode.value?weavejs.api.data.DataType.NUMBER:weavejs.api.data.DataType.STRING}return weavejs.data.column.CSVColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.CSVColumn.prototype.title;weavejs.data.column.CSVColumn.prototype.data;
weavejs.data.column.CSVColumn.prototype.setDataTable=function(table){var stringTable=[];for(var r=0;r<table.length;r++){var row=org.apache.flex.utils.Language.as(table[r],Array).concat();for(var c=0;c<row.length;c++)row[c]=String(row[c]);stringTable[r]=row}this.data.setSessionState(stringTable)};weavejs.data.column.CSVColumn.prototype.keyType;weavejs.data.column.CSVColumn.prototype.numericMode;weavejs.data.column.CSVColumn.prototype.map_key_index=null;weavejs.data.column.CSVColumn.prototype._keys;
weavejs.data.column.CSVColumn.prototype._stringValues;weavejs.data.column.CSVColumn.prototype._numberValues;weavejs.data.column.CSVColumn.prototype.dirty=true;weavejs.data.column.CSVColumn.prototype.invalidate=function(){this.dirty=true};
weavejs.data.column.CSVColumn.prototype.validate=function(){this.map_key_index=new weavejs.util.JS.Map;this._keys.length=0;this._stringValues.length=0;this._numberValues.length=0;var key;var value;var table=org.apache.flex.utils.Language.as(this.data.getSessionState(),Array)||[];for(var i=0;i<table.length;i++){var row=org.apache.flex.utils.Language.as(table[i],Array);if(row==null||row.length==0)continue;key=weavejs.WeaveAPI.QKeyManager.getQKey(this.keyType.value,String(row[0]));value=String(row.length>
1?row[1]:'');this.map_key_index.set(key,this._keys.length);this._keys.push(key);this._stringValues.push(value);try{this._numberValues.push(Number(value))}catch(e){this._numberValues.push(NaN)}}this.dirty=false};weavejs.data.column.CSVColumn.prototype.containsKey=function(key){if(this.dirty)this.validate();return this.map_key_index.has(key)};
weavejs.data.column.CSVColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this.dirty)this.validate();var keyIndex=this.map_key_index.get(key);if(dataType==Boolean)return!isNaN(keyIndex);if(dataType==Number){if(isNaN(keyIndex))return NaN;return this._numberValues[keyIndex]}if(dataType==String){if(isNaN(keyIndex))return'';return this._stringValues[keyIndex]}if(isNaN(keyIndex))return this.numericMode.value?NaN:'';if(this.numericMode.value)return this._numberValues[keyIndex];
return this._stringValues[keyIndex]};Object.defineProperties(weavejs.data.column.CSVColumn.prototype,{csvData:{set:function(value){this.data.setSessionState(weavejs.WeaveAPI.CSVParser.parseCSV(value))}},keys:{get:function(){if(this.dirty)this.validate();return this._keys}}});weavejs.data.column.CSVColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'CSVColumn',qName:'weavejs.data.column.CSVColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.exportSymbol('weavejs.data.column.CSVColumn',weavejs.data.column.CSVColumn);
weavejs.data.column.CSVColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'title':{type:'LinkableString'},'data':{type:'LinkableVariable'},'keyType':{type:'LinkableString'},'numericMode':{type:'LinkableBoolean'}}},accessors:function(){return{'csvData':{type:'String',declaredBy:'weavejs.data.column.CSVColumn',metadata:function(){return[]}},'keys':{type:'Array',declaredBy:'weavejs.data.column.CSVColumn'}}},methods:function(){return{'CSVColumn':{type:'',declaredBy:'weavejs.data.column.CSVColumn'},
'getMetadata':{type:'String',declaredBy:'weavejs.data.column.CSVColumn'},'setDataTable':{type:'void',declaredBy:'weavejs.data.column.CSVColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.CSVColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.CSVColumn'}}}}};goog.provide('weavejs.api.core.IChildListCallbackInterface');goog.require('weavejs.api.core.ICallbackCollection');weavejs.api.core.IChildListCallbackInterface=function(){};weavejs.api.core.IChildListCallbackInterface.prototype.lastObjectAdded;weavejs.api.core.IChildListCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'IChildListCallbackInterface',qName:'weavejs.api.core.IChildListCallbackInterface'}],interfaces:[weavejs.api.core.ICallbackCollection]};
weavejs.api.core.IChildListCallbackInterface.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'lastObjectAdded':{type:'ILinkableObject',declaredBy:'weavejs.api.core.IChildListCallbackInterface'},'lastNameAdded':{type:'String',declaredBy:'weavejs.api.core.IChildListCallbackInterface'},'lastObjectRemoved':{type:'ILinkableObject',declaredBy:'weavejs.api.core.IChildListCallbackInterface'},'lastNameRemoved':{type:'String',declaredBy:'weavejs.api.core.IChildListCallbackInterface'}}},
methods:function(){return{}}}};goog.provide('weavejs.core.ChildListCallbackInterface');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.core.IChildListCallbackInterface');weavejs.core.ChildListCallbackInterface=function(){weavejs.core.ChildListCallbackInterface.base(this,'constructor',org.apache.flex.utils.Language.closure(this.setCallbackVariables,this,'setCallbackVariables'))};goog.inherits(weavejs.core.ChildListCallbackInterface,weavejs.core.CallbackCollection);
weavejs.core.ChildListCallbackInterface.prototype._lastNameAdded=null;weavejs.core.ChildListCallbackInterface.prototype._lastObjectAdded=null;weavejs.core.ChildListCallbackInterface.prototype._lastNameRemoved=null;weavejs.core.ChildListCallbackInterface.prototype._lastObjectRemoved=null;
weavejs.core.ChildListCallbackInterface.prototype.setCallbackVariables=function(name,objectAdded,objectRemoved){name=typeof name!=='undefined'?name:null;objectAdded=typeof objectAdded!=='undefined'?objectAdded:null;objectRemoved=typeof objectRemoved!=='undefined'?objectRemoved:null;this._lastNameAdded=objectAdded?name:null;this._lastObjectAdded=objectAdded;this._lastNameRemoved=objectRemoved?name:null;this._lastObjectRemoved=objectRemoved};
weavejs.core.ChildListCallbackInterface.prototype.runCallbacks=function(name,objectAdded,objectRemoved){var _name=this._lastNameAdded||this._lastNameRemoved;var _added=this._lastObjectAdded;var _removed=this._lastObjectRemoved;this._runCallbacksImmediately(name,objectAdded,objectRemoved);this.setCallbackVariables(_name,_added,_removed)};
Object.defineProperties(weavejs.core.ChildListCallbackInterface.prototype,{lastNameAdded:{get:function(){return this._lastNameAdded}},lastObjectAdded:{get:function(){return this._lastObjectAdded}},lastNameRemoved:{get:function(){return this._lastNameRemoved}},lastObjectRemoved:{get:function(){return this._lastObjectRemoved}}});weavejs.core.ChildListCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'ChildListCallbackInterface',qName:'weavejs.core.ChildListCallbackInterface'}],interfaces:[weavejs.api.core.IChildListCallbackInterface]};
goog.exportSymbol('weavejs.core.ChildListCallbackInterface',weavejs.core.ChildListCallbackInterface);
weavejs.core.ChildListCallbackInterface.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'lastNameAdded':{type:'String',declaredBy:'weavejs.core.ChildListCallbackInterface'},'lastObjectAdded':{type:'ILinkableObject',declaredBy:'weavejs.core.ChildListCallbackInterface'},'lastNameRemoved':{type:'String',declaredBy:'weavejs.core.ChildListCallbackInterface'},'lastObjectRemoved':{type:'ILinkableObject',declaredBy:'weavejs.core.ChildListCallbackInterface'}}},
methods:function(){return{'ChildListCallbackInterface':{type:'',declaredBy:'weavejs.core.ChildListCallbackInterface'},'runCallbacks':{type:'void',declaredBy:'weavejs.core.ChildListCallbackInterface'}}},metadata:function(){return[]}}};goog.provide('weavejs.core.LinkableHashMap');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.core.ChildListCallbackInterface');goog.require('weavejs.api.core.ILinkableHashMap');
weavejs.core.LinkableHashMap=function(typeRestriction){typeRestriction=typeof typeRestriction!=='undefined'?typeRestriction:null;this._childListCallbacks=Weave.linkableChild(this,weavejs.core.ChildListCallbackInterface);this._orderedNames=[];this._nameToObjectMap={};this._map_objectToNameMap=new weavejs.util.JS.WeakMap;this._nameIsLocked={};this._previousNameMap={};weavejs.core.LinkableHashMap.base(this,'constructor');this._typeRestriction=typeRestriction};
goog.inherits(weavejs.core.LinkableHashMap,weavejs.core.CallbackCollection);weavejs.core.LinkableHashMap.prototype._childListCallbacks;weavejs.core.LinkableHashMap.prototype._orderedNames;weavejs.core.LinkableHashMap.prototype._nameToObjectMap;weavejs.core.LinkableHashMap.prototype._map_objectToNameMap;weavejs.core.LinkableHashMap.prototype._nameIsLocked;weavejs.core.LinkableHashMap.prototype._previousNameMap;weavejs.core.LinkableHashMap.prototype._typeRestriction;
weavejs.core.LinkableHashMap.prototype.getNames=function(filter,filterIncludesPlaceholders){filter=typeof filter!=='undefined'?filter:null;filterIncludesPlaceholders=typeof filterIncludesPlaceholders!=='undefined'?filterIncludesPlaceholders:false;return this.getList(false,filter,filterIncludesPlaceholders)};
weavejs.core.LinkableHashMap.prototype.getObjects=function(filter,filterIncludesPlaceholders){filter=typeof filter!=='undefined'?filter:null;filterIncludesPlaceholders=typeof filterIncludesPlaceholders!=='undefined'?filterIncludesPlaceholders:false;return this.getList(true,filter,filterIncludesPlaceholders)};
weavejs.core.LinkableHashMap.prototype.toObject=function(filter,filterIncludesPlaceholders){filter=typeof filter!=='undefined'?filter:null;filterIncludesPlaceholders=typeof filterIncludesPlaceholders!=='undefined'?filterIncludesPlaceholders:false;var obj={};var foreachiter0_target=this.getList(false,filter,filterIncludesPlaceholders);for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];obj[name]=this._nameToObjectMap[name]}return obj};
weavejs.core.LinkableHashMap.prototype.toMap=function(filter,filterIncludesPlaceholders){filter=typeof filter!=='undefined'?filter:null;filterIncludesPlaceholders=typeof filterIncludesPlaceholders!=='undefined'?filterIncludesPlaceholders:false;var map=new weavejs.util.JS.Map;var foreachiter1_target=this.getList(false,filter,filterIncludesPlaceholders);for(var foreachiter1 in foreachiter1_target){var name=foreachiter1_target[foreachiter1];map.set(name,this._nameToObjectMap[name])}return map};
weavejs.core.LinkableHashMap.prototype.getList=function(listObjects,filter,filterIncludesPlaceholders){if(org.apache.flex.utils.Language.is(filter,String))filter=Weave.getDefinition(String(filter),true);var result=[];for(var i=0;i<this._orderedNames.length;i++){var name=this._orderedNames[i];var object=this._nameToObjectMap[name];if(!filter)result.push(listObjects?object:name);else if(org.apache.flex.utils.Language.is(object,filter))result.push(listObjects?object:name);else if(filterIncludesPlaceholders){var placeholder=
org.apache.flex.utils.Language.as(object,weavejs.core.LinkablePlaceholder);if(!placeholder)continue;var classDef=placeholder.getClass();if(classDef===filter||org.apache.flex.utils.Language.is(classDef.prototype,filter))result.push(listObjects?object:name)}}return result};weavejs.core.LinkableHashMap.prototype.getObject=function(name){return this._nameToObjectMap[name]};
weavejs.core.LinkableHashMap.prototype.setObject=function(name,object,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;if(this._nameIsLocked[name]||this._nameToObjectMap[name]===object)return;var className=Weave.className(object);if(!className)throw new Error('Cannot get class name from object');if(Weave.getDefinition(className)!=object['constructor'])throw new Error('The Class of the object is not registered');if(Weave.getOwner(object))throw new Error('LinkableHashMap cannot accept an object that is already registered with an owner.');
if(object){if(!name)name=this.generateUniqueName(className.split('::').pop().split('.').pop());this.delayCallbacks();Weave.linkableChild(this,object);var oldObject=this._nameToObjectMap[name];this._nameToObjectMap[name]=object;this._map_objectToNameMap.set(object,name);if(this._orderedNames.indexOf(name)<0)this._orderedNames.push(name);if(lockObject)this._nameIsLocked[name]=true;this._previousNameMap[name]=true;this._childListCallbacks.runCallbacks(name,object,oldObject);Weave.dispose(oldObject);
this.resumeCallbacks()}else this.removeObject(name)};weavejs.core.LinkableHashMap.prototype.getName=function(object){return this._map_objectToNameMap.get(object)};
weavejs.core.LinkableHashMap.prototype.setNameOrder=function(newOrder){var changeDetected=false;var name;var i;var originalNameCount=this._orderedNames.length;var haveSeen={};for(i=0;i<newOrder.length;i++){name=newOrder[i];if(this._nameToObjectMap[name]==undefined||haveSeen[name]!=undefined)continue;haveSeen[name]=true;this._orderedNames.push(name)}var appendedCount=this._orderedNames.length-originalNameCount;for(i=0;i<appendedCount;i++){var newIndex=originalNameCount+i;var oldIndex=this._orderedNames.indexOf(this._orderedNames[newIndex]);
if(newIndex-oldIndex!=appendedCount)changeDetected=true;this._orderedNames[oldIndex]=null}var out=0;for(i=0;i<this._orderedNames.length;i++)if(this._orderedNames[i]!=null)this._orderedNames[out++]=this._orderedNames[i];this._orderedNames.length=out;if(changeDetected)this._childListCallbacks.runCallbacks(null,null,null)};
weavejs.core.LinkableHashMap.prototype.requestObject=function(name,classDef,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;if(org.apache.flex.utils.Language.is(classDef,String))classDef=Weave.getDefinition(String(classDef),true);var className=classDef?Weave.className(classDef):null;var result=this.initObjectByClassName(name,className,lockObject);return classDef?org.apache.flex.utils.Language.as(result,classDef):null};
weavejs.core.LinkableHashMap.prototype.requestObjectCopy=function(name,objectToCopy){if(objectToCopy==null){this.removeObject(name);return null}this.delayCallbacks();var classDef=weavejs.core.LinkablePlaceholder.getClass(objectToCopy);var sessionState=Weave.getState(objectToCopy);if(name==this.getName(objectToCopy))this.removeObject(name);this.requestObject(name,classDef,false);var object=this.getObject(name);if(classDef==weavejs.core.LinkablePlaceholder.getClass(object))Weave.setState(object,sessionState);
this.resumeCallbacks();return object};weavejs.core.LinkableHashMap.prototype.renameObject=function(oldName,newName){if(oldName!=newName){this.delayCallbacks();var newNameOrder=this._orderedNames.concat();var index=newNameOrder.indexOf(oldName);if(index>=0)newNameOrder.splice(index,1,newName);this.requestObjectCopy(newName,this.getObject(oldName));this.removeObject(oldName);this.setNameOrder(newNameOrder);this.resumeCallbacks()}return this.getObject(newName)};
weavejs.core.LinkableHashMap.prototype.initObjectByClassName=function(name,className,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;if(className){var classDef=Weave.getDefinition(className);if(Weave.isLinkable(classDef)&&(this._typeRestriction==null||classDef===this._typeRestriction||org.apache.flex.utils.Language.is(classDef.prototype,this._typeRestriction))){if(!name){var baseName=className.split('::').pop().split('.').pop();if(name=='')baseName=weavejs.WeaveAPI.ClassRegistry.getDisplayName(classDef)||
baseName;name=this.generateUniqueName(baseName)}var object=this._nameToObjectMap[name];if(classDef!=weavejs.core.LinkablePlaceholder.getClass(object))this.createAndSaveNewObject(name,classDef,lockObject);else if(lockObject)this.lockObject(name)}else this.removeObject(name)}else this.removeObject(name);return this._nameToObjectMap[name||'']};
weavejs.core.LinkableHashMap.prototype.createAndSaveNewObject=function(name,classDef,lockObject){if(this._nameIsLocked[name])return;try{this.delayCallbacks();this.removeObject(name);var object;if(Weave.isAsyncClass(classDef))object=new weavejs.core.LinkablePlaceholder(classDef);else object=new classDef;Weave.linkableChild(this,object);this._nameToObjectMap[name]=object;this._map_objectToNameMap.set(object,name);this._orderedNames.push(name);this._previousNameMap[name]=true;if(lockObject)this.lockObject(name);
this._childListCallbacks.runCallbacks(name,object,null)}finally{this.resumeCallbacks()}};weavejs.core.LinkableHashMap.prototype.lockObject=function(name){if(name!=null&&this._nameToObjectMap[name]!=null)this._nameIsLocked[name]=true};weavejs.core.LinkableHashMap.prototype.objectIsLocked=function(name){return this._nameIsLocked[name]?true:false};
weavejs.core.LinkableHashMap.prototype.removeObject=function(name){if(!name||this._nameIsLocked[name])return;var object=this._nameToObjectMap[name];if(object==null)return;this.delayCallbacks();delete this._nameToObjectMap[name];this._map_objectToNameMap['delete'](object);var index=this._orderedNames.indexOf(name);this._orderedNames.splice(index,1);this._childListCallbacks.runCallbacks(name,null,object);Weave.dispose(object);this.resumeCallbacks()};
weavejs.core.LinkableHashMap.prototype.removeAllObjects=function(){this.delayCallbacks();var names=this._orderedNames.concat();var foreachiter2_target=names;for(var foreachiter2 in foreachiter2_target){var name=foreachiter2_target[foreachiter2];this.removeObject(name)}this.resumeCallbacks()};
weavejs.core.LinkableHashMap.prototype.dispose=function(){weavejs.core.LinkableHashMap.base(this,'dispose');this.removeAllObjects();var names=this._orderedNames.concat();var foreachiter3_target=names;for(var foreachiter3 in foreachiter3_target){var name=foreachiter3_target[foreachiter3];this._nameIsLocked[name]=undefined;this.removeObject(name)}};
weavejs.core.LinkableHashMap.prototype.generateUniqueName=function(baseName){var count=1;var name=baseName;while(this._previousNameMap[name]!=undefined)name=baseName+ ++count;this._previousNameMap[name]=true;return name};
weavejs.core.LinkableHashMap.prototype.getSessionState=function(){var result=new Array(this._orderedNames.length);for(var i=0;i<this._orderedNames.length;i++){var name=this._orderedNames[i];var object=this._nameToObjectMap[name];result[i]=weavejs.api.core.DynamicState.create(name,Weave.className(weavejs.core.LinkablePlaceholder.getClass(object)),Weave.getState(object))}return result};
weavejs.core.LinkableHashMap.prototype.setSessionState=function(newStateArray,removeMissingDynamicObjects){if(newStateArray==null)return;this.delayCallbacks();var i;var delayed=[];var callbacks;var objectName;var className;var typedState;var remainingObjects=removeMissingDynamicObjects?{}:null;var newObjects={};var newNameOrder=[];if(newStateArray!=null){var foreachiter4_target=this._orderedNames;for(var foreachiter4 in foreachiter4_target){objectName=foreachiter4_target[foreachiter4];callbacks=Weave.getCallbacks(this._nameToObjectMap[objectName]);
delayed.push(callbacks);callbacks.delayCallbacks()}for(i=0;i<newStateArray.length;i++){typedState=newStateArray[i];if(!weavejs.api.core.DynamicState.isDynamicState(typedState,true))continue;objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];className=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(objectName==null)continue;if(className==null)continue;if(this._nameToObjectMap[objectName]!=this.initObjectByClassName(objectName,className))newObjects[objectName]=true}var foreachiter5_target=
this._orderedNames;for(var foreachiter5 in foreachiter5_target){objectName=foreachiter5_target[foreachiter5];callbacks=Weave.getCallbacks(this._nameToObjectMap[objectName]);delayed.push(callbacks);callbacks.delayCallbacks()}for(i=0;i<newStateArray.length;i++){typedState=newStateArray[i];if(typeof typedState==='string'){objectName=String(typedState);if(removeMissingDynamicObjects)remainingObjects[objectName]=true;newNameOrder.push(objectName);continue}if(!weavejs.api.core.DynamicState.isDynamicState(typedState,
true))continue;objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];if(objectName==null)continue;var object=this._nameToObjectMap[objectName];if(object==null)continue;Weave.setState(object,typedState[weavejs.api.core.DynamicState.SESSION_STATE],newObjects[objectName]||removeMissingDynamicObjects);if(removeMissingDynamicObjects)remainingObjects[objectName]=true;newNameOrder.push(objectName)}}if(removeMissingDynamicObjects){var names=this._orderedNames.concat();var foreachiter6_target=names;
for(var foreachiter6 in foreachiter6_target){objectName=foreachiter6_target[foreachiter6];if(remainingObjects[objectName]!==true)this.removeObject(objectName)}}this.setNameOrder(newNameOrder);var foreachiter7_target=delayed;for(var foreachiter7 in foreachiter7_target){callbacks=foreachiter7_target[foreachiter7];if(!Weave.wasDisposed(callbacks))callbacks.resumeCallbacks()}this.resumeCallbacks()};
Object.defineProperties(weavejs.core.LinkableHashMap.prototype,{typeRestriction:{get:function(){return this._typeRestriction}},childListCallbacks:{get:function(){return this._childListCallbacks}}});weavejs.core.LinkableHashMap.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableHashMap',qName:'weavejs.core.LinkableHashMap'}],interfaces:[weavejs.api.core.ILinkableHashMap]};goog.exportSymbol('weavejs.core.LinkableHashMap',weavejs.core.LinkableHashMap);
weavejs.core.LinkableHashMap.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'typeRestriction':{type:'Class',declaredBy:'weavejs.core.LinkableHashMap'},'childListCallbacks':{type:'IChildListCallbackInterface',declaredBy:'weavejs.core.LinkableHashMap'}}},methods:function(){return{'LinkableHashMap':{type:'',declaredBy:'weavejs.core.LinkableHashMap'},'getNames':{type:'Array',declaredBy:'weavejs.core.LinkableHashMap'},'getObjects':{type:'Array',
declaredBy:'weavejs.core.LinkableHashMap'},'toObject':{type:'Object',declaredBy:'weavejs.core.LinkableHashMap'},'toMap':{type:'Object',declaredBy:'weavejs.core.LinkableHashMap'},'getObject':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableHashMap'},'setObject':{type:'void',declaredBy:'weavejs.core.LinkableHashMap'},'getName':{type:'String',declaredBy:'weavejs.core.LinkableHashMap'},'setNameOrder':{type:'void',declaredBy:'weavejs.core.LinkableHashMap'},'requestObject':{type:'*',declaredBy:'weavejs.core.LinkableHashMap'},
'requestObjectCopy':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableHashMap'},'renameObject':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableHashMap'},'objectIsLocked':{type:'Boolean',declaredBy:'weavejs.core.LinkableHashMap'},'removeObject':{type:'void',declaredBy:'weavejs.core.LinkableHashMap'},'removeAllObjects':{type:'void',declaredBy:'weavejs.core.LinkableHashMap'},'dispose':{type:'void',declaredBy:'weavejs.core.LinkableHashMap'},'generateUniqueName':{type:'String',declaredBy:'weavejs.core.LinkableHashMap'},
'getSessionState':{type:'Array',declaredBy:'weavejs.core.LinkableHashMap'},'setSessionState':{type:'void',declaredBy:'weavejs.core.LinkableHashMap'}}}}};goog.provide('weavejs.util.DebugUtils');weavejs.util.DebugUtils=function(){};weavejs.util.DebugUtils.map_id_obj=new weavejs.util.JS.Map;weavejs.util.DebugUtils.map_obj_id=new weavejs.util.JS.Map;weavejs.util.DebugUtils._nextId=0;weavejs.util.DebugUtils.debugTrace=function(args){args=Array.prototype.slice.call(arguments,0);for(var i=0;i<args.length;i++)args[i]=weavejs.util.DebugUtils.debugId(args[i]);weavejs.util.JS.log.apply(weavejs.util.JS,args)};
weavejs.util.DebugUtils.debugId=function(object){if(weavejs.util.JS.isPrimitive(object))return String(object);var idString=weavejs.util.DebugUtils.map_obj_id.get(object);if(!idString){var idNumber=weavejs.util.DebugUtils._nextId++;var className=Weave.className(object).split('.').pop();idString=className+'#'+idNumber;weavejs.util.DebugUtils.map_obj_id.set(object,idString);weavejs.util.DebugUtils.map_id_obj.set(idNumber,object);weavejs.util.DebugUtils.map_id_obj.set(idString,object)}return idString};
weavejs.util.DebugUtils.debugLookup=function(debugId){debugId=typeof debugId!=='undefined'?debugId:undefined;if(debugId===undefined)return weavejs.util.DebugUtils.getAllDebugIds();return weavejs.util.DebugUtils.map_id_obj.get(debugId)};weavejs.util.DebugUtils.getAllDebugIds=function(){var ids=new Array(weavejs.util.DebugUtils._nextId);for(var i=0;i<weavejs.util.DebugUtils._nextId;i++)ids[i]=weavejs.util.DebugUtils.map_obj_id.get(weavejs.util.DebugUtils.map_id_obj.get(i));return ids};
weavejs.util.DebugUtils.resetDebugIds=function(){weavejs.util.DebugUtils.map_id_obj=new weavejs.util.JS.Map;weavejs.util.DebugUtils.map_obj_id=new weavejs.util.JS.Map;weavejs.util.DebugUtils._nextId=0};weavejs.util.DebugUtils.map_target_callback=new weavejs.util.JS.WeakMap;
weavejs.util.DebugUtils.watch=function(target,callbackReturnsString){target=typeof target!=='undefined'?target:null;callbackReturnsString=typeof callbackReturnsString!=='undefined'?callbackReturnsString:null;var __localFn0__=function(){var str='';var path=Weave.findPath(Weave.getRoot(target),target)||[];if(path.length)str+=' '+JSON.stringify(path.pop());if(callbackReturnsString!=null)str+=': '+callbackReturnsString.call(target,target);weavejs.util.DebugUtils.debugTrace(target,str)};if(!target){weavejs.util.JS.log('Usage: watch(target, optional_callbackReturnsString)');
return}weavejs.util.DebugUtils.unwatch(target);var callback=__localFn0__;weavejs.util.DebugUtils.map_target_callback.set(target,callback);Weave.getCallbacks(target).addImmediateCallback(target,callback)};
weavejs.util.DebugUtils.watchState=function(target,indent){target=typeof target!=='undefined'?target:null;indent=typeof indent!=='undefined'?indent:null;var __localFn0__=function(object){return Weave.stringify(Weave.getState(object),null,indent)};if(!target){weavejs.util.JS.log('Usage: watchState(target, optional_indent)');return}weavejs.util.DebugUtils.watch(target,__localFn0__)};
weavejs.util.DebugUtils.unwatch=function(target){var callback=weavejs.util.DebugUtils.map_target_callback.get(target);weavejs.util.DebugUtils.map_target_callback['delete'](target);Weave.getCallbacks(target).removeCallback(target,callback)};
weavejs.util.DebugUtils.flattenSessionState=function(state,pathPrefix,output){pathPrefix=typeof pathPrefix!=='undefined'?pathPrefix:null;output=typeof output!=='undefined'?output:null;if(!pathPrefix)pathPrefix=[];if(!output)output=[];if(weavejs.api.core.DynamicState.isDynamicStateArray(state)){var names=[];var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){var obj=foreachiter0_target[foreachiter0];if(weavejs.api.core.DynamicState.isDynamicState(obj)){var objectName=obj[weavejs.api.core.DynamicState.OBJECT_NAME];
var className=obj[weavejs.api.core.DynamicState.CLASS_NAME];var sessionState=obj[weavejs.api.core.DynamicState.SESSION_STATE];pathPrefix.push(objectName);if(className)output.push([pathPrefix.concat('class'),className]);weavejs.util.DebugUtils.flattenSessionState(sessionState,pathPrefix,output);pathPrefix.pop();if(objectName)names.push(objectName)}else names.push(obj)}if(names.length)output.push([pathPrefix.concat(),names])}else if(org.apache.flex.utils.Language.is(state,Array))output.push([pathPrefix.concat(),
state]);else if(typeof state==='object'&&state!==null)for(var key in state){pathPrefix.push(key);weavejs.util.DebugUtils.flattenSessionState(state[key],pathPrefix,output);pathPrefix.pop()}else output.push([pathPrefix.concat(),state]);return output};
weavejs.util.DebugUtils.traverseStatePath=function(state,path){try{outerLoop:for(var i in path){var property=path[i];if(weavejs.api.core.DynamicState.isDynamicStateArray(state))if(org.apache.flex.utils.Language.is(property,Number))state=state[property][weavejs.api.core.DynamicState.SESSION_STATE];else{var foreachiter1_target=state;for(var foreachiter1 in foreachiter1_target){var obj=foreachiter1_target[foreachiter1];if(obj[weavejs.api.core.DynamicState.OBJECT_NAME]==property){state=obj[weavejs.api.core.DynamicState.SESSION_STATE];
continue outerLoop}}return undefined}else state=state[property]}return state}catch(e){return undefined}};
weavejs.util.DebugUtils.replaceUnknownObjectsInState=function(stateToModify,className){className=typeof className!=='undefined'?className:null;if(weavejs.api.core.DynamicState.isDynamicStateArray(stateToModify)){var foreachiter2_target=stateToModify;for(var foreachiter2 in foreachiter2_target){var obj=foreachiter2_target[foreachiter2];if(!weavejs.api.core.DynamicState.isDynamicState(obj))continue;className=obj[weavejs.api.core.DynamicState.CLASS_NAME];var classDef=Weave.getDefinition(className);if(!classDef){classDef=
Weave.getDefinition('LinkableHashMap');obj[weavejs.api.core.DynamicState.CLASS_NAME]='LinkableHashMap'}if(org.apache.flex.utils.Language.is(classDef.prototype,weavejs.api.core.ILinkableCompositeObject))obj[weavejs.api.core.DynamicState.SESSION_STATE]=weavejs.util.DebugUtils.replaceUnknownObjectsInState(obj[weavejs.api.core.DynamicState.SESSION_STATE],className)}}else if(!weavejs.util.JS.isPrimitive(stateToModify)){var newState=[];if(className)newState.push(weavejs.api.core.DynamicState.create('class',
'LinkableString',className));for(var key in stateToModify){var value=stateToModify[key];var type=weavejs.util.JS.isPrimitive(value)?'LinkableVariable':'LinkableHashMap';newState.push(weavejs.api.core.DynamicState.create(key,type,weavejs.util.DebugUtils.replaceUnknownObjectsInState(value)))}stateToModify=newState}return stateToModify};weavejs.util.DebugUtils.shiftKey=function(reactInstance){return Weave.getDefinition('MouseUtils').forInstance(reactInstance).mouseEvent.shiftKey};
weavejs.util.DebugUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'DebugUtils',qName:'weavejs.util.DebugUtils'}]};goog.exportSymbol('weavejs.util.DebugUtils',weavejs.util.DebugUtils);weavejs.util.DebugUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.util.AsyncSort');goog.require('weavejs.util.DebugUtils');goog.require('weavejs.api.core.ILinkableObject');weavejs.util.AsyncSort=function(){};weavejs.util.AsyncSort.debug=false;weavejs.util.AsyncSort._immediateSorter;
weavejs.util.AsyncSort.sortImmediately=function(array,compareFunction){compareFunction=typeof compareFunction!=='undefined'?compareFunction:null;if(!weavejs.util.AsyncSort._immediateSorter){weavejs.util.AsyncSort._immediateSorter=new weavejs.util.AsyncSort;weavejs.util.AsyncSort._immediateSorter._immediately=true}var sorter=weavejs.util.AsyncSort._immediateSorter;weavejs.util.AsyncSort._immediateSorter=null;sorter.beginSort(array,compareFunction);weavejs.util.AsyncSort._immediateSorter=sorter};
weavejs.util.AsyncSort.compareCaseInsensitive=function(a,b){return weavejs.util.StandardLib.stringCompare(a,b,true)};
weavejs.util.AsyncSort.primitiveCompare=function(a,b){if(a===b)return 0;if(a==null)return 1;if(b==null)return-1;var typeA=typeof a;var typeB=typeof b;if(typeA!=typeB)return weavejs.util.StandardLib.stringCompare(typeA,typeB);if(typeA=='boolean')return weavejs.util.StandardLib.numericCompare(Number(a),Number(b));if(typeA=='number')return weavejs.util.StandardLib.numericCompare(org.apache.flex.utils.Language.as(a,Number),org.apache.flex.utils.Language.as(b,Number));if(typeA=='string')return weavejs.util.StandardLib.stringCompare(org.apache.flex.utils.Language.as(a,
String),org.apache.flex.utils.Language.as(b,String));if(org.apache.flex.utils.Language.is(a,Date)&&org.apache.flex.utils.Language.is(b,Date))return weavejs.util.StandardLib.dateCompare(org.apache.flex.utils.Language.as(a,Date),org.apache.flex.utils.Language.as(b,Date));return 1};weavejs.util.AsyncSort.prototype.original;weavejs.util.AsyncSort.prototype.source;weavejs.util.AsyncSort.prototype.destination;weavejs.util.AsyncSort.prototype.compare;weavejs.util.AsyncSort.prototype.length;weavejs.util.AsyncSort.prototype.subArraySize;
weavejs.util.AsyncSort.prototype.middle;weavejs.util.AsyncSort.prototype.end;weavejs.util.AsyncSort.prototype.iLeft;weavejs.util.AsyncSort.prototype.iRight;weavejs.util.AsyncSort.prototype.iMerged;weavejs.util.AsyncSort.prototype.elapsed;weavejs.util.AsyncSort.prototype._immediately=false;
weavejs.util.AsyncSort.prototype.beginSort=function(arrayToSort,compareFunction){compareFunction=typeof compareFunction!=='undefined'?compareFunction:null;this.compare=compareFunction||weavejs.util.AsyncSort.primitiveCompare;this.original=arrayToSort||[];this.source=this.original;this.length=this.original.length;var Type=org.apache.flex.utils.Language.as(this.source,Object).constructor;this.destination=new Type;this.destination.length=this.length;this.subArraySize=1;this.iLeft=0;this.iRight=0;this.middle=
0;this.end=0;this.elapsed=0;if(this._immediately){this.iterate(Number.MAX_VALUE);this.done()}else weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.done,this,'done'),Weave.lang('Sorting {0} items',this.original.length))};
weavejs.util.AsyncSort.prototype.abort=function(){this.compare=null;this.source=this.original=this.destination=null;this.length=this.subArraySize=this.iLeft=this.iRight=this.middle=this.end=this.elapsed=0};
weavejs.util.AsyncSort.prototype.iterate=function(stopTime){var time=weavejs.util.JS.now();while(weavejs.util.JS.now()<stopTime)if(this.iLeft<this.middle)if(this.iRight<this.end&&this.compare(this.source[this.iRight],this.source[this.iLeft])<0)this.destination[this.iMerged++]=this.source[this.iRight++];else this.destination[this.iMerged++]=this.source[this.iLeft++];else if(this.iRight<this.end)this.destination[this.iMerged++]=this.source[this.iRight++];else if(this.end<this.length){var start=this.end;
this.middle=Math.min(start+this.subArraySize,this.length);this.end=Math.min(this.middle+this.subArraySize,this.length);this.iLeft=start;this.iRight=this.middle;this.iMerged=start}else{var merged=this.destination;this.destination=this.source;this.source=merged;this.end=0;this.subArraySize*=2;if(this.subArraySize>=this.length)break}this.elapsed+=weavejs.util.JS.now()-time;if(this.subArraySize>=this.length)return 1;return this.subArraySize/this.length};
weavejs.util.AsyncSort.prototype.done=function(){if(this.source!=this.original){var i=this.length;while(i--)this.original[i]=this.source[i]}this.source=null;this.destination=null;if(weavejs.util.AsyncSort.debug&&this.elapsed>0)weavejs.util.DebugUtils.debugTrace(this,this.result.length,'in',this.elapsed/1E3,'seconds');if(!this._immediately)Weave.getCallbacks(this).triggerCallbacks()};weavejs.util.AsyncSort._testArrays;weavejs.util.AsyncSort._testArraysSortOn;weavejs.util.AsyncSort._testType=-1;
weavejs.util.AsyncSort.initTestArrays=function(testType){if(testType!=weavejs.util.AsyncSort._testType){weavejs.util.AsyncSort._testType=testType;weavejs.util.AsyncSort._testArrays=[];weavejs.util.AsyncSort._testArraysSortOn=[];var foreachiter0_target=[0,1,2,3,4,5,50,3E3,6E3,12E3,25E3,5E4];for(var foreachiter0 in foreachiter0_target){var n=foreachiter0_target[foreachiter0];var array=[];var arraySortOn=[];for(var i=0;i<n;i++){var value;if(testType==0)value=org.apache.flex.utils.Language.uint(Math.random()*
100);else if(testType==1)value=Math.random()<.5?NaN:org.apache.flex.utils.Language.uint(Math.random()*100);else if(testType==2)value='a'+Math.random();array.push(value);arraySortOn.push({'value':value})}weavejs.util.AsyncSort._testArrays.push(array);weavejs.util.AsyncSort._testArraysSortOn.push(arraySortOn)}}var desc=['uint','uint and NaN','string'][testType];org.apache.flex.utils.Language.trace('testType \x3d',testType,'('+desc+')')};
weavejs.util.AsyncSort.test=function(compare,testType){testType=typeof testType!=='undefined'?testType:0;weavejs.util.AsyncSort.initTestArrays(testType);weavejs.util.AsyncSort._debugCompareFunction=org.apache.flex.utils.Language.as(compare,Function);var foreachiter1_target=weavejs.util.AsyncSort._testArrays;for(var foreachiter1 in foreachiter1_target){var _array=foreachiter1_target[foreachiter1];var array1=_array.concat();var array2=_array.concat();var start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=
0;if(compare===null)array1.sort(0);else if(org.apache.flex.utils.Language.is(compare,Function))array1.sort(weavejs.util.AsyncSort._debugCompareCounter);else array1.sort(compare);org.apache.flex.utils.Language.trace('Array.sort',array1.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.AsyncSort.sortImmediately(array2,
org.apache.flex.utils.Language.is(compare,Function)?weavejs.util.AsyncSort._debugCompareCounter:null);org.apache.flex.utils.Language.trace('Merge Sort',array2.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');if(array2.length==1&&weavejs.util.StandardLib.compare(array1[0],array2[0])!=0)throw new Error('sort failed on array length 1');weavejs.util.AsyncSort.verifyNumbersSorted(array2)}};
weavejs.util.AsyncSort.testSortOn=function(compare,testType){testType=typeof testType!=='undefined'?testType:0;weavejs.util.AsyncSort.initTestArrays(testType);weavejs.util.AsyncSort._debugCompareFunction=weavejs.util.AsyncSort.newSortOnCompare('value',org.apache.flex.utils.Language.as(compare,Function)||weavejs.util.AsyncSort.primitiveCompare);var foreachiter2_target=weavejs.util.AsyncSort._testArraysSortOn;for(var foreachiter2 in foreachiter2_target){var _array=foreachiter2_target[foreachiter2];
var array1=_array.concat();var array2=_array.concat();var array3=_array.concat();var array4=_array.concat();var start;start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;var plucked=new Array(_array.length);var i=_array.length;while(i--)plucked[i]=_array[i]['value'];if(compare===null)plucked.sort(0);else if(org.apache.flex.utils.Language.is(compare,Function))plucked.sort(weavejs.util.AsyncSort._debugCompareCounter);else plucked.sort(compare);org.apache.flex.utils.Language.trace('Pluck \x26 sort',
plucked.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.StandardLib.sortOn(array3,'value');org.apache.flex.utils.Language.trace('StdLib sortOn',array3.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+
' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.StandardLib.sortOn(array4,['value']);org.apache.flex.utils.Language.trace('StdLib sortOn[]',array4.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.AsyncSort.sortImmediately(array2,weavejs.util.AsyncSort._debugCompareCounter);
org.apache.flex.utils.Language.trace('Merge SortOn',array2.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');if(array2.length==1&&weavejs.util.StandardLib.compare(array1[0],array2[0])!=0)throw new Error('sort failed on array length 1');weavejs.util.AsyncSort.verifyNumbersSorted(array2)}};
weavejs.util.AsyncSort.newSortOnCompare=function(prop,compare){var __localFn0__=function(a,b){return compare(a[prop],b[prop])};return __localFn0__};weavejs.util.AsyncSort.verifyNumbersSorted=function(array){for(var i=1;i<array.length;i++)if(weavejs.util.StandardLib.numericCompare(array[i-1],array[i])>0)throw new Error('ASSERTION FAIL '+array[i-1]+' \x3e '+array[i]);};weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.AsyncSort._debugCompareFunction=null;
weavejs.util.AsyncSort._debugCompareCounter=function(a,b){weavejs.util.AsyncSort._debugCompareCount++;return weavejs.util.AsyncSort._debugCompareFunction(a,b)};Object.defineProperties(weavejs.util.AsyncSort.prototype,{result:{get:function(){return this.source?null:this.original}}});weavejs.util.AsyncSort.prototype.FLEXJS_CLASS_INFO={names:[{name:'AsyncSort',qName:'weavejs.util.AsyncSort'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.util.AsyncSort',weavejs.util.AsyncSort);
weavejs.util.AsyncSort.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'result':{type:'*',declaredBy:'weavejs.util.AsyncSort'}}},methods:function(){return{'beginSort':{type:'void',declaredBy:'weavejs.util.AsyncSort'},'abort':{type:'void',declaredBy:'weavejs.util.AsyncSort'}}}}};goog.provide('weavejs.data.CSVParser');goog.require('weavejs.util.AsyncSort');goog.require('weavejs.api.core.ILinkableObject');goog.require('weavejs.api.data.ICSVParser');
weavejs.data.CSVParser=function(asyncMode,delimiter,quote){asyncMode=typeof asyncMode!=='undefined'?asyncMode:false;delimiter=typeof delimiter!=='undefined'?delimiter:',';quote=typeof quote!=='undefined'?quote:'"';this.asyncMode=asyncMode;if(delimiter&&delimiter.length==1)this.delimiter=delimiter;if(quote&&quote.length==1)this.quote=quote};weavejs.data.CSVParser.CR='\r';weavejs.data.CSVParser.LF='\n';weavejs.data.CSVParser.CRLF='\r\n';weavejs.data.CSVParser.prototype.asyncMode;
weavejs.data.CSVParser.prototype.delimiter=',';weavejs.data.CSVParser.prototype.quote='"';weavejs.data.CSVParser.prototype.parseTokens=true;weavejs.data.CSVParser.prototype.csvData;weavejs.data.CSVParser.prototype.csvDataArray;weavejs.data.CSVParser.prototype.i;weavejs.data.CSVParser.prototype.row;weavejs.data.CSVParser.prototype.col;weavejs.data.CSVParser.prototype.escaped;
weavejs.data.CSVParser.prototype.parseCSV=function(csvData){this.csvData=csvData;this.csvDataArray=[];this.i=0;this.row=0;this.col=0;this.escaped=false;if(this.asyncMode)weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.parseIterate,this,'parseIterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.parseDone,this,'parseDone'));else{this.parseIterate(Number.MAX_VALUE);this.parseDone()}return this.csvDataArray};
weavejs.data.CSVParser.prototype.parseIterate=function(stopTime){if(this.i==0){if(!this.csvData)return 1;this.csvDataArray[this.row]=['']}while(weavejs.util.JS.now()<stopTime){if(this.i>=this.csvData.length)return 1;var currentChar=this.csvData.charAt(this.i);var twoChar=currentChar+this.csvData.charAt(this.i+1);if(this.escaped)if(twoChar==this.quote+this.quote){this.csvDataArray[this.row][this.col]+=this.parseTokens?currentChar:twoChar;this.i+=1}else if(currentChar==this.quote){this.escaped=false;
if(!this.parseTokens)this.csvDataArray[this.row][this.col]+=currentChar}else this.csvDataArray[this.row][this.col]+=currentChar;else if(twoChar==this.delimiter+this.quote){this.escaped=true;this.col+=1;this.csvDataArray[this.row][this.col]=this.parseTokens?'':this.quote;this.i+=1}else if(currentChar==this.quote&&this.csvDataArray[this.row][this.col]==''){this.escaped=true;if(!this.parseTokens)this.csvDataArray[this.row][this.col]+=currentChar}else if(currentChar==this.delimiter){this.col+=1;this.csvDataArray[this.row][this.col]=
''}else if(twoChar==weavejs.data.CSVParser.CRLF){this.i+=1;this.row+=1;this.col=0;this.csvDataArray[this.row]=['']}else if(currentChar==weavejs.data.CSVParser.CR){this.row+=1;this.col=0;this.csvDataArray[this.row]=['']}else if(currentChar==weavejs.data.CSVParser.LF){this.row+=1;this.col=0;this.csvDataArray[this.row]=['']}else this.csvDataArray[this.row][this.col]+=currentChar;this.i++}return this.i/this.csvData.length};
weavejs.data.CSVParser.prototype.parseDone=function(){for(var iRow=this.csvDataArray.length;iRow--;){var dataLine=this.csvDataArray[iRow];if(dataLine.length==1&&dataLine[0]=='')this.csvDataArray.splice(iRow,1)}if(this.asyncMode)Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.CSVParser.prototype.createCSV=function(rows){var lines=new Array(rows.length);for(var i=rows.length;i--;){var tokens=new Array(rows[i].length);for(var j=tokens.length;j--;)tokens[j]=this.createCSVToken(rows[i][j]);lines[i]=tokens.join(this.delimiter)}var csvData=lines.join(weavejs.data.CSVParser.LF);return csvData};
weavejs.data.CSVParser.prototype.parseCSVRow=function(csvData){if(csvData==null)return null;var rows=this.parseCSV(csvData);if(rows.length==0)return rows;if(rows.length==1)return rows[0];return Array.prototype.concat.apply([],rows)};weavejs.data.CSVParser.prototype.createCSVRow=function(row){return this.createCSV([row])};
weavejs.data.CSVParser.prototype.parseCSVToken=function(token){token=String(token);var parsedToken='';var tokenLength=token.length;if(token.charAt(0)==this.quote){var escaped=true;for(var i=1;i<=tokenLength;i++){var currentChar=token.charAt(i);var twoChar=currentChar+token.charAt(i+1);if(twoChar==this.quote+this.quote){i+=1;parsedToken+=this.quote}else if(currentChar==this.quote&&escaped)escaped=false;else parsedToken+=currentChar}}else parsedToken=token;return parsedToken};
weavejs.data.CSVParser.prototype.createCSVToken=function(str){str=String(str);if(str==null)str='';if(str.length>0&&str.indexOf(this.quote)<0&&str.indexOf(this.delimiter)<0&&str.indexOf(weavejs.data.CSVParser.LF)<0&&str.indexOf(weavejs.data.CSVParser.CR)<0&&str==weavejs.util.StandardLib.trim(str))return str;var token=this.quote;for(var i=0;i<=str.length;i++){var currentChar=str.charAt(i);if(currentChar==this.quote)token+=this.quote+this.quote;else token+=currentChar}return token+this.quote};
weavejs.data.CSVParser.prototype.convertRowsToRecords=function(rows,headerDepth){headerDepth=typeof headerDepth!=='undefined'?headerDepth:1;if(rows.length<headerDepth)throw new Error('headerDepth is greater than the number of rows');weavejs.data.CSVParser.assertHeaderDepth(headerDepth);var records=new Array(rows.length-headerDepth);for(var r=headerDepth;r<rows.length;r++){var record={};var row=rows[r];for(var c=0;c<row.length;c++){var output=record;var cell=row[c];for(var h=0;h<headerDepth;h++){var colName=
rows[h][c];if(h<headerDepth-1){if(!output[colName])output[colName]={};output=output[colName]}else output[colName]=cell}}records[r-headerDepth]=record}return records};
weavejs.data.CSVParser.prototype.getRecordFieldNames=function(records,includeNullFields,headerDepth){includeNullFields=typeof includeNullFields!=='undefined'?includeNullFields:false;headerDepth=typeof headerDepth!=='undefined'?headerDepth:1;weavejs.data.CSVParser.assertHeaderDepth(headerDepth);var nestedFieldNames={};var foreachiter0_target=records;for(var foreachiter0 in foreachiter0_target){var record=foreachiter0_target[foreachiter0];this._outputNestedFieldNames(record,includeNullFields,nestedFieldNames,
headerDepth)}var fields=[];this._collapseNestedFieldNames(nestedFieldNames,fields);return fields};weavejs.data.CSVParser.prototype._outputNestedFieldNames=function(record,includeNullFields,output,depth){for(var field in record)if(includeNullFields||record[field]!=null)if(depth==1)output[field]=false;else{if(!output[field])output[field]={};this._outputNestedFieldNames(record[field],includeNullFields,output[field],depth-1)}};
weavejs.data.CSVParser.prototype._collapseNestedFieldNames=function(nestedFieldNames,output,prefix){prefix=typeof prefix!=='undefined'?prefix:null;for(var field in nestedFieldNames)if(nestedFieldNames[field])this._collapseNestedFieldNames(nestedFieldNames[field],output,prefix?prefix.concat(field):[field]);else if(prefix)output.push(prefix.concat(field));else output.push(field)};
weavejs.data.CSVParser.prototype.convertRecordsToRows=function(records,columnOrder,allowBlankColumns,headerDepth){columnOrder=typeof columnOrder!=='undefined'?columnOrder:null;allowBlankColumns=typeof allowBlankColumns!=='undefined'?allowBlankColumns:false;headerDepth=typeof headerDepth!=='undefined'?headerDepth:1;weavejs.data.CSVParser.assertHeaderDepth(headerDepth);var fields=columnOrder;if(fields==null){fields=this.getRecordFieldNames(records,allowBlankColumns,headerDepth);weavejs.util.AsyncSort.sortImmediately(fields)}var r;
var c;var cell;var row;var rows=new Array(records.length+headerDepth);for(r=0;r<headerDepth;r++){row=new Array(fields.length);for(c=0;c<fields.length;c++)if(headerDepth>1)row[c]=fields[c][r]||'';else row[c]=fields[c]||'';rows[r]=row}for(r=0;r<records.length;r++){var record=records[r];row=new Array(fields.length);for(c=0;c<fields.length;c++){if(headerDepth==1)cell=record[fields[c]];else{cell=record;var foreachiter1_target=fields[c];for(var foreachiter1 in foreachiter1_target){var field=foreachiter1_target[foreachiter1];
if(cell)cell=cell[field]}}row[c]=cell!=null?String(cell):''}rows[headerDepth+r]=row}return rows};weavejs.data.CSVParser.assertHeaderDepth=function(headerDepth){if(headerDepth<1)throw new Error('headerDepth must be \x3e 0');};weavejs.data.CSVParser._tested=false;
weavejs.data.CSVParser.test=function(){if(weavejs.data.CSVParser._tested)return;weavejs.data.CSVParser._tested=true;var _={};_.parser=weavejs.WeaveAPI.CSVParser;_.csv=['internal,internal,public,public,public,private,private,test','id,type,title,keyType,dataType,connection,sqlQuery,empty','2,1,state name,fips,string,resd,'+'"'+'select fips,name from myschema.state_data'+'"'+',','3,1,population,fips,number,resd,'+'"'+'select fips,pop from myschema.state_data'+'"'+',','1,0,state data table'].join('\n');
_.table=_.parser.parseCSV(_.csv);_.records=_.parser.convertRowsToRecords(_.table,2);_.rows=_.parser.convertRecordsToRows(_.records,null,false,2);_.fields=_.parser.getRecordFieldNames(_.records,false,2);_.fieldOrder=_.parser.parseCSV('internal,id\ninternal,type\npublic,title\npublic,keyType\npublic,dataType\nprivate,connection\nprivate,sqlQuery');_.rows2=_.parser.convertRecordsToRows(_.records,_.fieldOrder,false,2);weavejs.util.JS.log(_)};Object.defineProperties(weavejs.data.CSVParser.prototype,{parseResult:{get:function(){return this.csvDataArray}}});
weavejs.data.CSVParser.prototype.FLEXJS_CLASS_INFO={names:[{name:'CSVParser',qName:'weavejs.data.CSVParser'}],interfaces:[weavejs.api.data.ICSVParser,weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.data.CSVParser',weavejs.data.CSVParser);
weavejs.data.CSVParser.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'parseResult':{type:'Array',declaredBy:'weavejs.data.CSVParser'}}},methods:function(){return{'CSVParser':{type:'',declaredBy:'weavejs.data.CSVParser'},'parseCSV':{type:'Array',declaredBy:'weavejs.data.CSVParser'},'createCSV':{type:'String',declaredBy:'weavejs.data.CSVParser'},'parseCSVRow':{type:'Array',declaredBy:'weavejs.data.CSVParser'},'createCSVRow':{type:'String',
declaredBy:'weavejs.data.CSVParser'},'parseCSVToken':{type:'String',declaredBy:'weavejs.data.CSVParser'},'createCSVToken':{type:'String',declaredBy:'weavejs.data.CSVParser'},'convertRowsToRecords':{type:'Array',declaredBy:'weavejs.data.CSVParser'},'getRecordFieldNames':{type:'Array',declaredBy:'weavejs.data.CSVParser'},'convertRecordsToRows':{type:'Array',declaredBy:'weavejs.data.CSVParser'}}}}};goog.provide('weavejs.api.data.IQualifiedKey');weavejs.api.data.IQualifiedKey=function(){};weavejs.api.data.IQualifiedKey.prototype.keyType;weavejs.api.data.IQualifiedKey.prototype.toNumber=function(){};weavejs.api.data.IQualifiedKey.prototype.toString=function(){};weavejs.api.data.IQualifiedKey.prototype.FLEXJS_CLASS_INFO={names:[{name:'IQualifiedKey',qName:'weavejs.api.data.IQualifiedKey'}]};
weavejs.api.data.IQualifiedKey.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keyType':{type:'String',declaredBy:'weavejs.api.data.IQualifiedKey'},'localName':{type:'String',declaredBy:'weavejs.api.data.IQualifiedKey'}}},methods:function(){return{'toNumber':{type:'Number',declaredBy:'weavejs.api.data.IQualifiedKey'},'toString':{type:'String',declaredBy:'weavejs.api.data.IQualifiedKey'}}}}};goog.provide('weavejs.data.key.QKey');goog.require('weavejs.api.data.IQualifiedKey');weavejs.data.key.QKey=function(keyType,localName,toString){this.kt=keyType;this.ln=localName;this._toNumber=weavejs.data.key.QKey.serial++;this._toString=toString};weavejs.data.key.QKey.serial=0;weavejs.data.key.QKey.prototype.kt;weavejs.data.key.QKey.prototype.ln;weavejs.data.key.QKey.prototype._toNumber;weavejs.data.key.QKey.prototype._toString;weavejs.data.key.QKey.prototype.toNumber=function(){return this._toNumber};
weavejs.data.key.QKey.prototype.toString=function(){return this._toString};Object.defineProperties(weavejs.data.key.QKey.prototype,{keyType:{get:function(){return this.kt}},localName:{get:function(){return this.ln}}});weavejs.data.key.QKey.prototype.FLEXJS_CLASS_INFO={names:[{name:'QKey',qName:'weavejs.data.key.QKey'}],interfaces:[weavejs.api.data.IQualifiedKey]};goog.exportSymbol('weavejs.data.key.QKey',weavejs.data.key.QKey);
weavejs.data.key.QKey.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keyType':{type:'String',declaredBy:'weavejs.data.key.QKey'},'localName':{type:'String',declaredBy:'weavejs.data.key.QKey'}}},methods:function(){return{'QKey':{type:'',declaredBy:'weavejs.data.key.QKey'},'toNumber':{type:'Number',declaredBy:'weavejs.data.key.QKey'},'toString':{type:'String',declaredBy:'weavejs.data.key.QKey'}}}}};goog.provide('weavejs.data.key.QKeyManager');goog.require('weavejs.data.CSVParser');goog.require('weavejs.data.key.QKey');goog.require('weavejs.util.WeavePromise');goog.require('weavejs.api.data.IQualifiedKeyManager');
weavejs.data.key.QKeyManager=function(){this.map_qkey_keyType=new weavejs.util.JS.WeakMap;this.map_qkey_localName=new weavejs.util.JS.WeakMap;this.d2d_keyType_localName_qkey=new weavejs.util.Dictionary2D;this.map_qkeyString_qkey=new weavejs.util.JS.Map;this.map_context_qkeyGetter=new weavejs.util.JS.WeakMap;this._keyBuffer=[];this.array_numberToQKey=[]};weavejs.data.key.QKeyManager.prototype.map_qkey_keyType;weavejs.data.key.QKeyManager.prototype.map_qkey_localName;weavejs.data.key.QKeyManager.prototype.d2d_keyType_localName_qkey;
weavejs.data.key.QKeyManager.prototype.map_qkeyString_qkey;weavejs.data.key.QKeyManager.prototype.map_context_qkeyGetter;weavejs.data.key.QKeyManager.prototype._keyBuffer;weavejs.data.key.QKeyManager.DELIMITER='#';weavejs.data.key.QKeyManager.prototype.csvParser;weavejs.data.key.QKeyManager.prototype.array_numberToQKey;
weavejs.data.key.QKeyManager.prototype.stringToQKey=function(qkeyString){var qkey=this.map_qkeyString_qkey.get(qkeyString);if(qkey)return qkey;if(!this.csvParser)this.csvParser=new weavejs.data.CSVParser(false,weavejs.data.key.QKeyManager.DELIMITER);var a=this.csvParser.parseCSVRow(qkeyString);if(a.length!=2)throw new Error('qkeyString must be formatted like '+this.csvParser.createCSVRow(['keyType','localName']));return this.getQKey(a[0],a[1])};
weavejs.data.key.QKeyManager.prototype.numberToQKey=function(qkeyNumber){return this.array_numberToQKey[qkeyNumber]};weavejs.data.key.QKeyManager.prototype.getQKey=function(keyType,localName){this._keyBuffer[0]=localName;this.getQKeys_range(keyType,this._keyBuffer,0,1,this._keyBuffer);return org.apache.flex.utils.Language.as(this._keyBuffer[0],weavejs.api.data.IQualifiedKey)};
weavejs.data.key.QKeyManager.prototype.init_map_localName_qkey=function(keyType){var map_localName_qkey;var trimmedKeyType=weavejs.util.StandardLib.trim(keyType);if(trimmedKeyType!=keyType)map_localName_qkey=this.d2d_keyType_localName_qkey.map.get(trimmedKeyType)||this.init_map_localName_qkey(trimmedKeyType);else map_localName_qkey=new weavejs.util.JS.Map;this.d2d_keyType_localName_qkey.map.set(keyType,map_localName_qkey);return map_localName_qkey};
weavejs.data.key.QKeyManager.prototype.getQKeys_range=function(keyType,keyStrings,iStart,iEnd,output){if(!keyType)keyType=weavejs.api.data.DataType.STRING;var map_localName_qkey=this.d2d_keyType_localName_qkey.map.get(keyType);if(!map_localName_qkey)map_localName_qkey=this.init_map_localName_qkey(keyType);if(!this.csvParser)this.csvParser=new weavejs.data.CSVParser(false,weavejs.data.key.QKeyManager.DELIMITER);var trimmedKeyType=null;for(var i=iStart;i<iEnd;i++){var localName=String(keyStrings[i]);
var qkey=map_localName_qkey.get(localName);if(!qkey){if(!trimmedKeyType)trimmedKeyType=weavejs.util.StandardLib.trim(keyType);var trimmedLocalName=weavejs.util.StandardLib.trim(localName);qkey=map_localName_qkey.get(trimmedLocalName);if(!qkey){var qkeyString=this.csvParser.createCSVRow([trimmedKeyType,trimmedLocalName]);qkey=new weavejs.data.key.QKey(trimmedKeyType,trimmedLocalName,qkeyString);map_localName_qkey.set(trimmedLocalName,qkey);this.map_qkeyString_qkey.set(qkeyString,qkey);this.array_numberToQKey[qkey.toNumber()]=
qkey;this.map_qkey_keyType.set(qkey,trimmedKeyType);this.map_qkey_localName.set(qkey,trimmedLocalName)}if(localName!=trimmedLocalName)map_localName_qkey.set(localName,qkey)}output[i]=qkey}};weavejs.data.key.QKeyManager.prototype.getQKeys=function(keyType,keyStrings){var keys=new Array(keyStrings.length);this.getQKeys_range(keyType,keyStrings,0,keyStrings.length,keys);return keys};
weavejs.data.key.QKeyManager.prototype.convertToQKeys=function(objects){var i=objects.length;while(i--){var item=objects[i];if(!org.apache.flex.utils.Language.is(item,weavejs.api.data.IQualifiedKey))objects[i]=this.getQKey(item.keyType,item.localName)}return objects};
weavejs.data.key.QKeyManager.prototype.getQKeysAsync=function(relevantContext,keyType,keyStrings,asyncCallback,outputKeys){var qkg=this.map_context_qkeyGetter.get(relevantContext);if(!qkg)this.map_context_qkeyGetter.set(relevantContext,qkg=new weavejs.data.key.QKeyManager.QKeyGetter(this,relevantContext));qkg.asyncStart(keyType,keyStrings,outputKeys,asyncCallback)};
weavejs.data.key.QKeyManager.prototype.getQKeysPromise=function(relevantContext,keyType,keyStrings){var qkg=this.map_context_qkeyGetter.get(relevantContext);if(!qkg)this.map_context_qkeyGetter.set(relevantContext,qkg=new weavejs.data.key.QKeyManager.QKeyGetter(this,relevantContext));qkg.asyncStart(keyType,keyStrings);return qkg};weavejs.data.key.QKeyManager.prototype.getAllKeyTypes=function(){return this.d2d_keyType_localName_qkey.primaryKeys()};
weavejs.data.key.QKeyManager.prototype.getAllQKeys=function(keyType){return weavejs.util.JS.mapValues(this.d2d_keyType_localName_qkey.map.get(keyType))};weavejs.data.key.QKeyManager.keySortCopy=function(keys){var qkm=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager);var params=[qkm.map_qkey_keyType,qkm.map_qkey_localName];return weavejs.util.StandardLib.sortOn(keys,params,null,false)};
weavejs.data.key.QKeyManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'QKeyManager',qName:'weavejs.data.key.QKeyManager'}],interfaces:[weavejs.api.data.IQualifiedKeyManager]};goog.exportSymbol('weavejs.data.key.QKeyManager',weavejs.data.key.QKeyManager);
weavejs.data.key.QKeyManager.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'map_qkey_keyType':{type:'Object'},'map_qkey_localName':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'QKeyManager':{type:'',declaredBy:'weavejs.data.key.QKeyManager'},'stringToQKey':{type:'IQualifiedKey',declaredBy:'weavejs.data.key.QKeyManager'},'numberToQKey':{type:'IQualifiedKey',declaredBy:'weavejs.data.key.QKeyManager'},'getQKey':{type:'IQualifiedKey',declaredBy:'weavejs.data.key.QKeyManager'},
'getQKeys_range':{type:'void',declaredBy:'weavejs.data.key.QKeyManager'},'getQKeys':{type:'Array',declaredBy:'weavejs.data.key.QKeyManager'},'convertToQKeys':{type:'Array',declaredBy:'weavejs.data.key.QKeyManager'},'getQKeysAsync':{type:'void',declaredBy:'weavejs.data.key.QKeyManager'},'getQKeysPromise':{type:'WeavePromise',declaredBy:'weavejs.data.key.QKeyManager'},'getAllKeyTypes':{type:'Array',declaredBy:'weavejs.data.key.QKeyManager'},'getAllQKeys':{type:'Array',declaredBy:'weavejs.data.key.QKeyManager'}}}}};
weavejs.data.key.QKeyManager.QKeyGetter=function(manager,relevantContext){weavejs.data.key.QKeyManager.QKeyGetter.base(this,'constructor',relevantContext);this.manager=manager};goog.inherits(weavejs.data.key.QKeyManager.QKeyGetter,weavejs.util.WeavePromise);
weavejs.data.key.QKeyManager.QKeyGetter.prototype.asyncStart=function(keyType,keyStrings,outputKeys,asyncCallback){outputKeys=typeof outputKeys!=='undefined'?outputKeys:null;asyncCallback=typeof asyncCallback!=='undefined'?asyncCallback:null;if(!keyStrings)keyStrings=[];this.manager=this.manager;this.asyncCallback=asyncCallback;this.keyType=keyType;this.keyStrings=keyStrings;this.i=0;this.outputKeys=outputKeys||new Array(keyStrings.length);this.outputKeys.length=keyStrings.length;weavejs.WeaveAPI.Scheduler.startTask(this.relevantContext,
org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'),Weave.lang('Initializing {0} record identifiers',keyStrings.length));return this};weavejs.data.key.QKeyManager.QKeyGetter.prototype.asyncCallback;weavejs.data.key.QKeyManager.QKeyGetter.prototype.i;weavejs.data.key.QKeyManager.QKeyGetter.prototype.manager;weavejs.data.key.QKeyManager.QKeyGetter.prototype.keyType;weavejs.data.key.QKeyManager.QKeyGetter.prototype.keyStrings;
weavejs.data.key.QKeyManager.QKeyGetter.prototype.outputKeys;weavejs.data.key.QKeyManager.QKeyGetter.prototype.batch=5E3;weavejs.data.key.QKeyManager.QKeyGetter.prototype.iterate=function(stopTime){for(;this.i<this.keyStrings.length;this.i+=this.batch){if(weavejs.util.JS.now()>stopTime)return this.i/this.keyStrings.length;this.manager.getQKeys_range(this.keyType,this.keyStrings,this.i,Math.min(this.i+this.batch,this.keyStrings.length),this.outputKeys)}return 1};
weavejs.data.key.QKeyManager.QKeyGetter.prototype.asyncComplete=function(){this.setResult(this.outputKeys);if(this.asyncCallback){this.asyncCallback.call(this.relevantContext,this.outputKeys);this.asyncCallback=null}};weavejs.data.key.QKeyManager.QKeyGetter.prototype.FLEXJS_CLASS_INFO={names:[{name:'QKeyGetter',qName:'weavejs.data.key.QKeyManager.QKeyGetter'}]};goog.exportSymbol('weavejs.data.key.QKeyManager.QKeyGetter',weavejs.data.key.QKeyManager.QKeyGetter);
weavejs.data.key.QKeyManager.QKeyGetter.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'QKeyGetter':{type:'',declaredBy:'weavejs.data.key.QKeyManager.QKeyGetter'},'asyncStart':{type:'weavejs.data.key.QKeyManager.QKeyGetter',declaredBy:'weavejs.data.key.QKeyManager.QKeyGetter'}}}}};goog.provide('weavejs.api.data.IColumnStatistics');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IColumnStatistics=function(){};weavejs.api.data.IColumnStatistics.prototype.getNorm=function(key){};weavejs.api.data.IColumnStatistics.prototype.getMin=function(){};weavejs.api.data.IColumnStatistics.prototype.getMax=function(){};weavejs.api.data.IColumnStatistics.prototype.getCount=function(){};weavejs.api.data.IColumnStatistics.prototype.getSum=function(){};
weavejs.api.data.IColumnStatistics.prototype.getSquareSum=function(){};weavejs.api.data.IColumnStatistics.prototype.getMean=function(){};weavejs.api.data.IColumnStatistics.prototype.getVariance=function(){};weavejs.api.data.IColumnStatistics.prototype.getStandardDeviation=function(){};weavejs.api.data.IColumnStatistics.prototype.getMedian=function(){};weavejs.api.data.IColumnStatistics.prototype.getSortIndex=function(){};weavejs.api.data.IColumnStatistics.prototype.hack_getNumericData=function(){};
weavejs.api.data.IColumnStatistics.prototype.FLEXJS_CLASS_INFO={names:[{name:'IColumnStatistics',qName:'weavejs.api.data.IColumnStatistics'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.data.IColumnStatistics.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getNorm':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getMin':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getMax':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getCount':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getSum':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},
'getSquareSum':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getMean':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getVariance':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getStandardDeviation':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getMedian':{type:'Number',declaredBy:'weavejs.api.data.IColumnStatistics'},'getSortIndex':{type:'Object',declaredBy:'weavejs.api.data.IColumnStatistics'},'hack_getNumericData':{type:'Object',
declaredBy:'weavejs.api.data.IColumnStatistics'}}}}};goog.provide('weavejs.data.ColumnStatistics');goog.require('weavejs.data.key.QKeyManager');goog.require('weavejs.api.data.IColumnStatistics');weavejs.data.ColumnStatistics=function(column){this.map_method_result=new weavejs.util.JS.WeakMap;this.column=column;column.addImmediateCallback(this,org.apache.flex.utils.Language.closure(Weave.getCallbacks(this).triggerCallbacks,Weave.getCallbacks(this),'triggerCallbacks'),false,true)};
weavejs.data.ColumnStatistics.prototype.getNorm=function(key){var min=this.validateCache(org.apache.flex.utils.Language.closure(this.getMin,this,'getMin'),NaN);var max=this.validateCache(org.apache.flex.utils.Language.closure(this.getMax,this,'getMax'),NaN);var map_numericData=this.validateCache(org.apache.flex.utils.Language.closure(this.hack_getNumericData,this,'hack_getNumericData'),null);var value=map_numericData?map_numericData.get(key):NaN;return(value-min)/(max-min)};
weavejs.data.ColumnStatistics.prototype.getMin=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMin,this,'getMin'),NaN)};weavejs.data.ColumnStatistics.prototype.getMax=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMax,this,'getMax'),NaN)};weavejs.data.ColumnStatistics.prototype.getCount=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getCount,this,'getCount'),0)};
weavejs.data.ColumnStatistics.prototype.getSum=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getSum,this,'getSum'),0)};weavejs.data.ColumnStatistics.prototype.getSquareSum=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getSquareSum,this,'getSquareSum'),0)};weavejs.data.ColumnStatistics.prototype.getMean=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMean,this,'getMean'),NaN)};
weavejs.data.ColumnStatistics.prototype.getVariance=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getVariance,this,'getVariance'),NaN)};weavejs.data.ColumnStatistics.prototype.getStandardDeviation=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getStandardDeviation,this,'getStandardDeviation'),NaN)};
weavejs.data.ColumnStatistics.prototype.getMedian=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMedian,this,'getMedian'),NaN)};weavejs.data.ColumnStatistics.prototype.getSortIndex=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getSortIndex,this,'getSortIndex'),null)};
weavejs.data.ColumnStatistics.prototype.hack_getNumericData=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.hack_getNumericData,this,'hack_getNumericData'),null)};weavejs.data.ColumnStatistics.prototype.getRunningTotals=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getRunningTotals,this,'getRunningTotals'),null)};weavejs.data.ColumnStatistics.prototype.map_method_result;weavejs.data.ColumnStatistics.prototype.column;
weavejs.data.ColumnStatistics.prototype.prevTriggerCounter=0;weavejs.data.ColumnStatistics.prototype.busy=false;weavejs.data.ColumnStatistics.prototype.validateCache=function(statsFunction,defaultValue){if(this.prevTriggerCounter!=this.column.triggerCounter){this.busy=weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(this.column);if(!this.busy)this.asyncStart()}var result=this.map_method_result.get(statsFunction);return result===undefined?defaultValue:result};weavejs.data.ColumnStatistics.prototype.i;
weavejs.data.ColumnStatistics.prototype.keys;weavejs.data.ColumnStatistics.prototype.min;weavejs.data.ColumnStatistics.prototype.max;weavejs.data.ColumnStatistics.prototype.count;weavejs.data.ColumnStatistics.prototype.sum;weavejs.data.ColumnStatistics.prototype.squareSum;weavejs.data.ColumnStatistics.prototype.mean;weavejs.data.ColumnStatistics.prototype.variance;weavejs.data.ColumnStatistics.prototype.standardDeviation;weavejs.data.ColumnStatistics.prototype.map_key_runningTotal;weavejs.data.ColumnStatistics.prototype.outKeys;
weavejs.data.ColumnStatistics.prototype.outNumbers;weavejs.data.ColumnStatistics.prototype.map_key_sortIndex;weavejs.data.ColumnStatistics.prototype.hack_map_key_number;weavejs.data.ColumnStatistics.prototype.median;
weavejs.data.ColumnStatistics.prototype.asyncStart=function(){this.prevTriggerCounter=this.column.triggerCounter;this.i=0;this.keys=this.column.keys;this.min=Infinity;this.max=-Infinity;this.count=0;this.sum=0;this.squareSum=0;this.mean=NaN;this.variance=NaN;this.standardDeviation=NaN;this.outKeys=new Array(this.keys.length);this.outNumbers=new Array(this.keys.length);this.map_key_sortIndex=new weavejs.util.JS.WeakMap;this.hack_map_key_number=new weavejs.util.JS.WeakMap;this.median=NaN;this.map_key_runningTotal=
new weavejs.util.JS.WeakMap;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'),Weave.lang('Calculating statistics for {0} values',this.keys.length))};
weavejs.data.ColumnStatistics.prototype.iterate=function(stopTime){if(this.busy||this.prevTriggerCounter!=this.column.triggerCounter){this.prevTriggerCounter=0;return 1}for(;this.i<this.keys.length;++this.i){if(weavejs.util.JS.now()>stopTime)return this.i/this.keys.length;var key=org.apache.flex.utils.Language.as(this.keys[this.i],weavejs.api.data.IQualifiedKey);var value=this.column.getValueFromKey(key,Number);if(isFinite(value)){this.sum+=value;this.squareSum+=value*value;if(value<this.min)this.min=
value;if(value>this.max)this.max=value;this.map_key_runningTotal.set(key,this.sum);this.hack_map_key_number.set(key,value);this.outKeys[this.count]=key;this.outNumbers[this.count]=value;++this.count}}return 1};
weavejs.data.ColumnStatistics.prototype.asyncComplete=function(){if(this.busy){Weave.getCallbacks(this).triggerCallbacks();return}if(this.count==0)this.min=this.max=NaN;this.mean=this.sum/this.count;this.variance=this.squareSum/this.count-this.mean*this.mean;this.standardDeviation=Math.sqrt(this.variance);this.outKeys.length=this.count;this.outNumbers.length=this.count;var qkm=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager);var outIndices=weavejs.util.StandardLib.sortOn(this.outKeys,
[this.outNumbers,qkm.map_qkey_keyType,qkm.map_qkey_localName],null,false,true);this.median=this.outNumbers[outIndices[org.apache.flex.utils.Language._int(this.count/2)]];this.i=this.count;while(--this.i>=0)this.map_key_sortIndex.set(this.outKeys[outIndices[this.i]],this.i);var tempNumber;try{tempNumber=weavejs.util.StandardLib.asNumber(this.column.getMetadata(weavejs.api.data.ColumnMetadata.MIN));if(isFinite(tempNumber))this.min=tempNumber}catch(e){}try{tempNumber=weavejs.util.StandardLib.asNumber(this.column.getMetadata(weavejs.api.data.ColumnMetadata.MAX));
if(isFinite(tempNumber))this.max=tempNumber}catch(e){}this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMin,this,'getMin'),this.min);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMax,this,'getMax'),this.max);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getCount,this,'getCount'),this.count);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getSum,this,'getSum'),this.sum);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getSquareSum,
this,'getSquareSum'),this.squareSum);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMean,this,'getMean'),this.mean);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getVariance,this,'getVariance'),this.variance);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getStandardDeviation,this,'getStandardDeviation'),this.standardDeviation);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMedian,this,'getMedian'),
this.median);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getSortIndex,this,'getSortIndex'),this.map_key_sortIndex);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.hack_getNumericData,this,'hack_getNumericData'),this.hack_map_key_number);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getRunningTotals,this,'getRunningTotals'),this.map_key_runningTotal);Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.ColumnStatistics.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnStatistics',qName:'weavejs.data.ColumnStatistics'}],interfaces:[weavejs.api.data.IColumnStatistics]};goog.exportSymbol('weavejs.data.ColumnStatistics',weavejs.data.ColumnStatistics);
weavejs.data.ColumnStatistics.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'prevTriggerCounter':{type:'uint'}}},accessors:function(){return{}},methods:function(){return{'ColumnStatistics':{type:'',declaredBy:'weavejs.data.ColumnStatistics'},'getNorm':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getMin':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getMax':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getCount':{type:'Number',
declaredBy:'weavejs.data.ColumnStatistics'},'getSum':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getSquareSum':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getMean':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getVariance':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getStandardDeviation':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getMedian':{type:'Number',declaredBy:'weavejs.data.ColumnStatistics'},'getSortIndex':{type:'Object',
declaredBy:'weavejs.data.ColumnStatistics'},'hack_getNumericData':{type:'Object',declaredBy:'weavejs.data.ColumnStatistics'},'getRunningTotals':{type:'Object',declaredBy:'weavejs.data.ColumnStatistics'}}}}};goog.provide('weavejs.data.StatisticsCache');goog.require('weavejs.data.ColumnStatistics');goog.require('weavejs.api.data.IStatisticsCache');weavejs.data.StatisticsCache=function(){this.map_column_stats=new weavejs.util.JS.WeakMap};weavejs.data.StatisticsCache.prototype.getRunningTotals=function(column){return org.apache.flex.utils.Language.as(this.getColumnStatistics(column),weavejs.data.ColumnStatistics).getRunningTotals()};weavejs.data.StatisticsCache.prototype.map_column_stats;
weavejs.data.StatisticsCache.prototype.getColumnStatistics=function(column){if(column==null)throw new Error('getColumnStatistics(): Column parameter cannot be null.');if(Weave.wasDisposed(column)){this.map_column_stats['delete'](column);throw new Error('Invalid attempt to retrieve statistics for a disposed column.');}var stats=this.map_column_stats.get(column);if(!stats){stats=new weavejs.data.ColumnStatistics(column);this.map_column_stats.set(column,Weave.disposableChild(column,stats))}return stats};
weavejs.data.StatisticsCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'StatisticsCache',qName:'weavejs.data.StatisticsCache'}],interfaces:[weavejs.api.data.IStatisticsCache]};goog.exportSymbol('weavejs.data.StatisticsCache',weavejs.data.StatisticsCache);
weavejs.data.StatisticsCache.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getRunningTotals':{type:'Object',declaredBy:'weavejs.data.StatisticsCache'},'getColumnStatistics':{type:'IColumnStatistics',declaredBy:'weavejs.data.StatisticsCache'}}}}};goog.provide('weavejs.data.EquationColumnLib');goog.require('weavejs.data.StatisticsCache');weavejs.data.EquationColumnLib=function(){};weavejs.data.EquationColumnLib.debug=false;weavejs.data.EquationColumnLib.currentRecordKey=null;weavejs.data.EquationColumnLib.getKey=function(column){column=typeof column!=='undefined'?column:null;if(column)return column.getValueFromKey(weavejs.data.EquationColumnLib.currentRecordKey,weavejs.api.data.IQualifiedKey);return weavejs.data.EquationColumnLib.currentRecordKey};
weavejs.data.EquationColumnLib.getValue=function(object,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var key=weavejs.data.EquationColumnLib.currentRecordKey;try{if(org.apache.flex.utils.Language.is(dataType,String))dataType=Weave.getDefinition(dataType);var value=null;var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null){if(dataType==null){var dataTypeMetadata=column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);dataType=
weavejs.api.data.DataType.getClass(dataTypeMetadata);if(dataType==String&&dataTypeMetadata!=weavejs.api.data.DataType.STRING)dataType=weavejs.api.data.IQualifiedKey}value=column.getValueFromKey(key,weavejs.util.JS.asClass(dataType))}else if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableVariable)){value=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState();if(dataType!=null)value=weavejs.data.EquationColumnLib.cast(value,dataType)}else if(dataType!=
null)value=weavejs.data.EquationColumnLib.cast(value,dataType);if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getValue',object,key.localName,String(value));return value}finally{weavejs.data.EquationColumnLib.currentRecordKey=key}};
weavejs.data.EquationColumnLib.getValueFromKey=function(column,key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{weavejs.data.EquationColumnLib.currentRecordKey=key;var value=weavejs.data.EquationColumnLib.getValue(column,dataType);if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getValueFromKey',column,key.localName,String(value));return value}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}};
weavejs.data.EquationColumnLib.getValueFromFilterColumn=function(keyColumn,filter,data,filterValue,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var key=weavejs.data.EquationColumnLib.getKey();var foreignKeyType=keyColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);var ignoreKeyType=!foreignKeyType||foreignKeyType==weavejs.api.data.DataType.STRING;var cubekeys=weavejs.data.EquationColumnLib.getAssociatedKeys(keyColumn,key,ignoreKeyType);if(cubekeys&&cubekeys.length==1){var foreachiter0_target=
cubekeys;for(var foreachiter0 in foreachiter0_target){var cubekey=foreachiter0_target[foreachiter0];if(filter.getValueFromKey(cubekey,String)==filterValue){if(dataType===weavejs.api.data.IQualifiedKey)return cubekey;var val=weavejs.data.EquationColumnLib.getValueFromKey(data,cubekey,dataType);return val}}}return weavejs.data.EquationColumnLib.cast(undefined,dataType)};weavejs.data.EquationColumnLib.map_reverseKeyLookupTriggerCounter=new weavejs.util.JS.WeakMap;
weavejs.data.EquationColumnLib.map_reverseKeyLookupCache=new weavejs.util.JS.WeakMap;
weavejs.data.EquationColumnLib.getAssociatedKeys=function(column,keyValue,ignoreKeyType){ignoreKeyType=typeof ignoreKeyType!=='undefined'?ignoreKeyType:false;var map_lookup=weavejs.data.EquationColumnLib.map_reverseKeyLookupCache.get(column);if(map_lookup==null||column.triggerCounter!=weavejs.data.EquationColumnLib.map_reverseKeyLookupTriggerCounter.get(column)){weavejs.data.EquationColumnLib.map_reverseKeyLookupTriggerCounter.set(column,column.triggerCounter);weavejs.data.EquationColumnLib.map_reverseKeyLookupCache.set(column,
map_lookup=new weavejs.util.JS.Map);var foreachiter1_target=column.keys;for(var foreachiter1 in foreachiter1_target){var recordKey=foreachiter1_target[foreachiter1];var value=org.apache.flex.utils.Language.as(column.getValueFromKey(recordKey,weavejs.api.data.IQualifiedKey),weavejs.api.data.IQualifiedKey);if(value==null)continue;if(!map_lookup.has(value))map_lookup.set(value,[]);org.apache.flex.utils.Language.as(map_lookup.get(value),Array).push(recordKey);if(!map_lookup.has(value.localName))map_lookup.set(value.localName,
[]);org.apache.flex.utils.Language.as(map_lookup.get(value.localName),Array).push(recordKey)}}return org.apache.flex.utils.Language.as(map_lookup.get(ignoreKeyType?keyValue.localName:keyValue),Array)};
weavejs.data.EquationColumnLib.getNumber=function(object,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result;var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null)result=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn).getValueFromKey(key,Number);else if(org.apache.flex.utils.Language.is(object,
weavejs.api.core.ILinkableVariable))result=weavejs.util.StandardLib.asNumber(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState());else throw new Error('first parameter must be either an IAttributeColumn or an ILinkableVariable');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getNumber',column,key.localName,String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.getString=function(object,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result='';var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null)result=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn).getValueFromKey(key,String);else if(org.apache.flex.utils.Language.is(object,
weavejs.api.core.ILinkableVariable))result=weavejs.util.StandardLib.asString(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState());else throw new Error('first parameter must be either an IAttributeColumn or an ILinkableVariable');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getString',column,key.localName,String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.getBoolean=function(object,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result=false;var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null)result=weavejs.util.StandardLib.asBoolean(column.getValueFromKey(key,Number));else if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableVariable))result=
weavejs.util.StandardLib.asBoolean(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState());else throw new Error('first parameter must be either an IAttributeColumn or an ILinkableVariable');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getBoolean',column,key.localName,String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.getNorm=function(column,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result=NaN;if(column!=null)result=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getNorm(key);else throw new Error('first parameter must be an IAttributeColumn');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getNorm',column,key.localName,
String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.findKeySet=function(keySets,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var keySet=null;for(var i=0;i<keySets.length;i++){keySet=org.apache.flex.utils.Language.as(keySets[i],weavejs.api.data.IKeySet);if(keySet&&keySet.containsKey(key))break;else keySet=null}}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return keySet};
weavejs.data.EquationColumnLib.getSum=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getSum()};weavejs.data.EquationColumnLib.getMean=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getMean()};weavejs.data.EquationColumnLib.getVariance=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getVariance()};weavejs.data.EquationColumnLib.getStandardDeviation=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getStandardDeviation()};
weavejs.data.EquationColumnLib.getMin=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getMin()};weavejs.data.EquationColumnLib.getMax=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getMax()};weavejs.data.EquationColumnLib.getCount=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getCount()};
weavejs.data.EquationColumnLib.getRunningTotal=function(column,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result=NaN;if(column!=null){var runningTotals=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.StatisticsCache,weavejs.data.StatisticsCache).getRunningTotals(column);if(runningTotals!=null)result=runningTotals.get(key)}}finally{weavejs.data.EquationColumnLib.currentRecordKey=
previousKey}return result};
weavejs.data.EquationColumnLib.cast=function(value,newType){if(newType==null)return value;if(org.apache.flex.utils.Language.is(newType,String))newType=Weave.getDefinition(newType);if(newType==Number)value=weavejs.util.StandardLib.asNumber(value);else if(newType==String)value=weavejs.util.StandardLib.asString(value);else if(newType==Boolean)value=weavejs.util.StandardLib.asBoolean(value);else if(newType==Array)if(value!=null&&!org.apache.flex.utils.Language.is(value,Array))value=[value];return org.apache.flex.utils.Language.as(value,
newType)};weavejs.data.EquationColumnLib.QKey=weavejs.api.data.IQualifiedKey;weavejs.data.EquationColumnLib.prototype.FLEXJS_CLASS_INFO={names:[{name:'EquationColumnLib',qName:'weavejs.data.EquationColumnLib'}]};goog.exportSymbol('weavejs.data.EquationColumnLib',weavejs.data.EquationColumnLib);weavejs.data.EquationColumnLib.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.util.ArrayUtils');weavejs.util.ArrayUtils=function(){};weavejs.util.ArrayUtils.map_primitive_lookup=new weavejs.util.JS.Map;weavejs.util.ArrayUtils.map_object_lookup=new weavejs.util.JS.WeakMap;weavejs.util.ArrayUtils._lookupId=0;weavejs.util.ArrayUtils._getLookup=function(key){var lookup=key===null||typeof key!=='object'?weavejs.util.ArrayUtils.map_primitive_lookup:weavejs.util.ArrayUtils.map_object_lookup;return lookup.get(key)};
weavejs.util.ArrayUtils._setLookup=function(key,value){var lookup=key===null||typeof key!=='object'?weavejs.util.ArrayUtils.map_primitive_lookup:weavejs.util.ArrayUtils.map_object_lookup;lookup.set(key,value)};
weavejs.util.ArrayUtils.union=function(arrays){arrays=Array.prototype.slice.call(arguments,0);var result=[];weavejs.util.ArrayUtils._lookupId++;var foreachiter0_target=arrays;for(var foreachiter0 in foreachiter0_target){var array=foreachiter0_target[foreachiter0];var foreachiter1_target=array;for(var foreachiter1 in foreachiter1_target){var item=foreachiter1_target[foreachiter1];if(weavejs.util.ArrayUtils._getLookup(item)!==weavejs.util.ArrayUtils._lookupId){weavejs.util.ArrayUtils._setLookup(item,
weavejs.util.ArrayUtils._lookupId);result.push(item)}}}return result};
weavejs.util.ArrayUtils.intersection=function(firstArray,secondArray,moreArrays){moreArrays=Array.prototype.slice.call(arguments,2);moreArrays.unshift(secondArray);var result=[];var item;var lastArray=moreArrays.pop();weavejs.util.ArrayUtils._lookupId++;var foreachiter2_target=lastArray;for(var foreachiter2 in foreachiter2_target){item=foreachiter2_target[foreachiter2];weavejs.util.ArrayUtils._setLookup(item,weavejs.util.ArrayUtils._lookupId)}var foreachiter3_target=moreArrays;for(var foreachiter3 in foreachiter3_target){var array=
foreachiter3_target[foreachiter3];var foreachiter4_target=array;for(var foreachiter4 in foreachiter4_target){item=foreachiter4_target[foreachiter4];if(weavejs.util.ArrayUtils._getLookup(item)===weavejs.util.ArrayUtils._lookupId)weavejs.util.ArrayUtils._setLookup(item,weavejs.util.ArrayUtils._lookupId+1)}weavejs.util.ArrayUtils._lookupId++}var foreachiter5_target=firstArray;for(var foreachiter5 in foreachiter5_target){item=foreachiter5_target[foreachiter5];if(weavejs.util.ArrayUtils._getLookup(item)===
weavejs.util.ArrayUtils._lookupId)result.push(item)}return result};
weavejs.util.ArrayUtils.subtract=function(array,itemsToRemove){var item;weavejs.util.ArrayUtils._lookupId++;var foreachiter6_target=itemsToRemove;for(var foreachiter6 in foreachiter6_target){item=foreachiter6_target[foreachiter6];weavejs.util.ArrayUtils._setLookup(item,weavejs.util.ArrayUtils._lookupId)}var result=[];var i=0;var foreachiter7_target=array;for(var foreachiter7 in foreachiter7_target){item=foreachiter7_target[foreachiter7];if(weavejs.util.ArrayUtils._getLookup(item)!==weavejs.util.ArrayUtils._lookupId)result[i++]=
item}return result};weavejs.util.ArrayUtils.copy=function(source,destination){destination=typeof destination!=='undefined'?destination:null;if(!destination)destination=[];destination.length=source.length;for(var i in source)destination[i]=source[i];return destination};weavejs.util.ArrayUtils.fillKeys=function(output,keys){var foreachiter8_target=keys;for(var foreachiter8 in foreachiter8_target){var key=foreachiter8_target[foreachiter8];output[key]=true}};
weavejs.util.ArrayUtils.isEmpty=function(object){for(var key in object)return false;return true};weavejs.util.ArrayUtils.removeDuplicatesFromSortedArray=function(sorted){var n=sorted.length;if(n==0)return;var write=0;var prev=sorted[0]===undefined?null:undefined;for(var read=0;read<n;++read){var item=sorted[read];if(item!==prev)sorted[write++]=prev=item}sorted.length=write};
weavejs.util.ArrayUtils.randomSort=function(array){var i=array.length;while(i){var j=Math.floor(Math.random()*i--);var temp=array[i];array[i]=array[j];array[j]=temp}};
weavejs.util.ArrayUtils.partition=function(list,firstIndex,lastIndex,pivotIndex,compareFunction){var temp;var pivotValue=list[pivotIndex];temp=list[pivotIndex];list[pivotIndex]=list[lastIndex];list[lastIndex]=temp;var storeIndex=firstIndex;for(var i=firstIndex;i<lastIndex;i++)if(compareFunction(list[i],pivotValue)<0){if(storeIndex!=i){temp=list[storeIndex];list[storeIndex]=list[i];list[i]=temp}storeIndex++}if(storeIndex!=lastIndex){temp=list[storeIndex];list[storeIndex]=list[lastIndex];list[lastIndex]=
temp}return storeIndex};weavejs.util.ArrayUtils.testPartition=function(){var list=[3,7,5,8,2];var pivotIndex=weavejs.util.ArrayUtils.partition(list,0,list.length-1,list.length/2,weavejs.util.StandardLib.compare);for(var i=0;i<list.length;i++)if(i<pivotIndex!=list[i]<list[pivotIndex])throw new Error('assertion fail');};
weavejs.util.ArrayUtils.getMedianIndex=function(list,compareFunction,firstIndex,lastIndex){firstIndex=typeof firstIndex!=='undefined'?firstIndex:0;lastIndex=typeof lastIndex!=='undefined'?lastIndex:-1;var left=firstIndex;var right=lastIndex>=0?lastIndex:list.length-1;if(left>=right)return left;var medianIndex=org.apache.flex.utils.Language._int((left+right)/2);while(true){var pivotIndex=weavejs.util.ArrayUtils.partition(list,left,right,org.apache.flex.utils.Language._int((left+right)/2),compareFunction);
if(medianIndex==pivotIndex)break;if(medianIndex<pivotIndex)right=pivotIndex-1;else left=pivotIndex+1}return medianIndex};
weavejs.util.ArrayUtils.mergeSorted=function(sortedInputA,sortedInputB,mergedOutput,comparator){var indexA=0;var indexB=0;var indexOut=0;var lengthA=sortedInputA.length;var lengthB=sortedInputB.length;while(indexA<lengthA&&indexB<lengthB)if(comparator(sortedInputA[indexA],sortedInputB[indexB])<0)mergedOutput[indexOut++]=sortedInputA[indexA++];else mergedOutput[indexOut++]=sortedInputB[indexB++];while(indexA<lengthA)mergedOutput[indexOut++]=sortedInputA[indexA++];while(indexB<lengthB)mergedOutput[indexOut++]=
sortedInputB[indexB++];mergedOutput.length=indexOut};weavejs.util.ArrayUtils.flatten=function(source,destination){destination=typeof destination!=='undefined'?destination:null;if(destination==null)destination=[];if(source==null)return destination;for(var i=0;i<source.length;i++)if(org.apache.flex.utils.Language.is(source[i],Array))weavejs.util.ArrayUtils.flatten(source[i],destination);else destination.push(source[i]);return destination};
weavejs.util.ArrayUtils.flattenObject=function(input,output,prefix){output=typeof output!=='undefined'?output:null;prefix=typeof prefix!=='undefined'?prefix:'';if(output==null)output={};if(input==null)return output;for(var key in input)if(typeof input[key]=='object')weavejs.util.ArrayUtils.flattenObject(input[key],output,prefix+key+'.');else output[prefix+key]=input[key];return output};
weavejs.util.ArrayUtils.joinItems=function(arrayOfArrays,separator,includeEmptyItems){var maxLength=0;var itemList;var foreachiter9_target=arrayOfArrays;for(var foreachiter9 in foreachiter9_target){itemList=foreachiter9_target[foreachiter9];maxLength=Math.max(maxLength,itemList.length)}var result=[];for(var itemIndex=0;itemIndex<maxLength;itemIndex++){var joinedItem=[];for(var listIndex=0;listIndex<arrayOfArrays.length;listIndex++){itemList=org.apache.flex.utils.Language.as(arrayOfArrays[listIndex],
Array);var item='';if(itemList&&itemIndex<itemList.length)item=itemList[itemIndex]||'';if(item||includeEmptyItems)joinedItem.push(item)}result.push(joinedItem.join(separator))}return result};
weavejs.util.ArrayUtils.binarySearch=function(sortedUniqueValues,item,exactMatchOnly,compare){compare=typeof compare!=='undefined'?compare:null;var i=0,imin=0,imax=sortedUniqueValues.length-1;while(imin<=imax){i=org.apache.flex.utils.Language._int((imin+imax)/2);var a=sortedUniqueValues[i];var c=compare!=null?compare(item,a):item<a?-1:item>a?1:0;if(c<0)imax=i-1;else if(c>0)imin=++i;else return i}return exactMatchOnly?-1:i};
weavejs.util.ArrayUtils.zipObject=function(keys,values){var n=Math.min(keys.length,values.length);var o={};for(var i=0;i<n;i++)o[keys[i]]=values[i];return o};
weavejs.util.ArrayUtils.getItems=function(object,keys,output){output=typeof output!=='undefined'?output:null;if(!output)output=org.apache.flex.utils.Language.is(object,Array)?[]:{};if(!object)return output;var keyIndex,keyValue,item;for(keyIndex in keys){keyValue=keys[keyIndex];item=object[keyValue];if(org.apache.flex.utils.Language.is(output,Array))output[keyIndex]=item;else output[keyValue]=item}if(org.apache.flex.utils.Language.is(output,Array))output.length=keys?keys.length:0;return output};
weavejs.util.ArrayUtils.compareProperties=function(object1,object2,propertyNames){var foreachiter10_target=propertyNames;for(var foreachiter10 in foreachiter10_target){var name=foreachiter10_target[foreachiter10];var result=weavejs.util.StandardLib.compare(object1[name],object2[name]);if(result)return result}return 0};
weavejs.util.ArrayUtils.removeByIndex=function(array,indices){var n=array.length;var skipList=weavejs.util.ArrayUtils.union(indices);var iSkip=0;var skip=skipList[0];var write=skip;for(var read=skip;read<n;++read)if(read==skip)skip=skipList[++iSkip];else array[write++]=array[read];array.length=write};weavejs.util.ArrayUtils.pluck=function(array,property){weavejs.util.ArrayUtils._pluckProperty=property;return array.map(weavejs.util.ArrayUtils._pluck)};weavejs.util.ArrayUtils._pluckProperty;
weavejs.util.ArrayUtils._pluck=function(item,i,a){return item!=null?item[weavejs.util.ArrayUtils._pluckProperty]:undefined};weavejs.util.ArrayUtils.transpose=function(table){var result=[];for(var iCol=0;iCol<table.length;iCol++){var col=table[iCol];for(var iRow=0;iRow<col.length;iRow++){var row=result[iRow]||(result[iRow]=[]);row[iCol]=col[iRow]}}return result};
weavejs.util.ArrayUtils.createLookup=function(array,propertyChain){propertyChain=Array.prototype.slice.call(arguments,1);var lookup=new weavejs.util.JS.Map;for(var key in array){var value=array[key];var foreachiter11_target=propertyChain;for(var foreachiter11 in foreachiter11_target){var prop=foreachiter11_target[foreachiter11];value=value[prop]}lookup.set(value,key)}return lookup};weavejs.util.ArrayUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'ArrayUtils',qName:'weavejs.util.ArrayUtils'}]};
goog.exportSymbol('weavejs.util.ArrayUtils',weavejs.util.ArrayUtils);weavejs.util.ArrayUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.IPrimitiveColumn');goog.require('weavejs.api.data.IAttributeColumn');weavejs.api.data.IPrimitiveColumn=function(){};weavejs.api.data.IPrimitiveColumn.prototype.deriveStringFromNumber=function(value){};weavejs.api.data.IPrimitiveColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'IPrimitiveColumn',qName:'weavejs.api.data.IPrimitiveColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};
weavejs.api.data.IPrimitiveColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.api.data.IPrimitiveColumn'}}}}};goog.provide('weavejs.data.column.EquationColumn');goog.require('weavejs.data.EquationColumnLib');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.util.ArrayUtils');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.EquationColumn=function(){this._cachedMetadata={};this.d2d_key_dataType_value=new weavejs.util.Dictionary2D;this.equation=Weave.linkableChild(this,weavejs.core.LinkableString);this.variables=Weave.linkableChild(this,weavejs.core.LinkableHashMap);this.metadata=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.verifyMetadata,this,'verifyMetadata')));this.filterByKeyType=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(false));
weavejs.data.column.EquationColumn.base(this,'constructor');this.setMetadataProperty(weavejs.api.data.ColumnMetadata.TITLE,'Untitled Equation');this.variables.childListCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.handleVariableListChange,this,'handleVariableListChange'))};goog.inherits(weavejs.data.column.EquationColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.EquationColumn.debug=false;
weavejs.data.column.EquationColumn.prototype.handleVariableListChange=function(){var newColumn=org.apache.flex.utils.Language.as(this.variables.childListCallbacks.lastObjectAdded,weavejs.api.data.IAttributeColumn);if(newColumn)Weave.getCallbacks(weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(newColumn)).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'))};weavejs.data.column.EquationColumn.prototype._allKeys=null;weavejs.data.column.EquationColumn.prototype.map_allKeys;
weavejs.data.column.EquationColumn.prototype._allKeysTriggerCount=0;weavejs.data.column.EquationColumn.prototype._cachedMetadata;weavejs.data.column.EquationColumn.prototype._cachedMetadataTriggerCount=0;weavejs.data.column.EquationColumn.prototype._defaultDataType=null;weavejs.data.column.EquationColumn.prototype.compiledEquation=null;weavejs.data.column.EquationColumn.prototype._lastError;weavejs.data.column.EquationColumn.prototype.d2d_key_dataType_value;
weavejs.data.column.EquationColumn.prototype._cacheTriggerCount=0;weavejs.data.column.EquationColumn.UNDEFINED={};weavejs.data.column.EquationColumn.prototype.equation;weavejs.data.column.EquationColumn.prototype.variables;weavejs.data.column.EquationColumn.prototype.metadata;weavejs.data.column.EquationColumn.prototype.verifyMetadata=function(value){return typeof value=='object'};weavejs.data.column.EquationColumn.prototype.filterByKeyType;
weavejs.data.column.EquationColumn.prototype.getMetadata=function(propertyName){if(this._cachedMetadataTriggerCount!=this.triggerCounter){this._cachedMetadata={};this._cachedMetadataTriggerCount=this.triggerCounter}if(this._cachedMetadata.hasOwnProperty(propertyName))return org.apache.flex.utils.Language.as(this._cachedMetadata[propertyName],String);this._cachedMetadata[propertyName]=undefined;var value=this.metadata.state?org.apache.flex.utils.Language.as(this.metadata.state[propertyName],String):
null;if(value!=null){if(value.charAt(0)=='{'&&value.charAt(value.length-1)=='}')try{var func=weavejs.util.JS.compile(value);value=func.apply(this,arguments)}catch(e){this.errorHandler(e)}}else if(propertyName==weavejs.api.data.ColumnMetadata.KEY_TYPE){var cols=this.variables.getObjects(weavejs.api.data.IAttributeColumn);if(cols.length)value=org.apache.flex.utils.Language.as(cols[0],weavejs.api.data.IAttributeColumn).getMetadata(propertyName)}this._cachedMetadata[propertyName]=value;return value};
weavejs.data.column.EquationColumn.prototype.errorHandler=function(e){var str=org.apache.flex.utils.Language.is(e,Error)?e.message:String(e);if(this._lastError!=str){this._lastError=str;weavejs.util.JS.error(e)}};weavejs.data.column.EquationColumn.prototype.setMetadata=function(value){this.metadata.setSessionState(value)};weavejs.data.column.EquationColumn.prototype.getMetadataPropertyNames=function(){return weavejs.util.JS.objectKeys(this.metadata.getSessionState())};
weavejs.data.column.EquationColumn.prototype.setMetadataProperty=function(propertyName,value){value=weavejs.util.StandardLib.trim(value);var _metadata=this.metadata.state||{};_metadata[propertyName]=value;this.metadata.state=_metadata};weavejs.data.column.EquationColumn.prototype.requestVariable=function(name,classDef,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;return this.variables.requestObject(name,classDef,lockObject)};
weavejs.data.column.EquationColumn.prototype.containsKey=function(key){return this.keys&&this.map_allKeys.has(key)};
weavejs.data.column.EquationColumn.prototype.validateEquation=function(){var self=this;var __localFn0__=function(_){_=Array.prototype.slice.call(arguments,0);return undefined};if(this._cacheTriggerCount==this.triggerCounter)return this._compileError;this._cacheTriggerCount=this.triggerCounter;this._compileError=null;try{this.compiledEquation=weavejs.util.JS.compile(this.equation.value,['key','dataType'].concat(this.variables.getNames()));this.d2d_key_dataType_value=new weavejs.util.Dictionary2D}catch(e){this.compiledEquation=
__localFn0__;this._compileError=e.message}return this._compileError};weavejs.data.column.EquationColumn.prototype._compileError;
weavejs.data.column.EquationColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._cacheTriggerCount!=this.triggerCounter)this.validateEquation();if(dataType==null)dataType=Array;var value=this.d2d_key_dataType_value.get(key,dataType);if(value===undefined){this.d2d_key_dataType_value.set(key,dataType,weavejs.data.column.EquationColumn.UNDEFINED);var prevKey=weavejs.data.EquationColumnLib.currentRecordKey;weavejs.data.EquationColumnLib.currentRecordKey=
key;try{var args=this.variables.getObjects();args.unshift(key,dataType);value=this.compiledEquation.apply(this,args);if(weavejs.data.column.EquationColumn.debug)weavejs.util.JS.log(this,this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE),key.keyType,key.localName,dataType,value)}catch(e){if(this._lastError!=e.message){this._lastError=e.message;weavejs.util.JS.error(e)}}finally{weavejs.data.EquationColumnLib.currentRecordKey=prevKey}if(value!==undefined)this.d2d_key_dataType_value.set(key,dataType,
value)}else if(value===weavejs.data.column.EquationColumn.UNDEFINED)value=undefined;else if(weavejs.data.column.EquationColumn.debug)weavejs.util.JS.log('\x3e',this,this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE),key.keyType,key.localName,dataType,value);if(dataType==weavejs.api.data.IQualifiedKey){if(!org.apache.flex.utils.Language.is(value,weavejs.api.data.IQualifiedKey)){if(!org.apache.flex.utils.Language.is(value,String))value=weavejs.util.StandardLib.asString(value);value=weavejs.WeaveAPI.QKeyManager.getQKey(this.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE),
value)}}else if(dataType!=null)value=weavejs.data.EquationColumnLib.cast(value,dataType);return value};weavejs.data.column.EquationColumn.prototype._numberToStringFunction=null;
weavejs.data.column.EquationColumn.prototype.deriveStringFromNumber=function(number){if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.deriveStringFromNumber,this,'deriveStringFromNumber'),this.metadata))try{this._numberToStringFunction=weavejs.util.StandardLib.formatNumber;var n2s=this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(n2s)this._numberToStringFunction=weavejs.util.JS.compile(n2s,['number'])}catch(e){this.errorHandler(e)}if(this._numberToStringFunction!=null)try{var string=
this._numberToStringFunction.apply(this,arguments);if(weavejs.data.column.EquationColumn.debug)weavejs.util.JS.log(this,this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE),'deriveStringFromNumber',number,string);return string}catch(e){this.errorHandler(e)}return''};
Object.defineProperties(weavejs.data.column.EquationColumn.prototype,{keys:{get:function(){var self=this;var __localFn0__=function(key,i,a){return key.keyType==keyType};if(this._allKeysTriggerCount!=this.variables.triggerCounter){this._allKeys=null;this.map_allKeys=new weavejs.util.JS.WeakMap;this._allKeysTriggerCount=this.variables.triggerCounter;var variableColumns=this.variables.getObjects(weavejs.api.data.IKeySet);this._allKeys=weavejs.util.ArrayUtils.union.apply(weavejs.util.ArrayUtils,weavejs.util.ArrayUtils.pluck(variableColumns,
'keys'));if(this.filterByKeyType.value&&this._allKeys.length>0){var keyType=this.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);this._allKeys=this._allKeys.filter(__localFn0__)}var foreachiter0_target=this._allKeys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];this.map_allKeys.set(key,true)}}return this._allKeys||[]}}});
weavejs.data.column.EquationColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'EquationColumn',qName:'weavejs.data.column.EquationColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};goog.exportSymbol('weavejs.data.column.EquationColumn',weavejs.data.column.EquationColumn);
weavejs.data.column.EquationColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'equation':{type:'LinkableString'},'variables':{type:'LinkableHashMap'},'metadata':{type:'LinkableVariable'},'filterByKeyType':{type:'LinkableBoolean'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.EquationColumn'}}},methods:function(){return{'EquationColumn':{type:'',declaredBy:'weavejs.data.column.EquationColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.EquationColumn'},
'setMetadata':{type:'void',declaredBy:'weavejs.data.column.EquationColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.column.EquationColumn'},'setMetadataProperty':{type:'void',declaredBy:'weavejs.data.column.EquationColumn'},'requestVariable':{type:'*',declaredBy:'weavejs.data.column.EquationColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.EquationColumn'},'validateEquation':{type:'String',declaredBy:'weavejs.data.column.EquationColumn'},'getValueFromKey':{type:'*',
declaredBy:'weavejs.data.column.EquationColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.column.EquationColumn'}}}}};goog.provide('weavejs.api.data.IColumnReference');weavejs.api.data.IColumnReference=function(){};weavejs.api.data.IColumnReference.prototype.getDataSource=function(){};weavejs.api.data.IColumnReference.prototype.getColumnMetadata=function(){};weavejs.api.data.IColumnReference.prototype.FLEXJS_CLASS_INFO={names:[{name:'IColumnReference',qName:'weavejs.api.data.IColumnReference'}]};
weavejs.api.data.IColumnReference.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getDataSource':{type:'IDataSource',declaredBy:'weavejs.api.data.IColumnReference'},'getColumnMetadata':{type:'Object',declaredBy:'weavejs.api.data.IColumnReference'}}}}};goog.provide('weavejs.api.data.IWeaveTreeNodeWithPathFinding');goog.require('weavejs.api.data.IWeaveTreeNode');weavejs.api.data.IWeaveTreeNodeWithPathFinding=function(){};weavejs.api.data.IWeaveTreeNodeWithPathFinding.prototype.findPathToNode=function(descendant){};weavejs.api.data.IWeaveTreeNodeWithPathFinding.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveTreeNodeWithPathFinding',qName:'weavejs.api.data.IWeaveTreeNodeWithPathFinding'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};
weavejs.api.data.IWeaveTreeNodeWithPathFinding.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'findPathToNode':{type:'Array',declaredBy:'weavejs.api.data.IWeaveTreeNodeWithPathFinding'}}}}};goog.provide('weavejs.data.hierarchy.HierarchyUtils');weavejs.data.hierarchy.HierarchyUtils=function(){};weavejs.data.hierarchy.HierarchyUtils.findParentNode=function(root,dataSource,metadata){var leaf=dataSource.findHierarchyNode(metadata);var path=weavejs.data.hierarchy.HierarchyUtils.findPathToNode(root,leaf);if(path&&path.length>1)return path[path.length-2];return null};
weavejs.data.hierarchy.HierarchyUtils.findSiblingNodes=function(dataSource,metadata){if(!dataSource||!metadata)return[];var parent=weavejs.data.hierarchy.HierarchyUtils.findParentNode(dataSource.getHierarchyRoot(),dataSource,metadata);return parent?parent.getChildren():[]};
weavejs.data.hierarchy.HierarchyUtils.findPathToNode=function(root,descendant){if(!root||!descendant)return null;if(org.apache.flex.utils.Language.is(root,weavejs.api.data.IWeaveTreeNodeWithPathFinding))return org.apache.flex.utils.Language.as(root,weavejs.api.data.IWeaveTreeNodeWithPathFinding).findPathToNode(descendant);if(root.equals(descendant))return[root];var childs=root.getChildren();var foreachiter0_target=childs;for(var foreachiter0 in foreachiter0_target){var child=foreachiter0_target[foreachiter0];
var path=weavejs.data.hierarchy.HierarchyUtils.findPathToNode(child,descendant);if(path){path.unshift(root);return path}}return null};weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferenceDescendants=function(source){return weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferences(source.getHierarchyRoot(),[])};
weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferences=function(node,output){var ref=org.apache.flex.utils.Language.as(node,weavejs.api.data.IColumnReference);if(ref&&ref.getColumnMetadata())output.push(ref);if(node){var childs=node.getChildren();var foreachiter1_target=childs;for(var foreachiter1 in foreachiter1_target){var child=foreachiter1_target[foreachiter1];weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferences(child,output)}}return output};
weavejs.data.hierarchy.HierarchyUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'HierarchyUtils',qName:'weavejs.data.hierarchy.HierarchyUtils'}]};goog.exportSymbol('weavejs.data.hierarchy.HierarchyUtils',weavejs.data.hierarchy.HierarchyUtils);weavejs.data.hierarchy.HierarchyUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.data.hierarchy.WeaveTreeDescriptorNode');goog.require('weavejs.util.WeaveTreeItem');goog.require('weavejs.api.data.IWeaveTreeNode');
weavejs.data.hierarchy.WeaveTreeDescriptorNode=function(params){weavejs.data.hierarchy.WeaveTreeDescriptorNode.base(this,'constructor');this.childItemClass=weavejs.data.hierarchy.WeaveTreeDescriptorNode;if(typeof params==='object')for(var key in params)if(org.apache.flex.utils.Language.is(this[key],Function)&&weavejs.util.JS.hasProperty(this,'_'+key))this['_'+key]=params[key];else this[key]=params[key]};goog.inherits(weavejs.data.hierarchy.WeaveTreeDescriptorNode,weavejs.util.WeaveTreeItem);
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.__hasChildBranches=null;weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.hierarchy.WeaveTreeDescriptorNode);if(!that)return false;if(Object(this).constructor!=Object(that).constructor)return false;if(this.dependency!=that.dependency)return false;if(weavejs.util.StandardLib.compare(this.data,that.data)!=0)return false;return true};
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.getLabel=function(){return this.label};weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.isBranch=function(){return this._children!=null};
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.hasChildBranches=function(){var id='hasChildBranches';if(this.isCached(id))return this.cache(id);if(this.__hasChildBranches!=null)return this.cache(id,this.getBoolean(this.__hasChildBranches,id));var children=this.getChildren();var foreachiter0_target=children;for(var foreachiter0 in foreachiter0_target){var child=foreachiter0_target[foreachiter0];if(child.isBranch())return this.cache(id,true)}return this.cache(id,false)};
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.getChildren=function(){return this.children};Object.defineProperties(weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype,{_hasChildBranches:{set:function(value){this._counter['hasChildBranches']=undefined;this.__hasChildBranches=value}}});weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveTreeDescriptorNode',qName:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};
goog.exportSymbol('weavejs.data.hierarchy.WeaveTreeDescriptorNode',weavejs.data.hierarchy.WeaveTreeDescriptorNode);
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'_hasChildBranches':{type:'*',declaredBy:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'}}},methods:function(){return{'WeaveTreeDescriptorNode':{type:'',declaredBy:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'},'equals':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'},'getLabel':{type:'String',declaredBy:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'},
'isBranch':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'},'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'},'getChildren':{type:'Array',declaredBy:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'}}},metadata:function(){return[]}}};goog.provide('weavejs.data.hierarchy.ColumnTreeNode');goog.require('weavejs.data.hierarchy.HierarchyUtils');goog.require('weavejs.data.hierarchy.WeaveTreeDescriptorNode');goog.require('weavejs.api.data.IColumnReference');goog.require('weavejs.api.data.IWeaveTreeNodeWithPathFinding');
weavejs.data.hierarchy.ColumnTreeNode=function(params){weavejs.data.hierarchy.ColumnTreeNode.base(this,'constructor',params);this.childItemClass=weavejs.data.hierarchy.ColumnTreeNode;if(!params||!params.hasOwnProperty('dataSource'))throw new Error('ColumnTreeNode constructor: "dataSource" parameter is required');if(!this.dependency&&this.dataSource)this.dependency=this.dataSource.hierarchyRefresh};goog.inherits(weavejs.data.hierarchy.ColumnTreeNode,weavejs.data.hierarchy.WeaveTreeDescriptorNode);
weavejs.data.hierarchy.ColumnTreeNode.prototype.dataSource=null;weavejs.data.hierarchy.ColumnTreeNode.prototype.idFields=null;
weavejs.data.hierarchy.ColumnTreeNode.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.hierarchy.ColumnTreeNode);if(!that)return false;if(Object(this).constructor!=Object(that).constructor)return false;if(this.dependency!=that.dependency)return false;if(this.dataSource!=that.dataSource)return false;if(weavejs.util.StandardLib.compare(this.idFields,that.idFields)!=0)return false;if(this.idFields){var foreachiter0_target=this.idFields;for(var foreachiter0 in foreachiter0_target){var field=
foreachiter0_target[foreachiter0];if(weavejs.util.StandardLib.compare(this.data[field],that.data[field])!=0)return false}}else if(weavejs.util.StandardLib.compare(this.data,that.data)!=0)return false;return true};weavejs.data.hierarchy.ColumnTreeNode.prototype.getDataSource=function(){return this.dataSource};weavejs.data.hierarchy.ColumnTreeNode.prototype.getColumnMetadata=function(){if(this.isBranch())return null;return this.data};
weavejs.data.hierarchy.ColumnTreeNode.prototype.findPathToNode=function(descendant){if(this.equals(descendant))return[this];var _descendant=org.apache.flex.utils.Language.as(descendant,weavejs.data.hierarchy.ColumnTreeNode);if(_descendant){if(weavejs.util.StandardLib.compare(this.dataSource,_descendant.dataSource)!=0)return null;if(this.idFields&&this.data&&_descendant.data)var foreachiter1_target=this.idFields;for(var foreachiter1 in foreachiter1_target){var field=foreachiter1_target[foreachiter1];
if(this.data[field]!=_descendant.data[field])return null}}var childs=this.getChildren();var foreachiter2_target=childs;for(var foreachiter2 in foreachiter2_target){var child=foreachiter2_target[foreachiter2];var path=weavejs.data.hierarchy.HierarchyUtils.findPathToNode(child,descendant);if(path){path.unshift(this);return path}}return null};
Object.defineProperties(weavejs.data.hierarchy.ColumnTreeNode.prototype,{label:{get:function(){var str=org.apache.flex.utils.Language.superGetter(weavejs.data.hierarchy.ColumnTreeNode,this,'label');if(!str&&this.data)if(typeof this.data=='object')str=this.data.hasOwnProperty(weavejs.api.data.ColumnMetadata.TITLE)?this.data[weavejs.api.data.ColumnMetadata.TITLE]:Weave.lang('(Untitled)');else str=String(this.data);return str||''},set:function(value){org.apache.flex.utils.Language.superSetter(weavejs.data.hierarchy.ColumnTreeNode,
this,'label',value)}}});weavejs.data.hierarchy.ColumnTreeNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnTreeNode',qName:'weavejs.data.hierarchy.ColumnTreeNode'}],interfaces:[weavejs.api.data.IWeaveTreeNodeWithPathFinding,weavejs.api.data.IColumnReference]};goog.exportSymbol('weavejs.data.hierarchy.ColumnTreeNode',weavejs.data.hierarchy.ColumnTreeNode);
weavejs.data.hierarchy.ColumnTreeNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'dataSource':{type:'IDataSource'},'idFields':{type:'Array'}}},accessors:function(){return{'label':{type:'*',declaredBy:'weavejs.data.hierarchy.ColumnTreeNode'}}},methods:function(){return{'ColumnTreeNode':{type:'',declaredBy:'weavejs.data.hierarchy.ColumnTreeNode'},'equals':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.ColumnTreeNode'},'getDataSource':{type:'IDataSource',declaredBy:'weavejs.data.hierarchy.ColumnTreeNode'},
'getColumnMetadata':{type:'Object',declaredBy:'weavejs.data.hierarchy.ColumnTreeNode'},'findPathToNode':{type:'Array',declaredBy:'weavejs.data.hierarchy.ColumnTreeNode'}}},metadata:function(){return[]}}};goog.provide('weavejs.api.data.IDataSource');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IDataSource=function(){};weavejs.api.data.IDataSource.prototype.isLocal;weavejs.api.data.IDataSource.prototype.getLabel=function(){};weavejs.api.data.IDataSource.prototype.getHierarchyRoot=function(){};weavejs.api.data.IDataSource.prototype.findHierarchyNode=function(metadata){};weavejs.api.data.IDataSource.prototype.generateNewAttributeColumn=function(metadata){};
weavejs.api.data.IDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDataSource',qName:'weavejs.api.data.IDataSource'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.data.IDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.api.data.IDataSource'},'hierarchyRefresh':{type:'ICallbackCollection',declaredBy:'weavejs.api.data.IDataSource'}}},methods:function(){return{'getLabel':{type:'String',declaredBy:'weavejs.api.data.IDataSource'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.api.data.IDataSource'},'findHierarchyNode':{type:'IWeaveTreeNode',
declaredBy:'weavejs.api.data.IDataSource'},'generateNewAttributeColumn':{type:'IAttributeColumn',declaredBy:'weavejs.api.data.IDataSource'}}}}};goog.provide('weavejs.data.hierarchy.GlobalColumnDataSource');goog.require('weavejs.data.column.CSVColumn');goog.require('weavejs.data.column.EquationColumn');goog.require('weavejs.data.hierarchy.ColumnTreeNode');goog.require('weavejs.api.data.IDataSource');
weavejs.data.hierarchy.GlobalColumnDataSource=function(root){var self=this;var __localFn0__=function(){var __localFn0__=function(column,_){_=Array.prototype.slice.call(arguments,1);Weave.linkableChild(source,column);return self.createColumnNode(root.getName(column))};return self.getGlobalColumns().map(__localFn0__)};this._root=root;Weave.linkableChild(this,root.childListCallbacks);var source=this;this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:source,label:org.apache.flex.utils.Language.closure(this.getLabel,
this,'getLabel'),hasChildBranches:false,children:__localFn0__})};weavejs.data.hierarchy.GlobalColumnDataSource.getInstance=function(root){var instance=weavejs.data.hierarchy.GlobalColumnDataSource.map_root_instance.get(root);if(!instance)weavejs.data.hierarchy.GlobalColumnDataSource.map_root_instance.set(root,instance=new weavejs.data.hierarchy.GlobalColumnDataSource(root));return instance};weavejs.data.hierarchy.GlobalColumnDataSource.map_root_instance=new weavejs.util.JS.Map;
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.getLabel=function(){return this._root.getObjects(weavejs.data.column.CSVColumn).length?Weave.lang('Generated columns'):Weave.lang('Equations')};weavejs.data.hierarchy.GlobalColumnDataSource.NAME='name';weavejs.data.hierarchy.GlobalColumnDataSource.prototype._root;weavejs.data.hierarchy.GlobalColumnDataSource.prototype._rootNode;
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.getGlobalColumns=function(){var csvColumns=this._root.getObjects(weavejs.data.column.CSVColumn);var equationColumns=this._root.getObjects(weavejs.data.column.EquationColumn);return equationColumns.concat(csvColumns)};
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.createColumnNode=function(name){var self=this;var __localFn0__=function(){return column.getMetadata(weavejs.api.data.ColumnMetadata.TITLE)};var column=this.generateNewAttributeColumn(name);if(!column)return null;var meta={};meta[weavejs.data.hierarchy.GlobalColumnDataSource.NAME]=name;return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,dependency:column,label:__localFn0__,data:meta,idFields:[weavejs.data.hierarchy.GlobalColumnDataSource.NAME]})};
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.getHierarchyRoot=function(){return this._rootNode};weavejs.data.hierarchy.GlobalColumnDataSource.prototype.findHierarchyNode=function(metadata){var column=this.generateNewAttributeColumn(metadata);if(!column)return null;var name=this._root.getName(column);var node=this.createColumnNode(name);var path=this._rootNode.findPathToNode(node);if(path)return path[path.length-1];return null};
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.generateNewAttributeColumn=function(metadata){if(!metadata)return null;var name;if(typeof metadata=='object')name=metadata[weavejs.data.hierarchy.GlobalColumnDataSource.NAME];else name=org.apache.flex.utils.Language.as(metadata,String);return org.apache.flex.utils.Language.as(this._root.getObject(name),weavejs.api.data.IAttributeColumn)};
Object.defineProperties(weavejs.data.hierarchy.GlobalColumnDataSource.prototype,{isLocal:{get:function(){return true}},hierarchyRefresh:{get:function(){return Weave.getCallbacks(this)}}});weavejs.data.hierarchy.GlobalColumnDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'GlobalColumnDataSource',qName:'weavejs.data.hierarchy.GlobalColumnDataSource'}],interfaces:[weavejs.api.data.IDataSource]};goog.exportSymbol('weavejs.data.hierarchy.GlobalColumnDataSource',weavejs.data.hierarchy.GlobalColumnDataSource);
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.GlobalColumnDataSource'},'hierarchyRefresh':{type:'ICallbackCollection',declaredBy:'weavejs.data.hierarchy.GlobalColumnDataSource'}}},methods:function(){return{'GlobalColumnDataSource':{type:'',declaredBy:'weavejs.data.hierarchy.GlobalColumnDataSource'},'getLabel':{type:'String',declaredBy:'weavejs.data.hierarchy.GlobalColumnDataSource'},
'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.hierarchy.GlobalColumnDataSource'},'findHierarchyNode':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.hierarchy.GlobalColumnDataSource'},'generateNewAttributeColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.hierarchy.GlobalColumnDataSource'}}}}};goog.provide('weavejs.data.column.ReferencedColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.data.hierarchy.GlobalColumnDataSource');goog.require('weavejs.api.data.IColumnWrapper');
weavejs.data.column.ReferencedColumn=function(){this.dataSourceName=Weave.linkableChild(this,weavejs.core.LinkableString,org.apache.flex.utils.Language.closure(this.updateDataSource,this,'updateDataSource'));this.metadata=Weave.linkableChild(this,weavejs.core.LinkableVariable);this._columnWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher);weavejs.data.column.ReferencedColumn.base(this,'constructor')};goog.inherits(weavejs.data.column.ReferencedColumn,weavejs.core.CallbackCollection);
weavejs.data.column.ReferencedColumn.prototype._initialized=false;weavejs.data.column.ReferencedColumn.prototype._dataSource;
weavejs.data.column.ReferencedColumn.prototype.updateDataSource=function(){var root=Weave.getRoot(this);if(!root)return;if(!this._initialized){root.childListCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.updateDataSource,this,'updateDataSource'));this._initialized=true}var ds=org.apache.flex.utils.Language.as(root.getObject(this.dataSourceName.value),weavejs.api.data.IDataSource);if(!ds)ds=weavejs.data.hierarchy.GlobalColumnDataSource.getInstance(root);if(this._dataSource!=
ds){this._dataSource=ds;this.triggerCallbacks()}};weavejs.data.column.ReferencedColumn.prototype.dataSourceName;weavejs.data.column.ReferencedColumn.prototype.metadata;weavejs.data.column.ReferencedColumn.prototype.getDataSource=function(){return this._dataSource};weavejs.data.column.ReferencedColumn.prototype.getHierarchyNode=function(){weavejs.api.data.IColumnReference;if(!this._dataSource)return null;var meta=this.metadata.getSessionState();return this._dataSource.findHierarchyNode(meta)};
weavejs.data.column.ReferencedColumn.prototype.setColumnReference=function(dataSource,metadata){this.delayCallbacks();var root=Weave.getRoot(this);if(!root)throw new Error('ReferencedColumn is not registered with an instance of Weave');this.dataSourceName.value=root.getName(dataSource);this.metadata.setSessionState(metadata);this.resumeCallbacks()};
weavejs.data.column.ReferencedColumn.generateReferencedColumnStateFromColumnReference=function(ref){var dataSource=ref.getDataSource();var root=Weave.getRoot(dataSource);var name=root?root.getName(dataSource):null;return{'dataSourceName':name,'metadata':ref.getColumnMetadata()}};weavejs.data.column.ReferencedColumn.prototype._prevTriggerCounter=0;weavejs.data.column.ReferencedColumn.prototype._internalColumn=null;weavejs.data.column.ReferencedColumn.prototype._columnWatcher;
weavejs.data.column.ReferencedColumn.prototype.getInternalColumn=function(){if(this._prevTriggerCounter!=this.triggerCounter){if(Weave.wasDisposed(this._dataSource))this._dataSource=null;this._columnWatcher.target=this._internalColumn=weavejs.WeaveAPI.AttributeColumnCache.getColumn(this._dataSource,this.metadata.state);this._prevTriggerCounter=this.triggerCounter}return this._internalColumn};
weavejs.data.column.ReferencedColumn.prototype.getMetadata=function(attributeName){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.getMetadata(attributeName):null};weavejs.data.column.ReferencedColumn.prototype.getMetadataPropertyNames=function(){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.getMetadataPropertyNames():[]};
weavejs.data.column.ReferencedColumn.prototype.containsKey=function(key){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn&&this._internalColumn.containsKey(key)};
weavejs.data.column.ReferencedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.getValueFromKey(key,dataType):undefined};
Object.defineProperties(weavejs.data.column.ReferencedColumn.prototype,{keys:{get:function(){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.keys:[]}}});weavejs.data.column.ReferencedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ReferencedColumn',qName:'weavejs.data.column.ReferencedColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};goog.exportSymbol('weavejs.data.column.ReferencedColumn',weavejs.data.column.ReferencedColumn);
weavejs.data.column.ReferencedColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'dataSourceName':{type:'LinkableString'},'metadata':{type:'LinkableVariable'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.ReferencedColumn'}}},methods:function(){return{'ReferencedColumn':{type:'',declaredBy:'weavejs.data.column.ReferencedColumn'},'getDataSource':{type:'IDataSource',declaredBy:'weavejs.data.column.ReferencedColumn'},'getHierarchyNode':{type:'IWeaveTreeNode',
declaredBy:'weavejs.data.column.ReferencedColumn'},'setColumnReference':{type:'void',declaredBy:'weavejs.data.column.ReferencedColumn'},'getInternalColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.column.ReferencedColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.ReferencedColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.column.ReferencedColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.ReferencedColumn'},'getValueFromKey':{type:'*',
declaredBy:'weavejs.data.column.ReferencedColumn'}}}}};goog.provide('weavejs.data.column.SecondaryKeyNumColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.SecondaryKeyNumColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this.d2d_qkeyA_keyB_number=new weavejs.util.Dictionary2D;this.map_qkeyAB_number=new weavejs.util.JS.Map;this._uniqueStrings=[];this._uniqueSecondaryKeys=new Array;this._uniqueKeysA=[];this._uniqueKeysAB=[];this.map_qkeyAB_qkeyData=new weavejs.util.JS.WeakMap;weavejs.data.column.SecondaryKeyNumColumn.base(this,'constructor',metadata);weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.addImmediateCallback(this,
org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'));weavejs.data.column.SecondaryKeyNumColumn.useGlobalMinMaxValues.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'))};goog.inherits(weavejs.data.column.SecondaryKeyNumColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.SecondaryKeyNumColumn.prototype.baseTitle;
weavejs.data.column.SecondaryKeyNumColumn.prototype.getMetadata=function(propertyName){if(weavejs.data.column.SecondaryKeyNumColumn.useGlobalMinMaxValues.value){if(propertyName==weavejs.api.data.ColumnMetadata.MIN)return String(this._minNumber);if(propertyName==weavejs.api.data.ColumnMetadata.MAX)return String(this._maxNumber)}var value=weavejs.data.column.SecondaryKeyNumColumn.base(this,'getMetadata',propertyName);switch(propertyName){case weavejs.api.data.ColumnMetadata.TITLE:value=this.baseTitle||
value;if(value!=null&&weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value&&!weavejs.data.column.SecondaryKeyNumColumn.allKeysHack)return value+' ('+weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value+')';break;case weavejs.api.data.ColumnMetadata.KEY_TYPE:if(weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value==null)return value+this.TYPE_SUFFIX;break;case weavejs.api.data.ColumnMetadata.DATA_TYPE:return value||(this._dataType==Number?weavejs.api.data.DataType.NUMBER:
weavejs.api.data.DataType.STRING)}return value};weavejs.data.column.SecondaryKeyNumColumn.prototype.TYPE_SUFFIX=',Year';weavejs.data.column.SecondaryKeyNumColumn.prototype._minNumber=NaN;weavejs.data.column.SecondaryKeyNumColumn.prototype._maxNumber=NaN;weavejs.data.column.SecondaryKeyNumColumn.prototype.d2d_qkeyA_keyB_number;weavejs.data.column.SecondaryKeyNumColumn.prototype.map_qkeyAB_number;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueStrings;weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter;
weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueSecondaryKeys;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueKeysA;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueKeysAB;weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=false;
weavejs.data.column.SecondaryKeyNumColumn.prototype.containsKey=function(key){var skfv=weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value;if(skfv==null||weavejs.data.column.SecondaryKeyNumColumn.allKeysHack)return this.map_qkeyAB_number[key]!==undefined;return this.d2d_qkeyA_keyB_number.get(key,skfv)!==undefined};
weavejs.data.column.SecondaryKeyNumColumn.prototype.updateRecords=function(qkeysA,keysB,data){if(this._uniqueStrings.length>0)weavejs.util.JS.error('Replacing existing records is not supported');var index,qkeyA,keyB,qkeyAB;var _key;var dataObject=null;if(qkeysA.length!=data.length||keysB.length!=data.length){weavejs.util.JS.error('Array lengths differ');return}this.d2d_qkeyA_keyB_number=new weavejs.util.Dictionary2D;var dataType=weavejs.data.column.SecondaryKeyNumColumn.base(this,'getMetadata',weavejs.api.data.ColumnMetadata.DATA_TYPE);
if(org.apache.flex.utils.Language.is(data[0],String)||dataType&&dataType!=weavejs.api.data.DataType.NUMBER){if(!dataType)dataType=weavejs.api.data.DataType.STRING;for(var i=0;i<data.length;i++)if(this._uniqueStrings.indexOf(data[i])<0)this._uniqueStrings.push(data[i]);weavejs.util.AsyncSort.sortImmediately(this._uniqueStrings);this._minNumber=0;this._maxNumber=this._uniqueStrings.length-1}else{dataType=weavejs.api.data.DataType.NUMBER;this._minNumber=NaN;this._maxNumber=NaN}this._metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=
dataType;this._dataType=dataType==weavejs.api.data.DataType.NUMBER?Number:String;for(index=0;index<qkeysA.length;index++){qkeyA=org.apache.flex.utils.Language.as(qkeysA[index],weavejs.api.data.IQualifiedKey);keyB=String(keysB[index]);dataObject=data[index];qkeyAB=weavejs.WeaveAPI.QKeyManager.getQKey(qkeyA.keyType+this.TYPE_SUFFIX,qkeyA.localName+','+keyB);if(this._uniqueSecondaryKeys.indexOf(keyB)<0)this._uniqueSecondaryKeys.push(keyB);if(org.apache.flex.utils.Language.is(dataObject,String)){var iString=
this._uniqueStrings.indexOf(dataObject);if(iString<0){iString=this._uniqueStrings.length;this._uniqueStrings[iString]=dataObject}this.d2d_qkeyA_keyB_number.set(qkeyA,keyB,iString);this.map_qkeyAB_number.set(qkeyAB,iString)}else{this.d2d_qkeyA_keyB_number.set(qkeyA,keyB,dataObject);this.map_qkeyAB_number.set(qkeyAB,dataObject);this._minNumber=isNaN(this._minNumber)?dataObject:Math.min(this._minNumber,dataObject);this._maxNumber=isNaN(this._maxNumber)?dataObject:Math.max(this._maxNumber,dataObject)}}weavejs.util.AsyncSort.sortImmediately(this._uniqueSecondaryKeys);
this._uniqueKeysA=this.d2d_qkeyA_keyB_number.primaryKeys();this._uniqueKeysAB=weavejs.util.JS.mapKeys(this.map_qkeyAB_number);this.triggerCallbacks()};weavejs.data.column.SecondaryKeyNumColumn.prototype.maxDerivedSignificantDigits=10;
weavejs.data.column.SecondaryKeyNumColumn.prototype.deriveStringFromNumber=function(number){if(org.apache.flex.utils.Language._int(number)==number&&this._uniqueStrings.length>0&&number<this._uniqueStrings.length)return this._uniqueStrings[number];return weavejs.util.StandardLib.formatNumber(weavejs.util.StandardLib.roundSignificant(number,this.maxDerivedSignificantDigits))};weavejs.data.column.SecondaryKeyNumColumn.prototype.map_qkeyAB_qkeyData;weavejs.data.column.SecondaryKeyNumColumn.prototype._dataType;
weavejs.data.column.SecondaryKeyNumColumn.prototype.getValueFromKey=function(qkey,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(!dataType)dataType=this._dataType;var value=NaN;if(this.map_qkeyAB_number.has(qkey))value=this.map_qkeyAB_number.get(qkey);else value=this.d2d_qkeyA_keyB_number.get(qkey,weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value);if(isNaN(value))return weavejs.data.EquationColumnLib.cast(undefined,dataType);if(dataType==weavejs.api.data.IQualifiedKey){if(!this.map_qkeyAB_qkeyData.has(qkey)){var type=
this.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);if(type==weavejs.api.data.DataType.NUMBER)return null;if(type=='')type=weavejs.api.data.DataType.STRING;this.map_qkeyAB_qkeyData.set(qkey,weavejs.WeaveAPI.QKeyManager.getQKey(type,this.deriveStringFromNumber(value)))}return this.map_qkeyAB_qkeyData.get(qkey)}if(dataType==String)return this.deriveStringFromNumber(value);return value};
Object.defineProperties(weavejs.data.column.SecondaryKeyNumColumn.prototype,{secondaryKeys:{get:function(){return this._uniqueSecondaryKeys}},keys:{get:function(){if(weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value==null||weavejs.data.column.SecondaryKeyNumColumn.allKeysHack)return this._uniqueKeysAB;return this._uniqueKeysA}}});
Object.defineProperties(weavejs.data.column.SecondaryKeyNumColumn,{secondaryKeyFilter:{get:function(){if(!weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter)weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter=new weavejs.core.LinkableString;return weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter}},useGlobalMinMaxValues:{get:function(){if(!weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues)weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues=
new weavejs.core.LinkableBoolean(true);return weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues}}});weavejs.data.column.SecondaryKeyNumColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'SecondaryKeyNumColumn',qName:'weavejs.data.column.SecondaryKeyNumColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};goog.exportSymbol('weavejs.data.column.SecondaryKeyNumColumn',weavejs.data.column.SecondaryKeyNumColumn);
weavejs.data.column.SecondaryKeyNumColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'baseTitle':{type:'String'}}},accessors:function(){return{'secondaryKeys':{type:'Array',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'},'keys':{type:'Array',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'}}},methods:function(){return{'SecondaryKeyNumColumn':{type:'',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'},
'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'},'updateRecords':{type:'void',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.SecondaryKeyNumColumn'}}}}};goog.provide('weavejs.geom.GeoJSON');weavejs.geom.GeoJSON=function(){};weavejs.geom.GeoJSON.P_TYPE='type';weavejs.geom.GeoJSON.P_CRS='crs';weavejs.geom.GeoJSON.P_BBOX='bbox';weavejs.geom.GeoJSON.G_P_COORDINATES='coordinates';weavejs.geom.GeoJSON.GC_P_GEOMETRIES='geometries';weavejs.geom.GeoJSON.F_P_ID='id';weavejs.geom.GeoJSON.F_P_GEOMETRY='geometry';weavejs.geom.GeoJSON.F_P_PROPERTIES='properties';weavejs.geom.GeoJSON.CRS_P_TYPE='type';weavejs.geom.GeoJSON.CRS_P_PROPERTIES='properties';
weavejs.geom.GeoJSON.CRS_T_NAME='name';weavejs.geom.GeoJSON.CRS_T_LINK='link';weavejs.geom.GeoJSON.CRS_N_P_NAME='name';weavejs.geom.GeoJSON.CRS_L_P_HREF='href';weavejs.geom.GeoJSON.CRS_L_P_TYPE='type';weavejs.geom.GeoJSON.FC_P_FEATURES='features';weavejs.geom.GeoJSON.T_POINT='Point';weavejs.geom.GeoJSON.T_MULTI_POINT='MultiPoint';weavejs.geom.GeoJSON.T_LINE_STRING='LineString';weavejs.geom.GeoJSON.T_MULTI_LINE_STRING='MultiLineString';weavejs.geom.GeoJSON.T_POLYGON='Polygon';
weavejs.geom.GeoJSON.T_MULTI_POLYGON='MultiPolygon';weavejs.geom.GeoJSON.T_GEOMETRY_COLLECTION='GeometryCollection';weavejs.geom.GeoJSON.T_FEATURE='Feature';weavejs.geom.GeoJSON.T_FEATURE_COLLECTION='FeatureCollection';weavejs.geom.GeoJSON.isGeoJSONObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);return weavejs.geom.GeoJSON.isFeatureObject(obj)||weavejs.geom.GeoJSON.isFeatureCollectionObject(obj)||weavejs.geom.GeoJSON.isGeometryObject(obj)};
weavejs.geom.GeoJSON.couldBeGeoJSONObject=function(obj){return obj&&obj.hasOwnProperty(weavejs.geom.GeoJSON.P_TYPE)&&(!obj.hasOwnProperty(weavejs.geom.GeoJSON.P_CRS)||weavejs.geom.GeoJSON.isCRSObject(obj[weavejs.geom.GeoJSON.P_CRS]))&&(!obj.hasOwnProperty(weavejs.geom.GeoJSON.P_BBOX)||weavejs.geom.GeoJSON.isBBOXObject(obj[weavejs.geom.GeoJSON.P_BBOX]))};
weavejs.geom.GeoJSON.isFeatureObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);return weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj)&&obj[weavejs.geom.GeoJSON.P_TYPE]==weavejs.geom.GeoJSON.T_FEATURE&&obj.hasOwnProperty(weavejs.geom.GeoJSON.F_P_GEOMETRY)&&(obj[weavejs.geom.GeoJSON.F_P_GEOMETRY]===null||weavejs.geom.GeoJSON.isGeometryObject(obj[weavejs.geom.GeoJSON.F_P_GEOMETRY]))&&obj.hasOwnProperty(weavejs.geom.GeoJSON.F_P_PROPERTIES)&&typeof obj[weavejs.geom.GeoJSON.F_P_PROPERTIES]==
'object'};weavejs.geom.GeoJSON.isFeatureCollectionObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);return weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj)&&obj[weavejs.geom.GeoJSON.P_TYPE]==weavejs.geom.GeoJSON.T_FEATURE_COLLECTION&&obj.hasOwnProperty(weavejs.geom.GeoJSON.FC_P_FEATURES)&&org.apache.flex.utils.Language.is(obj[weavejs.geom.GeoJSON.FC_P_FEATURES],Array)&&org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.FC_P_FEATURES],Array).every(weavejs.geom.GeoJSON.isFeatureObject)};
weavejs.geom.GeoJSON.isGeometryObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);if(!weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj))return false;var coords=obj.hasOwnProperty(weavejs.geom.GeoJSON.G_P_COORDINATES)?org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.G_P_COORDINATES],Array):null;switch(obj[weavejs.geom.GeoJSON.P_TYPE]){case weavejs.geom.GeoJSON.T_POINT:return weavejs.geom.GeoJSON.isPositionCoords(coords);case weavejs.geom.GeoJSON.T_MULTI_POINT:return coords&&coords.every(weavejs.geom.GeoJSON.isPositionCoords);
case weavejs.geom.GeoJSON.T_LINE_STRING:return weavejs.geom.GeoJSON.isLineStringCoords(coords);case weavejs.geom.GeoJSON.T_MULTI_LINE_STRING:return coords&&coords.every(weavejs.geom.GeoJSON.isLineStringCoords);case weavejs.geom.GeoJSON.T_POLYGON:return weavejs.geom.GeoJSON.isPolygonCoords(coords);case weavejs.geom.GeoJSON.T_MULTI_POLYGON:return coords&&coords.every(weavejs.geom.GeoJSON.isPolygonCoords);case weavejs.geom.GeoJSON.T_GEOMETRY_COLLECTION:return weavejs.geom.GeoJSON.isGeometryCollectionObject(obj);
default:return false}};weavejs.geom.GeoJSON.isGeometryCollectionObject=function(obj){return weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj)&&obj.hasOwnProperty(weavejs.geom.GeoJSON.GC_P_GEOMETRIES)&&org.apache.flex.utils.Language.is(obj[weavejs.geom.GeoJSON.GC_P_GEOMETRIES],Array)&&org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.GC_P_GEOMETRIES],Array).every(weavejs.geom.GeoJSON.isGeometryObject)};
weavejs.geom.GeoJSON.isPositionCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.length>=2&&weavejs.util.StandardLib.getArrayType(array)==Number};weavejs.geom.GeoJSON.isLineStringCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.length>=2&&array.every(weavejs.geom.GeoJSON.isPositionCoords)};
weavejs.geom.GeoJSON.isLinearRingCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.length>=4&&array.every(weavejs.geom.GeoJSON.isPositionCoords)&&weavejs.util.StandardLib.compare(array[0],array[array.length-1])==0};weavejs.geom.GeoJSON.isPolygonCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.every(weavejs.geom.GeoJSON.isLinearRingCoords)};
weavejs.geom.GeoJSON.isCRSObject=function(obj){if(obj==null)return true;if(!obj.hasOwnProperty(weavejs.geom.GeoJSON.CRS_P_TYPE)||!obj.hasOwnProperty(weavejs.geom.GeoJSON.CRS_P_PROPERTIES))return false;var props=obj[weavejs.geom.GeoJSON.CRS_P_PROPERTIES];switch(obj[weavejs.geom.GeoJSON.CRS_P_TYPE]){case weavejs.geom.GeoJSON.CRS_T_NAME:return props&&props.hasOwnProperty(weavejs.geom.GeoJSON.CRS_N_P_NAME)&&org.apache.flex.utils.Language.is(props[weavejs.geom.GeoJSON.CRS_N_P_NAME],String);case weavejs.geom.GeoJSON.CRS_T_LINK:return props&&
props.hasOwnProperty(weavejs.geom.GeoJSON.CRS_L_P_HREF)&&org.apache.flex.utils.Language.is(props[weavejs.geom.GeoJSON.CRS_L_P_HREF],String)&&(!props.hasOwnProperty(weavejs.geom.GeoJSON.CRS_L_P_TYPE)||org.apache.flex.utils.Language.is(props[weavejs.geom.GeoJSON.CRS_L_P_TYPE],String));default:return false}};
weavejs.geom.GeoJSON.isBBOXObject=function(obj){var array=org.apache.flex.utils.Language.as(obj,Array);return weavejs.util.StandardLib.getArrayType(array)==Number&&array.length>=4&&array.length%2==0};
weavejs.geom.GeoJSON.asFeatureCollection=function(obj,_){_=Array.prototype.slice.call(arguments,1);if(weavejs.geom.GeoJSON.isFeatureCollectionObject(obj))return obj;var features=null;if(weavejs.geom.GeoJSON.isFeatureObject(obj))features=[obj];if(weavejs.geom.GeoJSON.isGeometryCollectionObject(obj))features=org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.GC_P_GEOMETRIES],Array).map(weavejs.geom.GeoJSON.geometryAsFeature);if(weavejs.geom.GeoJSON.isGeometryObject(obj))features=[weavejs.geom.GeoJSON.geometryAsFeature(obj)];
var featureCollection={};featureCollection[weavejs.geom.GeoJSON.P_TYPE]=weavejs.geom.GeoJSON.T_FEATURE_COLLECTION;featureCollection[weavejs.geom.GeoJSON.FC_P_FEATURES]=features||[];return featureCollection};
weavejs.geom.GeoJSON.geometryAsFeature=function(obj,id,_){id=typeof id!=='undefined'?id:undefined;_=typeof _!=='undefined'?_:undefined;var feature={};feature[weavejs.geom.GeoJSON.P_TYPE]=feature[weavejs.geom.GeoJSON.T_FEATURE];if(id!==undefined)feature[weavejs.geom.GeoJSON.F_P_ID]=id;feature[weavejs.geom.GeoJSON.F_P_GEOMETRY]=obj;feature[weavejs.geom.GeoJSON.F_P_PROPERTIES]=null;return feature};
weavejs.geom.GeoJSON.getMultiGeomObject=function(geoms){var __localFn0__=function(geom,_){_=Array.prototype.slice.call(arguments,1);return geom[weavejs.geom.GeoJSON.G_P_COORDINATES]};var first=geoms[0];var type=first?first[weavejs.geom.GeoJSON.P_TYPE]:weavejs.geom.GeoJSON.T_MULTI_POINT;var multiType=weavejs.geom.GeoJSON.typeToMultiType(type);var allCoords=geoms.map(__localFn0__);var multiCoords;if(type==multiType){multiCoords=[];multiCoords=multiCoords.concat.apply(multiCoords,allCoords)}else multiCoords=
allCoords;var multiGeom={};multiGeom[weavejs.geom.GeoJSON.P_TYPE]=multiType;multiGeom[weavejs.geom.GeoJSON.G_P_COORDINATES]=multiCoords;return multiGeom};
weavejs.geom.GeoJSON.typeToMultiType=function(type){if(type==weavejs.geom.GeoJSON.T_POINT||type==weavejs.geom.GeoJSON.T_MULTI_POINT)return weavejs.geom.GeoJSON.T_MULTI_POINT;if(type==weavejs.geom.GeoJSON.T_LINE_STRING||type==weavejs.geom.GeoJSON.T_MULTI_LINE_STRING)return weavejs.geom.GeoJSON.T_MULTI_LINE_STRING;if(type==weavejs.geom.GeoJSON.T_POLYGON||type==weavejs.geom.GeoJSON.T_MULTI_POLYGON)return weavejs.geom.GeoJSON.T_MULTI_POLYGON;return null};
weavejs.geom.GeoJSON.getProjectionFromURN=function(ogc_crs_urn){var array=ogc_crs_urn.split(':');if(array.length>2)return array[array.length-3]+':'+array[array.length-1];return ogc_crs_urn};weavejs.geom.GeoJSON.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSON',qName:'weavejs.geom.GeoJSON'}]};goog.exportSymbol('weavejs.geom.GeoJSON',weavejs.geom.GeoJSON);weavejs.geom.GeoJSON.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.geom.Point');weavejs.geom.Point=function(x,y){x=typeof x!=='undefined'?x:NaN;y=typeof y!=='undefined'?y:NaN;this.x=x;this.y=y};weavejs.geom.Point.prototype.x;weavejs.geom.Point.prototype.y;weavejs.geom.Point.distance=function(p1,p2){var dx=p2.x-p1.x;var dy=p2.y-p1.y;return Math.sqrt(dx*dx+dy*dy)};weavejs.geom.Point.interpolate=function(p1,p2,percentage){var dx=p2.x-p1.x;var dy=p2.y-p1.y;return new weavejs.geom.Point(p1.x+percentage*dx,p1.y+percentage*dy)};
weavejs.geom.Point.prototype.FLEXJS_CLASS_INFO={names:[{name:'Point',qName:'weavejs.geom.Point'}]};goog.exportSymbol('weavejs.geom.Point',weavejs.geom.Point);weavejs.geom.Point.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'x':{type:'Number'},'y':{type:'Number'}}},accessors:function(){return{}},methods:function(){return{'Point':{type:'',declaredBy:'weavejs.geom.Point'}}}}};goog.provide('weavejs.data.ColumnUtils');goog.require('weavejs.api.data.ColumnMetadata');goog.require('weavejs.api.data.DataType');goog.require('weavejs.data.column.ReferencedColumn');goog.require('weavejs.data.column.SecondaryKeyNumColumn');goog.require('weavejs.data.hierarchy.ColumnTreeNode');goog.require('weavejs.data.hierarchy.HierarchyUtils');goog.require('weavejs.geom.GeoJSON');goog.require('weavejs.geom.Point');goog.require('weavejs.util.ArrayUtils');weavejs.data.ColumnUtils=function(){};
weavejs.data.ColumnUtils.debugKeyTypes=false;weavejs.data.ColumnUtils.getTitle=function(column){var title=column.getMetadata(weavejs.api.data.ColumnMetadata.TITLE)||Weave.lang('(Data unavailable)');if(weavejs.data.ColumnUtils.debugKeyTypes){var keyType=column.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);if(keyType)title+=' (Key type: '+keyType+')';else title+=' (No key type)'}return title};
weavejs.data.ColumnUtils.getColumnListLabel=function(column){var title=weavejs.data.ColumnUtils.getTitle(column);var keyType=weavejs.data.ColumnUtils.getKeyType(column);var dataType=weavejs.data.ColumnUtils.getDataType(column);var projection=column.getMetadata(weavejs.api.data.ColumnMetadata.PROJECTION);var dateFormat=column.getMetadata(weavejs.api.data.ColumnMetadata.DATE_FORMAT);if(dataType==weavejs.api.data.DataType.DATE&&dateFormat)dataType=dataType+'; '+dateFormat;if(dataType==weavejs.api.data.DataType.GEOMETRY&&
projection)dataType=dataType+'; '+projection;if(dataType&&keyType)return weavejs.util.StandardLib.substitute('{0} ({1} -\x3e {2})',title,keyType,dataType);if(keyType)return weavejs.util.StandardLib.substitute('{0} (Key Type: {1})',title,keyType);if(dataType)return weavejs.util.StandardLib.substitute('{0} (Data Type: {1})',title,dataType);return title};
weavejs.data.ColumnUtils.getDataSources=function(column){var sources=[];var name;var nameMap={};var cols;if(org.apache.flex.utils.Language.is(column,weavejs.data.column.ReferencedColumn))cols=[column];else cols=Weave.getDescendants(column,weavejs.data.column.ReferencedColumn);for(var i=0;i<cols.length;i++)sources.push(org.apache.flex.utils.Language.as(cols[i],weavejs.data.column.ReferencedColumn).getDataSource());return weavejs.util.ArrayUtils.union(sources)};
weavejs.data.ColumnUtils.getKeyType=function(column){var keyType=column.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);if(keyType==null){var keys=column.keys;if(keys.length>0)keyType=org.apache.flex.utils.Language.as(keys[0],weavejs.api.data.IQualifiedKey).keyType}return keyType};weavejs.data.ColumnUtils.getDataType=function(column){return column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)};
weavejs.data.ColumnUtils.deriveStringFromNumber=function(column,number){var pc=org.apache.flex.utils.Language.as(weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column),weavejs.api.data.IPrimitiveColumn);if(pc)return pc.deriveStringFromNumber(number);return null};
weavejs.data.ColumnUtils.hack_findNonWrapperColumn=function(column){while(org.apache.flex.utils.Language.is(column,weavejs.api.data.IColumnWrapper))column=org.apache.flex.utils.Language.as(column,weavejs.api.data.IColumnWrapper).getInternalColumn();return column};
weavejs.data.ColumnUtils.hack_findInternalDynamicColumn=function(columnWrapper){columnWrapper=org.apache.flex.utils.Language.as(columnWrapper,weavejs.api.data.IColumnWrapper);if(columnWrapper){while(true)if(org.apache.flex.utils.Language.is(columnWrapper.getInternalColumn(),weavejs.data.column.DynamicColumn))columnWrapper=org.apache.flex.utils.Language.as(columnWrapper.getInternalColumn(),weavejs.api.data.IColumnWrapper);else if(org.apache.flex.utils.Language.is(columnWrapper.getInternalColumn(),
weavejs.data.column.ExtendedDynamicColumn))columnWrapper=org.apache.flex.utils.Language.as(columnWrapper.getInternalColumn(),weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn;else break;if(org.apache.flex.utils.Language.is(columnWrapper,weavejs.data.column.ExtendedDynamicColumn))columnWrapper=org.apache.flex.utils.Language.as(columnWrapper,weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn}return org.apache.flex.utils.Language.as(columnWrapper,weavejs.data.column.DynamicColumn)};
weavejs.data.ColumnUtils.hack_findHierarchyNode=function(column,createFakeNodeIfNotFound){createFakeNodeIfNotFound=typeof createFakeNodeIfNotFound!=='undefined'?createFakeNodeIfNotFound:false;var rc=org.apache.flex.utils.Language.as(column,weavejs.data.column.ReferencedColumn);var dc=null;if(!rc){dc=weavejs.data.ColumnUtils.hack_findInternalDynamicColumn(org.apache.flex.utils.Language.as(column,weavejs.api.data.IColumnWrapper));rc=dc?org.apache.flex.utils.Language.as(dc.target,weavejs.data.column.ReferencedColumn):
null}var node=rc?rc.getHierarchyNode():null;if(!node&&createFakeNodeIfNotFound)if(rc)node=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:rc.getDataSource(),data:rc.metadata.state});else if(column&&(!dc||dc.getInternalColumn()))node=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:null,data:weavejs.api.data.ColumnMetadata.getAllMetadata(column)});return node};
weavejs.data.ColumnUtils.getQKeysInNumericRange=function(column,min,max,inclusiveRange){inclusiveRange=typeof inclusiveRange!=='undefined'?inclusiveRange:true;var result=[];var keys=column.keys;var foreachiter0_target=keys;for(var foreachiter0 in foreachiter0_target){var qkey=foreachiter0_target[foreachiter0];var number=column.getValueFromKey(qkey,Number);var isInRange=false;if(inclusiveRange)isInRange=min<=number&&number<=max;else isInRange=min<number&&number<max;if(isInRange)result.push(qkey)}return result};
weavejs.data.ColumnUtils.getQKeys=function(genericObjects){return weavejs.WeaveAPI.QKeyManager.convertToQKeys(genericObjects)};weavejs.data.ColumnUtils.getQKey=function(object){if(org.apache.flex.utils.Language.is(object,weavejs.api.data.IQualifiedKey))return org.apache.flex.utils.Language.as(object,weavejs.api.data.IQualifiedKey);return weavejs.WeaveAPI.QKeyManager.getQKey(object.keyType,object.localName)};
weavejs.data.ColumnUtils.getNumber=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);if(column!=null)return column.getValueFromKey(qkey,Number);return NaN};weavejs.data.ColumnUtils.getString=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);if(column!=null)return org.apache.flex.utils.Language.as(column.getValueFromKey(qkey,String),String);return''};
weavejs.data.ColumnUtils.getBoolean=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);if(column!=null)return weavejs.util.StandardLib.asBoolean(column.getValueFromKey(qkey,Number));return false};weavejs.data.ColumnUtils.getNorm=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getNorm(qkey)};
weavejs.data.ColumnUtils.getGeometry=function(geometryColumn,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);var genGeoms=org.apache.flex.utils.Language.as(geometryColumn.getValueFromKey(qkey,Array),Array);if(genGeoms==null)return null;var result=[];for(var iGenGeom;iGenGeom<genGeoms.length;++iGenGeom){var genGeom=genGeoms[iGenGeom];var simplifiedGeom=genGeom.getSimplifiedGeometry();var newSimplifiedGeom=[];for(var iSimplifiedGeom;iSimplifiedGeom<simplifiedGeom.length;++iSimplifiedGeom){var nodeVector=
simplifiedGeom[iSimplifiedGeom];var newNodeVector=[];for(var iNode=0;iNode<nodeVector.length;++iNode){var node=nodeVector[iNode];var point=new weavejs.geom.Point(node.x,node.y);newNodeVector.push(point)}newSimplifiedGeom.push(newNodeVector)}result.push(newSimplifiedGeom)}return result};
weavejs.data.ColumnUtils.getGeoJsonGeometries=function(geometryColumn,keys,minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;var map_inputGeomArray_outputMultiGeom=new weavejs.util.JS.WeakMap;var output=new Array(keys.length);var multiGeom;for(var i=0;i<keys.length;i++){var key=keys[i];var inputGeomArray=org.apache.flex.utils.Language.as(geometryColumn.getValueFromKey(key,Array),Array);
if(inputGeomArray){if(map_inputGeomArray_outputMultiGeom.has(inputGeomArray))multiGeom=map_inputGeomArray_outputMultiGeom.get(inputGeomArray);else{var outputGeomArray=[];var foreachiter1_target=inputGeomArray;for(var foreachiter1 in foreachiter1_target){var inputGeom=foreachiter1_target[foreachiter1];var outputGeom=inputGeom.toGeoJson(minImportance,visibleBounds);if(outputGeom)outputGeomArray.push(outputGeom)}multiGeom=outputGeomArray.length?weavejs.geom.GeoJSON.getMultiGeomObject(outputGeomArray):
null;map_inputGeomArray_outputMultiGeom.set(inputGeomArray,multiGeom)}if(multiGeom)output[i]=multiGeom}}return output};weavejs.data.ColumnUtils.test_getAllValues=function(column,dataType){var t=weavejs.util.JS.now();var keys=column.keys;var values=new Array(keys.length);for(var i in keys)values[i]=column.getValueFromKey(keys[i],dataType);weavejs.util.JS.log(weavejs.util.JS.now()-t);return values};
weavejs.data.ColumnUtils.joinColumns=function(columns,dataType,allowMissingData,keyFilter){dataType=typeof dataType!=='undefined'?dataType:null;allowMissingData=typeof allowMissingData!=='undefined'?allowMissingData:false;keyFilter=typeof keyFilter!=='undefined'?keyFilter:null;var keys;var key;var column;if(org.apache.flex.utils.Language.is(keyFilter,Array))keys=org.apache.flex.utils.Language.as(keyFilter,Array).concat();else if(org.apache.flex.utils.Language.is(keyFilter,weavejs.api.data.IKeySet))keys=
org.apache.flex.utils.Language.as(keyFilter,weavejs.api.data.IKeySet).keys.concat();else{var map_key_count=new weavejs.util.JS.Map;var foreachiter2_target=columns;for(var foreachiter2 in foreachiter2_target){column=foreachiter2_target[foreachiter2];var columnKeys=column?column.keys:null;var foreachiter3_target=columnKeys;for(var foreachiter3 in foreachiter3_target){key=foreachiter3_target[foreachiter3];map_key_count.set(key,(map_key_count.get(key)|0)+1)}}keys=[];var filter=org.apache.flex.utils.Language.as(keyFilter,
weavejs.api.data.IKeyFilter);var mapKeys=weavejs.util.JS.mapKeys(map_key_count);var foreachiter4_target=mapKeys;for(var foreachiter4 in foreachiter4_target){var qkey=foreachiter4_target[foreachiter4];if(allowMissingData||map_key_count.get(qkey)==columns.length)if(!filter||filter.containsKey(qkey))keys.push(qkey)}}if(org.apache.flex.utils.Language.is(dataType,String))dataType=weavejs.api.data.DataType.getClass(org.apache.flex.utils.Language.as(dataType,String));var result=[keys];for(var cIndex=0;cIndex<
columns.length;cIndex++){column=columns[cIndex];var dt=weavejs.util.JS.asClass(dataType);if(!dt&&column)dt=weavejs.api.data.DataType.getClass(column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE));var values=[];for(var kIndex=0;kIndex<keys.length;kIndex++){var value=column?column.getValueFromKey(org.apache.flex.utils.Language.as(keys[kIndex],weavejs.api.data.IQualifiedKey),dt):undefined;var isUndef=weavejs.util.StandardLib.isUndefined(value);if(!allowMissingData&&isUndef){var foreachiter5_target=
result;for(var foreachiter5 in foreachiter5_target){var array=foreachiter5_target[foreachiter5];array.splice(kIndex,1)}kIndex--}else if(isUndef)values.push(undefined);else values.push(value)}result.push(values)}return result};
weavejs.data.ColumnUtils.getRecords=function(format,keys,dataType){keys=typeof keys!=='undefined'?keys:null;dataType=typeof dataType!=='undefined'?dataType:null;if(!keys)keys=weavejs.data.ColumnUtils.getAllKeys(weavejs.data.ColumnUtils.getColumnsFromFormat(format,[]));var records=new Array(keys.length);for(var i in keys)records[i]=weavejs.data.ColumnUtils.getRecord(format,keys[i],dataType);return records};
weavejs.data.ColumnUtils.getColumnsFromFormat=function(format,output){if(org.apache.flex.utils.Language.is(format,weavejs.api.data.IAttributeColumn))output.push(format);else if(!weavejs.util.JS.isPrimitive(format))var foreachiter6_target=format;for(var foreachiter6 in foreachiter6_target){var item=foreachiter6_target[foreachiter6];weavejs.data.ColumnUtils.getColumnsFromFormat(item,output)}return output};
weavejs.data.ColumnUtils.getRecord=function(format,key,dataType){if(format===weavejs.api.data.IQualifiedKey)return key;if(format===null||typeof format!=='object')return format;var dataTypeClass=weavejs.util.JS.asClass(dataType||Array);var column=org.apache.flex.utils.Language.as(format,weavejs.api.data.IAttributeColumn);if(column){var value=column.getValueFromKey(key,dataTypeClass);if(value===undefined)value=null;return value}var record=org.apache.flex.utils.Language.is(format,Array)?[]:{};for(var prop in format)record[prop]=
weavejs.data.ColumnUtils.getRecord(format[prop],key,dataTypeClass||dataType[prop]);return record};
weavejs.data.ColumnUtils.getNonWrapperColumnsFromSelectableAttributes=function(attrCols){var __localFn0__=function(item,i,a){return org.apache.flex.utils.Language.is(item,weavejs.api.core.ILinkableHashMap)?org.apache.flex.utils.Language.as(item,weavejs.api.core.ILinkableHashMap).getObjects(weavejs.api.data.IAttributeColumn):org.apache.flex.utils.Language.as(item,weavejs.api.data.IAttributeColumn)};var __localFn1__=function(column,i,a){return weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column)};
var __localFn2__=function(column,i,a){if(!column||map_column.get(column))return false;map_column.set(column,true);return true};var map_column=new weavejs.util.JS.WeakMap;attrCols=attrCols.map(__localFn0__);attrCols=weavejs.util.ArrayUtils.flatten(attrCols);attrCols=attrCols.map(__localFn1__).filter(__localFn2__);return attrCols};
weavejs.data.ColumnUtils.generateTableCSV=function(attrCols,subset,dataType){subset=typeof subset!=='undefined'?subset:null;dataType=typeof dataType!=='undefined'?dataType:null;var __localFn0__=function(column,i,a){return weavejs.data.ColumnUtils.getTitle(column)};var __localFn1__=function(key,idx,arr){return subset.containsKey(key)};weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=true;var records=[];attrCols=weavejs.data.ColumnUtils.getNonWrapperColumnsFromSelectableAttributes(attrCols);var columnTitles=
attrCols.map(__localFn0__);var keys;if(!subset)keys=weavejs.data.ColumnUtils.getAllKeys(attrCols);else keys=weavejs.data.ColumnUtils.getAllKeys(attrCols).filter(__localFn1__);var keyTypeMap={};var foreachiter7_target=keys;for(var foreachiter7 in foreachiter7_target){var key=foreachiter7_target[foreachiter7];var record={};record[key.keyType]=key.localName;keyTypeMap[key.keyType]=true;for(var i=0;i<attrCols.length;i++){var col=org.apache.flex.utils.Language.as(attrCols[i],weavejs.api.data.IAttributeColumn);
var dt=dataType||weavejs.api.data.DataType.getClass(col.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE));var value=col.getValueFromKey(key,dt);if(weavejs.util.StandardLib.isDefined(value))record[columnTitles[i]]=value}records.push(record)}for(var keyType in keyTypeMap)columnTitles.unshift(keyType);weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=false;var rows=weavejs.WeaveAPI.CSVParser.convertRecordsToRows(records,columnTitles);return weavejs.WeaveAPI.CSVParser.createCSV(rows)};
weavejs.data.ColumnUtils.getAllKeys=function(inputKeySets){var map_key=new weavejs.util.JS.WeakMap;var result=[];for(var i=0;i<inputKeySets.length;i++){var keys=org.apache.flex.utils.Language.as(inputKeySets[i],weavejs.api.data.IKeySet).keys;for(var j=0;j<keys.length;j++){var key=org.apache.flex.utils.Language.as(keys[j],weavejs.api.data.IQualifiedKey);if(!map_key.has(key)){map_key.set(key,true);result.push(key)}}}return result};
weavejs.data.ColumnUtils.forceFirstColumnDynamic=function(columnHashMap){var cols=columnHashMap.getObjects(weavejs.api.data.IAttributeColumn);if(cols.length==0)columnHashMap.requestObject(null,weavejs.data.column.DynamicColumn,false);else if(!org.apache.flex.utils.Language.is(cols[0],weavejs.data.column.DynamicColumn)){Weave.getCallbacks(columnHashMap).delayCallbacks();var names=columnHashMap.getNames();var state=columnHashMap.getSessionState();state.length=1;var newCol=columnHashMap.requestObject(names[0],
weavejs.data.column.DynamicColumn,false);newCol.setSessionState(state,true);columnHashMap.setNameOrder(names);Weave.getCallbacks(columnHashMap).resumeCallbacks()}};weavejs.data.ColumnUtils.getCommonMetadata=function(columns,propertyName){var value;for(var i=0;i<columns.length;i++){var column=org.apache.flex.utils.Language.as(columns[i],weavejs.api.data.IAttributeColumn);if(i==0)value=column.getMetadata(propertyName);else if(value!=column.getMetadata(propertyName))return null}return value};
weavejs.data.ColumnUtils.getAllCommonMetadata=function(columns){var output={};if(!columns.length)return output;var foreachiter8_target=columns[0].getMetadataPropertyNames();for(var foreachiter8 in foreachiter8_target){var key=foreachiter8_target[foreachiter8];var value=weavejs.data.ColumnUtils.getCommonMetadata(columns,key);if(value)output[key]=value}return output};weavejs.data.ColumnUtils._preferredMetadataPropertyOrder='title,keyType,dataType,number,string,min,max,year'.split(',');
weavejs.data.ColumnUtils.sortMetadataPropertyNames=function(names){weavejs.util.StandardLib.sortOn(names,[org.apache.flex.utils.Language.closure(weavejs.data.ColumnUtils._preferredMetadataPropertyOrder.indexOf,weavejs.data.ColumnUtils._preferredMetadataPropertyOrder,'indexOf'),names])};weavejs.data.ColumnUtils.map_root_firstDataSet=new weavejs.util.JS.WeakMap;
weavejs.data.ColumnUtils.findFirstDataSet=function(root){var firstDataSet=weavejs.data.ColumnUtils.map_root_firstDataSet.get(root);if(firstDataSet&&firstDataSet.length)return firstDataSet;var ref;var foreachiter9_target=Weave.getDescendants(root,weavejs.data.column.ReferencedColumn);for(var foreachiter9 in foreachiter9_target){var column=foreachiter9_target[foreachiter9];ref=org.apache.flex.utils.Language.as(column.getHierarchyNode(),weavejs.api.data.IColumnReference);if(ref)break}if(!ref){var foreachiter10_target=
Weave.getDescendants(root,weavejs.api.data.IDataSource);for(var foreachiter10 in foreachiter10_target){var source=foreachiter10_target[foreachiter10];ref=weavejs.data.ColumnUtils.findFirstColumnReference(source.getHierarchyRoot());if(ref)break}}return ref?weavejs.data.hierarchy.HierarchyUtils.findSiblingNodes(ref.getDataSource(),ref.getColumnMetadata()):[]};
weavejs.data.ColumnUtils.findFirstColumnReference=function(node){if(!node)return null;var ref=org.apache.flex.utils.Language.as(node,weavejs.api.data.IColumnReference);if(ref&&ref.getColumnMetadata())return ref;if(!node.isBranch())return null;var foreachiter11_target=node.getChildren();for(var foreachiter11 in foreachiter11_target){var child=foreachiter11_target[foreachiter11];ref=weavejs.data.ColumnUtils.findFirstColumnReference(child);if(ref)return ref}return null};
weavejs.data.ColumnUtils.initSelectableAttributes=function(selectableAttributes,input){input=typeof input!=='undefined'?input:null;if(!input)input=weavejs.data.ColumnUtils.getColumnsWithCommonKeyType(Weave.getRoot(selectableAttributes[0]));for(var i=0;i<selectableAttributes.length;i++)weavejs.data.ColumnUtils.initSelectableAttribute(selectableAttributes[i],input[i%input.length])};
weavejs.data.ColumnUtils.getColumnsWithCommonKeyType=function(root,keyType){keyType=typeof keyType!=='undefined'?keyType:null;var columns=Weave.getDescendants(root,weavejs.data.column.ReferencedColumn);if(!keyType){var keyTypeCounts=new Object;var foreachiter12_target=columns;for(var foreachiter12 in foreachiter12_target){var column=foreachiter12_target[foreachiter12];keyTypeCounts[weavejs.data.ColumnUtils.getKeyType(column)]=org.apache.flex.utils.Language._int(keyTypeCounts[weavejs.data.ColumnUtils.getKeyType(column)])+
1}var count=0;for(var kt in keyTypeCounts)if(keyTypeCounts[kt]>count)count=keyTypeCounts[keyType=kt]}var n=0;for(var i=0;i<columns.length;i++)if(weavejs.data.ColumnUtils.getKeyType(columns[i])==keyType)columns[n++]=columns[i];columns.length=n;return columns};
weavejs.data.ColumnUtils.replaceColumnsInHashMap=function(destination,columnReferences){var className=weavejs.WeaveAPI.ClassRegistry.getClassName(weavejs.data.column.ReferencedColumn);var baseName=className.split('.').pop();var names=destination.getNames();var newState=[];for(var iRef=0;iRef<columnReferences.length;iRef++){var ref=org.apache.flex.utils.Language.as(columnReferences[iRef],weavejs.api.data.IColumnReference);if(ref){var objectName=names[newState.length]||destination.generateUniqueName(baseName);
var sessionState=weavejs.data.column.ReferencedColumn.generateReferencedColumnStateFromColumnReference(ref);newState.push(weavejs.api.core.DynamicState.create(objectName,className,sessionState))}}destination.setSessionState(newState,true)};
weavejs.data.ColumnUtils.initSelectableAttribute=function(selectableAttribute,column_or_columnReference,clearHashMap){clearHashMap=typeof clearHashMap!=='undefined'?clearHashMap:true;var inputCol=org.apache.flex.utils.Language.as(column_or_columnReference,weavejs.api.data.IAttributeColumn);var inputRef=org.apache.flex.utils.Language.as(column_or_columnReference,weavejs.api.data.IColumnReference);var outputRC=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.data.column.ReferencedColumn);
if(outputRC){var inputRC;if(inputCol)inputRC=org.apache.flex.utils.Language.as(inputCol,weavejs.data.column.ReferencedColumn)||org.apache.flex.utils.Language.as(Weave.getDescendants(inputCol,weavejs.data.column.ReferencedColumn)[0],weavejs.data.column.ReferencedColumn);if(inputRC)Weave.copyState(inputRC,outputRC);else if(inputRef)outputRC.setColumnReference(inputRef.getDataSource(),inputRef.getColumnMetadata());else outputRC.setColumnReference(null,null)}var foundGlobalColumn=false;if(org.apache.flex.utils.Language.is(selectableAttribute,
weavejs.data.column.DynamicColumn))foundGlobalColumn=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.data.column.DynamicColumn).targetPath!=null;if(org.apache.flex.utils.Language.is(selectableAttribute,weavejs.data.column.ExtendedDynamicColumn))foundGlobalColumn=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn.targetPath!=null;var outputDC=weavejs.data.ColumnUtils.hack_findInternalDynamicColumn(org.apache.flex.utils.Language.as(selectableAttribute,
weavejs.api.data.IColumnWrapper));if(outputDC&&(outputDC.getInternalColumn()==null||!foundGlobalColumn))if(inputCol)if(org.apache.flex.utils.Language.is(inputCol,weavejs.data.column.DynamicColumn))Weave.copyState(inputCol,outputDC);else outputDC.requestLocalObjectCopy(inputCol);else if(inputRef)org.apache.flex.utils.Language.as(outputDC.requestLocalObject(weavejs.data.column.ReferencedColumn,false),weavejs.data.column.ReferencedColumn,true).setColumnReference(inputRef.getDataSource(),inputRef.getColumnMetadata());
else outputDC.removeObject();var outputHash=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.api.core.ILinkableHashMap);if(outputHash){if(clearHashMap)outputHash.removeAllObjects();if(inputCol)outputHash.requestObjectCopy(null,inputCol);else if(inputRef)org.apache.flex.utils.Language.as(outputHash.requestObject(null,weavejs.data.column.ReferencedColumn,false),weavejs.data.column.ReferencedColumn,true).setColumnReference(inputRef.getDataSource(),inputRef.getColumnMetadata())}};
weavejs.data.ColumnUtils.unlinkNestedColumns=function(columnWrapper){var col=columnWrapper;while(col){var dc=org.apache.flex.utils.Language.as(col,weavejs.data.column.DynamicColumn);var edc=org.apache.flex.utils.Language.as(col,weavejs.data.column.ExtendedDynamicColumn);if(dc&&dc.globalName){dc.globalName=null;if(dc.globalName)break;col=columnWrapper}else if(edc&&edc.internalDynamicColumn.globalName){edc.internalDynamicColumn.globalName=null;if(edc.internalDynamicColumn.globalName)break;col=columnWrapper}else col=
org.apache.flex.utils.Language.as(col.getInternalColumn(),weavejs.api.data.IColumnWrapper)}};weavejs.data.ColumnUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnUtils',qName:'weavejs.data.ColumnUtils'}]};goog.exportSymbol('weavejs.data.ColumnUtils',weavejs.data.ColumnUtils);weavejs.data.ColumnUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.path.WeavePathDataShared');weavejs.path.WeavePathDataShared=function(){this.d2d_keySet_addedKeys=new weavejs.util.Dictionary2D(true);this.d2d_keySet_removedKeys=new weavejs.util.Dictionary2D(true);this.map_keySet_timeoutId=new weavejs.util.JS.WeakMap};weavejs.path.WeavePathDataShared.DEFAULT_PROBE_KEY_SET='defaultProbeKeySet';weavejs.path.WeavePathDataShared.DEFAULT_SELECTION_KEY_SET='defaultSelectionKeySet';weavejs.path.WeavePathDataShared.DEFAULT_SUBSET_KEY_FILTER='defaultSubsetKeyFilter';
weavejs.path.WeavePathDataShared.prototype.init=function(weave){this.weave=weave;this.qkm=weavejs.WeaveAPI.QKeyManager;this.probe_keyset=org.apache.flex.utils.Language.as(weave.path(weavejs.path.WeavePathDataShared.DEFAULT_PROBE_KEY_SET),weavejs.path.WeavePathData);this.selection_keyset=org.apache.flex.utils.Language.as(weave.path(weavejs.path.WeavePathDataShared.DEFAULT_SELECTION_KEY_SET),weavejs.path.WeavePathData);this.subset_filter=org.apache.flex.utils.Language.as(weave.path(weavejs.path.WeavePathDataShared.DEFAULT_SUBSET_KEY_FILTER),
weavejs.path.WeavePathData)};weavejs.path.WeavePathDataShared.prototype.qkm;weavejs.path.WeavePathDataShared.prototype.weave;weavejs.path.WeavePathDataShared.prototype.probe_keyset;weavejs.path.WeavePathDataShared.prototype.selection_keyset;weavejs.path.WeavePathDataShared.prototype.subset_filter;weavejs.path.WeavePathDataShared.prototype.d2d_keySet_addedKeys;weavejs.path.WeavePathDataShared.prototype.d2d_keySet_removedKeys;weavejs.path.WeavePathDataShared.prototype.map_keySet_timeoutId;
weavejs.path.WeavePathDataShared.prototype.qkeyToIndex=function(qkey){return qkey.toNumber()};weavejs.path.WeavePathDataShared.prototype.indexToQKey=function(index){return this.qkm.numberToQKey(index)};weavejs.path.WeavePathDataShared.prototype.qkeyToString=function(qkey){return qkey.toString()};weavejs.path.WeavePathDataShared.prototype.stringToQKey=function(s){return org.apache.flex.utils.Language.as(s,weavejs.api.data.IQualifiedKey)||this.qkm.stringToQKey(s)};
weavejs.path.WeavePathDataShared.prototype._flushKeys=function(keySet){var add_keys=this.d2d_keySet_addedKeys.secondaryKeys(keySet);var remove_keys=this.d2d_keySet_removedKeys.secondaryKeys(keySet);this.d2d_keySet_addedKeys.removeAllPrimary(keySet);this.d2d_keySet_removedKeys.removeAllPrimary(keySet);keySet['addKeys'](add_keys);keySet['removeKeys'](remove_keys);this.map_keySet_timeoutId['delete'](keySet)};
weavejs.path.WeavePathDataShared.prototype._flushKeysLater=function(keySet){if(!this.map_keySet_timeoutId.has(keySet))this.map_keySet_timeoutId.set(keySet,weavejs.util.JS.setTimeout(org.apache.flex.utils.Language.closure(this._flushKeys,this,'_flushKeys'),25,keySet))};
weavejs.path.WeavePathDataShared.prototype._addKeys=function(keySet,qkeyStrings){var self=this;var __localFn0__=function(qkey){self.d2d_keySet_addedKeys.set(keySet,qkey,true);self.d2d_keySet_removedKeys.remove(keySet,qkey)};this.qkm.getQKeys(null,qkeyStrings).forEach(__localFn0__);this._flushKeysLater(keySet)};
weavejs.path.WeavePathDataShared.prototype._removeKeys=function(keySet,qkeyStrings){var self=this;var __localFn0__=function(qkey){self.d2d_keySet_removedKeys.set(keySet,qkey,true);self.d2d_keySet_addedKeys.remove(keySet,qkey)};this.qkm.getQKeys(null,qkeyStrings).forEach(__localFn0__);this._flushKeysLater(keySet)};weavejs.path.WeavePathDataShared.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePathDataShared',qName:'weavejs.path.WeavePathDataShared'}]};
goog.exportSymbol('weavejs.path.WeavePathDataShared',weavejs.path.WeavePathDataShared);
weavejs.path.WeavePathDataShared.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'weave':{type:'Weave'},'probe_keyset':{type:'WeavePathData'},'selection_keyset':{type:'WeavePathData'},'subset_filter':{type:'WeavePathData'}}},accessors:function(){return{}},methods:function(){return{'WeavePathDataShared':{type:'',declaredBy:'weavejs.path.WeavePathDataShared'},'init':{type:'void',declaredBy:'weavejs.path.WeavePathDataShared'},'qkeyToIndex':{type:'int',declaredBy:'weavejs.path.WeavePathDataShared'},
'indexToQKey':{type:'Object',declaredBy:'weavejs.path.WeavePathDataShared'},'qkeyToString':{type:'String',declaredBy:'weavejs.path.WeavePathDataShared'},'stringToQKey':{type:'Object',declaredBy:'weavejs.path.WeavePathDataShared'},'_flushKeys':{type:'void',declaredBy:'weavejs.path.WeavePathDataShared'},'_flushKeysLater':{type:'void',declaredBy:'weavejs.path.WeavePathDataShared'},'_addKeys':{type:'void',declaredBy:'weavejs.path.WeavePathDataShared'},'_removeKeys':{type:'void',declaredBy:'weavejs.path.WeavePathDataShared'}}}}};goog.provide('weavejs.api.data.IKeySetCallbackInterface');goog.require('weavejs.api.core.ICallbackCollection');weavejs.api.data.IKeySetCallbackInterface=function(){};weavejs.api.data.IKeySetCallbackInterface.prototype.flushKeys=function(){};weavejs.api.data.IKeySetCallbackInterface.prototype.keysAdded;weavejs.api.data.IKeySetCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'IKeySetCallbackInterface',qName:'weavejs.api.data.IKeySetCallbackInterface'}],interfaces:[weavejs.api.core.ICallbackCollection]};
weavejs.api.data.IKeySetCallbackInterface.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keysAdded':{type:'Array',declaredBy:'weavejs.api.data.IKeySetCallbackInterface'},'keysRemoved':{type:'Array',declaredBy:'weavejs.api.data.IKeySetCallbackInterface'}}},methods:function(){return{'flushKeys':{type:'void',declaredBy:'weavejs.api.data.IKeySetCallbackInterface'}}}}};goog.provide('weavejs.path.WeavePathData');goog.require('weavejs.data.ColumnUtils');goog.require('weavejs.data.column.ReferencedColumn');goog.require('weavejs.path.WeavePath');goog.require('weavejs.path.WeavePathDataShared');
weavejs.path.WeavePathData=function(weave,basePath){weavejs.path.WeavePathData.base(this,'constructor',weave,basePath);var shared=weavejs.path.WeavePathData.map_weave.get(weave);if(!shared){weavejs.path.WeavePathData.map_weave.set(weave,shared=new weavejs.path.WeavePathDataShared);shared.init(weave)}this.shared=shared;this.probe_keyset=shared.probe_keyset;this.selection_keyset=shared.selection_keyset;this.subset_filter=shared.subset_filter;this.qkeyToString=org.apache.flex.utils.Language.closure(shared.qkeyToString,
shared,'qkeyToString');this.stringToQKey=org.apache.flex.utils.Language.closure(shared.stringToQKey,shared,'stringToQKey');this.indexToQKey=org.apache.flex.utils.Language.closure(shared.indexToQKey,shared,'indexToQKey');this.qkeyToIndex=org.apache.flex.utils.Language.closure(shared.qkeyToIndex,shared,'qkeyToIndex')};goog.inherits(weavejs.path.WeavePathData,weavejs.path.WeavePath);weavejs.path.WeavePathData.map_weave=new weavejs.util.JS.WeakMap;weavejs.path.WeavePathData.prototype.shared;weavejs.path.WeavePathData.prototype.probe_keyset;
weavejs.path.WeavePathData.prototype.selection_keyset;weavejs.path.WeavePathData.prototype.subset_filter;weavejs.path.WeavePathData.prototype.qkeyToString;weavejs.path.WeavePathData.prototype.stringToQKey;weavejs.path.WeavePathData.prototype.indexToQKey;weavejs.path.WeavePathData.prototype.qkeyToIndex;
weavejs.path.WeavePathData.prototype._initProperty=function(manifest,callback_pass,property_descriptor){var name=property_descriptor['name']||weavejs.path.WeavePath._failMessage('initProperty','A "name" is required');var label=property_descriptor['label'];var children=property_descriptor['children'];var type=property_descriptor['type'];if(!type)type=children?'LinkableHashMap':'LinkableVariable';var new_prop=org.apache.flex.utils.Language.as(this.push(name),weavejs.path.WeavePathData);if(callback_pass){var callback=
property_descriptor['callback'];var triggerNow=property_descriptor['triggerNow'];var immediate=property_descriptor['immediate'];if(callback)new_prop.addCallback(new_prop,callback,triggerNow!==undefined?triggerNow:true,immediate!==undefined?immediate:false)}else{var oldType=new_prop.getType();type=new_prop.request(type).getType();if(label)new_prop.label(label);if(oldType!=type&&property_descriptor.hasOwnProperty('default'))new_prop.state(property_descriptor['default']);manifest[name]=new_prop}if(children){if(!callback_pass)manifest[name]=
{};children.forEach(this._initProperty.bind(new_prop,manifest[name],callback_pass))}return this};weavejs.path.WeavePathData.prototype.initProperties=function(property_descriptor_array,manifest){manifest=typeof manifest!=='undefined'?manifest:null;if(this.getType()==null)this.request('ExternalTool');if(!manifest)manifest={};property_descriptor_array.forEach(this._initProperty.bind(this,manifest,false));property_descriptor_array.forEach(this._initProperty.bind(this,manifest,true));return manifest};
weavejs.path.WeavePathData.prototype.getProperties=function(relativePath){var self=this;relativePath=Array.prototype.slice.call(arguments,0);var __localFn0__=function(name){result[name]=this.push(name)};var result={};this.getNames.apply(this,relativePath).forEach(__localFn0__,this);return result};
weavejs.path.WeavePathData.prototype.getKeys=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath,1);return org.apache.flex.utils.Language.as(this.getObject(args),weavejs.api.data.IKeySet,true).keys};
weavejs.path.WeavePathData.prototype.flushKeys=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath,1);if(weavejs.path.WeavePath._assertParams('flushKeys',args)){var keySet=this.getObject(args);this.shared._flushKeys(keySet)}return this};
weavejs.path.WeavePathData.prototype.addKeys=function(relativePath_qkeyStringArray){relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('addKeys',args)){var qkeyStringArray=args.pop();var keySet=this.getObject(args);this.shared._addKeys(keySet,qkeyStringArray)}return this};
weavejs.path.WeavePathData.prototype.removeKeys=function(relativePath_qkeyStringArray){relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('removeKeys',args)){var qkeyStringArray=args.pop();var keySet=this.getObject(args);this.shared._removeKeys(keySet,qkeyStringArray)}return this};
weavejs.path.WeavePathData.prototype.addKeySetCallback=function(callback,triggerCallbackNow){var self=this;triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;var __localFn0__=function(){callback.call(self,{added:keyCallbacks.keysAdded,removed:keyCallbacks.keysRemoved})};var self=this;var keyCallbacks=org.apache.flex.utils.Language.as(this.getObject('keyCallbacks'),weavejs.api.data.IKeySetCallbackInterface);keyCallbacks.addImmediateCallback(keyCallbacks,__localFn0__);
if(triggerCallbackNow)callback.call(this,{added:this.getKeys(),removed:[]});return this};
weavejs.path.WeavePathData.prototype.setKeys=function(relativePath_qkeyStringArray){relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('setKeys',args)){var qkeyStringArray=args.pop();var keyObjectArray=qkeyStringArray.map(this.stringToQKey);this.getObject(args)['replaceKeys'](keyObjectArray);return this}return this};
weavejs.path.WeavePathData.prototype.filterKeys=function(relativePath_qkeyStringArray){var self=this;relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var __localFn0__=function(key){return obj.containsKey(key)};var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('filterKeys',args)){var qkeyStringArray=args.pop();var keyObjects=qkeyStringArray.map(this.stringToQKey);var obj=this.getObject(args);return weavejs.WeaveAPI.QKeyManager.convertToQKeys(keyObjects).filter(__localFn0__)}return null};
weavejs.path.WeavePathData.prototype.retrieveRecords=function(pathMapping,options){var self=this;options=typeof options!=='undefined'?options:null;var __localFn0__=function(key,iRow,a){var __localFn0__=function(chain,iChain,a){weavejs.path.WeavePathData.setChain(record,chain,results[iChain+1][iRow])};var record={id:key};obj.chains.forEach(__localFn0__);return record};var dataType=options?options['dataType']:null;var keySetPath=options?options['keySet']:null;if(!keySetPath&&org.apache.flex.utils.Language.is(options,
weavejs.path.WeavePath))keySetPath=org.apache.flex.utils.Language.as(options,weavejs.path.WeavePath);if(arguments.length==1&&org.apache.flex.utils.Language.is(pathMapping,weavejs.path.WeavePath)){keySetPath=org.apache.flex.utils.Language.as(pathMapping,weavejs.path.WeavePath);pathMapping=null}if(!pathMapping)pathMapping=this.getNames();if(org.apache.flex.utils.Language.is(pathMapping,Array)){var names=org.apache.flex.utils.Language.as(pathMapping,Array);pathMapping={};var foreachiter0_target=names;
for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];pathMapping[name]=this.push(name)}}var obj=this.listChainsAndColumns(pathMapping);var results=weavejs.data.ColumnUtils.joinColumns(obj.columns,dataType,true,keySetPath?keySetPath.getObject():null);return results[0].map(__localFn0__)};
weavejs.path.WeavePathData.setChain=function(root,property_chain,value){value=typeof value!=='undefined'?value:undefined;var __localFn0__=function(prop,i,a){root=root[prop]||(root[prop]={})};property_chain=[].concat(property_chain);var last_property=property_chain.pop();property_chain.forEach(__localFn0__);if(value===undefined)return root[last_property];return root[last_property]=value};
weavejs.path.WeavePathData.getChain=function(root,property_chain){return weavejs.path.WeavePathData.setChain(root,property_chain)};
weavejs.path.WeavePathData.prototype.listChainsAndColumns=function(obj,prefix,output){prefix=typeof prefix!=='undefined'?prefix:null;output=typeof output!=='undefined'?output:null;if(!prefix)prefix=[];if(!output)output={chains:[],columns:[]};for(var key in obj){var item=obj[key];if(org.apache.flex.utils.Language.is(item,weavejs.path.WeavePath))item=item.getObject();if(org.apache.flex.utils.Language.is(item,weavejs.api.core.ILinkableObject)){if(org.apache.flex.utils.Language.is(item,weavejs.api.data.IAttributeColumn)){output.chains.push(prefix.concat(key));
output.columns.push(item)}}else this.listChainsAndColumns(item,prefix.concat(key),output)}return output};weavejs.path.WeavePathData.prototype.label=function(relativePath_label){relativePath_label=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_label,2);if(weavejs.path.WeavePath._assertParams('setLabel',args)){var label=args.pop();weavejs.WeaveAPI.EditorManager.setLabel(this.getObject(args),label)}return this};
weavejs.path.WeavePathData.prototype.getLabel=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath,1);return weavejs.WeaveAPI.EditorManager.getLabel(this.getObject(args))};
weavejs.path.WeavePathData.prototype.setColumn=function(metadata,dataSourceName){var object=this.getObject();if(!object)object=this.request(weavejs.data.column.ReferencedColumn).getObject();if(org.apache.flex.utils.Language.is(object,weavejs.data.column.ExtendedDynamicColumn))object=org.apache.flex.utils.Language.as(object,weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn.requestLocalObject(weavejs.data.column.ReferencedColumn,false);else if(org.apache.flex.utils.Language.is(object,
weavejs.data.column.DynamicColumn))object=org.apache.flex.utils.Language.as(object,weavejs.data.column.DynamicColumn).requestLocalObject(weavejs.data.column.ReferencedColumn,false);if(org.apache.flex.utils.Language.is(object,weavejs.data.column.ReferencedColumn)){if(arguments.length<2)dataSourceName=this.weave.root.getNames(weavejs.api.data.IDataSource)[0];var dataSource=org.apache.flex.utils.Language.as(this.weave.root.getObject(dataSourceName),weavejs.api.data.IDataSource);org.apache.flex.utils.Language.as(object,
weavejs.data.column.ReferencedColumn).setColumnReference(dataSource,metadata)}else weavejs.path.WeavePath._failMessage('setColumn','Not a compatible column object',this._path);return this};
weavejs.path.WeavePathData.prototype.setColumns=function(metadataMapping,dataSourceName){var self=this;var __localFn0__=function(value,key,a){var path=org.apache.flex.utils.Language.as(this.push(key),weavejs.path.WeavePathData);var func=org.apache.flex.utils.Language.is(value,Array)?org.apache.flex.utils.Language.closure(path.setColumns,path,'setColumns'):org.apache.flex.utils.Language.closure(path.setColumn,path,'setColumn');var args=useDataSource?[value,dataSourceName]:[value];func.apply(path,args)};
var useDataSource=arguments.length>1;this.forEach(metadataMapping,__localFn0__);if(org.apache.flex.utils.Language.is(metadataMapping,Array))while(this.getType(metadataMapping.length))this.remove(metadataMapping.length);return this};weavejs.path.WeavePathData.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePathData',qName:'weavejs.path.WeavePathData'}]};goog.exportSymbol('weavejs.path.WeavePathData',weavejs.path.WeavePathData);
weavejs.path.WeavePathData.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'probe_keyset':{type:'WeavePathData'},'selection_keyset':{type:'WeavePathData'},'subset_filter':{type:'WeavePathData'},'qkeyToString':{type:'Function'},'stringToQKey':{type:'Function'},'indexToQKey':{type:'Function'},'qkeyToIndex':{type:'Function'}}},accessors:function(){return{}},methods:function(){return{'WeavePathData':{type:'',declaredBy:'weavejs.path.WeavePathData'},'getProperties':{type:'Object',
declaredBy:'weavejs.path.WeavePathData'},'getKeys':{type:'Array',declaredBy:'weavejs.path.WeavePathData'},'flushKeys':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathData'},'addKeys':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathData'},'removeKeys':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathData'},'addKeySetCallback':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathData'},'setKeys':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathData'},'filterKeys':{type:'Array',declaredBy:'weavejs.path.WeavePathData'},
'retrieveRecords':{type:'Array',declaredBy:'weavejs.path.WeavePathData'},'label':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathData'},'getLabel':{type:'String',declaredBy:'weavejs.path.WeavePathData'},'setColumn':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathData'},'setColumns':{type:'WeavePathData',declaredBy:'weavejs.path.WeavePathData'}}}}};goog.provide('weavejs.path.WeavePathUI');goog.require('weavejs.path.WeavePathData');weavejs.path.WeavePathUI=function(weave,basePath){weavejs.path.WeavePathUI.base(this,'constructor',weave,basePath)};goog.inherits(weavejs.path.WeavePathUI,weavejs.path.WeavePathData);
weavejs.path.WeavePathUI.prototype.pushPlotter=function(plotterName,plotterType){plotterType=typeof plotterType!=='undefined'?plotterType:null;var tool=this;var result=tool.push('children','visualization','plotManager','plotters',plotterName);if(plotterType)result.request(plotterType);return result};weavejs.path.WeavePathUI.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePathUI',qName:'weavejs.path.WeavePathUI'}]};goog.exportSymbol('weavejs.path.WeavePathUI',weavejs.path.WeavePathUI);
weavejs.path.WeavePathUI.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'WeavePathUI':{type:'',declaredBy:'weavejs.path.WeavePathUI'},'pushPlotter':{type:'WeavePath',declaredBy:'weavejs.path.WeavePathUI'}}}}};goog.provide('Weave');goog.require('weavejs.WeaveAPI');goog.require('weavejs.api.core.DynamicState');goog.require('weavejs.core.SessionStateLog');goog.require('weavejs.path.WeavePathUI');goog.require('weavejs.util.DebugUtils');goog.require('weavejs.util.Dictionary2D');goog.require('weavejs.util.JS');goog.require('weavejs.util.StandardLib');goog.require('weavejs.api.core.IDisposableObject');
Weave=function(){this['WeavePath']=weavejs.path.WeavePathUI;this.root=Weave.disposableChild(this,weavejs.WeaveAPI.ClassRegistry.getImplementations(weavejs.api.core.ILinkableHashMap)[0]);this.history=Weave.disposableChild(this,new weavejs.core.SessionStateLog(this.root,Weave.HISTORY_SYNC_DELAY));Weave.map_root_weave.set(this.root,this)};Weave.HISTORY_SYNC_DELAY=100;Weave.FRAME_INTERVAL=1E3/30;Weave.beta=false;
Weave.prototype.dispose=function(){Weave.dispose(this);Weave.map_root_weave['delete'](this.root);this.root=null;this.history=null};Weave.prototype.root;Weave.prototype.history;
Weave.prototype.macro=function(name,params){params=Array.prototype.slice.call(arguments,1);var macros=org.apache.flex.utils.Language.as(this.getObject('WeaveProperties','macros'),weavejs.api.core.ILinkableHashMap);if(!macros)throw new Error('macros hash map not found');var LinkableFunction=Weave.getDefinition('LinkableFunction');var fn=org.apache.flex.utils.Language.as(macros.getObject(name),LinkableFunction);if(!fn)throw new Error('Macro does not exist: '+name);return fn.apply(null,params)};
Weave.prototype.path=function(basePath){basePath=Array.prototype.slice.call(arguments,0);if(basePath.length==1&&org.apache.flex.utils.Language.is(basePath[0],Array))basePath=basePath[0];if(basePath.length==1&&Weave.isLinkable(basePath[0]))basePath=Weave.findPath(this.root,basePath[0]);return basePath?new weavejs.path.WeavePathUI(this,basePath):null};
Weave.prototype.getObject=function(path){path=Array.prototype.slice.call(arguments,0);if(path.length==1){if(org.apache.flex.utils.Language.is(path[0],weavejs.path.WeavePath))return org.apache.flex.utils.Language.as(path[0],weavejs.path.WeavePath).getObject();if(org.apache.flex.utils.Language.is(path[0],Array))path=path[0]}return Weave.followPath(this.root,path)};
Weave.prototype.requestObject=function(path,type){var parentPath=path.concat();var childName=parentPath.pop();var parent=Weave.followPath(this.root,parentPath);var hashMap=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);var dynamicObject=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableDynamicObject);var child=null;if(hashMap){if(org.apache.flex.utils.Language.is(childName,Number))childName=hashMap.getNames()[childName];child=hashMap.requestObject(org.apache.flex.utils.Language.as(childName,
String),type,false)}else if(dynamicObject)child=dynamicObject.requestGlobalObject(org.apache.flex.utils.Language.as(childName,String),type,false);else child=Weave.followPath(this.root,path);if(child&&child.constructor==type)return child;return null};Weave.prototype.removeObject=function(path){this.requestObject(path,null)};Weave.map_root_weave=new weavejs.util.JS.Map;
Weave.getWeave=function(object){var sm=weavejs.WeaveAPI.SessionManager;while(object&&!org.apache.flex.utils.Language.is(object,Weave))object=sm.getOwner(object);return org.apache.flex.utils.Language.as(object,Weave)};Weave.getPath=function(object){var weave=Weave.getWeave(object);return weave?weave.path(object):null};Weave.findPath=function(root,descendant){return weavejs.WeaveAPI.SessionManager.getPath(root,descendant)};
Weave.followPath=function(root,path){return weavejs.WeaveAPI.SessionManager.getObject(root,path)};Weave.getCallbacks=function(linkableObject){return weavejs.WeaveAPI.SessionManager.getCallbackCollection(linkableObject)};
Weave.detectChange=function(observer,linkableObject,moreLinkableObjects){moreLinkableObjects=Array.prototype.slice.call(arguments,2);var changeDetected=false;moreLinkableObjects.unshift(linkableObject);var foreachiter0_target=moreLinkableObjects;for(var foreachiter0 in foreachiter0_target){linkableObject=foreachiter0_target[foreachiter0];if(linkableObject&&Weave._internalDetectChange(observer,linkableObject,true))changeDetected=true}return changeDetected};
Weave._internalDetectChange=function(observer,linkableObject,clearChangedNow){clearChangedNow=typeof clearChangedNow!=='undefined'?clearChangedNow:true;var previousCount=Weave.d2d_linkableObject_observer_triggerCounter.get(linkableObject,observer);var newCount=weavejs.WeaveAPI.SessionManager.getCallbackCollection(linkableObject).triggerCounter;if(previousCount!==newCount){if(clearChangedNow)Weave.d2d_linkableObject_observer_triggerCounter.set(linkableObject,observer,newCount);return true}return false};
Weave.d2d_linkableObject_observer_triggerCounter=new weavejs.util.Dictionary2D(true,true);Weave.getRoot=function(object){var sm=weavejs.WeaveAPI.SessionManager;while(true){var owner=sm.getLinkableOwner(object);if(!owner)break;object=owner}return Weave.wasDisposed(object)?null:org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap)};
Weave.getAncestor=function(descendant,ancestorType){if(org.apache.flex.utils.Language.is(ancestorType,String))ancestorType=Weave.getDefinition(String(ancestorType),true);var sm=weavejs.WeaveAPI.SessionManager;do descendant=sm.getLinkableOwner(descendant);while(descendant&&!org.apache.flex.utils.Language.is(descendant,ancestorType));return descendant};Weave.getOwner=function(child){return weavejs.WeaveAPI.SessionManager.getLinkableOwner(child)};
Weave.getDescendants=function(object,filter){filter=typeof filter!=='undefined'?filter:null;if(org.apache.flex.utils.Language.is(filter,String))filter=Weave.getDefinition(String(filter),true);return weavejs.WeaveAPI.SessionManager.getLinkableDescendants(object,filter)};Weave.getState=function(linkableObject){return weavejs.WeaveAPI.SessionManager.getSessionState(linkableObject)};
Weave.setState=function(linkableObject,newState,removeMissingDynamicObjects){removeMissingDynamicObjects=typeof removeMissingDynamicObjects!=='undefined'?removeMissingDynamicObjects:true;weavejs.WeaveAPI.SessionManager.setSessionState(linkableObject,newState,removeMissingDynamicObjects)};Weave.copyState=function(source,destination){weavejs.WeaveAPI.SessionManager.copySessionState(source,destination)};
Weave.linkState=function(primary,secondary){weavejs.WeaveAPI.SessionManager.linkSessionState(primary,secondary)};Weave.unlinkState=function(first,second){weavejs.WeaveAPI.SessionManager.unlinkSessionState(first,second)};Weave.computeDiff=function(oldState,newState){return weavejs.WeaveAPI.SessionManager.computeDiff(oldState,newState)};Weave.combineDiff=function(baseDiff,diffToAdd){return weavejs.WeaveAPI.SessionManager.combineDiff(baseDiff,diffToAdd)};
Weave.disposableChild=function(disposableParent,disposableChildOrType){if(weavejs.util.JS.isClass(disposableChildOrType))return weavejs.WeaveAPI.SessionManager.newDisposableChild(disposableParent,weavejs.util.JS.asClass(disposableChildOrType));return weavejs.WeaveAPI.SessionManager.registerDisposableChild(disposableParent,disposableChildOrType)};
Weave.linkableChild=function(linkableParent,linkableChildOrType,callback,useGroupedCallback){callback=typeof callback!=='undefined'?callback:null;useGroupedCallback=typeof useGroupedCallback!=='undefined'?useGroupedCallback:false;if(weavejs.util.JS.isClass(linkableChildOrType))return weavejs.WeaveAPI.SessionManager.newLinkableChild(linkableParent,weavejs.util.JS.asClass(linkableChildOrType),callback,useGroupedCallback);return weavejs.WeaveAPI.SessionManager.registerLinkableChild(linkableParent,org.apache.flex.utils.Language.as(linkableChildOrType,
weavejs.api.core.ILinkableObject),callback,useGroupedCallback)};Weave.privateLinkableChild=function(linkableParent,linkableChildOrType,callback,useGroupedCallback){callback=typeof callback!=='undefined'?callback:null;useGroupedCallback=typeof useGroupedCallback!=='undefined'?useGroupedCallback:false;var child=Weave.linkableChild(linkableParent,linkableChildOrType,callback,useGroupedCallback);weavejs.WeaveAPI.SessionManager['excludeLinkableChildFromSessionState'](linkableParent,child);return child};
Weave.dispose=function(object){weavejs.WeaveAPI.SessionManager.disposeObject(object)};Weave.wasDisposed=function(object){return weavejs.WeaveAPI.SessionManager.objectWasDisposed(object)};Weave.isBusy=function(object){return weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(object)};
Weave.isLinkable=function(objectOrClass){if(org.apache.flex.utils.Language.is(objectOrClass,weavejs.api.core.ILinkableObject)||objectOrClass===weavejs.api.core.ILinkableObject)return true;return objectOrClass?org.apache.flex.utils.Language.is(objectOrClass.prototype,weavejs.api.core.ILinkableObject):false};Weave.IS=function(object,type){return org.apache.flex.utils.Language.is(object,type)};Weave.AS=function(object,type){return org.apache.flex.utils.Language.as(object,type)};
Weave.map_class_isAsync=new weavejs.util.JS.Map;Weave.registerAsyncClass=function(type,instanceHandler){var valueInMap=instanceHandler||true;Weave.map_class_isAsync.set(type,valueInMap);var foreachiter1_target=weavejs.util.JS.mapKeys(Weave.map_class_isAsync);for(var foreachiter1 in foreachiter1_target){var cachedType=foreachiter1_target[foreachiter1];if(!Weave.map_class_isAsync.get(cachedType)&&type.isPrototypeOf(cachedType))Weave.map_class_isAsync.set(cachedType,valueInMap)}};
Weave.isAsyncClass=function(type){if(Weave.map_class_isAsync.has(type))return Weave.map_class_isAsync.get(type);var foreachiter2_target=weavejs.util.JS.mapKeys(Weave.map_class_isAsync);for(var foreachiter2 in foreachiter2_target){var cachedType=foreachiter2_target[foreachiter2];var valueInMap=Weave.map_class_isAsync.get(cachedType);if(valueInMap&&cachedType.isPrototypeOf(type)){Weave.map_class_isAsync.set(type,valueInMap);return true}}Weave.map_class_isAsync.set(type,false);return false};
Weave.getAsyncInstanceHandler=function(type){return Weave.isAsyncClass(type)?org.apache.flex.utils.Language.as(Weave.map_class_isAsync.get(type),Function):null};
Weave.registerClass=function(definition,qualifiedName,additionalInterfaces,displayName){additionalInterfaces=typeof additionalInterfaces!=='undefined'?additionalInterfaces:null;displayName=typeof displayName!=='undefined'?displayName:null;var names=org.apache.flex.utils.Language.as(qualifiedName,Array)||[qualifiedName];for(var index in names)if(index=='0')weavejs.WeaveAPI.ClassRegistry.registerClass(definition,names[index],[weavejs.api.core.ILinkableObject].concat(additionalInterfaces||[]),displayName);
else weavejs.WeaveAPI.ClassRegistry.registerClass(definition,names[index])};Weave.className=function(def){return weavejs.WeaveAPI.ClassRegistry.getClassName(def)};Weave.getDefinition=function(name,throwIfNotFound){throwIfNotFound=typeof throwIfNotFound!=='undefined'?throwIfNotFound:false;var result=weavejs.WeaveAPI.ClassRegistry.getDefinition(name);if(result===undefined&&throwIfNotFound)throw new Error('No definition for '+JSON.stringify(name));return result};
Weave.stringify=function(value,replacer,indent,json_values_only){replacer=typeof replacer!=='undefined'?replacer:null;indent=typeof indent!=='undefined'?indent:null;json_values_only=typeof json_values_only!=='undefined'?json_values_only:false;indent=typeof indent==='number'?weavejs.util.StandardLib.lpad('',indent,' '):org.apache.flex.utils.Language.as(indent,String)||'';return Weave._stringify('',value,replacer,indent?'\n':'',indent,json_values_only)};
Weave._stringify=function(key,value,replacer,lineBreak,indent,json_values_only){if(replacer!=null)value=replacer(key,value);var output;var item;if(typeof value==='string')return Weave.encodeString(value);if(value==null||typeof value!='object'){if(json_values_only&&(value===undefined||!isFinite(org.apache.flex.utils.Language.as(value,Number))))value=null;return String(value)||String(null)}var lineBreakIndent=lineBreak+indent;var valueIsArray=org.apache.flex.utils.Language.is(value,Array);output=[];
if(valueIsArray)for(var i=0;i<value.length;i++)output.push(Weave._stringify(String(i),value[i],replacer,lineBreakIndent,indent,json_values_only));else if(typeof value=='object'){for(key in value)output.push(Weave.encodeString(key)+': '+Weave._stringify(key,value[key],replacer,lineBreakIndent,indent,json_values_only));output.sort()}if(output.length==0)return valueIsArray?'[]':'{}';var lb=valueIsArray?'[':'{';var rb=valueIsArray?']':'}';return lb+lineBreakIndent+output.join(indent?','+lineBreakIndent:
', ')+lineBreak+rb};Weave.encodeString=function(string,quote){quote=typeof quote!=='undefined'?quote:'"';if(string==null)return'null';var result=new Array(string.length);for(var i=0;i<string.length;i++){var chr=string.charAt(i);var esc=chr==quote?quote:Weave.ENCODE_LOOKUP[chr];result[i]=esc?'\\'+esc:chr}return quote+result.join('')+quote};Weave.ENCODE_LOOKUP={'\b':'b','\f':'f','\n':'n','\r':'r','\t':'t','\\':'\\'};
Weave.lang=function(text,parameters){parameters=Array.prototype.slice.call(arguments,1);var newText=weavejs.WeaveAPI.Locale.getText(text);if(weavejs.WeaveAPI.debugLocale){parameters.unshift(text);var str=Weave.stringify(parameters);return'lang('+str.substring(1,str.length-1)+')'}if(parameters.length)return weavejs.util.StandardLib.substitute(newText,parameters);return newText};Weave.prototype.triggerColumns=function(){this.triggerAll('ReferencedColumn')};
Weave.prototype.triggerAll=function(filter){var self=this;var __localFn0__=function(obj){Weave.getCallbacks(obj).triggerCallbacks()};if(org.apache.flex.utils.Language.is(filter,String))filter=Weave.getDefinition(filter);Weave.getDescendants(this.root,weavejs.util.JS.asClass(filter)).forEach(__localFn0__)};
Weave.prototype.populateColumns=function(){var RefCol=Weave.getDefinition('ReferencedColumn');var ExtDynCol=Weave.getDefinition('ExtendedDynamicColumn');var all=Weave.getDescendants(this.root,weavejs.api.core.ILinkableDynamicObject);var def=[];var undef=[];var foreachiter3_target=all;for(var foreachiter3 in foreachiter3_target){var item=foreachiter3_target[foreachiter3];var col=org.apache.flex.utils.Language.as(item,weavejs.api.data.IAttributeColumn);if(!col)continue;if(org.apache.flex.utils.Language.is(item.target,
RefCol))def.push(item);if(!item.target)undef.push(item)}for(var i=0;i<undef.length;i++)Weave.copyState(def[i%def.length],undef[i])};Weave.prototype.stringifyState=function(pathOrType){pathOrType=Array.prototype.slice.call(arguments,0);var object;if(weavejs.util.JS.isClass(pathOrType[0]))object=this.root.getObjects(pathOrType[0])[0];else object=this.getObject(pathOrType);var state=Weave.getState(object);return Weave.stringify(state,null,'\t')};
Weave.id=function(arg){arg=typeof arg!=='undefined'?arg:undefined;var type=typeof arg;if(arguments.length==0||type=='string'||type=='number')return weavejs.util.DebugUtils.debugLookup(arg);return weavejs.util.DebugUtils.debugId(arg)};Weave.watch=weavejs.util.DebugUtils.watch;Weave.unwatch=weavejs.util.DebugUtils.unwatch;Weave.watchState=weavejs.util.DebugUtils.watchState;
Weave.prototype.createScript=function(name,targets,script,groupedCallback){groupedCallback=typeof groupedCallback!=='undefined'?groupedCallback:false;var lcs=this.root.requestObject(name,Weave.getDefinition('LinkableCallbackScript'));var array=[];for(var key in targets)array.push(weavejs.api.core.DynamicState.create(key,'LinkableDynamicObject',targets[key]));Weave.setState(org.apache.flex.utils.Language.as(lcs,weavejs.api.core.ILinkableObject),{script:script,variables:array,groupedCallback:groupedCallback},
true);return lcs};Weave.prototype.FLEXJS_CLASS_INFO={names:[{name:'Weave',qName:'Weave'}],interfaces:[weavejs.api.core.IDisposableObject]};goog.exportSymbol('Weave',Weave);
Weave.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'root':{type:'ILinkableHashMap'},'history':{type:'SessionStateLog'}}},accessors:function(){return{}},methods:function(){return{'Weave':{type:'',declaredBy:'Weave'},'dispose':{type:'void',declaredBy:'Weave'},'macro':{type:'*',declaredBy:'Weave'},'path':{type:'WeavePath',declaredBy:'Weave'},'getObject':{type:'ILinkableObject',declaredBy:'Weave'},'requestObject':{type:'ILinkableObject',declaredBy:'Weave'},'removeObject':{type:'void',
declaredBy:'Weave'}}}}};goog.provide('weavejs.core.EventCallbackCollection');goog.require('weavejs.core.CallbackCollection');weavejs.core.EventCallbackCollection=function(){weavejs.core.EventCallbackCollection.base(this,'constructor',org.apache.flex.utils.Language.closure(this._setData,this,'_setData'))};goog.inherits(weavejs.core.EventCallbackCollection,weavejs.core.CallbackCollection);weavejs.core.EventCallbackCollection.prototype._data=null;
weavejs.core.EventCallbackCollection.prototype._setData=function(data){data=typeof data!=='undefined'?data:null;this._data=data};weavejs.core.EventCallbackCollection.prototype.dispatch=function(data){var oldValue=this._data;this._runCallbacksImmediately(data);this._setData(oldValue)};Object.defineProperties(weavejs.core.EventCallbackCollection.prototype,{data:{get:function(){return this._data}}});
weavejs.core.EventCallbackCollection.prototype.FLEXJS_CLASS_INFO={names:[{name:'EventCallbackCollection',qName:'weavejs.core.EventCallbackCollection'}]};goog.exportSymbol('weavejs.core.EventCallbackCollection',weavejs.core.EventCallbackCollection);
weavejs.core.EventCallbackCollection.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'data':{type:'Object',declaredBy:'weavejs.core.EventCallbackCollection'}}},methods:function(){return{'EventCallbackCollection':{type:'',declaredBy:'weavejs.core.EventCallbackCollection'},'dispatch':{type:'void',declaredBy:'weavejs.core.EventCallbackCollection'}}}}};goog.provide('weavejs.core.LinkableFunction');goog.require('weavejs.core.LinkableString');
weavejs.core.LinkableFunction=function(defaultValue,ignoreRuntimeErrors,paramNames){defaultValue=typeof defaultValue!=='undefined'?defaultValue:null;ignoreRuntimeErrors=typeof ignoreRuntimeErrors!=='undefined'?ignoreRuntimeErrors:false;paramNames=typeof paramNames!=='undefined'?paramNames:null;weavejs.core.LinkableFunction.base(this,'constructor',weavejs.util.StandardLib.unIndent(defaultValue));this._ignoreRuntimeErrors=ignoreRuntimeErrors;this._paramNames=paramNames?paramNames.concat():[]};
goog.inherits(weavejs.core.LinkableFunction,weavejs.core.LinkableString);weavejs.core.LinkableFunction.debug=false;weavejs.core.LinkableFunction.prototype._catchErrors=false;weavejs.core.LinkableFunction.prototype._ignoreRuntimeErrors=false;weavejs.core.LinkableFunction.prototype._compiledMethod=null;weavejs.core.LinkableFunction.prototype._paramNames=null;weavejs.core.LinkableFunction.prototype._isFunctionDefinition=false;weavejs.core.LinkableFunction.prototype._triggerCount=0;
weavejs.core.LinkableFunction.RETURN_UNDEFINED=function(_){_=Array.prototype.slice.call(arguments,0);return undefined};weavejs.core.LinkableFunction.prototype.validate=function(){if(this._triggerCount!=this.triggerCounter){this._triggerCount=this.triggerCounter;this._compiledMethod=weavejs.core.LinkableFunction.RETURN_UNDEFINED;this._isFunctionDefinition=false;this._compiledMethod=weavejs.util.JS.compile(this.value,this._paramNames,org.apache.flex.utils.Language.closure(this.errorHandler,this,'errorHandler'))}};
weavejs.core.LinkableFunction.prototype.errorHandler=function(e){var root=Weave.getRoot(this);if(root)e.message='In LinkableFunction '+JSON.stringify(Weave.findPath(root,this))+':\n'+e.message;if(weavejs.core.LinkableFunction.debug)weavejs.util.JS.error(e);if(this._ignoreRuntimeErrors||weavejs.core.LinkableFunction.debug)return;throw e;};
weavejs.core.LinkableFunction.prototype.apply=function(thisArg,argArray){thisArg=typeof thisArg!=='undefined'?thisArg:null;argArray=typeof argArray!=='undefined'?argArray:null;if(this._triggerCount!=this.triggerCounter)this.validate();return this._compiledMethod.apply(thisArg,argArray)};
weavejs.core.LinkableFunction.prototype.call=function(thisArg,args){args=Array.prototype.slice.call(arguments,1);thisArg=typeof thisArg!=='undefined'?thisArg:null;if(this._triggerCount!=this.triggerCounter)this.validate();return this._compiledMethod.apply(thisArg,args)};weavejs.core.LinkableFunction.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableFunction',qName:'weavejs.core.LinkableFunction'}]};goog.exportSymbol('weavejs.core.LinkableFunction',weavejs.core.LinkableFunction);
weavejs.core.LinkableFunction.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'LinkableFunction':{type:'',declaredBy:'weavejs.core.LinkableFunction'},'validate':{type:'void',declaredBy:'weavejs.core.LinkableFunction'},'apply':{type:'*',declaredBy:'weavejs.core.LinkableFunction'},'call':{type:'*',declaredBy:'weavejs.core.LinkableFunction'}}}}};goog.provide('weavejs.core.LinkableCallbackScript');goog.require('weavejs.core.LinkableFunction');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkableCallbackScript=function(){this.variables=Weave.linkableChild(this,new weavejs.core.LinkableHashMap);this.script=Weave.linkableChild(this,new weavejs.core.LinkableString);this.delayWhileBusy=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.delayWhilePlaceholders=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.groupedCallback=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));var callbacks=Weave.getCallbacks(this);callbacks.addImmediateCallback(null,
org.apache.flex.utils.Language.closure(this._immediateCallback,this,'_immediateCallback'));callbacks.addGroupedCallback(null,org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'))};weavejs.core.LinkableCallbackScript.prototype.variables;weavejs.core.LinkableCallbackScript.prototype.script;weavejs.core.LinkableCallbackScript.prototype.delayWhileBusy;weavejs.core.LinkableCallbackScript.prototype.delayWhilePlaceholders;weavejs.core.LinkableCallbackScript.prototype.groupedCallback;
weavejs.core.LinkableCallbackScript.prototype._compiledFunction;weavejs.core.LinkableCallbackScript.prototype.get=function(variableName){return this.variables.getObject(variableName)};weavejs.core.LinkableCallbackScript.prototype._immediateCallback=function(){if(!this.groupedCallback.value)this._runScript()};weavejs.core.LinkableCallbackScript.prototype._groupedCallback=function(){if(this.groupedCallback.value)this._runScript()};
weavejs.core.LinkableCallbackScript.prototype._runScript=function(){if(this.delayWhileBusy.value&&Weave.isBusy(this))return;if(this.delayWhilePlaceholders.value){var ldos=this.variables.getObjects(weavejs.api.core.ILinkableDynamicObject);var foreachiter0_target=ldos;for(var foreachiter0 in foreachiter0_target){var ldo=foreachiter0_target[foreachiter0];if(ldo.foundPlaceholder)return}}if(!this.script.value)return;try{if(Weave.detectChange(this,this.script,this.variables.childListCallbacks))this._compiledFunction=
weavejs.util.JS.compile(this.script.value,this.variables.getNames(),org.apache.flex.utils.Language.closure(this.errorHandler,this,'errorHandler'));this._compiledFunction.apply(this,this.variables.getObjects())}catch(e){weavejs.util.JS.error(e)}};
weavejs.core.LinkableCallbackScript.prototype.errorHandler=function(e){var root=Weave.getRoot(this);if(root)e.message='In LinkableCallbackScript '+JSON.stringify(Weave.findPath(root,this))+':\n'+e.message;if(weavejs.core.LinkableFunction.debug){weavejs.util.JS.error(e);return}throw e;};weavejs.core.LinkableCallbackScript.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableCallbackScript',qName:'weavejs.core.LinkableCallbackScript'}],interfaces:[weavejs.api.core.ILinkableObject]};
goog.exportSymbol('weavejs.core.LinkableCallbackScript',weavejs.core.LinkableCallbackScript);
weavejs.core.LinkableCallbackScript.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'variables':{type:'LinkableHashMap'},'script':{type:'LinkableString'},'delayWhileBusy':{type:'LinkableBoolean'},'delayWhilePlaceholders':{type:'LinkableBoolean'},'groupedCallback':{type:'LinkableBoolean'}}},accessors:function(){return{}},methods:function(){return{'LinkableCallbackScript':{type:'',declaredBy:'weavejs.core.LinkableCallbackScript'},'get':{type:'ILinkableObject',declaredBy:'weavejs.core.LinkableCallbackScript'}}}}};goog.provide('weavejs.core.LinkableNumber');goog.require('weavejs.core.LinkableVariable');
weavejs.core.LinkableNumber=function(defaultValue,verifier,defaultValueTriggersCallbacks){defaultValue=typeof defaultValue!=='undefined'?defaultValue:NaN;verifier=typeof verifier!=='undefined'?verifier:null;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableNumber.base(this,'constructor',Number,verifier,arguments.length?defaultValue:undefined,defaultValueTriggersCallbacks)};
goog.inherits(weavejs.core.LinkableNumber,weavejs.core.LinkableVariable);weavejs.core.LinkableNumber.prototype.getSessionState=function(){return Number(this._sessionStateExternal)};weavejs.core.LinkableNumber.prototype.setSessionState=function(value){if(!org.apache.flex.utils.Language.is(value,Number))value=weavejs.util.StandardLib.asNumber(value);weavejs.core.LinkableNumber.base(this,'setSessionState',value)};
weavejs.core.LinkableNumber.prototype.sessionStateEquals=function(otherSessionState){if(this._sessionStateInternal==null)this._sessionStateInternal=this._sessionStateExternal=NaN;if(isNaN(this._sessionStateInternal)&&isNaN(otherSessionState))return true;return this._sessionStateInternal==otherSessionState};Object.defineProperties(weavejs.core.LinkableNumber.prototype,{value:{get:function(){return Number(this._sessionStateExternal)},set:function(value){this.setSessionState(value)}}});
weavejs.core.LinkableNumber.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableNumber',qName:'weavejs.core.LinkableNumber'}]};goog.exportSymbol('weavejs.core.LinkableNumber',weavejs.core.LinkableNumber);
weavejs.core.LinkableNumber.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'value':{type:'Number',declaredBy:'weavejs.core.LinkableNumber'}}},methods:function(){return{'LinkableNumber':{type:'',declaredBy:'weavejs.core.LinkableNumber'},'getSessionState':{type:'Object',declaredBy:'weavejs.core.LinkableNumber'},'setSessionState':{type:'void',declaredBy:'weavejs.core.LinkableNumber'}}}}};goog.provide('weavejs.core.LinkableSynchronizer');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkableSynchronizer=function(){this.primaryPath=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array),org.apache.flex.utils.Language.closure(this.setPrimaryPath,this,'setPrimaryPath'));this.secondaryPath=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array),org.apache.flex.utils.Language.closure(this.setSecondaryPath,this,'setSecondaryPath'));this.primaryTransform=Weave.linkableChild(this,new weavejs.core.LinkableFunction(null,false,[weavejs.core.LinkableSynchronizer.VAR_STATE,
weavejs.core.LinkableSynchronizer.VAR_PRIMARY,weavejs.core.LinkableSynchronizer.VAR_SECONDARY]),org.apache.flex.utils.Language.closure(this.handlePrimaryTransform,this,'handlePrimaryTransform'));this.secondaryTransform=Weave.linkableChild(this,new weavejs.core.LinkableFunction(null,false,[weavejs.core.LinkableSynchronizer.VAR_STATE,weavejs.core.LinkableSynchronizer.VAR_PRIMARY,weavejs.core.LinkableSynchronizer.VAR_SECONDARY]),org.apache.flex.utils.Language.closure(this.handleSecondaryTransform,this,
'handleSecondaryTransform'));this.primaryWatcher=Weave.disposableChild(this,new weavejs.core.LinkableWatcher(null,org.apache.flex.utils.Language.closure(this.synchronize,this,'synchronize')));this.secondaryWatcher=Weave.disposableChild(this,new weavejs.core.LinkableWatcher(null,org.apache.flex.utils.Language.closure(this.synchronize,this,'synchronize')));this._callbacks=Weave.getCallbacks(this);this._callbacks.addImmediateCallback(null,org.apache.flex.utils.Language.closure(this.selfCallback,this,
'selfCallback'))};weavejs.core.LinkableSynchronizer.VAR_STATE='state';weavejs.core.LinkableSynchronizer.VAR_PRIMARY='primary';weavejs.core.LinkableSynchronizer.VAR_SECONDARY='secondary';weavejs.core.LinkableSynchronizer.prototype.primaryPath;weavejs.core.LinkableSynchronizer.prototype.secondaryPath;weavejs.core.LinkableSynchronizer.prototype.primaryTransform;weavejs.core.LinkableSynchronizer.prototype.secondaryTransform;weavejs.core.LinkableSynchronizer.prototype.primaryWatcher;weavejs.core.LinkableSynchronizer.prototype.secondaryWatcher;
weavejs.core.LinkableSynchronizer.prototype.setPrimaryPath=function(){this.primaryWatcher.targetPath=org.apache.flex.utils.Language.as(this.primaryPath.getSessionState(),Array)};weavejs.core.LinkableSynchronizer.prototype.setSecondaryPath=function(){this.secondaryWatcher.targetPath=org.apache.flex.utils.Language.as(this.secondaryPath.getSessionState(),Array)};weavejs.core.LinkableSynchronizer.prototype._callbacks;weavejs.core.LinkableSynchronizer.prototype._delayedSynchronize=false;weavejs.core.LinkableSynchronizer.prototype._primary;
weavejs.core.LinkableSynchronizer.prototype._secondary;weavejs.core.LinkableSynchronizer.prototype.selfCallback=function(){if(this._delayedSynchronize)this.synchronize()};
weavejs.core.LinkableSynchronizer.prototype.synchronize=function(){if(this._callbacks.callbacksAreDelayed){this._delayedSynchronize=true;return}this._delayedSynchronize=false;var primary=this.primaryWatcher.target;var secondary=this.secondaryWatcher.target;if(this._primary!=primary||this._secondary!=secondary){if(this._primary)Weave.getCallbacks(this._primary).removeCallback(this,org.apache.flex.utils.Language.closure(this.primaryCallback,this,'primaryCallback'));if(this._secondary)Weave.getCallbacks(this._secondary).removeCallback(this,
org.apache.flex.utils.Language.closure(this.secondaryCallback,this,'secondaryCallback'));this._primary=primary;this._secondary=secondary;if(primary&&secondary){Weave.getCallbacks(this._secondary).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.secondaryCallback,this,'secondaryCallback'));Weave.getCallbacks(this._primary).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.primaryCallback,this,'primaryCallback'));if(!this.primaryTransform.value&&this.secondaryTransform.value)this.secondaryCallback();
else this.primaryCallback()}}};weavejs.core.LinkableSynchronizer.prototype.handlePrimaryTransform=function(){if(!this._callbacks.callbacksAreDelayed&&this._primary&&this._secondary)this.primaryCallback()};weavejs.core.LinkableSynchronizer.prototype.handleSecondaryTransform=function(){if(!this._callbacks.callbacksAreDelayed&&this._primary&&this._secondary)this.secondaryCallback()};
weavejs.core.LinkableSynchronizer.prototype.primaryCallback=function(){if(this._callbacks.callbacksAreDelayed){this._delayedSynchronize=true;this._callbacks.triggerCallbacks();return}if(this.primaryTransform.value)try{var state=Weave.getState(this._primary);var transformedState=this.primaryTransform.apply(null,[state,this._primary,this._secondary]);Weave.setState(this._secondary,transformedState,true)}catch(e){weavejs.util.JS.error('Error evaluating primaryTransform',e)}else if(!this.secondaryTransform.value)Weave.copyState(this._primary,
this._secondary)};
weavejs.core.LinkableSynchronizer.prototype.secondaryCallback=function(){if(this._callbacks.callbacksAreDelayed){this._delayedSynchronize=true;this._callbacks.triggerCallbacks();return}if(this.secondaryTransform.value)try{var state=Weave.getState(this._secondary);var transformedState=this.secondaryTransform.apply(null,[state,this._primary,this._secondary]);Weave.setState(this._primary,transformedState,true)}catch(e){weavejs.util.JS.error('Error evaluating secondaryTransform',e)}else if(!this.primaryTransform.value)Weave.copyState(this._secondary,this._primary)};
weavejs.core.LinkableSynchronizer.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableSynchronizer',qName:'weavejs.core.LinkableSynchronizer'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.core.LinkableSynchronizer',weavejs.core.LinkableSynchronizer);
weavejs.core.LinkableSynchronizer.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'primaryPath':{type:'LinkableVariable'},'secondaryPath':{type:'LinkableVariable'},'primaryTransform':{type:'LinkableFunction'},'secondaryTransform':{type:'LinkableFunction'}}},accessors:function(){return{}},methods:function(){return{'LinkableSynchronizer':{type:'',declaredBy:'weavejs.core.LinkableSynchronizer'}}}}};goog.provide('weavejs.api.data.IBinClassifier');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IBinClassifier=function(){};weavejs.api.data.IBinClassifier.prototype.contains=function(value){};weavejs.api.data.IBinClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'IBinClassifier',qName:'weavejs.api.data.IBinClassifier'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.data.IBinClassifier.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'contains':{type:'Boolean',declaredBy:'weavejs.api.data.IBinClassifier'}}}}};goog.provide('weavejs.api.data.IBinningDefinition');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IBinningDefinition=function(){};weavejs.api.data.IBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){};weavejs.api.data.IBinningDefinition.prototype.asyncResultCallbacks;weavejs.api.data.IBinningDefinition.prototype.getBinClassifiers=function(){};weavejs.api.data.IBinningDefinition.prototype.getBinNames=function(){};
weavejs.api.data.IBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'IBinningDefinition',qName:'weavejs.api.data.IBinningDefinition'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.data.IBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'asyncResultCallbacks':{type:'ICallbackCollection',declaredBy:'weavejs.api.data.IBinningDefinition'}}},methods:function(){return{'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.api.data.IBinningDefinition'},'getBinClassifiers':{type:'Array',declaredBy:'weavejs.api.data.IBinningDefinition'},'getBinNames':{type:'Array',declaredBy:'weavejs.api.data.IBinningDefinition'}}}}};goog.provide('weavejs.data.bin.AbstractBinningDefinition');goog.require('weavejs.api.data.IBinningDefinition');
weavejs.data.bin.AbstractBinningDefinition=function(allowOverrideBinNames,allowOverrideInputRange){this.output=Weave.disposableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IBinClassifier));this._asyncResultCallbacks=Weave.disposableChild(this,weavejs.core.CallbackCollection);this._overrideBinNamesArray=[];if(allowOverrideBinNames)this._overrideBinNames=Weave.linkableChild(this,new weavejs.core.LinkableString(''));if(allowOverrideInputRange){this._overrideInputMin=Weave.linkableChild(this,
weavejs.core.LinkableNumber);this._overrideInputMax=Weave.linkableChild(this,weavejs.core.LinkableNumber)}};weavejs.data.bin.AbstractBinningDefinition.prototype.output;weavejs.data.bin.AbstractBinningDefinition.prototype._asyncResultCallbacks;weavejs.data.bin.AbstractBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){throw new Error('Not implemented');};weavejs.data.bin.AbstractBinningDefinition.prototype.getBinNames=function(){if(Weave.isBusy(this))return null;return this.output.getNames()};
weavejs.data.bin.AbstractBinningDefinition.prototype.getBinClassifiers=function(){if(Weave.isBusy(this))return null;return this.output.getObjects()};weavejs.data.bin.AbstractBinningDefinition.prototype._overrideBinNames;weavejs.data.bin.AbstractBinningDefinition.prototype._overrideInputMin;weavejs.data.bin.AbstractBinningDefinition.prototype._overrideInputMax;weavejs.data.bin.AbstractBinningDefinition.prototype._overrideBinNamesArray;
weavejs.data.bin.AbstractBinningDefinition.prototype.getOverrideNames=function(){if(this.overrideBinNames&&Weave.detectChange(org.apache.flex.utils.Language.closure(this.getOverrideNames,this,'getOverrideNames'),this.overrideBinNames))this._overrideBinNamesArray=weavejs.WeaveAPI.CSVParser.parseCSVRow(this.overrideBinNames.value)||[];return this._overrideBinNamesArray};
Object.defineProperties(weavejs.data.bin.AbstractBinningDefinition.prototype,{asyncResultCallbacks:{get:function(){return this._asyncResultCallbacks}},overrideBinNames:{get:function(){return this._overrideBinNames}},overrideInputMin:{get:function(){return this._overrideInputMin}},overrideInputMax:{get:function(){return this._overrideInputMax}}});
weavejs.data.bin.AbstractBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'AbstractBinningDefinition',qName:'weavejs.data.bin.AbstractBinningDefinition'}],interfaces:[weavejs.api.data.IBinningDefinition]};goog.exportSymbol('weavejs.data.bin.AbstractBinningDefinition',weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.AbstractBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'asyncResultCallbacks':{type:'ICallbackCollection',declaredBy:'weavejs.data.bin.AbstractBinningDefinition'},'overrideBinNames':{type:'LinkableString',declaredBy:'weavejs.data.bin.AbstractBinningDefinition'},'overrideInputMin':{type:'LinkableNumber',declaredBy:'weavejs.data.bin.AbstractBinningDefinition'},'overrideInputMax':{type:'LinkableNumber',
declaredBy:'weavejs.data.bin.AbstractBinningDefinition'}}},methods:function(){return{'AbstractBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.AbstractBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.AbstractBinningDefinition'},'getBinNames':{type:'Array',declaredBy:'weavejs.data.bin.AbstractBinningDefinition'},'getBinClassifiers':{type:'Array',declaredBy:'weavejs.data.bin.AbstractBinningDefinition'}}}}};goog.provide('weavejs.util.DebugTimer');weavejs.util.DebugTimer=function(){};weavejs.util.DebugTimer.debugTimes=[];weavejs.util.DebugTimer.begin=function(){weavejs.util.DebugTimer.debugTimes.push(weavejs.util.JS.now())};weavejs.util.DebugTimer.cancel=function(){weavejs.util.DebugTimer.debugTimes.pop()};
weavejs.util.DebugTimer.lap=function(debugString,debugStrings){debugStrings=Array.prototype.slice.call(arguments,1);debugStrings.unshift(debugString);var elapsedTime=weavejs.util.DebugTimer.end.apply(null,debugStrings);weavejs.util.DebugTimer.begin();return elapsedTime};
weavejs.util.DebugTimer.end=function(debugString,debugStrings){debugStrings=Array.prototype.slice.call(arguments,1);debugStrings.unshift(debugString);var elapsedTime=weavejs.util.JS.now()-weavejs.util.DebugTimer.debugTimes.pop();var elapsed='['+elapsedTime+' ms elapsed] ';var elapsedIndent=weavejs.util.StandardLib.lpad('| ',elapsed.length);var indent=weavejs.util.StandardLib.rpad('',weavejs.util.DebugTimer.debugTimes.length*2,'| ');var lines=debugStrings.join(' ').split('\n');for(var i=0;i<lines.length;i++)if(lines.length==
1)lines[i]=indent+',-'+elapsed+lines[i];else if(i==0)lines[i]=indent+',-'+elapsed+lines[i];else if(i>0&&i<lines.length-1)lines[i]=indent+'| '+elapsedIndent+lines[i];else lines[i]=indent+'|-'+elapsed+lines[i];org.apache.flex.utils.Language.trace(lines.join('\n'));if(elapsedTime>1E3)org.apache.flex.utils.Language.trace();return elapsedTime};weavejs.util.DebugTimer.prototype.FLEXJS_CLASS_INFO={names:[{name:'DebugTimer',qName:'weavejs.util.DebugTimer'}]};goog.exportSymbol('weavejs.util.DebugTimer',weavejs.util.DebugTimer);
weavejs.util.DebugTimer.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.core.Scheduler');goog.require('weavejs.util.DebugTimer');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.IScheduler');
weavejs.core.Scheduler=function(){this._frameCallbacks=Weave.disposableChild(this,weavejs.core.CallbackCollection);this._currentFrameStartTime=weavejs.util.JS.now();this.frameTimes=[];this.map_task_stackTrace=new weavejs.util.JS.WeakMap;this.map_task_elapsedTime=new weavejs.util.JS.WeakMap;this.map_task_startTime=new weavejs.util.JS.WeakMap;this._priorityCallLaterQueues=[[],[],[],[]];this._activePriority=weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE+1;this._priorityAllocatedTimes=[Number.MAX_VALUE,300,
200,100];this.map_task_time=new weavejs.util.JS.WeakMap;this.d2d_context_task_token=new weavejs.util.Dictionary2D(true,true,Object);this._frameCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._requestNextFrame,this,'_requestNextFrame'),true);this._frameCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._handleCallLater,this,'_handleCallLater'));this.initVisibilityHandler()};weavejs.core.Scheduler.debug_fps=false;
weavejs.core.Scheduler.debug_async_time=false;weavejs.core.Scheduler.debug_async_stack_elapsed=false;weavejs.core.Scheduler.debug_delayTasks=false;weavejs.core.Scheduler.debug_callLater=false;weavejs.core.Scheduler.debug_visibility=false;weavejs.core.Scheduler.prototype._frameCallbacks;weavejs.core.Scheduler.prototype._nextAnimationFrame;
weavejs.core.Scheduler.prototype._requestNextFrame=function(){this._nextAnimationFrame=weavejs.util.JS.requestAnimationFrame(org.apache.flex.utils.Language.closure(this._frameCallbacks.triggerCallbacks,this._frameCallbacks,'triggerCallbacks'))};weavejs.core.Scheduler.prototype.dispose=function(){weavejs.util.JS.cancelAnimationFrame(this._nextAnimationFrame)};weavejs.core.Scheduler.prototype.averageFrameTime=0;weavejs.core.Scheduler.prototype._currentFrameStartTime;
weavejs.core.Scheduler.prototype._previousFrameElapsedTime=0;weavejs.core.Scheduler.prototype.frameTimes;weavejs.core.Scheduler.prototype.map_task_stackTrace;weavejs.core.Scheduler.prototype.map_task_elapsedTime;weavejs.core.Scheduler.prototype.map_task_startTime;weavejs.core.Scheduler.prototype._currentTaskStopTime=0;weavejs.core.Scheduler.prototype._priorityCallLaterQueues;weavejs.core.Scheduler.prototype._activePriority;weavejs.core.Scheduler.prototype._activePriorityElapsedTime=0;weavejs.core.Scheduler.prototype._priorityAllocatedTimes;
weavejs.core.Scheduler.prototype._deactivatedMaxComputationTimePerFrame=1E3;weavejs.core.Scheduler.prototype.getMaxComputationTimePerFrame=function(){return this.maxComputationTimePerFrame};weavejs.core.Scheduler.prototype.setMaxComputationTimePerFrame=function(value){this.maxComputationTimePerFrame=value};weavejs.core.Scheduler.prototype.getTaskPriorityTimeAllocation=function(priority){return org.apache.flex.utils.Language.uint(this._priorityAllocatedTimes[priority])};
weavejs.core.Scheduler.prototype.setTaskPriorityTimeAllocation=function(priority,milliseconds){this._priorityAllocatedTimes[priority]=Math.max(milliseconds,5)};weavejs.core.Scheduler.prototype.maxComputationTimePerFrame=100;weavejs.core.Scheduler.prototype.maxComputationTimePerFrame_noActivity=250;weavejs.core.Scheduler._time;weavejs.core.Scheduler._times=[];
weavejs.core.Scheduler.debugTime=function(str){var now=weavejs.util.JS.now();var dur=now-weavejs.core.Scheduler._time;if(dur>100)weavejs.core.Scheduler._times.push(dur+' '+str);else{var dots='...';var n=weavejs.core.Scheduler._times.length;if(n&&weavejs.core.Scheduler._times[n-1]!=dots)weavejs.core.Scheduler._times.push(dots)}weavejs.core.Scheduler._time=now;return dur};weavejs.core.Scheduler.resetDebugTime=function(){weavejs.core.Scheduler._times.length=0;weavejs.core.Scheduler._time=weavejs.util.JS.now()};
weavejs.core.Scheduler.prototype.HIDDEN;weavejs.core.Scheduler.prototype.VISIBILITY_CHANGE;weavejs.core.Scheduler.prototype.deactivated=true;weavejs.core.Scheduler.prototype.useDeactivatedFrameRate=false;
weavejs.core.Scheduler.prototype.initVisibilityHandler=function(){if(typeof weavejs.util.JS.global.document.hidden!=='undefined'){this.HIDDEN='hidden';this.VISIBILITY_CHANGE='visibilitychange'}else if(typeof weavejs.util.JS.global.document.mozHidden!=='undefined'){this.HIDDEN='mozHidden';this.VISIBILITY_CHANGE='mozvisibilitychange'}else if(typeof weavejs.util.JS.global.document.msHidden!=='undefined'){this.HIDDEN='msHidden';this.VISIBILITY_CHANGE='msvisibilitychange'}else if(typeof weavejs.util.JS.global.document.webkitHidden!==
'undefined'){this.HIDDEN='webkitHidden';this.VISIBILITY_CHANGE='webkitvisibilitychange'}if(typeof weavejs.util.JS.global.document.addEventListener!=='undefined'&&typeof weavejs.util.JS.global.document[this.HIDDEN]!=='undefined')weavejs.util.JS.global.document.addEventListener(this.VISIBILITY_CHANGE,org.apache.flex.utils.Language.closure(this.handleVisibilityChange,this,'handleVisibilityChange'),false)};
weavejs.core.Scheduler.prototype.handleVisibilityChange=function(){if(weavejs.util.JS.global.document[this.HIDDEN])this.deactivated=true;else this.deactivated=false;this.useDeactivatedFrameRate=false;if(weavejs.core.Scheduler.debug_visibility)weavejs.util.JS.log('visibility change; hidden \x3d',this.deactivated)};
weavejs.core.Scheduler.prototype._handleCallLater=function(){if(this.deactivated){var wasted=weavejs.util.JS.now()-this._currentFrameStartTime;if(weavejs.core.Scheduler.debug_fps)weavejs.util.JS.log('wasted',wasted);this.useDeactivatedFrameRate=wasted>100}var prevStartTime=this._currentFrameStartTime;this._currentFrameStartTime=weavejs.util.JS.now();this._previousFrameElapsedTime=this._currentFrameStartTime-prevStartTime;if(this.maxComputationTimePerFrame==0)this.maxComputationTimePerFrame=100;var maxComputationTime;
if(this.useDeactivatedFrameRate)maxComputationTime=this._deactivatedMaxComputationTimePerFrame;else maxComputationTime=this.maxComputationTimePerFrame;weavejs.core.Scheduler.resetDebugTime();if(weavejs.core.Scheduler.debug_fps){this.frameTimes.push(this.previousFrameElapsedTime);if(weavejs.util.StandardLib.sum(this.frameTimes)>=1E3){this.averageFrameTime=weavejs.util.StandardLib.mean(this.frameTimes);var fps=weavejs.util.StandardLib.roundSignificant(1E3/this.averageFrameTime,2);weavejs.util.JS.log(fps,
'fps; max computation time',maxComputationTime);this.frameTimes.length=0}}if(this._previousFrameElapsedTime>3E3)weavejs.util.JS.log('Previous frame took',this._previousFrameElapsedTime,'ms');var args;var context;var args2;var stackTrace;var now;var allStop=this._currentFrameStartTime+maxComputationTime;this._currentTaskStopTime=allStop;var queue=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE],Array);var countdown;for(countdown=queue.length;countdown>
0;countdown--){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.begin();now=weavejs.util.JS.now();if(now>allStop){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();return}args=queue.shift();stackTrace=this.map_task_stackTrace.get(args);context=args[0];if(!weavejs.WeaveAPI.SessionManager.objectWasDisposed(context)){args2=org.apache.flex.utils.Language.as(args[2],Array);if(args2!=null&&args2.length>0)org.apache.flex.utils.Language.as(args[1],Function).apply(context,
args2);else org.apache.flex.utils.Language.as(args[1],Function).apply(context)}if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.end(stackTrace)}var minPriority=weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE+1;var lastPriority=this._activePriority==minPriority?this._priorityCallLaterQueues.length-1:this._activePriority-1;var pStart=weavejs.util.JS.now();var pAlloc=org.apache.flex.utils.Language._int(this._priorityAllocatedTimes[this._activePriority]);if(this.useDeactivatedFrameRate)pAlloc=
pAlloc*this._deactivatedMaxComputationTimePerFrame/this.maxComputationTimePerFrame;var pStop=Math.min(allStop,pStart+pAlloc-this._activePriorityElapsedTime);queue=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[this._activePriority],Array);countdown=queue.length;while(true){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.begin();now=weavejs.util.JS.now();if(countdown==0||now>pStop){this._activePriorityElapsedTime+=now-pStart;if(now>allStop||this._activePriority==
lastPriority){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();if(weavejs.core.Scheduler.debug_fps)weavejs.util.JS.log('spent',this.currentFrameElapsedTime,'ms');return}var remaining=0;for(var i=minPriority;i<this._priorityCallLaterQueues.length;i++)remaining+=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[i],Array).length;if(remaining==0){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();break}this._activePriority++;this._activePriorityElapsedTime=
0;if(this._activePriority==this._priorityCallLaterQueues.length)this._activePriority=minPriority;pStart=now;pAlloc=org.apache.flex.utils.Language._int(this._priorityAllocatedTimes[this._activePriority]);if(this.useDeactivatedFrameRate)pAlloc=pAlloc*this._deactivatedMaxComputationTimePerFrame/this.maxComputationTimePerFrame;pStop=Math.min(allStop,pStart+pAlloc);queue=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[this._activePriority],Array);countdown=queue.length;if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();
continue}countdown--;this._currentTaskStopTime=pStop;args=org.apache.flex.utils.Language.as(queue.shift(),Array);stackTrace=this.map_task_stackTrace.get(args);context=args[0];if(!weavejs.WeaveAPI.SessionManager.objectWasDisposed(context)){args2=org.apache.flex.utils.Language.as(args[2],Array);if(args2!=null&&args2.length>0)org.apache.flex.utils.Language.as(args[1],Function).apply(context,args2);else org.apache.flex.utils.Language.as(args[1],Function).apply(context)}if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.end(stackTrace)}};
weavejs.core.Scheduler.prototype.callLater=function(relevantContext,method,parameters){parameters=typeof parameters!=='undefined'?parameters:null;this._callLaterPriority(weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE,relevantContext,method,parameters)};
weavejs.core.Scheduler.prototype._callLaterPriority=function(priority,relevantContext,method,parameters){parameters=typeof parameters!=='undefined'?parameters:null;if(method==null){weavejs.util.JS.error('StageUtils.callLater(): received null "method" parameter');return}var args=[relevantContext,method,parameters];this._priorityCallLaterQueues[priority].push(args);if(weavejs.WeaveAPI.debugAsyncStack)this.map_task_stackTrace.set(args,new Error('This is the stack trace from when callLater() was called.'))};
weavejs.core.Scheduler.generateCompoundIterativeTask=function(iterativeTasks){iterativeTasks=Array.prototype.slice.call(arguments,0);var __localFn0__=function(stopTime){if(stopTime<0){iTask=0;return 0}if(iTask>=iterativeTasks.length)return 1;var i=iTask;var iterate=org.apache.flex.utils.Language.as(iterativeTasks[iTask],Function);var progress;if(iterate.length)progress=iterate.call(this,stopTime);else while(iTask==i&&(progress=iterate.call(this))<1&&weavejs.util.JS.now()<stopTime);if(iTask!=i)return 0;
var totalProgress=(iTask+progress)/iterativeTasks.length;if(progress==1)iTask++;return totalProgress};var iTask=0;return __localFn0__};weavejs.core.Scheduler.prototype.map_task_time;weavejs.core.Scheduler.prototype.d2d_context_task_token;
weavejs.core.Scheduler.prototype.startTask=function(relevantContext,iterativeTask,priority,finalCallback,description){finalCallback=typeof finalCallback!=='undefined'?finalCallback:null;description=typeof description!=='undefined'?description:null;var taskToken=this.d2d_context_task_token.get(relevantContext||weavejs.util.JS.global,iterativeTask);if(weavejs.WeaveAPI.ProgressIndicator.hasTask(taskToken))return;if(weavejs.core.Scheduler.debug_async_time){if(this.map_task_time.get(iterativeTask)){var value=
this.map_task_time.get(iterativeTask);this.map_task_time['delete'](iterativeTask);weavejs.util.JS.log('interrupted',weavejs.util.JS.now()-this.map_task_time.get(iterativeTask)[0],priority,this.map_task_time.get(iterativeTask)[1],value)}this.map_task_time.set(iterativeTask,[weavejs.util.JS.now(),new Error('Stack trace')])}if(priority>=this._priorityCallLaterQueues.length){weavejs.util.JS.error('Invalid priority value: '+priority);priority=weavejs.WeaveAPI.TASK_PRIORITY_NORMAL}if(weavejs.WeaveAPI.debugAsyncStack)this.map_task_stackTrace.set(iterativeTask,
[weavejs.util.DebugUtils.debugId(iterativeTask),new Error('Stack trace')]);if(weavejs.core.Scheduler.debug_async_stack_elapsed){this.map_task_startTime.set(iterativeTask,weavejs.util.JS.now());this.map_task_elapsedTime.set(iterativeTask,0)}weavejs.WeaveAPI.ProgressIndicator.addTask(taskToken,org.apache.flex.utils.Language.as(relevantContext,weavejs.api.core.ILinkableObject),description);var useTimeParameter=iterativeTask.length>0;this._callLaterPriority(priority,null,org.apache.flex.utils.Language.closure(this._iterateTask,
this,'_iterateTask'),[relevantContext,iterativeTask,priority,finalCallback,useTimeParameter])};
weavejs.core.Scheduler.prototype._iterateTask=function(context,task,priority,finalCallback,useTimeParameter){var taskToken=this.d2d_context_task_token.get(context||weavejs.util.JS.global,task);if(weavejs.WeaveAPI.SessionManager.objectWasDisposed(context)){if(weavejs.core.Scheduler.debug_async_time&&this.map_task_time.get(task)){var value=this.map_task_time.get(task);this.map_task_time['delete'](task);weavejs.util.JS.log('disposed',weavejs.util.JS.now()-this.map_task_time.get(task)[0],priority,this.map_task_time.get(task)[1],
value)}weavejs.WeaveAPI.ProgressIndicator.removeTask(taskToken);return}var debug_time=weavejs.WeaveAPI.debugAsyncStack?weavejs.util.JS.now():-1;var stackTrace=weavejs.WeaveAPI.debugAsyncStack?this.map_task_stackTrace.get(task):null;var progress=undefined;var time;while((time=weavejs.util.JS.now())<=this._currentTaskStopTime){if(useTimeParameter)progress=org.apache.flex.utils.Language.as(task.call(context,this._currentTaskStopTime),Number);else progress=org.apache.flex.utils.Language.as(task.call(context),
Number);if(progress===null||isNaN(progress)||progress<0||progress>1){weavejs.util.JS.error('Received unexpected result from iterative task ('+progress+').  Expecting a number between 0 and 1.  Task cancelled.');if(weavejs.WeaveAPI.debugAsyncStack){weavejs.util.JS.log(stackTrace);if(useTimeParameter)progress=org.apache.flex.utils.Language.as(task.call(context,this._currentTaskStopTime),Number);else progress=org.apache.flex.utils.Language.as(task.call(context),Number)}progress=1}if(weavejs.WeaveAPI.debugAsyncStack&&
this.currentFrameElapsedTime>3E3){weavejs.util.JS.log(weavejs.util.JS.now()-time,stackTrace);if(useTimeParameter)progress=org.apache.flex.utils.Language.as(task.call(context,this._currentTaskStopTime),Number);else progress=org.apache.flex.utils.Language.as(task.call(context),Number)}if(progress==1){if(weavejs.core.Scheduler.debug_async_time&&this.map_task_time.get(task)){var value2=this.map_task_time.get(task);this.map_task_time['delete'](task);weavejs.util.JS.log('completed',weavejs.util.JS.now()-
this.map_task_time.get(task)[0],priority,this.map_task_time.get(task)[1],value2)}weavejs.WeaveAPI.ProgressIndicator.removeTask(taskToken);if(finalCallback!=null)finalCallback.call(context);return}if(useTimeParameter)break;if(weavejs.core.Scheduler.debug_delayTasks)break}if(weavejs.core.Scheduler.debug_async_stack_elapsed){var start=org.apache.flex.utils.Language._int(this.map_task_startTime.get(task));var elapsed=org.apache.flex.utils.Language._int(this.map_task_elapsedTime.get(task))+(time-debug_time);
this.map_task_elapsedTime.set(task,elapsed);weavejs.util.JS.log(elapsed,'/',time-start,'\x3d',weavejs.util.StandardLib.roundSignificant(elapsed/(time-start),2),stackTrace)}if(progress!==undefined)weavejs.WeaveAPI.ProgressIndicator.updateTask(taskToken,progress);this._callLaterPriority(priority,null,org.apache.flex.utils.Language.closure(this._iterateTask,this,'_iterateTask'),weavejs.util.JS.toArray(arguments))};
Object.defineProperties(weavejs.core.Scheduler.prototype,{frameCallbacks:{get:function(){return this._frameCallbacks}},previousFrameElapsedTime:{get:function(){return this._previousFrameElapsedTime}},currentFrameElapsedTime:{get:function(){return weavejs.util.JS.now()-this._currentFrameStartTime}}});weavejs.core.Scheduler.prototype.FLEXJS_CLASS_INFO={names:[{name:'Scheduler',qName:'weavejs.core.Scheduler'}],interfaces:[weavejs.api.core.IScheduler,weavejs.api.core.IDisposableObject]};
goog.exportSymbol('weavejs.core.Scheduler',weavejs.core.Scheduler);
weavejs.core.Scheduler.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'averageFrameTime':{type:'int'},'maxComputationTimePerFrame':{type:'uint'}}},accessors:function(){return{'frameCallbacks':{type:'ICallbackCollection',declaredBy:'weavejs.core.Scheduler'},'previousFrameElapsedTime':{type:'int',declaredBy:'weavejs.core.Scheduler'},'currentFrameElapsedTime':{type:'int',declaredBy:'weavejs.core.Scheduler'}}},methods:function(){return{'Scheduler':{type:'',declaredBy:'weavejs.core.Scheduler'},
'dispose':{type:'void',declaredBy:'weavejs.core.Scheduler'},'getMaxComputationTimePerFrame':{type:'uint',declaredBy:'weavejs.core.Scheduler'},'setMaxComputationTimePerFrame':{type:'void',declaredBy:'weavejs.core.Scheduler'},'getTaskPriorityTimeAllocation':{type:'uint',declaredBy:'weavejs.core.Scheduler'},'setTaskPriorityTimeAllocation':{type:'void',declaredBy:'weavejs.core.Scheduler'},'callLater':{type:'void',declaredBy:'weavejs.core.Scheduler'},'startTask':{type:'void',declaredBy:'weavejs.core.Scheduler'}}}}};
weavejs.core.Scheduler.WindowFrameHandler=function(window,scheduler){};weavejs.core.Scheduler.WindowFrameHandler.prototype.window;weavejs.core.Scheduler.WindowFrameHandler.prototype.scheduler;weavejs.core.Scheduler.WindowFrameHandler.prototype.FLEXJS_CLASS_INFO={names:[{name:'WindowFrameHandler',qName:'weavejs.core.Scheduler.WindowFrameHandler'}]};goog.exportSymbol('weavejs.core.Scheduler.WindowFrameHandler',weavejs.core.Scheduler.WindowFrameHandler);
weavejs.core.Scheduler.WindowFrameHandler.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'WindowFrameHandler':{type:'',declaredBy:'weavejs.core.Scheduler.WindowFrameHandler'}}}}};goog.provide('weavejs.data.bin.SingleValueClassifier');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.api.data.IBinClassifier');weavejs.data.bin.SingleValueClassifier=function(){weavejs.data.bin.SingleValueClassifier.base(this,'constructor')};goog.inherits(weavejs.data.bin.SingleValueClassifier,weavejs.core.LinkableVariable);weavejs.data.bin.SingleValueClassifier.prototype.contains=function(value){return this.sessionStateEquals(value)};
weavejs.data.bin.SingleValueClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'SingleValueClassifier',qName:'weavejs.data.bin.SingleValueClassifier'}],interfaces:[weavejs.api.data.IBinClassifier]};goog.exportSymbol('weavejs.data.bin.SingleValueClassifier',weavejs.data.bin.SingleValueClassifier);
weavejs.data.bin.SingleValueClassifier.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'contains':{type:'Boolean',declaredBy:'weavejs.data.bin.SingleValueClassifier'}}}}};goog.provide('weavejs.data.bin.CategoryBinningDefinition');goog.require('weavejs.core.Scheduler');goog.require('weavejs.data.bin.AbstractBinningDefinition');goog.require('weavejs.data.bin.SingleValueClassifier');
weavejs.data.bin.CategoryBinningDefinition=function(){this._iterateAll=weavejs.core.Scheduler.generateCompoundIterativeTask(org.apache.flex.utils.Language.closure(this._iterate1,this,'_iterate1'),org.apache.flex.utils.Language.closure(this._iterate2,this,'_iterate2'));this.asyncSort=Weave.disposableChild(this,weavejs.util.AsyncSort);weavejs.data.bin.CategoryBinningDefinition.base(this,'constructor',false,false)};goog.inherits(weavejs.data.bin.CategoryBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.CategoryBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){this.output.removeAllObjects();this._sortMap={};this.strArray=new Array(column.keys.length);this.column=column;this.i=this.iout=0;this.keys=column.keys;this._iterateAll(-1);weavejs.WeaveAPI.Scheduler.startTask(this.asyncResultCallbacks,this._iterateAll,weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this._done,this,'_done'))};weavejs.data.bin.CategoryBinningDefinition.prototype._sortMap;
weavejs.data.bin.CategoryBinningDefinition.prototype.strArray;weavejs.data.bin.CategoryBinningDefinition.prototype.i;weavejs.data.bin.CategoryBinningDefinition.prototype.iout;weavejs.data.bin.CategoryBinningDefinition.prototype.str;weavejs.data.bin.CategoryBinningDefinition.prototype.column;weavejs.data.bin.CategoryBinningDefinition.prototype.keys;weavejs.data.bin.CategoryBinningDefinition.prototype._iterateAll;weavejs.data.bin.CategoryBinningDefinition.prototype.asyncSort;
weavejs.data.bin.CategoryBinningDefinition.prototype._iterate1=function(stopTime){for(;this.i<this.keys.length;this.i++){if(weavejs.util.JS.now()>stopTime)return this.i/this.keys.length;this.str=org.apache.flex.utils.Language.as(this.column.getValueFromKey(this.keys[this.i],String),String);if(this.str&&!this._sortMap.hasOwnProperty(this.str)){this.strArray[org.apache.flex.utils.Language._int(this.iout++)]=this.str;this._sortMap[this.str]=this.column.getValueFromKey(this.keys[this.i],Number)}}this.strArray.length=
this.iout;this.asyncSort.beginSort(this.strArray,org.apache.flex.utils.Language.closure(this._sortFunc,this,'_sortFunc'));this.i=0;return 1};
weavejs.data.bin.CategoryBinningDefinition.prototype._iterate2=function(stopTime){if(Weave.isBusy(this.asyncSort))return 0;for(;this.i<this.strArray.length;this.i++){if(weavejs.util.JS.now()>stopTime)return this.i/this.strArray.length;this.str=org.apache.flex.utils.Language.as(this.strArray[this.i],String);var svc=this.output.requestObject(this.str,weavejs.data.bin.SingleValueClassifier,false);svc.state=this.strArray[this.i]}return 1};weavejs.data.bin.CategoryBinningDefinition.prototype._done=function(){this.asyncResultCallbacks.triggerCallbacks()};
weavejs.data.bin.CategoryBinningDefinition.prototype._sortFunc=function(str1,str2){return weavejs.util.StandardLib.numericCompare(this._sortMap[str1],this._sortMap[str2])||weavejs.util.StandardLib.stringCompare(str1,str2)};weavejs.data.bin.CategoryBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'CategoryBinningDefinition',qName:'weavejs.data.bin.CategoryBinningDefinition'}]};goog.exportSymbol('weavejs.data.bin.CategoryBinningDefinition',weavejs.data.bin.CategoryBinningDefinition);
weavejs.data.bin.CategoryBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'CategoryBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.CategoryBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.CategoryBinningDefinition'}}}}};goog.provide('weavejs.data.bin.NumberClassifier');goog.require('weavejs.api.data.IBinClassifier');
weavejs.data.bin.NumberClassifier=function(min,max,minInclusive,maxInclusive){min=typeof min!=='undefined'?min:NaN;max=typeof max!=='undefined'?max:NaN;minInclusive=typeof minInclusive!=='undefined'?minInclusive:true;maxInclusive=typeof maxInclusive!=='undefined'?maxInclusive:true;this.min=Weave.linkableChild(this,weavejs.core.LinkableNumber);this.max=Weave.linkableChild(this,weavejs.core.LinkableNumber);this.minInclusive=Weave.linkableChild(this,weavejs.core.LinkableBoolean);this.maxInclusive=Weave.linkableChild(this,
weavejs.core.LinkableBoolean);this._callbacks=Weave.getCallbacks(this);this.min.value=min;this.max.value=max;this.minInclusive.value=minInclusive;this.maxInclusive.value=maxInclusive};weavejs.data.bin.NumberClassifier.prototype.min;weavejs.data.bin.NumberClassifier.prototype.max;weavejs.data.bin.NumberClassifier.prototype.minInclusive;weavejs.data.bin.NumberClassifier.prototype.maxInclusive;weavejs.data.bin.NumberClassifier.prototype._callbacks;
weavejs.data.bin.NumberClassifier.prototype._triggerCount=0;weavejs.data.bin.NumberClassifier.prototype._min;weavejs.data.bin.NumberClassifier.prototype._max;weavejs.data.bin.NumberClassifier.prototype._minInclusive;weavejs.data.bin.NumberClassifier.prototype._maxInclusive;
weavejs.data.bin.NumberClassifier.prototype.contains=function(value){if(this._triggerCount!=this._callbacks.triggerCounter){this._min=this.min.value;this._max=this.max.value;this._minInclusive=this.minInclusive.value;this._maxInclusive=this.maxInclusive.value;this._triggerCount=this._callbacks.triggerCounter}if(this._minInclusive?value>=this._min:value>this._min)if(this._maxInclusive?value<=this._max:value<this._max)return true;return false};
weavejs.data.bin.NumberClassifier.prototype.generateBinLabel=function(toStringColumn){toStringColumn=typeof toStringColumn!=='undefined'?toStringColumn:null;var minStr=null;var maxStr=null;minStr=weavejs.data.ColumnUtils.deriveStringFromNumber(toStringColumn,this.min.value)||'';maxStr=weavejs.data.ColumnUtils.deriveStringFromNumber(toStringColumn,this.max.value)||'';if(!minStr&&!maxStr){minStr=weavejs.util.StandardLib.formatNumber(this.min.value);maxStr=weavejs.util.StandardLib.formatNumber(this.max.value)}if(minStr&&
maxStr&&minStr==maxStr)return minStr;if(toStringColumn&&toStringColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)==weavejs.api.data.DataType.STRING){minStr=Weave.lang('"{0}"',minStr);maxStr=Weave.lang('"{0}"',maxStr)}else{if(!this.minInclusive.value)minStr=Weave.lang('\x3e {0}',minStr);if(!this.maxInclusive.value)maxStr=Weave.lang('\x3c {0}',maxStr)}if(minStr=='')minStr=Weave.lang('Undefined');if(maxStr=='')maxStr=Weave.lang('Undefined');return Weave.lang('{0} to {1}',minStr,maxStr)};
weavejs.data.bin.NumberClassifier.prototype.toString=function(){return(this.minInclusive.value?'[':'(')+this.min.value+', '+this.max.value+(this.maxInclusive.value?']':')')};weavejs.data.bin.NumberClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'NumberClassifier',qName:'weavejs.data.bin.NumberClassifier'}],interfaces:[weavejs.api.data.IBinClassifier]};goog.exportSymbol('weavejs.data.bin.NumberClassifier',weavejs.data.bin.NumberClassifier);
weavejs.data.bin.NumberClassifier.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'min':{type:'LinkableNumber'},'max':{type:'LinkableNumber'},'minInclusive':{type:'LinkableBoolean'},'maxInclusive':{type:'LinkableBoolean'}}},accessors:function(){return{}},methods:function(){return{'NumberClassifier':{type:'',declaredBy:'weavejs.data.bin.NumberClassifier'},'contains':{type:'Boolean',declaredBy:'weavejs.data.bin.NumberClassifier'},'generateBinLabel':{type:'String',declaredBy:'weavejs.data.bin.NumberClassifier'},
'toString':{type:'String',declaredBy:'weavejs.data.bin.NumberClassifier'}}}}};goog.provide('weavejs.data.bin.CustomSplitBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');goog.require('weavejs.data.bin.NumberClassifier');weavejs.data.bin.CustomSplitBinningDefinition=function(){this.splitValues=Weave.linkableChild(this,weavejs.core.LinkableString);this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.CustomSplitBinningDefinition.base(this,'constructor',true,false)};
goog.inherits(weavejs.data.bin.CustomSplitBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);weavejs.data.bin.CustomSplitBinningDefinition.prototype.splitValues;
weavejs.data.bin.CustomSplitBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){Weave.getCallbacks(this.output).delayCallbacks();var name;this.output.removeAllObjects();var i;var values=String(this.splitValues.value||'').split(',');for(i=values.length;i--;){var number=weavejs.util.StandardLib.asNumber(values[i]);if(!isFinite(number))values.splice(i,1);else values[i]=number}weavejs.util.AsyncSort.sortImmediately(values);for(i=0;i<values.length-1;i++){this.tempNumberClassifier.min.value=
values[i];this.tempNumberClassifier.max.value=values[i+1];this.tempNumberClassifier.minInclusive.value=true;this.tempNumberClassifier.maxInclusive.value=i==values.length-2;name=this.getOverrideNames()[i];if(!name)name=this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,this.tempNumberClassifier)}Weave.getCallbacks(this.output).resumeCallbacks();this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.CustomSplitBinningDefinition.prototype.tempNumberClassifier;
Object.defineProperties(weavejs.data.bin.CustomSplitBinningDefinition.prototype,{binRange:{set:function(value){this.splitValues.value=value}},dataMin:{set:function(value){this.splitValues.value=value+','+this.splitValues.value}},dataMax:{set:function(value){this.splitValues.value+=','+value}}});weavejs.data.bin.CustomSplitBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'CustomSplitBinningDefinition',qName:'weavejs.data.bin.CustomSplitBinningDefinition'}]};
goog.exportSymbol('weavejs.data.bin.CustomSplitBinningDefinition',weavejs.data.bin.CustomSplitBinningDefinition);
weavejs.data.bin.CustomSplitBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'splitValues':{type:'LinkableString'}}},accessors:function(){return{'binRange':{type:'String',declaredBy:'weavejs.data.bin.CustomSplitBinningDefinition',metadata:function(){return[]}},'dataMin':{type:'String',declaredBy:'weavejs.data.bin.CustomSplitBinningDefinition',metadata:function(){return[]}},'dataMax':{type:'String',declaredBy:'weavejs.data.bin.CustomSplitBinningDefinition',
metadata:function(){return[]}}}},methods:function(){return{'CustomSplitBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.CustomSplitBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.CustomSplitBinningDefinition'}}}}};goog.provide('weavejs.data.bin.StringClassifier');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.api.data.IBinClassifier');weavejs.data.bin.StringClassifier=function(){weavejs.data.bin.StringClassifier.base(this,'constructor',Array,org.apache.flex.utils.Language.closure(this.isStringArray,this,'isStringArray'))};goog.inherits(weavejs.data.bin.StringClassifier,weavejs.core.LinkableVariable);
weavejs.data.bin.StringClassifier.prototype.setSessionState=function(value){if(org.apache.flex.utils.Language.is(value,String))value=weavejs.WeaveAPI.CSVParser.parseCSVRow(org.apache.flex.utils.Language.as(value,String));weavejs.data.bin.StringClassifier.base(this,'setSessionState',value)};weavejs.data.bin.StringClassifier.prototype.isStringArray=function(array){return weavejs.util.StandardLib.getArrayType(array)==String};weavejs.data.bin.StringClassifier.prototype._valueMap=null;
weavejs.data.bin.StringClassifier.prototype._triggerCount=0;weavejs.data.bin.StringClassifier.prototype.contains=function(value){if(this._triggerCount!=this.triggerCounter){this._triggerCount=this.triggerCounter;this._valueMap={};var foreachiter0_target=this._sessionStateInternal;for(var foreachiter0 in foreachiter0_target){var str=foreachiter0_target[foreachiter0];this._valueMap[str]=true}}return this._valueMap[value]!=undefined};
weavejs.data.bin.StringClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringClassifier',qName:'weavejs.data.bin.StringClassifier'}],interfaces:[weavejs.api.data.IBinClassifier]};goog.exportSymbol('weavejs.data.bin.StringClassifier',weavejs.data.bin.StringClassifier);
weavejs.data.bin.StringClassifier.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'StringClassifier':{type:'',declaredBy:'weavejs.data.bin.StringClassifier'},'setSessionState':{type:'void',declaredBy:'weavejs.data.bin.StringClassifier'},'contains':{type:'Boolean',declaredBy:'weavejs.data.bin.StringClassifier'}}}}};goog.provide('weavejs.data.bin.DynamicBinningDefinition');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.data.bin.StringClassifier');goog.require('weavejs.api.data.IBinningDefinition');
weavejs.data.bin.DynamicBinningDefinition=function(lockFirstColumn){lockFirstColumn=typeof lockFirstColumn!=='undefined'?lockFirstColumn:false;this.internalResultWatcher=Weave.disposableChild(this,weavejs.core.LinkableWatcher);this.internalObjectWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher,org.apache.flex.utils.Language.closure(this.handleInternalObjectChange,this,'handleInternalObjectChange'));this.columnWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher,org.apache.flex.utils.Language.closure(this.generateBins,
this,'generateBins'));this.statsWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher,org.apache.flex.utils.Language.closure(this.generateBins,this,'generateBins'));this.overrideBinsOutput=Weave.disposableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IBinClassifier));weavejs.data.bin.DynamicBinningDefinition.base(this,'constructor',weavejs.api.data.IBinningDefinition);this.addImmediateCallback(null,org.apache.flex.utils.Language.closure(this.watchInternalObject,this,'watchInternalObject'));
this._columnLocked=lockFirstColumn};goog.inherits(weavejs.data.bin.DynamicBinningDefinition,weavejs.core.LinkableDynamicObject);weavejs.data.bin.DynamicBinningDefinition.prototype._columnLocked=false;weavejs.data.bin.DynamicBinningDefinition.prototype.internalResultWatcher;weavejs.data.bin.DynamicBinningDefinition.prototype.internalObjectWatcher;weavejs.data.bin.DynamicBinningDefinition.prototype.columnWatcher;weavejs.data.bin.DynamicBinningDefinition.prototype.statsWatcher;
weavejs.data.bin.DynamicBinningDefinition.prototype.watchInternalObject=function(){this.internalObjectWatcher.target=this.internalObject};weavejs.data.bin.DynamicBinningDefinition.prototype.handleInternalObjectChange=function(){if(this.internalObject)this.internalResultWatcher.target=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).asyncResultCallbacks;this.generateBins()};weavejs.data.bin.DynamicBinningDefinition.prototype._updatingTargets=false;
weavejs.data.bin.DynamicBinningDefinition.prototype.generateBins=function(){if(this._updatingTargets)return;this._updatingTargets=true;var column=org.apache.flex.utils.Language.as(this.columnWatcher.target,weavejs.api.data.IAttributeColumn);this.statsWatcher.target=column?weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column):null;this._updatingTargets=false;var overrideBins=column?column.getMetadata(weavejs.api.data.ColumnMetadata.OVERRIDE_BINS):null;if(overrideBins&&weavejs.data.bin.DynamicBinningDefinition.getBinsFromJson(overrideBins,
this.overrideBinsOutput,column))this.asyncResultCallbacks.triggerCallbacks();else this.overrideBinsOutput.removeAllObjects();if(this.internalObject&&column)org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).generateBinClassifiersForColumn(column);else this.asyncResultCallbacks.triggerCallbacks()};
weavejs.data.bin.DynamicBinningDefinition.getBinsFromJson=function(json,output,toStringColumn){toStringColumn=typeof toStringColumn!=='undefined'?toStringColumn:null;if(!weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier)weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier=new weavejs.data.bin.NumberClassifier;Weave.getCallbacks(output).delayCallbacks();output.removeAllObjects();var array;try{array=org.apache.flex.utils.Language.as(JSON.parse(json),Array);var foreachiter0_target=
array;for(var foreachiter0 in foreachiter0_target){var item=foreachiter0_target[foreachiter0];var label;if(org.apache.flex.utils.Language.is(item,String)||weavejs.util.StandardLib.getArrayType(org.apache.flex.utils.Language.as(item,Array))==String){label=org.apache.flex.utils.Language.as(org.apache.flex.utils.Language.as(item,Array)||[item],Array).join(', ');var sc=output.requestObject(label,weavejs.data.bin.StringClassifier,false);sc.setSessionState(org.apache.flex.utils.Language.as(item,Array)||
[item])}else{weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.min.value=-Infinity;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.max.value=Infinity;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.minInclusive.value=true;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.maxInclusive.value=true;if(org.apache.flex.utils.Language.is(item,Array)){weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.min.value=item[0];weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.max.value=
item[1]}else if(org.apache.flex.utils.Language.is(item,Number)){weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.min.value=org.apache.flex.utils.Language.as(item,Number);weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.max.value=org.apache.flex.utils.Language.as(item,Number)}else weavejs.WeaveAPI.SessionManager.setSessionState(weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier,item);if(item&&typeof item=='object'&&item['label'])label=item['label'];else label=
weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.generateBinLabel(toStringColumn);output.requestObjectCopy(label,weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier)}}}catch(e){weavejs.util.JS.error('Invalid JSON bin specification: '+json,null,e);Weave.getCallbacks(output).resumeCallbacks();return false}Weave.getCallbacks(output).resumeCallbacks();return true};
weavejs.data.bin.DynamicBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){if(this._columnLocked&&this.columnWatcher.target)throw new Error('generateBinClassifiersForColumn(): Column was locked upon creation of this DynamicBinningDefinition.');this.columnWatcher.target=column};
weavejs.data.bin.DynamicBinningDefinition.prototype.getBinClassifiers=function(){var override=this.overrideBinsOutput.getObjects();if(override.length)return override;if(this.internalObject&&this.columnWatcher.target)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).getBinClassifiers();return[]};
weavejs.data.bin.DynamicBinningDefinition.prototype.getBinNames=function(){var override=this.overrideBinsOutput.getNames();if(override.length)return override;if(this.internalObject&&this.columnWatcher.target)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).getBinNames();return[]};weavejs.data.bin.DynamicBinningDefinition.prototype.overrideBinsOutput;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier;
Object.defineProperties(weavejs.data.bin.DynamicBinningDefinition.prototype,{asyncResultCallbacks:{get:function(){return Weave.getCallbacks(this.internalResultWatcher)}},binsOverridden:{get:function(){return this.overrideBinsOutput.getNames().length>0}}});weavejs.data.bin.DynamicBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicBinningDefinition',qName:'weavejs.data.bin.DynamicBinningDefinition'}],interfaces:[weavejs.api.data.IBinningDefinition]};
goog.exportSymbol('weavejs.data.bin.DynamicBinningDefinition',weavejs.data.bin.DynamicBinningDefinition);
weavejs.data.bin.DynamicBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'asyncResultCallbacks':{type:'ICallbackCollection',declaredBy:'weavejs.data.bin.DynamicBinningDefinition'},'binsOverridden':{type:'Boolean',declaredBy:'weavejs.data.bin.DynamicBinningDefinition'}}},methods:function(){return{'DynamicBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.DynamicBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',
declaredBy:'weavejs.data.bin.DynamicBinningDefinition'},'getBinClassifiers':{type:'Array',declaredBy:'weavejs.data.bin.DynamicBinningDefinition'},'getBinNames':{type:'Array',declaredBy:'weavejs.data.bin.DynamicBinningDefinition'}}}}};goog.provide('weavejs.data.bin.EqualIntervalBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.EqualIntervalBinningDefinition=function(){this.dataInterval=Weave.linkableChild(this,new weavejs.core.LinkableNumber);this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.EqualIntervalBinningDefinition.base(this,'constructor',true,true)};goog.inherits(weavejs.data.bin.EqualIntervalBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.EqualIntervalBinningDefinition.prototype.dataInterval;
weavejs.data.bin.EqualIntervalBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){var name;this.output.removeAllObjects();var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);var dataMin=isFinite(this.overrideInputMin.value)?this.overrideInputMin.value:stats.getMin();var dataMax=isFinite(this.overrideInputMax.value)?this.overrideInputMax.value:stats.getMax();var binMin;var binMax=dataMin;var maxInclusive;var numberOfBins=Math.ceil((dataMax-dataMin)/this.dataInterval.value);
if(!isFinite(numberOfBins))numberOfBins=1;for(var iBin=0;iBin<numberOfBins;iBin++){binMin=binMax;if(iBin==numberOfBins-1){binMax=dataMax;maxInclusive=true}else{maxInclusive=false;binMax=binMin+this.dataInterval.value;binMax=weavejs.util.StandardLib.roundSignificant(binMax,4)}if(iBin>0)binMin=weavejs.util.StandardLib.roundSignificant(binMin,4);if(binMin==binMax&&!maxInclusive)continue;this.tempNumberClassifier.min.value=binMin;this.tempNumberClassifier.max.value=binMax;this.tempNumberClassifier.minInclusive.value=
true;this.tempNumberClassifier.maxInclusive.value=maxInclusive;name=this.getOverrideNames()[iBin];if(!name)name=this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,this.tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.EqualIntervalBinningDefinition.prototype.tempNumberClassifier;weavejs.data.bin.EqualIntervalBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'EqualIntervalBinningDefinition',qName:'weavejs.data.bin.EqualIntervalBinningDefinition'}]};
goog.exportSymbol('weavejs.data.bin.EqualIntervalBinningDefinition',weavejs.data.bin.EqualIntervalBinningDefinition);weavejs.data.bin.EqualIntervalBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'dataInterval':{type:'LinkableNumber'}}},accessors:function(){return{}},methods:function(){return{'EqualIntervalBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.EqualIntervalBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.EqualIntervalBinningDefinition'}}}}};goog.provide('weavejs.data.bin.ExplicitBinningDefinition');goog.require('weavejs.core.LinkableHashMap');goog.require('weavejs.api.data.IBinningDefinition');weavejs.data.bin.ExplicitBinningDefinition=function(){weavejs.data.bin.ExplicitBinningDefinition.base(this,'constructor',weavejs.api.data.IBinClassifier)};goog.inherits(weavejs.data.bin.ExplicitBinningDefinition,weavejs.core.LinkableHashMap);weavejs.data.bin.ExplicitBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){};
weavejs.data.bin.ExplicitBinningDefinition.prototype.getBinClassifiers=function(){return this.getObjects()};weavejs.data.bin.ExplicitBinningDefinition.prototype.getBinNames=function(){return this.getNames()};Object.defineProperties(weavejs.data.bin.ExplicitBinningDefinition.prototype,{asyncResultCallbacks:{get:function(){return this}}});
weavejs.data.bin.ExplicitBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'ExplicitBinningDefinition',qName:'weavejs.data.bin.ExplicitBinningDefinition'}],interfaces:[weavejs.api.data.IBinningDefinition]};goog.exportSymbol('weavejs.data.bin.ExplicitBinningDefinition',weavejs.data.bin.ExplicitBinningDefinition);
weavejs.data.bin.ExplicitBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'asyncResultCallbacks':{type:'ICallbackCollection',declaredBy:'weavejs.data.bin.ExplicitBinningDefinition'}}},methods:function(){return{'ExplicitBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.ExplicitBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.ExplicitBinningDefinition'},'getBinClassifiers':{type:'Array',
declaredBy:'weavejs.data.bin.ExplicitBinningDefinition'},'getBinNames':{type:'Array',declaredBy:'weavejs.data.bin.ExplicitBinningDefinition'}}}}};goog.provide('weavejs.data.bin.NaturalJenksBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');
weavejs.data.bin.NaturalJenksBinningDefinition=function(){this.numOfBins=Weave.linkableChild(this,new weavejs.core.LinkableNumber(5));this._tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);this.asyncSort=Weave.disposableChild(this,weavejs.util.AsyncSort);this._compoundIterateAll=weavejs.core.Scheduler.generateCompoundIterativeTask(org.apache.flex.utils.Language.closure(this._getValueFromKeys,this,'_getValueFromKeys'),org.apache.flex.utils.Language.closure(this._iterateSortedKeys,
this,'_iterateSortedKeys'),org.apache.flex.utils.Language.closure(this._iterateJenksBreaks,this,'_iterateJenksBreaks'));this._keys=[];this._lower_class_limits=[];this._variance_combinations=[];this._previousSortedValues=[];this._sortedValues=[];weavejs.data.bin.NaturalJenksBinningDefinition.base(this,'constructor',true,false)};goog.inherits(weavejs.data.bin.NaturalJenksBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);weavejs.data.bin.NaturalJenksBinningDefinition.prototype.numOfBins;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._tempNumberClassifier;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._column=null;weavejs.data.bin.NaturalJenksBinningDefinition.prototype.asyncSort;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){this._column=column;if(column){var nonWrapperColumn=weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column);if(org.apache.flex.utils.Language.is(nonWrapperColumn,weavejs.data.column.SecondaryKeyNumColumn)){weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=true;var noChange=this._keys===nonWrapperColumn.keys;this._keys=nonWrapperColumn.keys;weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=
false;if(noChange){this.asyncResultCallbacks.triggerCallbacks();return}}else this._keys=column.keys.concat()}else this._keys=[];this._sortedValues=new Array;this._numOfBins=this.numOfBins.value;this._keyCount=0;this._previousSortedValues.length=0;this.output.removeAllObjects();this.asyncSort.beginSort(this._previousSortedValues);this._compoundIterateAll(-1);weavejs.WeaveAPI.Scheduler.startTask(this.asyncResultCallbacks,this._compoundIterateAll,weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this._handleJenksBreaks,
this,'_handleJenksBreaks'),Weave.lang('Computing Natural Breaks binning for {0} values',this._keys.length))};weavejs.data.bin.NaturalJenksBinningDefinition.prototype._compoundIterateAll;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._numOfBins;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._keyCount=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._keys;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._getValueFromKeys=function(stopTime){var currValue;for(;this._keyCount<this._keys.length;this._keyCount++){if(weavejs.util.JS.now()>stopTime)return this._keyCount/this._keys.length;currValue=this._column.getValueFromKey(this._keys[this._keyCount],Number);if(isFinite(currValue))this._sortedValues.push(currValue)}this.asyncSort.beginSort(this._sortedValues,weavejs.util.StandardLib.numericCompare);return 1};weavejs.data.bin.NaturalJenksBinningDefinition.prototype._lower_class_limits;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._variance_combinations;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._iterateSortedKeys=function(returnTime){if(this.asyncSort.result==null)return 0;weavejs.util.ArrayUtils.copy(this._sortedValues,this._previousSortedValues);if(this._sortedValues.length==0)return 1;this._lower_class_limits=[];this._variance_combinations=[];for(var i=0;i<this._sortedValues.length+1;i++){var temp1=[];var temp2=[];for(var j=0;j<this._numOfBins+1;j++){temp1.push(0);temp2.push(0)}this._lower_class_limits.push(temp1);this._variance_combinations.push(temp2)}for(var k=
1;k<this._numOfBins+1;k++){this._lower_class_limits[1][k]=1;this._variance_combinations[1][k]=0;for(var t=2;t<this._sortedValues.length+1;t++)this._variance_combinations[t][k]=Number.POSITIVE_INFINITY}this._variance=0;this._count=2;this._m=0;return 1};weavejs.data.bin.NaturalJenksBinningDefinition.prototype._previousSortedValues;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._sortedValues;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._count=2;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._m=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._p=2;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._variance=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._sum=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._sum_squares=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._w=0;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._iterateJenksBreaks=function(returnTime){for(;this._count<this._sortedValues.length+1;this._count++){if(this._m==0){this._sum=0;this._sum_squares=0;this._w=0;this._m=1}for(;this._m<this._count+1;this._m++){if(weavejs.util.JS.now()>returnTime)return this._count/(this._sortedValues.length+1);var lower_class_limit=this._count-this._m+1;var val=this._sortedValues[lower_class_limit-1];this._sum_squares+=val*val;this._sum+=val;this._w+=1;this._variance=
this._sum_squares-this._sum*this._sum/this._w;var i4=lower_class_limit-1;if(i4!=0){this._p=2;for(;this._p<this._numOfBins+1;this._p++)if(this._variance_combinations[this._count][this._p]>=this._variance+this._variance_combinations[i4][this._p-1]){this._lower_class_limits[this._count][this._p]=lower_class_limit;this._variance_combinations[this._count][this._p]=this._variance+this._variance_combinations[i4][this._p-1]}}}this._m=0;this._lower_class_limits[this._count][1]=1;this._variance_combinations[this._count][1]=
this._variance}return 1};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._handleJenksBreaks=function(){var k,value,data=this._sortedValues,kclass=[],countNum=1;value=data[0];for(k=1;k<data.length;k++)if(value!=data[k]){value=data[k];countNum++;if(countNum>=this._numOfBins)break}kclass[countNum]=data[data.length-1];kclass[0]=data[0];k=data.length-1;while(countNum>1){kclass[countNum-1]=data[this._lower_class_limits[k][countNum]-2];k=this._lower_class_limits[k][countNum]-1;countNum--}for(var iBin=0;iBin<kclass.length-
1;iBin++){var minIndex;if(iBin==0)minIndex=0;else{minIndex=this._previousSortedValues.lastIndexOf(kclass[iBin]);minIndex=minIndex+1}this._tempNumberClassifier.min.value=this._previousSortedValues[minIndex];var maxIndex;if(iBin==this._numOfBins-1)maxIndex=this._previousSortedValues.length-1;else maxIndex=this._previousSortedValues.lastIndexOf(kclass[iBin+1]);if(maxIndex==-1)this._tempNumberClassifier.max.value=this._tempNumberClassifier.min.value;else this._tempNumberClassifier.max.value=this._previousSortedValues[maxIndex];
this._tempNumberClassifier.minInclusive.value=true;this._tempNumberClassifier.maxInclusive.value=true;if(this._tempNumberClassifier.min.value>this._tempNumberClassifier.max.value)continue;var name=this.getOverrideNames()[iBin];if(!name)name=this._tempNumberClassifier.generateBinLabel(this._column);this.output.requestObjectCopy(name,this._tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.fixMinMaxInclusive=function(){var a=this.output.getObjects(weavejs.data.bin.NumberClassifier);for(var i=0;i<a.length;i++){var nc1=a[i];var nc2=a[i+1];if(nc1&&nc2&&nc1.max.value==nc2.min.value)nc2.minInclusive.value=!(nc1.maxInclusive.value=nc1.min.value==nc1.max.value||!nc1.minInclusive.value);var newName1=this.getOverrideNames()[i]||nc1.generateBinLabel(this._column);this.output.renameObject(this.output.getName(nc1),newName1)}};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.getSumOfNumbers=function(list){var result=0;try{var foreachiter0_target=list;for(var foreachiter0 in foreachiter0_target){var num=foreachiter0_target[foreachiter0];result+=num}}catch(e){weavejs.util.JS.error(e,'Error adding numbers in array');return 0}return result};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.getSortedNumbersFromColumn=function(column){var keys=column?column.keys:[];var sortedColumn=new Array(keys.length);for(var i=0;i<keys.length;i++)sortedColumn[i]=Number(column.getValueFromKey(keys[i],Number));weavejs.util.AsyncSort.sortImmediately(sortedColumn);return sortedColumn};weavejs.data.bin.NaturalJenksBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'NaturalJenksBinningDefinition',qName:'weavejs.data.bin.NaturalJenksBinningDefinition'}]};
goog.exportSymbol('weavejs.data.bin.NaturalJenksBinningDefinition',weavejs.data.bin.NaturalJenksBinningDefinition);weavejs.data.bin.NaturalJenksBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'numOfBins':{type:'LinkableNumber'}}},accessors:function(){return{}},methods:function(){return{'NaturalJenksBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.NaturalJenksBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.NaturalJenksBinningDefinition'}}}}};goog.provide('weavejs.data.bin.QuantileBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.QuantileBinningDefinition=function(){this.refQuantile=Weave.linkableChild(this,new weavejs.core.LinkableNumber(.3));this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.QuantileBinningDefinition.base(this,'constructor',true,false)};goog.inherits(weavejs.data.bin.QuantileBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.QuantileBinningDefinition.prototype.refQuantile;
weavejs.data.bin.QuantileBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){var name;this.output.removeAllObjects();var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);var sortedColumn=this.getSortedColumn(column);var binMin;var binMax=sortedColumn[0];var maxInclusive;var recordCount=stats.getCount();var refBinSize=Math.ceil(recordCount*this.refQuantile.value);if(!refBinSize)refBinSize=recordCount;var numberOfBins=Math.ceil(recordCount/refBinSize);var binRecordCount=
refBinSize;for(var iBin=0;iBin<numberOfBins;iBin++){binRecordCount=(iBin+1)*refBinSize;binMin=binMax;if(iBin==numberOfBins-1){binMax=sortedColumn[sortedColumn.length-1];maxInclusive=true}else{binMax=sortedColumn[binRecordCount-1];maxInclusive=binMax==binMin}this.tempNumberClassifier.min.value=binMin;this.tempNumberClassifier.max.value=binMax;this.tempNumberClassifier.minInclusive.value=true;this.tempNumberClassifier.maxInclusive.value=maxInclusive;name=this.getOverrideNames()[iBin];if(!name)name=
this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,this.tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.QuantileBinningDefinition.prototype.tempNumberClassifier;
weavejs.data.bin.QuantileBinningDefinition.prototype.getSortedColumn=function(column){var keys=column?column.keys:[];var _sortedColumn=new Array(keys.length);var i=0;var foreachiter0_target=keys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];var n=column.getValueFromKey(key,Number);if(isFinite(n))_sortedColumn[i++]=n}_sortedColumn.length=i;weavejs.util.AsyncSort.sortImmediately(_sortedColumn);return _sortedColumn};
weavejs.data.bin.QuantileBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'QuantileBinningDefinition',qName:'weavejs.data.bin.QuantileBinningDefinition'}]};goog.exportSymbol('weavejs.data.bin.QuantileBinningDefinition',weavejs.data.bin.QuantileBinningDefinition);
weavejs.data.bin.QuantileBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'refQuantile':{type:'LinkableNumber'}}},accessors:function(){return{}},methods:function(){return{'QuantileBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.QuantileBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.QuantileBinningDefinition'}}}}};goog.provide('weavejs.data.bin.SimpleBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.SimpleBinningDefinition=function(){this.numberOfBins=Weave.linkableChild(this,new weavejs.core.LinkableNumber(5));this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.SimpleBinningDefinition.base(this,'constructor',true,true)};goog.inherits(weavejs.data.bin.SimpleBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.SimpleBinningDefinition.prototype.numberOfBins;
weavejs.data.bin.SimpleBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){var name;this.output.removeAllObjects();var integerValuesOnly=false;var nonWrapperColumn=weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column);if(nonWrapperColumn){var dataType=nonWrapperColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);if(dataType&&dataType!=weavejs.api.data.DataType.NUMBER)integerValuesOnly=true}var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);
var dataMin=isFinite(this.overrideInputMin.value)?this.overrideInputMin.value:stats.getMin();var dataMax=isFinite(this.overrideInputMax.value)?this.overrideInputMax.value:stats.getMax();if(isNaN(dataMin)){this.asyncResultCallbacks.triggerCallbacks();return}var binMin;var binMax=dataMin;var maxInclusive;for(var iBin=0;iBin<this.numberOfBins.value;iBin++){if(integerValuesOnly){maxInclusive=true;if(iBin==0)binMin=dataMin;else binMin=binMax+1;if(iBin==this.numberOfBins.value-1)binMax=dataMax;else binMax=
Math.floor(dataMin+(iBin+1)*(dataMax-dataMin)/this.numberOfBins.value);if(binMin>binMax)continue}else{binMin=binMax;if(iBin==this.numberOfBins.value-1){binMax=dataMax;maxInclusive=true}else{maxInclusive=false;binMax=dataMin+(iBin+1)*(dataMax-dataMin)/this.numberOfBins.value;binMax=weavejs.util.StandardLib.roundSignificant(binMax,4)}if(iBin>0)binMin=weavejs.util.StandardLib.roundSignificant(binMin,4);if(binMin==binMax&&!maxInclusive)continue}this.tempNumberClassifier.min.value=binMin;this.tempNumberClassifier.max.value=
binMax;this.tempNumberClassifier.minInclusive.value=true;this.tempNumberClassifier.maxInclusive.value=maxInclusive;name=this.getOverrideNames()[iBin];if(!name)name=this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,this.tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.SimpleBinningDefinition.prototype.tempNumberClassifier;
weavejs.data.bin.SimpleBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'SimpleBinningDefinition',qName:'weavejs.data.bin.SimpleBinningDefinition'}]};goog.exportSymbol('weavejs.data.bin.SimpleBinningDefinition',weavejs.data.bin.SimpleBinningDefinition);
weavejs.data.bin.SimpleBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'numberOfBins':{type:'LinkableNumber'}}},accessors:function(){return{}},methods:function(){return{'SimpleBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.SimpleBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.SimpleBinningDefinition'}}}}};goog.provide('weavejs.data.bin.StandardDeviationBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.StandardDeviationBinningDefinition=function(){weavejs.data.bin.StandardDeviationBinningDefinition.base(this,'constructor',true,false)};goog.inherits(weavejs.data.bin.StandardDeviationBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.StandardDeviationBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){this.output.removeAllObjects();var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);var mean=stats.getMean();var stdDev=stats.getStandardDeviation();var binNumber=0;for(var i=-weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD;i<=weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD;i++)if(i!=0)this.addBin(this.output,Math.abs(i),i<0,stdDev,mean,this.getOverrideNames()[binNumber++]);
this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD=3;
weavejs.data.bin.StandardDeviationBinningDefinition.prototype.addBin=function(output,absSDNumber,belowMean,stdDev,mean,overrideName){var name=overrideName;if(!name){var nameFormat=absSDNumber<weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD?'{0} - {1} SD {2} mean':'\x3e {0} SD {2} mean';name=weavejs.util.StandardLib.substitute(nameFormat,absSDNumber-1,absSDNumber,belowMean?'below':'above')}var bin=output.requestObject(name,weavejs.data.bin.NumberClassifier,false);if(belowMean){if(absSDNumber==
weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD)bin.min.value=-Infinity;else bin.min.value=mean-absSDNumber*stdDev;bin.max.value=mean-(absSDNumber-1)*stdDev}else{bin.min.value=mean+(absSDNumber-1)*stdDev;if(absSDNumber==weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD)bin.max.value=Infinity;else bin.max.value=mean+absSDNumber*stdDev}bin.minInclusive.value=true;bin.maxInclusive.value=true};
weavejs.data.bin.StandardDeviationBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'StandardDeviationBinningDefinition',qName:'weavejs.data.bin.StandardDeviationBinningDefinition'}]};goog.exportSymbol('weavejs.data.bin.StandardDeviationBinningDefinition',weavejs.data.bin.StandardDeviationBinningDefinition);
weavejs.data.bin.StandardDeviationBinningDefinition.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'StandardDeviationBinningDefinition':{type:'',declaredBy:'weavejs.data.bin.StandardDeviationBinningDefinition'},'generateBinClassifiersForColumn':{type:'void',declaredBy:'weavejs.data.bin.StandardDeviationBinningDefinition'}}}}};goog.provide('weavejs.data.column.AlwaysDefinedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');
weavejs.data.column.AlwaysDefinedColumn=function(defaultValue,defaultValueVerifier){defaultValue=typeof defaultValue!=='undefined'?defaultValue:undefined;defaultValueVerifier=typeof defaultValueVerifier!=='undefined'?defaultValueVerifier:null;this.d2d_type_key=new weavejs.util.Dictionary2D(true,true);weavejs.data.column.AlwaysDefinedColumn.base(this,'constructor');this._defaultValue=new weavejs.core.LinkableVariable(null,defaultValueVerifier,defaultValue);Weave.linkableChild(this,this._defaultValue,
org.apache.flex.utils.Language.closure(this.handleDefaultValueChange,this,'handleDefaultValueChange'))};goog.inherits(weavejs.data.column.AlwaysDefinedColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.AlwaysDefinedColumn.prototype.containsKey=function(key){return true};weavejs.data.column.AlwaysDefinedColumn.prototype._defaultValue;weavejs.data.column.AlwaysDefinedColumn.prototype.handleDefaultValueChange=function(){this._cachedDefaultValue=this.defaultValue.state};weavejs.data.column.AlwaysDefinedColumn.prototype._cachedDefaultValue;
weavejs.data.column.AlwaysDefinedColumn.prototype.d2d_type_key;weavejs.data.column.AlwaysDefinedColumn.prototype._cacheCounter=0;weavejs.data.column.AlwaysDefinedColumn.UNDEFINED={};
weavejs.data.column.AlwaysDefinedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(!dataType)dataType=Array;if(!weavejs.data.column.DynamicColumn.cache){var value=this.internalDynamicColumn.getValueFromKey(key,dataType);if(weavejs.util.StandardLib.isUndefined(value,true))value=weavejs.data.EquationColumnLib.cast(this._cachedDefaultValue,dataType);return value}if(this.triggerCounter!=this._cacheCounter){this._cacheCounter=this.triggerCounter;
this.d2d_type_key=new weavejs.util.Dictionary2D(true,true)}value=this.d2d_type_key.get(dataType,key);if(value===undefined){value=this.internalDynamicColumn.getValueFromKey(key,dataType);if(weavejs.util.StandardLib.isUndefined(value,true))value=weavejs.data.EquationColumnLib.cast(this._cachedDefaultValue,dataType);this.d2d_type_key.set(dataType,key,value===undefined?weavejs.data.column.AlwaysDefinedColumn.UNDEFINED:value)}return value===weavejs.data.column.AlwaysDefinedColumn.UNDEFINED?undefined:value};
Object.defineProperties(weavejs.data.column.AlwaysDefinedColumn.prototype,{defaultValue:{get:function(){return this._defaultValue}}});weavejs.data.column.AlwaysDefinedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'AlwaysDefinedColumn',qName:'weavejs.data.column.AlwaysDefinedColumn'}]};goog.exportSymbol('weavejs.data.column.AlwaysDefinedColumn',weavejs.data.column.AlwaysDefinedColumn);
weavejs.data.column.AlwaysDefinedColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'defaultValue':{type:'LinkableVariable',declaredBy:'weavejs.data.column.AlwaysDefinedColumn'}}},methods:function(){return{'AlwaysDefinedColumn':{type:'',declaredBy:'weavejs.data.column.AlwaysDefinedColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.AlwaysDefinedColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.AlwaysDefinedColumn'}}}}};goog.provide('weavejs.data.column.BinnedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.BinnedColumn=function(){this.binningDefinition=Weave.linkableChild(this,new weavejs.data.bin.DynamicBinningDefinition(true));this._binNames=[];this._binClassifiers=[];this.map_key_binIndex=new weavejs.util.JS.Map;this._binnedKeysArray=[];this._binnedKeysMap={};weavejs.data.column.BinnedColumn.base(this,'constructor');this.binningDefinition.requestLocalObject(weavejs.data.bin.SimpleBinningDefinition,false);this.binningDefinition.generateBinClassifiersForColumn(this.internalDynamicColumn);
Weave.linkableChild(this,this.binningDefinition.asyncResultCallbacks)};goog.inherits(weavejs.data.column.BinnedColumn,weavejs.data.column.ExtendedDynamicColumn);
weavejs.data.column.BinnedColumn.prototype.getMetadata=function(propertyName){this.validateBins();if(this._binClassifiers&&this._binClassifiers.length)switch(propertyName){case weavejs.api.data.ColumnMetadata.MIN:return this.numberOfBins>0?'0':null;case weavejs.api.data.ColumnMetadata.MAX:var binCount=this.numberOfBins;return binCount>0?String(binCount-1):null}return weavejs.data.column.BinnedColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.BinnedColumn.prototype.binningDefinition;
weavejs.data.column.BinnedColumn.prototype._binNames;weavejs.data.column.BinnedColumn.prototype._binClassifiers;weavejs.data.column.BinnedColumn.prototype.map_key_binIndex;weavejs.data.column.BinnedColumn.prototype._binnedKeysArray;weavejs.data.column.BinnedColumn.prototype._binnedKeysMap;weavejs.data.column.BinnedColumn.prototype._largestBinSize=0;weavejs.data.column.BinnedColumn.prototype._resultTriggerCount=0;
weavejs.data.column.BinnedColumn.prototype.validateBins=function(){if(this._resultTriggerCount!=this.binningDefinition.asyncResultCallbacks.triggerCounter){if(weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(this))return;this._resultTriggerCount=this.binningDefinition.asyncResultCallbacks.triggerCounter;this._column=this.internalDynamicColumn.getInternalColumn();this.map_key_binIndex=new weavejs.util.JS.Map;this._binnedKeysArray=[];this._binnedKeysMap={};this._largestBinSize=0;this._binNames=
this.binningDefinition.getBinNames();this._binClassifiers=this.binningDefinition.getBinClassifiers();if(this._binNames)for(var i=0;i<this._binNames.length;i++)this._binnedKeysMap[this._binNames[i]]=this._binnedKeysArray[i]=[];this._keys=this.internalDynamicColumn.keys;this._i=0;if(weavejs.util.StandardLib.getArrayType(this._binClassifiers)==weavejs.data.bin.NumberClassifier)this._dataType=Number;else this._dataType=String;if(this._column&&this._binClassifiers)weavejs.WeaveAPI.Scheduler.startTask(this,
org.apache.flex.utils.Language.closure(this._asyncIterate,this,'_asyncIterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'),Weave.lang('Binning {0} records',this._keys.length))}};weavejs.data.column.BinnedColumn.prototype._dataType;weavejs.data.column.BinnedColumn.prototype._column;weavejs.data.column.BinnedColumn.prototype._i;weavejs.data.column.BinnedColumn.prototype._keys;
weavejs.data.column.BinnedColumn.prototype._asyncIterate=function(stopTime){if(this._resultTriggerCount!=this.binningDefinition.asyncResultCallbacks.triggerCounter)return 1;for(;this._i<this._keys.length;this._i++){if(weavejs.util.JS.now()>stopTime)return this._i/this._keys.length;var key=this._keys[this._i];var value=this._column.getValueFromKey(key,this._dataType);var binIndex=0;for(;binIndex<this._binClassifiers.length;binIndex++)if(org.apache.flex.utils.Language.as(this._binClassifiers[binIndex],
weavejs.api.data.IBinClassifier).contains(value)){this.map_key_binIndex.set(key,binIndex);var array=org.apache.flex.utils.Language.as(this._binnedKeysArray[binIndex],Array);if(array.push(key)>this._largestBinSize)this._largestBinSize=array.length;break}}return 1};weavejs.data.column.BinnedColumn.prototype.getKeysFromBinIndex=function(binIndex){this.validateBins();if(binIndex<this._binnedKeysArray.length)return this._binnedKeysArray[binIndex];return null};
weavejs.data.column.BinnedColumn.prototype.getKeysFromBinName=function(binName){this.validateBins();return org.apache.flex.utils.Language.as(this._binnedKeysMap[binName],Array)};weavejs.data.column.BinnedColumn.prototype.getBinIndexFromDataValue=function(value){this.validateBins();if(this._binClassifiers)for(var i=0;i<this._binClassifiers.length;i++)if(org.apache.flex.utils.Language.as(this._binClassifiers[i],weavejs.api.data.IBinClassifier).contains(value))return i;return NaN};
weavejs.data.column.BinnedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;this.validateBins();if(!this._binClassifiers||!this._binClassifiers.length)return weavejs.data.column.BinnedColumn.base(this,'getValueFromKey',key,dataType);var binIndex=Number(this.map_key_binIndex.get(key));if(dataType==Number)return binIndex;if(dataType==String)return isNaN(binIndex)?'':this._binNames[binIndex];if(isNaN(binIndex))return undefined;if(dataType==Array)return org.apache.flex.utils.Language.as(this._binnedKeysArray[binIndex],
Array);return this._binClassifiers&&this._binClassifiers[binIndex]};weavejs.data.column.BinnedColumn.prototype.deriveStringFromNumber=function(value){this.validateBins();if(!this._binClassifiers||!this._binClassifiers.length)return weavejs.data.ColumnUtils.deriveStringFromNumber(this.internalDynamicColumn,value);try{return this._binNames[value]}catch(e){}return''};
Object.defineProperties(weavejs.data.column.BinnedColumn.prototype,{numberOfBins:{get:function(){this.validateBins();return this._binNames.length}},largestBinSize:{get:function(){this.validateBins();return this._largestBinSize}}});weavejs.data.column.BinnedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'BinnedColumn',qName:'weavejs.data.column.BinnedColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};goog.exportSymbol('weavejs.data.column.BinnedColumn',weavejs.data.column.BinnedColumn);
weavejs.data.column.BinnedColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'binningDefinition':{type:'DynamicBinningDefinition'}}},accessors:function(){return{'numberOfBins':{type:'uint',declaredBy:'weavejs.data.column.BinnedColumn'},'largestBinSize':{type:'uint',declaredBy:'weavejs.data.column.BinnedColumn'}}},methods:function(){return{'BinnedColumn':{type:'',declaredBy:'weavejs.data.column.BinnedColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.BinnedColumn'},
'getKeysFromBinIndex':{type:'Array',declaredBy:'weavejs.data.column.BinnedColumn'},'getKeysFromBinName':{type:'Array',declaredBy:'weavejs.data.column.BinnedColumn'},'getBinIndexFromDataValue':{type:'Number',declaredBy:'weavejs.data.column.BinnedColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.BinnedColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.column.BinnedColumn'}}}}};goog.provide('weavejs.util.ColorNode');weavejs.util.ColorNode=function(position,color){this.position=position;this.color=color};weavejs.util.ColorNode.prototype.position;weavejs.util.ColorNode.prototype.color;weavejs.util.ColorNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColorNode',qName:'weavejs.util.ColorNode'}]};goog.exportSymbol('weavejs.util.ColorNode',weavejs.util.ColorNode);
weavejs.util.ColorNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'position':{type:'Number'},'color':{type:'Number'}}},accessors:function(){return{}},methods:function(){return{'ColorNode':{type:'',declaredBy:'weavejs.util.ColorNode'}}}}};goog.provide('weavejs.util.ColorRamp');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.util.ColorNode');weavejs.util.ColorRamp=function(sessionState){sessionState=typeof sessionState!=='undefined'?sessionState:null;this._colorNodes=[];weavejs.util.ColorRamp.base(this,'constructor',null,org.apache.flex.utils.Language.closure(this.verifyState,this,'verifyState'),sessionState||weavejs.util.ColorRamp.getColorRampByName('Blues').colors)};goog.inherits(weavejs.util.ColorRamp,weavejs.core.LinkableVariable);
weavejs.util.ColorRamp.COLOR='color';weavejs.util.ColorRamp.POSITION='position';
weavejs.util.ColorRamp.prototype.verifyState=function(state){if(org.apache.flex.utils.Language.is(state,String)){var reversed=false;var colors=weavejs.WeaveAPI.CSVParser.parseCSVRow(org.apache.flex.utils.Language.as(state,String));if(reversed)colors.reverse();this.setSessionState(colors);return false}var type=weavejs.util.StandardLib.getArrayType(org.apache.flex.utils.Language.as(state,Array));if(type==Number){var array=[];var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){var number=
foreachiter0_target[foreachiter0];array.push('0x'+weavejs.util.StandardLib.numberToBase(number,16,6).toUpperCase())}this.setSessionState(array);return false}return type==String||type==Object||org.apache.flex.utils.Language.is(state,Array)&&!state.length};weavejs.util.ColorRamp.prototype._validateTriggerCount=0;
weavejs.util.ColorRamp.prototype.validate=function(){if(this._validateTriggerCount==this.triggerCounter)return;this._validateTriggerCount=this.triggerCounter;this._colorNodes=[];var foreachiter1_target=this.getSessionState();for(var foreachiter1 in foreachiter1_target){var item=foreachiter1_target[foreachiter1];if(typeof item=='object')this._colorNodes.push(new weavejs.util.ColorNode(item[weavejs.util.ColorRamp.POSITION],item[weavejs.util.ColorRamp.COLOR]));else this._colorNodes.push(new weavejs.util.ColorNode(this._colorNodes.length,
weavejs.util.StandardLib.asNumber(item)))}var positions=weavejs.util.ArrayUtils.pluck(this._colorNodes,weavejs.util.ColorRamp.POSITION);var minPos=Math.min.apply(null,positions);var maxPos=Math.max.apply(null,positions);var foreachiter2_target=this._colorNodes;for(var foreachiter2 in foreachiter2_target){var node=foreachiter2_target[foreachiter2];node.position=weavejs.util.StandardLib.normalize(node.position,minPos,maxPos)}weavejs.util.StandardLib.sortOn(this._colorNodes,'position')};
weavejs.util.ColorRamp.prototype.reverse=function(){var array=org.apache.flex.utils.Language.as(this.getSessionState(),Array);if(array)this.setSessionState(array.reverse())};weavejs.util.ColorRamp.prototype._colorNodes;weavejs.util.ColorRamp.prototype.getColors=function(){this.validate();var colors=[];for(var i=0;i<this._colorNodes.length;i++)colors.push(org.apache.flex.utils.Language.as(this._colorNodes[i],weavejs.util.ColorNode).color);return colors};
weavejs.util.ColorRamp.prototype.getHexColors=function(){var colors=this.getColors();for(var i=0;i<colors.length;i++)colors[i]=weavejs.util.StandardLib.getHexColor(colors[i]);return colors};
weavejs.util.ColorRamp.prototype.getColorFromNorm=function(normValue){this.validate();if(isNaN(normValue)||normValue<0||normValue>1||this._colorNodes.length==0)return NaN;var rightIndex=0;while(rightIndex<this._colorNodes.length&&normValue>=org.apache.flex.utils.Language.as(this._colorNodes[rightIndex],weavejs.util.ColorNode).position)rightIndex++;var leftIndex=Math.max(0,rightIndex-1);var leftNode=org.apache.flex.utils.Language.as(this._colorNodes[leftIndex],weavejs.util.ColorNode);var rightNode=
org.apache.flex.utils.Language.as(this._colorNodes[rightIndex],weavejs.util.ColorNode);if(rightIndex==0)return rightNode.color;if(rightIndex==this._colorNodes.length)return leftNode.color;var interpolationValue=(normValue-leftNode.position)/(rightNode.position-leftNode.position);return weavejs.util.StandardLib.interpolateColor(interpolationValue,leftNode.color,rightNode.color)};
weavejs.util.ColorRamp.prototype.getColor=function(value,min,max){min=typeof min!=='undefined'?min:0;max=typeof max!=='undefined'?max:1;var normValue=min==0&&max==1?value:weavejs.util.StandardLib.normalize(value,min,max);return this.getColorFromNorm(normValue)};
weavejs.util.ColorRamp.prototype.getHexColor=function(value,min,max){min=typeof min!=='undefined'?min:0;max=typeof max!=='undefined'?max:1;var normValue=min==0&&max==1?value:weavejs.util.StandardLib.normalize(value,min,max);var color=this.getColorFromNorm(normValue);if(!isFinite(color))return null;return'#'+weavejs.util.StandardLib.numberToBase(color,16,6)};
weavejs.util.ColorRamp.getColorRampByName=function(rampName){var foreachiter3_target=weavejs.util.ColorRamp.allColorRamps;for(var foreachiter3 in foreachiter3_target){var ramp=foreachiter3_target[foreachiter3];if(ramp.name===rampName)return ramp}return null};
weavejs.util.ColorRamp.findMatchingColorRamp=function(ramp){var colors=ramp.getColors();var foreachiter4_target=weavejs.util.ColorRamp.allColorRamps;for(var foreachiter4 in foreachiter4_target){var obj=foreachiter4_target[foreachiter4];if(weavejs.util.StandardLib.compare(obj.colors,colors)==0)return obj}return null};
weavejs.util.ColorRamp.allColorRamps=[{name:'Campfire',tags:'OIC,aesthetic',colors:[6684672,16711680,16776960]},{name:'Pink Rose',tags:'OIC,aesthetic',colors:[16762874,16384148,6684774]},{name:'Linear Gray',tags:'OIC,visualization,colorblind-safe,single-hue',colors:[0,16777215]},{name:'Blue Green Red',tags:'OIC,visualization',colors:[255,65280,16711680]},{name:'Red Scale',tags:'OIC,visualization,single-hue',colors:[0,16711680,16764108]},{name:'Blue To Cyan',tags:'OIC,visualization',colors:[0,47094,
771327,6881279,16777215]},{name:'Blue To Yellow',tags:'OIC,visualization',colors:[255,16776960]},{name:'Heated',tags:'OIC,visualization,single-hue',colors:[1245184,6362369,11692801,15765550,16497670,16711422]},{name:'MCH - Brown',tags:'OIC,visualization,single-hue',colors:[6362369,11692801,15765550,16497670]},{name:'Jet',tags:'OIC,visualization,qualitative',colors:[134,255,65535,16776960,16711680,8781824]},{name:'Linearized Optimal',tags:'OIC,visualization',colors:[0,8847360,8912384,8912895,16777215]},
{name:'Rainbow',tags:'OIC,visualization',colors:[0,4653143,1525135,6275142,10537036,16757646,16777215]},{name:'Traffic Light',tags:'OIC,basic',colors:[65280,16776960,16711680]},{name:'Arizona Skyline',tags:'OIC,aesthetic',colors:[5669817,16773281,14719259,12727808,5255168]},{name:'Watermelon',tags:'OIC,aesthetic',colors:[4086547,6402317,13421830,16748424,6488064]},{name:'Thunderstorm',tags:'OIC,aesthetic',colors:[5789236,4686261,7322367,16776960]},{name:'Old Leather',tags:'OIC,aesthetic',colors:[4211488,
7427342,9004849,14537216,6068154,6068154]},{name:'Autumn',tags:'OIC,aesthetic',colors:[1703936,7416576,16760712,16739072,16384E3]},{name:'Eggplant',tags:'OIC,aesthetic',colors:[262153,5111925,8257701,14853392,16777113]},{name:'Antique Flag',tags:'OIC,aesthetic',colors:[1133384,45047,14416367,11253865,16711680]},{name:'Agate',tags:'OIC,aesthetic',colors:[7228760,9542054,16768183,16677405,13303808]},{name:'Bee',tags:'OIC,aesthetic,single-hue',colors:[0,16776960]},{name:'Ornamental Cabbage',tags:'OIC,aesthetic',
colors:[4074084,6404114,12896075,13419931,11810682,11810682]},{name:'Neon',tags:'OIC,aesthetic',colors:[3360819,14113679,16711808,16776960,53504]},{name:'High Desert',tags:'OIC,aesthetic',colors:[11825222,7496042,13748168,16777215,10414]},{name:'Vermilion Cliffs',tags:'OIC,aesthetic',colors:[6558464,13837568,16741632,16763517,210,210]},{name:'Papaya',tags:'OIC,aesthetic',colors:[1055745,4163409,3697664,16621056,15663104]},{name:'Van Gogh',tags:'OIC,aesthetic',colors:[3227994,6331853,16776960,15315968,
12463616]},{name:'Outer Banks',tags:'OIC,aesthetic',colors:[6770488,14035456,16231680,16444091,38596]},{name:'Desert Sands',tags:'OIC,aesthetic',colors:[16311144,13548032,8481536,11884544,5513216,2367488]},{name:'Moonlight',tags:'OIC,aesthetic',colors:[263429,3552821,656680,13758692,14468096,14468096]},{name:'Twilight',tags:'OIC,aesthetic',colors:[3089697,13151486,16777215,15007488]},{name:'Rosebud',tags:'OIC,aesthetic',colors:[6904142,11382600,16707838,15925387,13434910]},{name:'Morning Glory',tags:'OIC,aesthetic',
colors:[5834323,16761343,16776960,6095103,3932377]},{name:'Cloudy Night',tags:'OIC,aesthetic',colors:[459793,6763438,16777215,16739840]},{name:'Vintage Map',tags:'OIC,aesthetic',colors:[16447974,16512626,16767391,11846482,9627082,16620971]},{name:'Doppler Radar',tags:'OIC,aesthetic,qualitative',colors:[322023,40436,131572,130049,50176,35840,16644097,16355840,16580608,12320768,16253181,9983174]},{name:'Bu Gn',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[15595771,11723490,6734500,2925151,
27948]},{name:'Bu Pu',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[15595771,11783651,9213638,8935079,8458108]},{name:'Gn Bu',tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[15792616,12248252,8113348,4432586,551084]},{name:'Or Rd',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16707801,16632970,16551257,14895667,11730944]},{name:'Pu Bu',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[15855350,12437985,7645647,2854078,285325]},{name:'Pu Bu Gn',
tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16183287,12437985,6793679,1872025,93273]},{name:'Pu Rd',tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[15855350,14136792,14640560,14490743,9961539]},{name:'Rd Pu',tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[16706530,16495801,16214177,12917642,7995767]},{name:'Yl Gn',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16777164,12773017,7915129,3253076,26679]},{name:'Yl Gn Bu',
tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[16777164,10607284,4306628,2916280,2438292]},{name:'Yl Or Br',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16777172,16701838,16685353,14245646,10040324]},{name:'Yl Or Rd',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16777138,16698460,16616764,15743776,12386342]},{name:'Blues',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[15725567,12441575,7057110,3244733,545180]},{name:'Greens',
tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[15595753,12248243,7652470,3253076,27948]},{name:'Greys',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[16250871,13421772,9868950,6513507,2434341]},{name:'Oranges',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[16707038,16629381,16616764,15095053,10892803]},{name:'Purples',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[15921399,13355490,10394312,7695281,5515151]},
{name:'Reds',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[16704985,16559761,16476746,14560550,10817301]},{name:'Br BG',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[10903834,14664317,16119285,8441281,99697]},{name:'Pi YG',tags:'ColorBrewer,basic,diverging,colorblind-safe',colors:[13638795,15840986,16250871,12116358,5090342]},{name:'PR Gn',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[8073876,12756431,16250871,10935200,
34871]},{name:'Pu Or',tags:'ColorBrewer,basic,diverging,colorblind-safe',colors:[15098113,16627811,16250871,11709394,6175897]},{name:'Rd Bu',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[13238304,16033154,16250871,9618910,356784]},{name:'Rd Gy',tags:'ColorBrewer,basic,diverging,printer-friendly',colors:[13238304,16033154,16777215,12237498,4210752]},{name:'Rd Yl Bu',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[14096668,16625249,16777151,
11262441,2915254]},{name:'Rd Yl Gn',tags:'ColorBrewer,basic,diverging,printer-friendly',colors:[14096668,16625249,16777151,10934634,1742401]},{name:'Spectral',tags:'ColorBrewer,basic,diverging,printer-friendly,photocopy-friendly',colors:[14096668,16625249,16777151,11263396,2851770]},{name:'Accent',tags:'ColorBrewer,basic,qualitative',colors:[8374655,12496596,16629894,16777113,3697840,15729279,12540695,6710886]},{name:'Dark2',tags:'ColorBrewer,basic,qualitative,printer-friendly',colors:[1810039,14245634,
7696563,15149450,6727198,15117058,10909213,6710886]},{name:'Paired',tags:'ColorBrewer,basic,qualitative',colors:[10931939,2062516,11722634,3383340,16489113,14883356,16629615,16744192]},{name:'Pastel 1',tags:'ColorBrewer,basic,qualitative',colors:[16495790,11783651,13429701,14601188,16701862,16777164,15063229,16636652]},{name:'Pastel 2',tags:'ColorBrewer,basic,qualitative',colors:[11789005,16633260,13358568,16042724,15136201,16773806,15852236,13421772]},{name:'Set 1',tags:'ColorBrewer,basic,qualitative,printer-friendly',
colors:[14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607]},{name:'Set 2',tags:'ColorBrewer,basic,qualitative',colors:[6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947]},{name:'Set 3',tags:'ColorBrewer,basic,qualitative,printer-friendly',colors:[9294791,16777139,12499674,16482418,8434131,16626786,11787881,16567781]}];weavejs.util.ColorRamp.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColorRamp',qName:'weavejs.util.ColorRamp'}]};
goog.exportSymbol('weavejs.util.ColorRamp',weavejs.util.ColorRamp);
weavejs.util.ColorRamp.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'ColorRamp':{type:'',declaredBy:'weavejs.util.ColorRamp'},'reverse':{type:'void',declaredBy:'weavejs.util.ColorRamp'},'getColors':{type:'Array',declaredBy:'weavejs.util.ColorRamp'},'getHexColors':{type:'Array',declaredBy:'weavejs.util.ColorRamp'},'getColorFromNorm':{type:'Number',declaredBy:'weavejs.util.ColorRamp'},'getColor':{type:'Number',
declaredBy:'weavejs.util.ColorRamp'},'getHexColor':{type:'String',declaredBy:'weavejs.util.ColorRamp'}}}}};goog.provide('weavejs.data.column.ColorColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.util.ColorRamp');
weavejs.data.column.ColorColumn=function(){this.ramp=Weave.linkableChild(this,weavejs.util.ColorRamp);this.rampCenterAtZero=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(false),org.apache.flex.utils.Language.closure(this.cacheState,this,'cacheState'));this.recordColors=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.verifyRecordColors,this,'verifyRecordColors')));weavejs.data.column.ColorColumn.base(this,'constructor');this._internalColumnStats=
Weave.linkableChild(this,weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn))};goog.inherits(weavejs.data.column.ColorColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.ColorColumn.prototype.getMetadata=function(propertyName){if(propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.STRING;return weavejs.data.column.ColorColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.ColorColumn.prototype._internalColumnStats;
weavejs.data.column.ColorColumn.prototype.ramp;weavejs.data.column.ColorColumn.prototype.rampCenterAtZero;weavejs.data.column.ColorColumn.prototype._rampCenterAtZero;weavejs.data.column.ColorColumn.prototype.cacheState=function(){this._rampCenterAtZero=this.rampCenterAtZero.value};
weavejs.data.column.ColorColumn.prototype.getDataMin=function(){if(this._rampCenterAtZero){var dataMin=this._internalColumnStats.getMin();var dataMax=this._internalColumnStats.getMax();return-Math.max(Math.abs(dataMin),Math.abs(dataMax))}return this._internalColumnStats.getMin()};weavejs.data.column.ColorColumn.prototype.getDataMax=function(){if(this._rampCenterAtZero){var dataMin=this._internalColumnStats.getMin();var dataMax=this._internalColumnStats.getMax();return Math.max(Math.abs(dataMin),Math.abs(dataMax))}return this._internalColumnStats.getMax()};
weavejs.data.column.ColorColumn.prototype.getColorFromDataValue=function(value){var dataMin=this._internalColumnStats.getMin();var dataMax=this._internalColumnStats.getMax();var norm;if(dataMin==dataMax)norm=isFinite(value)?.5:NaN;else if(this._rampCenterAtZero){var absMax=Math.max(Math.abs(dataMin),Math.abs(dataMax));norm=(value+absMax)/(2*absMax)}else norm=(value-dataMin)/(dataMax-dataMin);return this.ramp.getColorFromNorm(norm)};weavejs.data.column.ColorColumn.prototype.recordColors;
weavejs.data.column.ColorColumn.prototype.verifyRecordColors=function(value){if(org.apache.flex.utils.Language.is(value,String)){value=weavejs.WeaveAPI.CSVParser.parseCSV(org.apache.flex.utils.Language.as(value,String));this.recordColors.setSessionState(value);return false}if(value==null)return true;return org.apache.flex.utils.Language.is(value,Array)&&weavejs.util.StandardLib.arrayIsType(org.apache.flex.utils.Language.as(value,Array),Array)};weavejs.data.column.ColorColumn.prototype.map_key_recordColor;
weavejs.data.column.ColorColumn.prototype.handleRecordColors=function(){var rows=org.apache.flex.utils.Language.as(this.recordColors.getSessionState(),Array);this.map_key_recordColor=new weavejs.util.JS.Map;var foreachiter0_target=rows;for(var foreachiter0 in foreachiter0_target){var row=foreachiter0_target[foreachiter0];if(row.length!=3)continue;try{var key=weavejs.WeaveAPI.QKeyManager.getQKey(row[0],row[1]);var color=weavejs.util.StandardLib.asNumber(row[2]);this.map_key_recordColor.set(key,color)}catch(e){weavejs.util.JS.error(e)}}};
weavejs.data.column.ColorColumn.prototype._recordColorsTriggerCounter=0;
weavejs.data.column.ColorColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._recordColorsTriggerCounter!=this.recordColors.triggerCounter){this._recordColorsTriggerCounter=this.recordColors.triggerCounter;this.handleRecordColors()}var color;var recordColor=this.map_key_recordColor.get(key);if(recordColor!==undefined)color=recordColor;else{var value=this.internalDynamicColumn.getValueFromKey(key,Number);color=this.getColorFromDataValue(value)}if(dataType==
Number)return color;if(isFinite(color))return'#'+weavejs.util.StandardLib.numberToBase(color,16,6);return''};weavejs.data.column.ColorColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColorColumn',qName:'weavejs.data.column.ColorColumn'}]};goog.exportSymbol('weavejs.data.column.ColorColumn',weavejs.data.column.ColorColumn);
weavejs.data.column.ColorColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'ramp':{type:'ColorRamp'},'rampCenterAtZero':{type:'LinkableBoolean'},'recordColors':{type:'LinkableVariable'}}},accessors:function(){return{}},methods:function(){return{'ColorColumn':{type:'',declaredBy:'weavejs.data.column.ColorColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.ColorColumn'},'getDataMin':{type:'Number',declaredBy:'weavejs.data.column.ColorColumn'},'getDataMax':{type:'Number',
declaredBy:'weavejs.data.column.ColorColumn'},'getColorFromDataValue':{type:'Number',declaredBy:'weavejs.data.column.ColorColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.ColorColumn'}}}}};goog.provide('weavejs.data.column.ColumnDataTask');
weavejs.data.column.ColumnDataTask=function(parentColumn,dataFilter,callback){dataFilter=typeof dataFilter!=='undefined'?dataFilter:null;callback=typeof callback!=='undefined'?callback:null;this.uniqueKeys=[];this.map_key_arrayData=new weavejs.util.JS.Map;if(callback==null)callback=org.apache.flex.utils.Language.closure(parentColumn.triggerCallbacks,parentColumn,'triggerCallbacks');this.parentColumn=parentColumn;this.dataFilter=dataFilter;this.callback=callback};weavejs.data.column.ColumnDataTask.prototype.uniqueKeys;
weavejs.data.column.ColumnDataTask.prototype.map_key_arrayData;
weavejs.data.column.ColumnDataTask.prototype.begin=function(inputKeys,inputData){if(inputKeys.length!=inputData.length)throw new Error(weavejs.util.StandardLib.substitute('Arrays are of different length ({0} !\x3d {1})',inputKeys.length,inputData.length));this.dataFilter=this.dataFilter;this.keys=inputKeys;this.data=inputData;this.i=0;this.n=this.keys.length;this.uniqueKeys=[];this.map_key_arrayData=new weavejs.util.JS.Map;weavejs.WeaveAPI.Scheduler.startTask(this.parentColumn,org.apache.flex.utils.Language.closure(this.iterate,
this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,this.callback,Weave.lang('Processing {0} records',this.n))};weavejs.data.column.ColumnDataTask.prototype.parentColumn;weavejs.data.column.ColumnDataTask.prototype.dataFilter;weavejs.data.column.ColumnDataTask.prototype.callback;weavejs.data.column.ColumnDataTask.prototype.keys;weavejs.data.column.ColumnDataTask.prototype.data;weavejs.data.column.ColumnDataTask.prototype.i;weavejs.data.column.ColumnDataTask.prototype.n;
weavejs.data.column.ColumnDataTask.prototype.iterate=function(stopTime){for(;this.i<this.n;this.i++){if(weavejs.util.JS.now()>stopTime)return this.i/this.n;var value=this.data[this.i];if(this.dataFilter!=null&&!this.dataFilter(value))continue;var key=this.keys[this.i];var array=this.map_key_arrayData.get(key);if(!array){this.uniqueKeys.push(key);this.map_key_arrayData.set(key,array=[value])}else array.push(value)}return 1};
weavejs.data.column.ColumnDataTask.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnDataTask',qName:'weavejs.data.column.ColumnDataTask'}]};goog.exportSymbol('weavejs.data.column.ColumnDataTask',weavejs.data.column.ColumnDataTask);
weavejs.data.column.ColumnDataTask.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'uniqueKeys':{type:'Array'},'map_key_arrayData':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'ColumnDataTask':{type:'',declaredBy:'weavejs.data.column.ColumnDataTask'},'begin':{type:'void',declaredBy:'weavejs.data.column.ColumnDataTask'}}}}};goog.provide('weavejs.data.key.KeySetUnion');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.data.IKeySet');
weavejs.data.key.KeySetUnion=function(keyInclusionLogic){keyInclusionLogic=typeof keyInclusionLogic!=='undefined'?keyInclusionLogic:null;this._keySets=[];this._allKeys=[];this.map_key=new weavejs.util.JS.WeakMap;this.busyStatus=Weave.disposableChild(this,weavejs.core.CallbackCollection);this._keyInclusionLogic=keyInclusionLogic;if(weavejs.data.key.KeySetUnion.debug)Weave.getCallbacks(this).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._firstCallback,this,'_firstCallback'))};
weavejs.data.key.KeySetUnion.debug=false;weavejs.data.key.KeySetUnion.prototype._firstCallback=function(){weavejs.util.DebugUtils.debugTrace(this,'trigger',this.keys.length,'keys')};weavejs.data.key.KeySetUnion.prototype._keyInclusionLogic=null;
weavejs.data.key.KeySetUnion.prototype.addKeySetDependency=function(keySet){if(this._keySets.indexOf(keySet)<0){this._keySets.push(keySet);Weave.getCallbacks(keySet).addDisposeCallback(this,org.apache.flex.utils.Language.closure(this.asyncStart,this,'asyncStart'));Weave.getCallbacks(keySet).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.asyncStart,this,'asyncStart'),true)}};weavejs.data.key.KeySetUnion.prototype.containsKey=function(key){return this.map_key.get(key)===true};
weavejs.data.key.KeySetUnion.prototype._keySets;weavejs.data.key.KeySetUnion.prototype._allKeys;weavejs.data.key.KeySetUnion.prototype.map_key;weavejs.data.key.KeySetUnion.prototype.busyStatus;weavejs.data.key.KeySetUnion.prototype._asyncKeys;weavejs.data.key.KeySetUnion.prototype._asyncKeySetIndex;weavejs.data.key.KeySetUnion.prototype._asyncKeyIndex;weavejs.data.key.KeySetUnion.prototype._prevCompareCounter;weavejs.data.key.KeySetUnion.prototype._async_map_key;weavejs.data.key.KeySetUnion.prototype._asyncAllKeys;
weavejs.data.key.KeySetUnion.prototype.asyncStart=function(){for(var i=this._keySets.length;i--;)if(Weave.wasDisposed(this._keySets[i]))this._keySets.splice(i,1);this._prevCompareCounter=0;this._asyncAllKeys=[];this._async_map_key=new weavejs.util.JS.WeakMap;this._asyncKeys=null;this._asyncKeySetIndex=0;this._asyncKeyIndex=0;weavejs.WeaveAPI.Scheduler.startTask(this.busyStatus,org.apache.flex.utils.Language.closure(this.asyncIterate,this,'asyncIterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,
this,'asyncComplete'),Weave.lang('Computing the union of {0} key sets',this._keySets.length))};
weavejs.data.key.KeySetUnion.prototype.asyncIterate=function(stopTime){for(;this._asyncKeySetIndex<this._keySets.length;this._asyncKeySetIndex++){if(this._asyncKeys==null){this._asyncKeys=org.apache.flex.utils.Language.as(this._keySets[this._asyncKeySetIndex],weavejs.api.data.IKeySet).keys;this._asyncKeyIndex=0}for(;this._asyncKeys&&this._asyncKeyIndex<this._asyncKeys.length;this._asyncKeyIndex++){if(weavejs.util.JS.now()>stopTime)return(this._asyncKeySetIndex+this._asyncKeyIndex/this._asyncKeys.length)/
this._keySets.length;var key=org.apache.flex.utils.Language.as(this._asyncKeys[this._asyncKeyIndex],weavejs.api.data.IQualifiedKey);if(!this._async_map_key.has(key)){var includeKey=this._keyInclusionLogic==null?true:this._keyInclusionLogic(key);this._async_map_key.set(key,includeKey);if(includeKey){this._asyncAllKeys.push(key);if(this.map_key.get(key)===true)this._prevCompareCounter++}}}this._asyncKeys=null}return 1};
weavejs.data.key.KeySetUnion.prototype.asyncComplete=function(){if(this._allKeys.length!=this._asyncAllKeys.length||this._allKeys.length!=this._prevCompareCounter){this._allKeys=this._asyncAllKeys;this.map_key=this._async_map_key;Weave.getCallbacks(this).triggerCallbacks()}this.busyStatus.triggerCallbacks()};weavejs.data.key.KeySetUnion.prototype.dispose=function(){this._keySets=null;this._allKeys=null;this.map_key=null;this._async_map_key=null};
Object.defineProperties(weavejs.data.key.KeySetUnion.prototype,{keys:{get:function(){return this._allKeys}}});weavejs.data.key.KeySetUnion.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeySetUnion',qName:'weavejs.data.key.KeySetUnion'}],interfaces:[weavejs.api.data.IKeySet,weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.data.key.KeySetUnion',weavejs.data.key.KeySetUnion);
weavejs.data.key.KeySetUnion.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'busyStatus':{type:'ICallbackCollection'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.key.KeySetUnion'}}},methods:function(){return{'KeySetUnion':{type:'',declaredBy:'weavejs.data.key.KeySetUnion'},'addKeySetDependency':{type:'void',declaredBy:'weavejs.data.key.KeySetUnion'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.key.KeySetUnion'},'dispose':{type:'void',
declaredBy:'weavejs.data.key.KeySetUnion'}}}}};goog.provide('weavejs.data.column.CombinedColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.data.key.KeySetUnion');goog.require('weavejs.api.data.IAttributeColumn');
weavejs.data.column.CombinedColumn=function(){this.useFirstColumnMetadata=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.columns=Weave.linkableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IAttributeColumn));this.keySetUnion=Weave.linkableChild(this,weavejs.data.key.KeySetUnion);this._columnsArray=[];weavejs.data.column.CombinedColumn.base(this,'constructor');Weave.linkableChild(this,this.keySetUnion.busyStatus);this.columns.childListCallbacks.addImmediateCallback(this,
org.apache.flex.utils.Language.closure(this.handleColumnsList,this,'handleColumnsList'))};goog.inherits(weavejs.data.column.CombinedColumn,weavejs.core.CallbackCollection);weavejs.data.column.CombinedColumn.prototype.useFirstColumnMetadata;weavejs.data.column.CombinedColumn.prototype.columns;weavejs.data.column.CombinedColumn.prototype.keySetUnion;weavejs.data.column.CombinedColumn.prototype._columnsArray;
weavejs.data.column.CombinedColumn.prototype.handleColumnsList=function(){this._columnsArray=this.columns.getObjects();if(this.columns.childListCallbacks.lastObjectAdded)this.keySetUnion.addKeySetDependency(org.apache.flex.utils.Language.as(this.columns.childListCallbacks.lastObjectAdded,weavejs.api.data.IKeySet))};
weavejs.data.column.CombinedColumn.prototype.getMetadata=function(propertyName){if(this.useFirstColumnMetadata.value){var firstColumn=org.apache.flex.utils.Language.as(this._columnsArray[0],weavejs.api.data.IAttributeColumn);return firstColumn?firstColumn.getMetadata(propertyName):null}return weavejs.data.ColumnUtils.getCommonMetadata(this._columnsArray,propertyName)};
weavejs.data.column.CombinedColumn.prototype.getMetadataPropertyNames=function(){var firstColumn=org.apache.flex.utils.Language.as(this._columnsArray[0],weavejs.api.data.IAttributeColumn);return firstColumn?firstColumn.getMetadataPropertyNames():null};weavejs.data.column.CombinedColumn.prototype.containsKey=function(key){return this.keySetUnion.containsKey(key)};
weavejs.data.column.CombinedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var foreachiter0_target=this._columnsArray;for(var foreachiter0 in foreachiter0_target){var column=foreachiter0_target[foreachiter0];if(column.containsKey(key))return column.getValueFromKey(key,dataType)}return dataType==String?'':undefined};Object.defineProperties(weavejs.data.column.CombinedColumn.prototype,{keys:{get:function(){return this.keySetUnion.keys}}});
weavejs.data.column.CombinedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'CombinedColumn',qName:'weavejs.data.column.CombinedColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.exportSymbol('weavejs.data.column.CombinedColumn',weavejs.data.column.CombinedColumn);
weavejs.data.column.CombinedColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'useFirstColumnMetadata':{type:'LinkableBoolean'},'columns':{type:'ILinkableHashMap'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.CombinedColumn'}}},methods:function(){return{'CombinedColumn':{type:'',declaredBy:'weavejs.data.column.CombinedColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.CombinedColumn'},'getMetadataPropertyNames':{type:'Array',
declaredBy:'weavejs.data.column.CombinedColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.CombinedColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.CombinedColumn'}}}}};goog.provide('weavejs.util.DateUtils');weavejs.util.DateUtils=function(){};weavejs.util.DateUtils.moment;weavejs.util.DateUtils.parse=function(date,moment_fmt,force_utc,force_local){force_utc=typeof force_utc!=='undefined'?force_utc:false;force_local=typeof force_local!=='undefined'?force_local:false;if(moment_fmt)return weavejs.util.DateUtils.moment(date,moment_fmt,true).toDate();return weavejs.util.DateUtils.moment(date).toDate()};weavejs.util.DateUtils.format=function(date,moment_fmt){return weavejs.util.DateUtils.moment(date).format(moment_fmt)};
weavejs.util.DateUtils.formatDuration=function(date){return!isNaN(org.apache.flex.utils.Language.as(date,Number))?weavejs.util.DateUtils.moment.duration(date).humanize():''};
weavejs.util.DateUtils.detectFormats=function(dates,moment_formats){var validFormatsSparse=[].concat(moment_formats);var fmt;var foreachiter0_target=dates;for(var foreachiter0 in foreachiter0_target){var date=foreachiter0_target[foreachiter0];for(var fmtIdx in validFormatsSparse){fmt=validFormatsSparse[fmtIdx];if(!fmt)continue;var m=new weavejs.util.DateUtils.moment(date,fmt,true);if(!m.isValid())validFormatsSparse[fmtIdx]=null}}var validFormats=[];var foreachiter1_target=validFormatsSparse;for(var foreachiter1 in foreachiter1_target){fmt=
foreachiter1_target[foreachiter1];if(fmt!==null)validFormats.push(fmt)}return validFormats};weavejs.util.DateUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'DateUtils',qName:'weavejs.util.DateUtils'}]};goog.exportSymbol('weavejs.util.DateUtils',weavejs.util.DateUtils);weavejs.util.DateUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IAttributeColumn');weavejs.api.data.IBaseColumn=function(){};weavejs.api.data.IBaseColumn.prototype.setRecords=function(keys,data){};weavejs.api.data.IBaseColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'IBaseColumn',qName:'weavejs.api.data.IBaseColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};
weavejs.api.data.IBaseColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'setRecords':{type:'void',declaredBy:'weavejs.api.data.IBaseColumn'}}}}};goog.provide('weavejs.data.column.DateColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.util.DateUtils');goog.require('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IPrimitiveColumn');weavejs.data.column.DateColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this._uniqueKeys=new Array;this.map_key_data=new weavejs.util.JS.Map;weavejs.data.column.DateColumn.base(this,'constructor',metadata)};
goog.inherits(weavejs.data.column.DateColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.DateColumn.prototype._uniqueKeys;weavejs.data.column.DateColumn.prototype.map_key_data;weavejs.data.column.DateColumn.prototype._i;weavejs.data.column.DateColumn.prototype._keys;weavejs.data.column.DateColumn.prototype._dates;weavejs.data.column.DateColumn.prototype._reportedError;weavejs.data.column.DateColumn.prototype._stringToNumberFunction=null;
weavejs.data.column.DateColumn.prototype._numberToStringFunction=null;weavejs.data.column.DateColumn.prototype._dateFormat=null;weavejs.data.column.DateColumn.prototype._dateDisplayFormat=null;weavejs.data.column.DateColumn.prototype._durationMode=false;weavejs.data.column.DateColumn.prototype._fakeData=false;
weavejs.data.column.DateColumn.prototype.getMetadata=function(propertyName){if(propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.DATE;if(propertyName==weavejs.api.data.ColumnMetadata.DATE_FORMAT)return this._dateFormat||weavejs.data.column.DateColumn.base(this,'getMetadata',propertyName);return weavejs.data.column.DateColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.DateColumn.prototype.containsKey=function(key){return this.map_key_data.has(key)};
weavejs.data.column.DateColumn.prototype.setRecords=function(qkeys,dates){if(this.keys.length>dates.length){weavejs.util.JS.error('Array lengths differ');return}this._fakeData=!!this.getMetadata('fakeData');this._dateFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.DATE_FORMAT);if(!this._dateFormat){var possibleFormats=weavejs.data.column.DateColumn.detectDateFormats(dates);weavejs.util.StandardLib.sortOn(possibleFormats,'length');this._dateFormat=possibleFormats.pop()}this._dateFormat=weavejs.api.data.DateFormat.convertDateFormat_c_to_moment(this._dateFormat);
this._dateDisplayFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.DATE_DISPLAY_FORMAT);if(this._dateDisplayFormat)this._dateDisplayFormat=weavejs.api.data.DateFormat.convertDateFormat_c_to_moment(this._dateDisplayFormat);this._stringToNumberFunction=null;var numberFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.NUMBER);if(numberFormat)try{this._stringToNumberFunction=weavejs.util.JS.compile(numberFormat,[weavejs.api.data.ColumnMetadata.STRING])}catch(e){weavejs.util.JS.error(e)}this._numberToStringFunction=
null;var stringFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(stringFormat)try{this._numberToStringFunction=weavejs.util.JS.compile(stringFormat,[weavejs.api.data.ColumnMetadata.NUMBER])}catch(e){weavejs.util.JS.error(e)}this._i=0;this._keys=qkeys;this._dates=dates;this.map_key_data=new weavejs.util.JS.Map;this._uniqueKeys.length=0;this._reportedError=false;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this._asyncIterate,this,'_asyncIterate'),
weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this._asyncComplete,this,'_asyncComplete'))};weavejs.data.column.DateColumn.prototype.errorHandler=function(e){return};weavejs.data.column.DateColumn.prototype._asyncComplete=function(){this._keys=null;this._dates=null;this.triggerCallbacks()};weavejs.data.column.DateColumn.prototype.parseDate=function(string){return weavejs.util.DateUtils.parse(string,this._dateFormat)};weavejs.data.column.DateColumn.SECOND=1E3;
weavejs.data.column.DateColumn.MINUTE=60*1E3;weavejs.data.column.DateColumn.HOUR=60*60*1E3;weavejs.data.column.DateColumn.prototype.formatDate=function(value){if(this._durationMode)return weavejs.util.DateUtils.formatDuration(value);return weavejs.util.DateUtils.format(value,this._dateDisplayFormat||this._dateFormat)};
weavejs.data.column.DateColumn.prototype._asyncIterate=function(stopTime){for(;this._i<this._keys.length;this._i++){if(weavejs.util.JS.now()>stopTime)return this._i/this._keys.length;var key=this._keys[this._i];var input=this._dates[this._i];var value;var fakeTime=this._fakeData?weavejs.util.StandardLib.asNumber(input):NaN;if(org.apache.flex.utils.Language.is(input,Date))value=input;else if(this._fakeData&&isFinite(fakeTime)){var d=new Date;var oneDay=24*60*60*1E3;d.setTime(d.getTime()-d.getTime()%
oneDay+fakeTime*oneDay);value=d}else if(this._stringToNumberFunction!=null){var number=this._stringToNumberFunction(input);if(this._numberToStringFunction!=null){input=this._numberToStringFunction(number);if(!input)continue;value=this.parseDate(input)}else{if(!isFinite(number))continue;value=number}}else try{if(!input)continue;value=this.parseDate(input);if(org.apache.flex.utils.Language.is(value,Date)&&isNaN(org.apache.flex.utils.Language.as(value,Date).getTime()))value=Number(input)}catch(e){if(!this._reportedError){this._reportedError=
true;var err=weavejs.util.StandardLib.substitute('Warning: Unable to parse this value as a date: "{0}"'+' (only the first error for this column is reported).',input);weavejs.util.JS.error(err,'Attribute column:',this._metadata,e)}continue}if(!this.map_key_data.has(key)){this._durationMode=org.apache.flex.utils.Language.is(value,Number);this._uniqueKeys.push(key);this.map_key_data.set(key,value)}else if(!this._reportedError){this._reportedError=true;var fmt='Warning: Key column values are not unique.  Record dropped due to duplicate key ({0}) (only reported for first duplicate).  Attribute column:';
weavejs.util.JS.log(weavejs.util.StandardLib.substitute(fmt,key.localName),this._metadata)}}return 1};weavejs.data.column.DateColumn.prototype.deriveStringFromNumber=function(number){if(this._numberToStringFunction!=null)return this._numberToStringFunction(number);return this.formatDate(number)};
weavejs.data.column.DateColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var number;var string;var value;if(dataType==Number){number=Number(this.map_key_data.get(key));return number}if(dataType==String){if(this._numberToStringFunction!=null){number=Number(this.map_key_data.get(key));return this._numberToStringFunction(number)}value=this.map_key_data.get(key);if(value===undefined)return'';if(this._dateDisplayFormat||this._dateFormat)string=
this.formatDate(value);else string=value.toString();return string}value=this.map_key_data.get(key);if(!dataType||dataType==Array)return value!=null?[value]:null;if(dataType)return org.apache.flex.utils.Language.as(value,dataType);return value};weavejs.data.column.DateColumn.detectDateFormats=function(dates){var convertedFormats=weavejs.api.data.DateFormat.FOR_AUTO_DETECT.map(weavejs.api.data.DateFormat.convertDateFormat_c_to_moment);return weavejs.util.DateUtils.detectFormats(dates,convertedFormats)};
Object.defineProperties(weavejs.data.column.DateColumn.prototype,{keys:{get:function(){return this._uniqueKeys}}});weavejs.data.column.DateColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'DateColumn',qName:'weavejs.data.column.DateColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn,weavejs.api.data.IBaseColumn]};goog.exportSymbol('weavejs.data.column.DateColumn',weavejs.data.column.DateColumn);
weavejs.data.column.DateColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.DateColumn'}}},methods:function(){return{'DateColumn':{type:'',declaredBy:'weavejs.data.column.DateColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.DateColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.DateColumn'},'setRecords':{type:'void',declaredBy:'weavejs.data.column.DateColumn'},
'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.column.DateColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.DateColumn'}}}}};goog.provide('weavejs.api.data.IDynamicKeyFilter');goog.require('weavejs.api.core.ILinkableDynamicObject');weavejs.api.data.IDynamicKeyFilter=function(){};weavejs.api.data.IDynamicKeyFilter.prototype.getInternalKeyFilter=function(){};weavejs.api.data.IDynamicKeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDynamicKeyFilter',qName:'weavejs.api.data.IDynamicKeyFilter'}],interfaces:[weavejs.api.core.ILinkableDynamicObject]};
weavejs.api.data.IDynamicKeyFilter.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getInternalKeyFilter':{type:'IKeyFilter',declaredBy:'weavejs.api.data.IDynamicKeyFilter'}}}}};goog.provide('weavejs.data.key.DynamicKeyFilter');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.api.data.IDynamicKeyFilter');weavejs.data.key.DynamicKeyFilter=function(){weavejs.data.key.DynamicKeyFilter.base(this,'constructor',weavejs.api.data.IKeyFilter)};goog.inherits(weavejs.data.key.DynamicKeyFilter,weavejs.core.LinkableDynamicObject);
weavejs.data.key.DynamicKeyFilter.prototype.getInternalKeyFilter=function(){return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IKeyFilter)};weavejs.data.key.DynamicKeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicKeyFilter',qName:'weavejs.data.key.DynamicKeyFilter'}],interfaces:[weavejs.api.data.IDynamicKeyFilter]};goog.exportSymbol('weavejs.data.key.DynamicKeyFilter',weavejs.data.key.DynamicKeyFilter);
weavejs.data.key.DynamicKeyFilter.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'DynamicKeyFilter':{type:'',declaredBy:'weavejs.data.key.DynamicKeyFilter'},'getInternalKeyFilter':{type:'IKeyFilter',declaredBy:'weavejs.data.key.DynamicKeyFilter'}}}}};goog.provide('weavejs.data.key.SortedKeySet');goog.require('weavejs.api.data.IKeySet');
weavejs.data.key.SortedKeySet=function(keySet,sortCopyFunction,dependencies){sortCopyFunction=typeof sortCopyFunction!=='undefined'?sortCopyFunction:null;dependencies=typeof dependencies!=='undefined'?dependencies:null;this._dependencies=Weave.linkableChild(this,weavejs.core.CallbackCollection);this._sortCopyFunction=weavejs.data.key.QKeyManager.keySortCopy;this._sortedKeys=[];this._keySet=keySet;this._sortCopyFunction=org.apache.flex.utils.Language.as(sortCopyFunction,Function)||org.apache.flex.utils.Language.as(weavejs.data.key.QKeyManager.keySortCopy,
Function);var foreachiter0_target=dependencies;for(var foreachiter0 in foreachiter0_target){var object=foreachiter0_target[foreachiter0];Weave.linkableChild(this._dependencies,object);if(org.apache.flex.utils.Language.is(object,weavejs.api.data.IAttributeColumn)){var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn));Weave.linkableChild(this._dependencies,stats)}}Weave.linkableChild(this._dependencies,this._keySet)};
weavejs.data.key.SortedKeySet.prototype._triggerCounter=0;weavejs.data.key.SortedKeySet.prototype._dependencies;weavejs.data.key.SortedKeySet.prototype._keySet;weavejs.data.key.SortedKeySet.prototype._sortCopyFunction;weavejs.data.key.SortedKeySet.prototype._sortedKeys;weavejs.data.key.SortedKeySet.prototype.containsKey=function(key){return this._keySet.containsKey(key)};
weavejs.data.key.SortedKeySet.prototype._validate=function(){this._triggerCounter=this._dependencies.triggerCounter;if(Weave.isBusy(this))return;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this._asyncTask,this,'_asyncTask'),weavejs.WeaveAPI.TASK_PRIORITY_NORMAL,org.apache.flex.utils.Language.closure(this._asyncComplete,this,'_asyncComplete'))};weavejs.data.key.SortedKeySet.EMPTY_ARRAY=[];
weavejs.data.key.SortedKeySet.prototype._asyncTask=function(){this._sortCopyFunction(weavejs.data.key.SortedKeySet.EMPTY_ARRAY);if(Weave.isBusy(this._dependencies))return 1;this._sortedKeys=this._sortCopyFunction(this._keySet.keys);return 1};weavejs.data.key.SortedKeySet.prototype._asyncComplete=function(){if(Weave.isBusy(this._dependencies)||this._triggerCounter!=this._dependencies.triggerCounter)return;Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.key.SortedKeySet.generateSortCopyFunction=function(columns,sortDirections){sortDirections=typeof sortDirections!=='undefined'?sortDirections:null;var __localFn0__=function(keys){var params=[];var directions=[];var lastDirection=1;for(var i=0;i<columns.length;i++){var param=columns[i];if(Weave.wasDisposed(param))continue;if(org.apache.flex.utils.Language.is(param,weavejs.api.data.IAttributeColumn)){var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(org.apache.flex.utils.Language.as(param,
weavejs.api.data.IAttributeColumn));param=stats.hack_getNumericData()}if(!param||org.apache.flex.utils.Language.is(param,weavejs.api.data.IKeySet))continue;if(sortDirections&&!sortDirections[i])continue;lastDirection=sortDirections?sortDirections[i]:1;params.push(param);directions.push(lastDirection)}var qkm=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager);params.push(qkm.map_qkey_keyType,qkm.map_qkey_localName);directions.push(lastDirection,lastDirection);
var result=weavejs.util.StandardLib.sortOn(keys,params,directions,false);return result};return __localFn0__};Object.defineProperties(weavejs.data.key.SortedKeySet.prototype,{keys:{get:function(){if(this._triggerCounter!=this._dependencies.triggerCounter)this._validate();return this._sortedKeys}}});weavejs.data.key.SortedKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'SortedKeySet',qName:'weavejs.data.key.SortedKeySet'}],interfaces:[weavejs.api.data.IKeySet]};
goog.exportSymbol('weavejs.data.key.SortedKeySet',weavejs.data.key.SortedKeySet);weavejs.data.key.SortedKeySet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.key.SortedKeySet'}}},methods:function(){return{'SortedKeySet':{type:'',declaredBy:'weavejs.data.key.SortedKeySet'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.key.SortedKeySet'}}}}};goog.provide('weavejs.api.data.IFilteredKeySet');goog.require('weavejs.api.core.ILinkableObject');goog.require('weavejs.api.data.IKeySet');weavejs.api.data.IFilteredKeySet=function(){};weavejs.api.data.IFilteredKeySet.prototype.keyFilter;weavejs.api.data.IFilteredKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'IFilteredKeySet',qName:'weavejs.api.data.IFilteredKeySet'}],interfaces:[weavejs.api.data.IKeySet,weavejs.api.core.ILinkableObject]};
weavejs.api.data.IFilteredKeySet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keyFilter':{type:'IDynamicKeyFilter',declaredBy:'weavejs.api.data.IFilteredKeySet'}}},methods:function(){return{}}}};goog.provide('weavejs.data.key.FilteredKeySet');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.data.key.DynamicKeyFilter');goog.require('weavejs.data.key.SortedKeySet');goog.require('weavejs.api.data.IFilteredKeySet');
weavejs.data.key.FilteredKeySet=function(){this._dynamicKeyFilter=Weave.linkableChild(this,weavejs.data.key.DynamicKeyFilter);this._filteredKeys=[];this.map_key=new weavejs.util.JS.WeakMap;this.inverseFilter=Weave.linkableChild(this,weavejs.core.LinkableBoolean);weavejs.data.key.FilteredKeySet.base(this,'constructor');if(weavejs.data.key.FilteredKeySet.debug)this.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._firstCallback,this,'_firstCallback'))};
goog.inherits(weavejs.data.key.FilteredKeySet,weavejs.core.CallbackCollection);weavejs.data.key.FilteredKeySet.debug=false;weavejs.data.key.FilteredKeySet.prototype._firstCallback=function(){weavejs.util.DebugUtils.debugTrace(this,'trigger',this.keys.length,'keys')};weavejs.data.key.FilteredKeySet.prototype.dispose=function(){weavejs.data.key.FilteredKeySet.base(this,'dispose');this.setColumnKeySources(null)};weavejs.data.key.FilteredKeySet.prototype._baseKeySet=null;weavejs.data.key.FilteredKeySet.prototype._dynamicKeyFilter;
weavejs.data.key.FilteredKeySet.prototype._filteredKeys;weavejs.data.key.FilteredKeySet.prototype.map_key;weavejs.data.key.FilteredKeySet.prototype._generatedKeySets;weavejs.data.key.FilteredKeySet.prototype._setColumnKeySources_arguments;weavejs.data.key.FilteredKeySet.prototype.inverseFilter;
weavejs.data.key.FilteredKeySet.prototype.setColumnKeySources=function(columns,sortDirections,keySortCopy,keyInclusionLogic){sortDirections=typeof sortDirections!=='undefined'?sortDirections:null;keySortCopy=typeof keySortCopy!=='undefined'?keySortCopy:null;keyInclusionLogic=typeof keyInclusionLogic!=='undefined'?keyInclusionLogic:null;if(weavejs.util.StandardLib.compare(this._setColumnKeySources_arguments,arguments)==0)return;var keySet;if(this._generatedKeySets){var foreachiter0_target=this._generatedKeySets;
for(var foreachiter0 in foreachiter0_target){keySet=foreachiter0_target[foreachiter0];Weave.dispose(keySet)}this._generatedKeySets=null}else this.setSingleKeySource(null);this._setColumnKeySources_arguments=arguments;if(columns){var union=Weave.disposableChild(this,new weavejs.data.key.KeySetUnion(keyInclusionLogic));var foreachiter1_target=columns;for(var foreachiter1 in foreachiter1_target){keySet=foreachiter1_target[foreachiter1];union.addKeySetDependency(keySet);if(org.apache.flex.utils.Language.is(keySet,
weavejs.api.data.IAttributeColumn)){var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(org.apache.flex.utils.Language.as(keySet,weavejs.api.data.IAttributeColumn));Weave.linkableChild(union,stats)}}if(weavejs.data.key.FilteredKeySet.debug&&keySortCopy==null)org.apache.flex.utils.Language.trace(weavejs.util.DebugUtils.debugId(this),'sort by [',columns,']');var sortCopy=keySortCopy||weavejs.data.key.SortedKeySet.generateSortCopyFunction(columns,sortDirections);var sorted=Weave.linkableChild(this,
new weavejs.data.key.SortedKeySet(union,sortCopy,columns));this._generatedKeySets=[union,sorted];this._baseKeySet=sorted}else this._baseKeySet=null;this.triggerCallbacks()};
weavejs.data.key.FilteredKeySet.prototype.setSingleKeySource=function(keySet){if(this._generatedKeySets)this.setColumnKeySources(null);if(this._baseKeySet==keySet)return;if(this._baseKeySet!=null)Weave.getCallbacks(this._baseKeySet).removeCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'));this._baseKeySet=keySet;if(this._baseKeySet!=null)Weave.getCallbacks(this._baseKeySet).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,
this,'triggerCallbacks'),false,true);this.triggerCallbacks()};weavejs.data.key.FilteredKeySet.prototype.containsKey=function(key){if(this._prevTriggerCounter!=this.triggerCounter)this.validateFilteredKeys();return this.map_key.has(key)};weavejs.data.key.FilteredKeySet.prototype._prevTriggerCounter;
weavejs.data.key.FilteredKeySet.prototype.validateFilteredKeys=function(){this._prevTriggerCounter=this.triggerCounter;this._asyncFilter=this._dynamicKeyFilter.getInternalKeyFilter();if(this._baseKeySet==null){this._filteredKeys=[];this.map_key=new weavejs.util.JS.WeakMap;return}if(!this._asyncFilter){this._filteredKeys=this._baseKeySet.keys;this.map_key=new weavejs.util.JS.WeakMap;var foreachiter2_target=this._filteredKeys;for(var foreachiter2 in foreachiter2_target){var key=foreachiter2_target[foreachiter2];
this.map_key.set(key,true)}return}this._i=0;this._asyncInput=this._baseKeySet.keys;this._asyncOutput=[];this._async_map_key=new weavejs.util.JS.WeakMap;this._asyncInverse=this.inverseFilter.value;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'),Weave.lang('Filtering {0} keys',this._asyncInput.length))};weavejs.data.key.FilteredKeySet.prototype._i;
weavejs.data.key.FilteredKeySet.prototype._asyncInverse;weavejs.data.key.FilteredKeySet.prototype._asyncFilter;weavejs.data.key.FilteredKeySet.prototype._asyncInput;weavejs.data.key.FilteredKeySet.prototype._asyncOutput;weavejs.data.key.FilteredKeySet.prototype._async_map_key;
weavejs.data.key.FilteredKeySet.prototype.iterate=function(stopTime){if(this._prevTriggerCounter!=this.triggerCounter)return 1;for(;this._i<this._asyncInput.length;++this._i){if(!this._asyncFilter)return 1;if(weavejs.util.JS.now()>stopTime)return this._i/this._asyncInput.length;var key=org.apache.flex.utils.Language.as(this._asyncInput[this._i],weavejs.api.data.IQualifiedKey);var contains=this._asyncFilter.containsKey(key);if(contains!=this._asyncInverse){this._asyncOutput.push(key);this._async_map_key.set(key,
true)}}return 1};weavejs.data.key.FilteredKeySet.prototype.asyncComplete=function(){if(this._prevTriggerCounter!=this.triggerCounter){this.validateFilteredKeys();return}this._prevTriggerCounter++;this._filteredKeys=this._asyncOutput;this.map_key=this._async_map_key;this.triggerCallbacks()};
Object.defineProperties(weavejs.data.key.FilteredKeySet.prototype,{keyFilter:{get:function(){return this._dynamicKeyFilter}},keys:{get:function(){if(this._prevTriggerCounter!=this.triggerCounter)this.validateFilteredKeys();return this._filteredKeys}}});weavejs.data.key.FilteredKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'FilteredKeySet',qName:'weavejs.data.key.FilteredKeySet'}],interfaces:[weavejs.api.data.IFilteredKeySet]};goog.exportSymbol('weavejs.data.key.FilteredKeySet',weavejs.data.key.FilteredKeySet);
weavejs.data.key.FilteredKeySet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keyFilter':{type:'IDynamicKeyFilter',declaredBy:'weavejs.data.key.FilteredKeySet'},'keys':{type:'Array',declaredBy:'weavejs.data.key.FilteredKeySet'}}},methods:function(){return{'FilteredKeySet':{type:'',declaredBy:'weavejs.data.key.FilteredKeySet'},'dispose':{type:'void',declaredBy:'weavejs.data.key.FilteredKeySet'},'setColumnKeySources':{type:'void',declaredBy:'weavejs.data.key.FilteredKeySet'},
'setSingleKeySource':{type:'void',declaredBy:'weavejs.data.key.FilteredKeySet'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.key.FilteredKeySet'}}}}};goog.provide('weavejs.data.column.FilteredColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.data.key.FilteredKeySet');weavejs.data.column.FilteredColumn=function(){this._filteredKeySet=Weave.linkableChild(this,weavejs.data.key.FilteredKeySet);this.filter=Weave.linkableChild(this,this._filteredKeySet.keyFilter);weavejs.data.column.FilteredColumn.base(this,'constructor');this._filteredKeySet.setSingleKeySource(this.internalDynamicColumn)};
goog.inherits(weavejs.data.column.FilteredColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.FilteredColumn.prototype._filteredKeySet;weavejs.data.column.FilteredColumn.prototype.filter;weavejs.data.column.FilteredColumn.prototype._keys;weavejs.data.column.FilteredColumn.prototype.containsKey=function(key){this.internalDynamicColumn.containsKey(key);return this._filteredKeySet.containsKey(key)};
weavejs.data.column.FilteredColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var column=this.internalDynamicColumn.getInternalColumn();var keyFilter=this.filter.getInternalKeyFilter();if(column){var value=column.getValueFromKey(key,dataType);if(!keyFilter||keyFilter.containsKey(key))return value}if(dataType)return weavejs.data.EquationColumnLib.cast(undefined,dataType);return undefined};
Object.defineProperties(weavejs.data.column.FilteredColumn.prototype,{keys:{get:function(){if(this.internalDynamicColumn.keys)return this._filteredKeySet.keys;return[]}}});weavejs.data.column.FilteredColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'FilteredColumn',qName:'weavejs.data.column.FilteredColumn'}]};goog.exportSymbol('weavejs.data.column.FilteredColumn',weavejs.data.column.FilteredColumn);
weavejs.data.column.FilteredColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'filter':{type:'IDynamicKeyFilter'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.FilteredColumn'}}},methods:function(){return{'FilteredColumn':{type:'',declaredBy:'weavejs.data.column.FilteredColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.FilteredColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.FilteredColumn'}}}}};goog.provide('weavejs.geom.BLGNode');weavejs.geom.BLGNode=function(index,importance,x,y){this.index=index;this.importance=importance;this.x=x;this.y=y;this.left=null;this.right=null};weavejs.geom.BLGNode.prototype.index;weavejs.geom.BLGNode.prototype.importance;weavejs.geom.BLGNode.prototype.x;weavejs.geom.BLGNode.prototype.y;weavejs.geom.BLGNode.prototype.left=null;weavejs.geom.BLGNode.prototype.right=null;weavejs.geom.BLGNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'BLGNode',qName:'weavejs.geom.BLGNode'}]};
goog.exportSymbol('weavejs.geom.BLGNode',weavejs.geom.BLGNode);weavejs.geom.BLGNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'index':{type:'int'},'importance':{type:'Number'},'x':{type:'Number'},'y':{type:'Number'},'left':{type:'BLGNode'},'right':{type:'BLGNode'}}},accessors:function(){return{}},methods:function(){return{'BLGNode':{type:'',declaredBy:'weavejs.geom.BLGNode'}}}}};goog.provide('weavejs.geom.NumericRange');weavejs.geom.NumericRange=function(begin,end){begin=typeof begin!=='undefined'?begin:NaN;end=typeof end!=='undefined'?end:NaN;this.begin=begin;this.end=end};weavejs.geom.NumericRange.prototype.begin;weavejs.geom.NumericRange.prototype.end;weavejs.geom.NumericRange.prototype.normalize=function(value){if(value==this.end)return 1;return(value-this.begin)/(this.end-this.begin)};
weavejs.geom.NumericRange.prototype.denormalize=function(value){return this.begin+(this.end-this.begin)*value};weavejs.geom.NumericRange.prototype.setRange=function(begin,end){this.begin=begin;this.end=end};weavejs.geom.NumericRange.prototype.offset=function(delta){this.begin+=delta;this.end+=delta};weavejs.geom.NumericRange.prototype.constrain=function(value){if(this.begin<this.end)return Math.max(this.begin,Math.min(value,this.end));return Math.max(this.end,Math.min(value,this.begin))};
weavejs.geom.NumericRange.prototype.contains=function(value){if(this.begin<this.end)return this.begin<=value&&value<=this.end;return this.end<=value&&value<=this.begin};weavejs.geom.NumericRange.prototype.compare=function(value){var min=this.min;var max=this.max;if(value<min)return-1;if(value>max)return 1;if(min<=value&&value<=max)return 0;return NaN};
weavejs.geom.NumericRange.prototype.constrainRange=function(rangeToConstrain,allowShrinking){allowShrinking=typeof allowShrinking!=='undefined'?allowShrinking:false;if(isNaN(this.coverage))return;if(rangeToConstrain.coverage<this.coverage)if(rangeToConstrain.min<this.min)rangeToConstrain.offset(this.min-rangeToConstrain.min);else{if(rangeToConstrain.max>this.max)rangeToConstrain.offset(this.max-rangeToConstrain.max)}else if(allowShrinking)rangeToConstrain.setRange(this.begin,this.end);else if(rangeToConstrain.min>
this.min)rangeToConstrain.offset(this.min-rangeToConstrain.min);else if(rangeToConstrain.max<this.max)rangeToConstrain.offset(this.max-rangeToConstrain.max)};weavejs.geom.NumericRange.prototype.includeInRange=function(value){if(this.end<this.begin){if(value<this.end)this.end=value;if(value>this.begin)this.begin=value}else{if(value<this.begin)this.begin=value;if(value>this.end)this.end=value}};
weavejs.geom.NumericRange.prototype.toString=function(){return'['+this.begin.toFixed(2)+' to '+this.end.toFixed(2)+']'};Object.defineProperties(weavejs.geom.NumericRange.prototype,{min:{get:function(){return Math.min(this.begin,this.end)}},max:{get:function(){return Math.max(this.begin,this.end)}},coverage:{get:function(){return Math.abs(this.end-this.begin)}}});weavejs.geom.NumericRange.prototype.FLEXJS_CLASS_INFO={names:[{name:'NumericRange',qName:'weavejs.geom.NumericRange'}]};
goog.exportSymbol('weavejs.geom.NumericRange',weavejs.geom.NumericRange);
weavejs.geom.NumericRange.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'begin':{type:'Number'},'end':{type:'Number'}}},accessors:function(){return{'min':{type:'Number',declaredBy:'weavejs.geom.NumericRange'},'max':{type:'Number',declaredBy:'weavejs.geom.NumericRange'},'coverage':{type:'Number',declaredBy:'weavejs.geom.NumericRange'}}},methods:function(){return{'NumericRange':{type:'',declaredBy:'weavejs.geom.NumericRange'},'normalize':{type:'Number',declaredBy:'weavejs.geom.NumericRange'},
'denormalize':{type:'Number',declaredBy:'weavejs.geom.NumericRange'},'setRange':{type:'void',declaredBy:'weavejs.geom.NumericRange'},'offset':{type:'void',declaredBy:'weavejs.geom.NumericRange'},'constrain':{type:'Number',declaredBy:'weavejs.geom.NumericRange'},'contains':{type:'Boolean',declaredBy:'weavejs.geom.NumericRange'},'compare':{type:'Number',declaredBy:'weavejs.geom.NumericRange'},'constrainRange':{type:'void',declaredBy:'weavejs.geom.NumericRange'},'includeInRange':{type:'void',declaredBy:'weavejs.geom.NumericRange'},
'toString':{type:'String',declaredBy:'weavejs.geom.NumericRange'}}}}};goog.provide('weavejs.geom.Rectangle');weavejs.geom.Rectangle=function(x,y,width,height){x=typeof x!=='undefined'?x:NaN;y=typeof y!=='undefined'?y:NaN;width=typeof width!=='undefined'?width:NaN;height=typeof height!=='undefined'?height:NaN;this.x=x;this.y=y;this.width=width;this.height=height};weavejs.geom.Rectangle.prototype.x;weavejs.geom.Rectangle.prototype.y;weavejs.geom.Rectangle.prototype.width;weavejs.geom.Rectangle.prototype.height;
weavejs.geom.Rectangle.prototype.FLEXJS_CLASS_INFO={names:[{name:'Rectangle',qName:'weavejs.geom.Rectangle'}]};goog.exportSymbol('weavejs.geom.Rectangle',weavejs.geom.Rectangle);weavejs.geom.Rectangle.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'x':{type:'Number'},'y':{type:'Number'},'width':{type:'Number'},'height':{type:'Number'}}},accessors:function(){return{}},methods:function(){return{'Rectangle':{type:'',declaredBy:'weavejs.geom.Rectangle'}}}}};goog.provide('weavejs.geom.Bounds2D');goog.require('weavejs.geom.NumericRange');goog.require('weavejs.geom.Rectangle');weavejs.geom.Bounds2D=function(xMin,yMin,xMax,yMax){xMin=typeof xMin!=='undefined'?xMin:NaN;yMin=typeof yMin!=='undefined'?yMin:NaN;xMax=typeof xMax!=='undefined'?xMax:NaN;yMax=typeof yMax!=='undefined'?yMax:NaN;this.setBounds(xMin,yMin,xMax,yMax)};weavejs.geom.Bounds2D.prototype.xMin;weavejs.geom.Bounds2D.prototype.yMin;weavejs.geom.Bounds2D.prototype.xMax;weavejs.geom.Bounds2D.prototype.yMax;
weavejs.geom.Bounds2D.prototype.getXMin=function(){return this.xMin};weavejs.geom.Bounds2D.prototype.getYMin=function(){return this.yMin};weavejs.geom.Bounds2D.prototype.getXMax=function(){return this.xMax};weavejs.geom.Bounds2D.prototype.getYMax=function(){return this.yMax};weavejs.geom.Bounds2D.prototype.setXMin=function(value){this.xMin=value};weavejs.geom.Bounds2D.prototype.setYMin=function(value){this.yMin=value};weavejs.geom.Bounds2D.prototype.setXMax=function(value){this.xMax=value};
weavejs.geom.Bounds2D.prototype.setYMax=function(value){this.yMax=value};weavejs.geom.Bounds2D.prototype.copyFrom=function(other){if(other==null){this.reset();return}this.xMin=other.xMin;this.yMin=other.yMin;this.xMax=other.xMax;this.yMax=other.yMax};weavejs.geom.Bounds2D.prototype.cloneBounds=function(){return new weavejs.geom.Bounds2D(this.xMin,this.yMin,this.xMax,this.yMax)};
weavejs.geom.Bounds2D.prototype.makeSizePositive=function(){var temp;if(this.xMin>this.xMax){temp=this.xMin;this.xMin=this.xMax;this.xMax=temp}if(this.yMin>this.yMax){temp=this.yMin;this.yMin=this.yMax;this.yMax=temp}};weavejs.geom.Bounds2D.prototype.reset=function(){this.xMin=NaN;this.yMin=NaN;this.xMax=NaN;this.yMax=NaN};weavejs.geom.Bounds2D.prototype.isUndefined=function(){return!isFinite(this.xMin)||!isFinite(this.yMin)||!isFinite(this.xMax)||!isFinite(this.yMax)};
weavejs.geom.Bounds2D.prototype.isEmpty=function(){return this.xMin==this.xMax||this.yMin==this.yMax||this.isUndefined()};weavejs.geom.Bounds2D.prototype.equals=function(other){if(other==null)return this.isUndefined();return(this.xMin==other.xMin||isNaN(this.xMin)&&isNaN(other.xMin))&&(this.yMin==other.yMin||isNaN(this.yMin)&&isNaN(other.yMin))&&(this.xMax==other.xMax||isNaN(this.xMax)&&isNaN(other.xMax))&&(this.yMax==other.yMax||isNaN(this.yMax)&&isNaN(other.yMax))};
weavejs.geom.Bounds2D.prototype.setBounds=function(xMin,yMin,xMax,yMax){this.xMin=xMin;this.yMin=yMin;this.xMax=xMax;this.yMax=yMax};weavejs.geom.Bounds2D.prototype.setCoords=function(xMin_yMin_xMax_yMax){this.xMin=xMin_yMin_xMax_yMax[0];this.yMin=xMin_yMin_xMax_yMax[1];this.xMax=xMin_yMin_xMax_yMax[2];this.yMax=xMin_yMin_xMax_yMax[3]};weavejs.geom.Bounds2D.prototype.getCoords=function(){return[this.xMin,this.yMin,this.xMax,this.yMax]};
weavejs.geom.Bounds2D.prototype.setRectangle=function(x,y,width,height){this.xMin=x;this.yMin=y;this.xMax=x+width;this.yMax=y+height};
weavejs.geom.Bounds2D.prototype.getRectangle=function(output,makeSizePositive){output=typeof output!=='undefined'?output:null;makeSizePositive=typeof makeSizePositive!=='undefined'?makeSizePositive:true;if(output==null)output=new weavejs.geom.Rectangle;if(makeSizePositive){output.x=this.getXNumericMin();output.y=this.getYNumericMin();output.width=this.getXCoverage();output.height=this.getYCoverage()}else{output.x=this.xMin;output.y=this.yMin;output.width=this.getWidth();output.height=this.getHeight()}return output};
weavejs.geom.Bounds2D.prototype.includePoint=function(newPoint){this.includeCoords(newPoint.x,newPoint.y)};
weavejs.geom.Bounds2D.prototype.includeCoords=function(newX,newY){if(isFinite(newX)){if(isNaN(this.xMin))if(isNaN(this.xMax))this.xMin=this.xMax=newX;else this.xMin=this.xMax;else if(isNaN(this.xMax))this.xMax=this.xMin;if(this.xMin>this.xMax){if(newX>this.xMin)this.xMin=newX;if(newX<this.xMax)this.xMax=newX}else{if(newX<this.xMin)this.xMin=newX;if(newX>this.xMax)this.xMax=newX}}if(isFinite(newY)){if(isNaN(this.yMin))if(isNaN(this.yMax))this.yMin=this.yMax=newY;else this.yMin=this.yMax;else if(isNaN(this.yMax))this.yMax=
this.yMin;if(this.yMin>this.yMax){if(newY>this.yMin)this.yMin=newY;if(newY<this.yMax)this.yMax=newY}else{if(newY<this.yMin)this.yMin=newY;if(newY>this.yMax)this.yMax=newY}}};weavejs.geom.Bounds2D.prototype.includeX=function(newX){this.includeCoords(newX,NaN)};weavejs.geom.Bounds2D.prototype.includeY=function(newY){this.includeCoords(NaN,newY)};
weavejs.geom.Bounds2D.prototype.includeBounds=function(otherBounds){this.includeCoords(otherBounds.xMin,otherBounds.yMin);this.includeCoords(otherBounds.xMax,otherBounds.yMax)};weavejs.geom.Bounds2D.staticBounds2D_A=new weavejs.geom.Bounds2D;weavejs.geom.Bounds2D.staticBounds2D_B=new weavejs.geom.Bounds2D;
weavejs.geom.Bounds2D.prototype.overlaps=function(other,includeEdges){includeEdges=typeof includeEdges!=='undefined'?includeEdges:true;var a=weavejs.geom.Bounds2D.staticBounds2D_A;a.copyFrom(this);a.makeSizePositive();var b=weavejs.geom.Bounds2D.staticBounds2D_B;b.copyFrom(other);b.makeSizePositive();if(includeEdges)return a.xMin<=b.xMax&&b.xMin<=a.xMax&&a.yMin<=b.yMax&&b.yMin<=a.yMax;else return a.xMin<b.xMax&&b.xMin<a.xMax&&a.yMin<b.yMax&&b.yMin<a.yMax};
weavejs.geom.Bounds2D.prototype.containsPoint=function(point){return this.contains(point.x,point.y)};weavejs.geom.Bounds2D.prototype.contains=function(x,y){if(this.xMin<this.xMax?this.xMin<=x&&x<=this.xMax:this.xMax<=x&&x<=this.xMin)if(this.yMin<this.yMax?this.yMin<=y&&y<=this.yMax:this.yMax<=y&&y<=this.yMin)return true;return false};weavejs.geom.Bounds2D.prototype.containsBounds=function(other){return this.contains(other.xMin,other.yMin)&&this.contains(other.xMax,other.yMax)};
weavejs.geom.Bounds2D.prototype.getGridTest=function(x,y){var x0,x1,y0,y1;if(this.xMin<this.xMax)x0=this.xMin,x1=this.xMax;else x1=this.xMin,x0=this.xMax;if(this.yMin<this.yMax)y0=this.yMin,y1=this.yMax;else y1=this.yMin,y0=this.yMax;return(x<x0?1:x>x1?16:0)|(y<y0?256:y>y1?4096:0)};
weavejs.geom.Bounds2D.prototype.projectPointTo=function(point,toBounds){var toXMin;var toXMax;var toYMin;var toYMax;toXMin=toBounds.xMin;toXMax=toBounds.xMax;toYMin=toBounds.yMin;toYMax=toBounds.yMax;var x=toXMin+(point.x-this.xMin)/(this.xMax-this.xMin)*(toXMax-toXMin);if(x<=Infinity)point.x=x;else point.x=(toXMin+toXMax)/2;var y=toYMin+(point.y-this.yMin)/(this.yMax-this.yMin)*(toYMax-toYMin);if(y<=Infinity)point.y=y;else point.y=(toYMin+toYMax)/2};
weavejs.geom.Bounds2D.prototype.projectCoordsTo=function(coords,toBounds){coords.getMinPoint(weavejs.geom.Bounds2D.tempPoint);this.projectPointTo(weavejs.geom.Bounds2D.tempPoint,toBounds);coords.setMinPoint(weavejs.geom.Bounds2D.tempPoint);coords.getMaxPoint(weavejs.geom.Bounds2D.tempPoint);this.projectPointTo(weavejs.geom.Bounds2D.tempPoint,toBounds);coords.setMaxPoint(weavejs.geom.Bounds2D.tempPoint)};
weavejs.geom.Bounds2D.prototype.constrainPoint=function(point){if(!isNaN(this.xMin)&&!isNaN(this.xMax))point.x=Math.max(Math.min(this.xMin,this.xMax),Math.min(point.x,Math.max(this.xMin,this.xMax)));if(!isNaN(this.yMin)&&!isNaN(this.yMax))point.y=Math.max(Math.min(this.yMin,this.yMax),Math.min(point.y,Math.max(this.yMin,this.yMax)))};weavejs.geom.Bounds2D.tempPoint=new weavejs.geom.Point;weavejs.geom.Bounds2D.staticRange_A=new weavejs.geom.NumericRange;weavejs.geom.Bounds2D.staticRange_B=new weavejs.geom.NumericRange;
weavejs.geom.Bounds2D.prototype.constrainBoundsCenterPoint=function(boundsToConstrain){if(this.isUndefined())return;boundsToConstrain.getCenterPoint(weavejs.geom.Bounds2D.tempPoint);this.constrainPoint(weavejs.geom.Bounds2D.tempPoint);boundsToConstrain.setCenterPoint(weavejs.geom.Bounds2D.tempPoint)};
weavejs.geom.Bounds2D.prototype.constrainBounds=function(boundsToConstrain,preserveSize){preserveSize=typeof preserveSize!=='undefined'?preserveSize:true;if(preserveSize){var b2c=boundsToConstrain;weavejs.geom.Bounds2D.staticRange_A.setRange(this.xMin,this.xMax);weavejs.geom.Bounds2D.staticRange_B.setRange(b2c.xMin,b2c.xMax);weavejs.geom.Bounds2D.staticRange_A.constrainRange(weavejs.geom.Bounds2D.staticRange_B);boundsToConstrain.setXRange(weavejs.geom.Bounds2D.staticRange_B.begin,weavejs.geom.Bounds2D.staticRange_B.end);
weavejs.geom.Bounds2D.staticRange_A.setRange(this.yMin,this.yMax);weavejs.geom.Bounds2D.staticRange_B.setRange(b2c.yMin,b2c.yMax);weavejs.geom.Bounds2D.staticRange_A.constrainRange(weavejs.geom.Bounds2D.staticRange_B);boundsToConstrain.setYRange(weavejs.geom.Bounds2D.staticRange_B.begin,weavejs.geom.Bounds2D.staticRange_B.end)}else{boundsToConstrain.getMinPoint(weavejs.geom.Bounds2D.tempPoint);this.constrainPoint(weavejs.geom.Bounds2D.tempPoint);boundsToConstrain.setMinPoint(weavejs.geom.Bounds2D.tempPoint);
boundsToConstrain.getMaxPoint(weavejs.geom.Bounds2D.tempPoint);this.constrainPoint(weavejs.geom.Bounds2D.tempPoint);boundsToConstrain.setMaxPoint(weavejs.geom.Bounds2D.tempPoint)}};weavejs.geom.Bounds2D.prototype.offset=function(xOffset,yOffset){this.xMin+=xOffset;this.xMax+=xOffset;this.yMin+=yOffset;this.yMax+=yOffset};weavejs.geom.Bounds2D.prototype.getXRange=function(){return[this.xMin,this.xMax]};weavejs.geom.Bounds2D.prototype.getYRange=function(){return[this.yMin,this.yMax]};
weavejs.geom.Bounds2D.prototype.setXRange=function(xMin,xMax){this.xMin=xMin;this.xMax=xMax};weavejs.geom.Bounds2D.prototype.setYRange=function(yMin,yMax){this.yMin=yMin;this.yMax=yMax};weavejs.geom.Bounds2D.prototype.setCenteredXRange=function(xCenter,width){this.xMin=xCenter-width/2;this.xMax=xCenter+width/2};weavejs.geom.Bounds2D.prototype.setCenteredYRange=function(yCenter,height){this.yMin=yCenter-height/2;this.yMax=yCenter+height/2};
weavejs.geom.Bounds2D.prototype.setCenteredRectangle=function(xCenter,yCenter,width,height){this.setCenteredXRange(xCenter,width);this.setCenteredYRange(yCenter,height)};weavejs.geom.Bounds2D.prototype.centeredResize=function(width,height){this.setCenteredXRange(this.getXCenter(),width);this.setCenteredYRange(this.getYCenter(),height)};weavejs.geom.Bounds2D.prototype.getXCenter=function(){return(this.xMin+this.xMax)/2};
weavejs.geom.Bounds2D.prototype.setXCenter=function(xCenter){if(isNaN(this.xMin)||isNaN(this.xMax))this.xMin=this.xMax=xCenter;else{var xShift=xCenter-(this.xMin+this.xMax)/2;this.xMin+=xShift;this.xMax+=xShift}};weavejs.geom.Bounds2D.prototype.getYCenter=function(){return(this.yMin+this.yMax)/2};
weavejs.geom.Bounds2D.prototype.setYCenter=function(yCenter){if(isNaN(this.yMin)||isNaN(this.yMax))this.yMin=this.yMax=yCenter;else{var yShift=yCenter-(this.yMin+this.yMax)/2;this.yMin+=yShift;this.yMax+=yShift}};weavejs.geom.Bounds2D.prototype.getCenterPoint=function(output){output.x=this.getXCenter();output.y=this.getYCenter()};weavejs.geom.Bounds2D.prototype.setCenterPoint=function(value){this.setXCenter(value.x);this.setYCenter(value.y)};
weavejs.geom.Bounds2D.prototype.setCenter=function(xCenter,yCenter){this.setXCenter(xCenter);this.setYCenter(yCenter)};weavejs.geom.Bounds2D.prototype.getMinPoint=function(output){output.x=this.xMin;output.y=this.yMin};weavejs.geom.Bounds2D.prototype.setMinPoint=function(value){this.xMin=value.x;this.yMin=value.y};weavejs.geom.Bounds2D.prototype.getMaxPoint=function(output){output.x=this.xMax;output.y=this.yMax};
weavejs.geom.Bounds2D.prototype.setMaxPoint=function(value){this.xMax=value.x;this.yMax=value.y};weavejs.geom.Bounds2D.prototype.setMinCoords=function(x,y){this.xMin=x;this.yMin=y};weavejs.geom.Bounds2D.prototype.setMaxCoords=function(x,y){this.xMax=x;this.yMax=y};weavejs.geom.Bounds2D.prototype.getXDirection=function(){if(this.xMin>this.xMax)return-1;if(this.xMin<this.xMax)return 1;return 0};
weavejs.geom.Bounds2D.prototype.getYDirection=function(){if(this.yMin>this.yMax)return-1;if(this.yMin<this.yMax)return 1;return 0};weavejs.geom.Bounds2D.prototype.getWidth=function(){var _width=this.xMax-this.xMin;return isNaN(_width)?0:_width};weavejs.geom.Bounds2D.prototype.getHeight=function(){var _height=this.yMax-this.yMin;return isNaN(_height)?0:_height};weavejs.geom.Bounds2D.prototype.setWidth=function(value){this.setCenteredXRange(this.getXCenter(),value)};
weavejs.geom.Bounds2D.prototype.setHeight=function(value){this.setCenteredYRange(this.getYCenter(),value)};weavejs.geom.Bounds2D.prototype.getArea=function(){var area=(this.xMax-this.xMin)*(this.yMax-this.yMin);return area<0?-area:area};weavejs.geom.Bounds2D.prototype.getXCoverage=function(){return this.xMin<this.xMax?this.xMax-this.xMin:this.xMin-this.xMax};weavejs.geom.Bounds2D.prototype.getYCoverage=function(){return this.yMin<this.yMax?this.yMax-this.yMin:this.yMin-this.yMax};
weavejs.geom.Bounds2D.prototype.getXNumericMin=function(){return this.xMax<this.xMin?this.xMax:this.xMin};weavejs.geom.Bounds2D.prototype.getYNumericMin=function(){return this.yMax<this.yMin?this.yMax:this.yMin};weavejs.geom.Bounds2D.prototype.getXNumericMax=function(){return this.xMax<this.xMin?this.xMin:this.xMax};weavejs.geom.Bounds2D.prototype.getYNumericMax=function(){return this.yMax<this.yMin?this.yMin:this.yMax};
weavejs.geom.Bounds2D.prototype.toString=function(){return'(xMin\x3d'+this.xMin+', '+'yMin\x3d'+this.yMin+', '+'xMax\x3d'+this.xMax+', '+'yMax\x3d'+this.yMax+')'};weavejs.geom.Bounds2D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Bounds2D',qName:'weavejs.geom.Bounds2D'}]};goog.exportSymbol('weavejs.geom.Bounds2D',weavejs.geom.Bounds2D);
weavejs.geom.Bounds2D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'xMin':{type:'Number'}}},accessors:function(){return{}},methods:function(){return{'Bounds2D':{type:'',declaredBy:'weavejs.geom.Bounds2D'},'getXMin':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getYMin':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getXMax':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getYMax':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'setXMin':{type:'void',
declaredBy:'weavejs.geom.Bounds2D'},'setYMin':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setXMax':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setYMax':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'copyFrom':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'cloneBounds':{type:'Bounds2D',declaredBy:'weavejs.geom.Bounds2D'},'makeSizePositive':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'reset':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'isUndefined':{type:'Boolean',declaredBy:'weavejs.geom.Bounds2D'},
'isEmpty':{type:'Boolean',declaredBy:'weavejs.geom.Bounds2D'},'equals':{type:'Boolean',declaredBy:'weavejs.geom.Bounds2D'},'setBounds':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setCoords':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getCoords':{type:'Array',declaredBy:'weavejs.geom.Bounds2D'},'setRectangle':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getRectangle':{type:'Rectangle',declaredBy:'weavejs.geom.Bounds2D'},'includePoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},
'includeCoords':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'includeX':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'includeY':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'includeBounds':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'overlaps':{type:'Boolean',declaredBy:'weavejs.geom.Bounds2D'},'containsPoint':{type:'Boolean',declaredBy:'weavejs.geom.Bounds2D'},'contains':{type:'Boolean',declaredBy:'weavejs.geom.Bounds2D'},'containsBounds':{type:'Boolean',declaredBy:'weavejs.geom.Bounds2D'},
'getGridTest':{type:'uint',declaredBy:'weavejs.geom.Bounds2D'},'projectPointTo':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'projectCoordsTo':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'constrainPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'constrainBoundsCenterPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'constrainBounds':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'offset':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getXRange':{type:'Array',declaredBy:'weavejs.geom.Bounds2D'},
'getYRange':{type:'Array',declaredBy:'weavejs.geom.Bounds2D'},'setXRange':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setYRange':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setCenteredXRange':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setCenteredYRange':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setCenteredRectangle':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'centeredResize':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getXCenter':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},
'setXCenter':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getYCenter':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'setYCenter':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getCenterPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setCenterPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setCenter':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getMinPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setMinPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},
'getMaxPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setMaxPoint':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setMinCoords':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setMaxCoords':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getXDirection':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getYDirection':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getWidth':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getHeight':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},
'setWidth':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'setHeight':{type:'void',declaredBy:'weavejs.geom.Bounds2D'},'getArea':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getXCoverage':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getYCoverage':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getXNumericMin':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getYNumericMin':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'getXNumericMax':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},
'getYNumericMax':{type:'Number',declaredBy:'weavejs.geom.Bounds2D'},'toString':{type:'String',declaredBy:'weavejs.geom.Bounds2D'}}}}};goog.provide('weavejs.geom.BLGTree');goog.require('weavejs.geom.BLGNode');goog.require('weavejs.geom.Bounds2D');weavejs.geom.BLGTree=function(){this.operationStack=[];this.nodeStack=[];this.traversalVector=[];this.previousTraversalVisibleBounds=new weavejs.geom.Bounds2D};weavejs.geom.BLGTree.prototype.rootNode=null;
weavejs.geom.BLGTree.prototype.insert=function(index,importance,x,y){if(importance>=this.previousTraversalMinImportance)this.previousTraversalMinImportance=-1;var newNode=new weavejs.geom.BLGNode(index,importance,x,y);this._insert(newNode)};
weavejs.geom.BLGTree.prototype._insert=function(newNode){if(this.rootNode==null){this.rootNode=newNode;return}var currentNode=this.rootNode;while(true){if(currentNode.index==newNode.index){if(newNode.left!=null||newNode.right!=null)throw new Error('BLGNode.insert: new node with children has index identical to an existing node');return}if(newNode.importance>currentNode.importance){var tempIndex=currentNode.index;var tempImportance=currentNode.importance;var tempX=currentNode.x;var tempY=currentNode.y;
var tempLeft=currentNode.left;var tempRight=currentNode.right;currentNode.index=newNode.index;currentNode.importance=newNode.importance;currentNode.x=newNode.x;currentNode.y=newNode.y;currentNode.left=newNode.left;currentNode.right=newNode.right;newNode.index=tempIndex;newNode.importance=tempImportance;newNode.x=tempX;newNode.y=tempY;newNode.left=tempLeft;newNode.right=tempRight}if(newNode.index<currentNode.index){if(currentNode.left!=null){currentNode=currentNode.left;continue}currentNode.left=newNode;
newNode=newNode.right;currentNode.left.right=null;break}else{if(currentNode.right!=null){currentNode=currentNode.right;continue}currentNode.right=newNode;newNode=newNode.left;currentNode.right.left=null;break}}var leftTraversalNode=currentNode;var rightTraversalNode=currentNode;while(newNode!=null)if(newNode.index<currentNode.index){if(newNode.index<leftTraversalNode.index){if(leftTraversalNode.left!=null){leftTraversalNode=leftTraversalNode.left;continue}leftTraversalNode.left=newNode;newNode=newNode.right;
leftTraversalNode.left.right=null;continue}if(leftTraversalNode.right!=null){leftTraversalNode=leftTraversalNode.right;continue}leftTraversalNode.right=newNode;newNode=newNode.right;leftTraversalNode.right.right=null}else{if(newNode.index>rightTraversalNode.index){if(rightTraversalNode.right!=null){rightTraversalNode=rightTraversalNode.right;continue}rightTraversalNode.right=newNode;newNode=newNode.left;rightTraversalNode.right.left=null;continue}if(rightTraversalNode.left!=null){rightTraversalNode=
rightTraversalNode.left;continue}rightTraversalNode.left=newNode;newNode=newNode.left;rightTraversalNode.left.left=null}};weavejs.geom.BLGTree.prototype.operationStack;weavejs.geom.BLGTree.prototype.nodeStack;weavejs.geom.BLGTree.OP_VISIT=0;weavejs.geom.BLGTree.OP_TRAVERSE=1;
weavejs.geom.BLGTree.prototype.getPointVector=function(minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;if(minImportance==this.previousTraversalMinImportance&&this.previousTraversalVisibleBounds.equals(visibleBounds))return this.traversalVector;var resultCount=0;if(this.rootNode!=null){this.operationStack[0]=weavejs.geom.BLGTree.OP_TRAVERSE;this.nodeStack[0]=this.rootNode;var prevPrevGridTest=
0;var prevGridTest=0;var gridTest;var stackPos=0;var node;var operation;while(stackPos>=0){node=this.nodeStack[stackPos];operation=this.operationStack[stackPos];this.nodeStack[stackPos]=null;this.operationStack[stackPos]=null;stackPos--;if(operation==weavejs.geom.BLGTree.OP_TRAVERSE){if(node.importance<minImportance)continue;if(node.right!=null){stackPos++;this.operationStack[stackPos]=weavejs.geom.BLGTree.OP_TRAVERSE;this.nodeStack[stackPos]=node.right}stackPos++;this.operationStack[stackPos]=weavejs.geom.BLGTree.OP_VISIT;
this.nodeStack[stackPos]=node;if(node.left!=null){stackPos++;this.operationStack[stackPos]=weavejs.geom.BLGTree.OP_TRAVERSE;this.nodeStack[stackPos]=node.left}}else{if(visibleBounds!=null){gridTest=visibleBounds.getGridTest(node.x,node.y);if(prevPrevGridTest&prevGridTest&gridTest)resultCount--;else prevPrevGridTest=prevGridTest;prevGridTest=gridTest}this.traversalVector[resultCount++]=node}}}this.traversalVector.length=resultCount;this.previousTraversalMinImportance=minImportance;this.previousTraversalVisibleBounds.copyFrom(visibleBounds);
return this.traversalVector};weavejs.geom.BLGTree.prototype.traversalVector;weavejs.geom.BLGTree.prototype.previousTraversalMinImportance=-1;weavejs.geom.BLGTree.prototype.previousTraversalVisibleBounds;weavejs.geom.BLGTree.assertTrue=function(bool){if(!bool)throw new Error('Assertion failed');};
weavejs.geom.BLGTree.assertValid=function(node,assertNode){if(!node)return;assertNode(node);if(node.left){weavejs.geom.BLGTree.assertTrue(node.left.index<node.index);weavejs.geom.BLGTree.assertValid(node.left,assertNode)}if(node.right){weavejs.geom.BLGTree.assertTrue(node.index<node.right.index);weavejs.geom.BLGTree.assertValid(node.right,assertNode)}};
weavejs.geom.BLGTree.prototype.splitAtIndex=function(splitIndex){this.previousTraversalMinImportance=-1;this.traversalVector.length=0;var newTree=new weavejs.geom.BLGTree;while(true){var parent=null;var subtree=this.rootNode;while(subtree&&subtree.index<splitIndex){parent=subtree;subtree=subtree.right}if(!subtree)break;if(parent)parent.right=null;else this.rootNode=null;newTree._insert(subtree);parent=null;subtree=newTree.rootNode;while(subtree&&subtree.index>=splitIndex){parent=subtree;subtree=subtree.left}if(!subtree)break;
if(parent)parent.left=null;else newTree.rootNode=null;this._insert(subtree)}return newTree};weavejs.geom.BLGTree.prototype.clear=function(){this.rootNode=null;this.traversalVector.length=0;this.previousTraversalMinImportance=-1};Object.defineProperties(weavejs.geom.BLGTree.prototype,{isEmpty:{get:function(){return this.rootNode==null}}});weavejs.geom.BLGTree.prototype.FLEXJS_CLASS_INFO={names:[{name:'BLGTree',qName:'weavejs.geom.BLGTree'}]};goog.exportSymbol('weavejs.geom.BLGTree',weavejs.geom.BLGTree);
weavejs.geom.BLGTree.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'isEmpty':{type:'Boolean',declaredBy:'weavejs.geom.BLGTree'}}},methods:function(){return{'BLGTree':{type:'',declaredBy:'weavejs.geom.BLGTree'},'insert':{type:'void',declaredBy:'weavejs.geom.BLGTree'},'getPointVector':{type:'Array',declaredBy:'weavejs.geom.BLGTree'},'splitAtIndex':{type:'BLGTree',declaredBy:'weavejs.geom.BLGTree'},'clear':{type:'void',declaredBy:'weavejs.geom.BLGTree'}}}}};goog.provide('weavejs.geom.VertexChainLink');weavejs.geom.VertexChainLink=function(vertexID,x,y){this.initialize(vertexID,x,y)};weavejs.geom.VertexChainLink.prototype.initialize=function(vertexID,x,y){this.vertexID=vertexID;this.x=x;this.y=y;this.importance=-1;this.importanceIsValid=false;this.prev=this;this.next=this};weavejs.geom.VertexChainLink.prototype.vertexID;weavejs.geom.VertexChainLink.prototype.x;weavejs.geom.VertexChainLink.prototype.y;weavejs.geom.VertexChainLink.prototype.importance;
weavejs.geom.VertexChainLink.prototype.prev;weavejs.geom.VertexChainLink.prototype.next;weavejs.geom.VertexChainLink.prototype.importanceIsValid;weavejs.geom.VertexChainLink.prototype.insert=function(newVertex){this.prev.next=newVertex;newVertex.prev=this.prev;newVertex.next=this;this.prev=newVertex};weavejs.geom.VertexChainLink.prototype.equals2D=function(other){return this.x==other.x&&this.y==other.y};
weavejs.geom.VertexChainLink.prototype.removeFromChain=function(){this.prev.promoteAndInvalidateImportance(this.importance);this.next.promoteAndInvalidateImportance(this.importance);this.prev.next=this.next;this.next.prev=this.prev;this.prev=this;this.next=this;weavejs.geom.VertexChainLink.saveUnusedInstance(this)};weavejs.geom.VertexChainLink.prototype.promoteAndInvalidateImportance=function(minImportance){this.importance=Math.max(this.importance,minImportance);this.importanceIsValid=false};
weavejs.geom.VertexChainLink.prototype.validateImportance=function(){this.importanceIsValid=true;if(this.importance==Infinity)return;var area=this.areaOfTriangle(this.prev,this,this.next);this.importance=Math.max(this.importance,area)};weavejs.geom.VertexChainLink.prototype.areaOfTriangle=function(a,b,c){var signedArea=((b.x-a.x)*(c.y-a.y)-(c.x-a.x)*(b.y-a.y))/2;if(signedArea<0)return-signedArea;return signedArea};weavejs.geom.VertexChainLink.unusedInstances=[];
weavejs.geom.VertexChainLink.getUnusedInstance=function(vertexID,x,y){if(weavejs.geom.VertexChainLink.unusedInstances.length>0){var link=weavejs.geom.VertexChainLink.unusedInstances.pop();link.initialize(vertexID,x,y)}return new weavejs.geom.VertexChainLink(vertexID,x,y)};weavejs.geom.VertexChainLink.saveUnusedInstance=function(vertex){vertex.prev=vertex.next=null;weavejs.geom.VertexChainLink.unusedInstances.push(vertex)};
weavejs.geom.VertexChainLink.clearUnusedInstances=function(){weavejs.geom.VertexChainLink.unusedInstances.length=0};weavejs.geom.VertexChainLink.IMPORTANCE='importance';weavejs.geom.VertexChainLink.prototype.FLEXJS_CLASS_INFO={names:[{name:'VertexChainLink',qName:'weavejs.geom.VertexChainLink'}]};goog.exportSymbol('weavejs.geom.VertexChainLink',weavejs.geom.VertexChainLink);
weavejs.geom.VertexChainLink.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'vertexID':{type:'int'},'x':{type:'Number'},'y':{type:'Number'},'importance':{type:'Number'},'prev':{type:'VertexChainLink'},'next':{type:'VertexChainLink'},'importanceIsValid':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'VertexChainLink':{type:'',declaredBy:'weavejs.geom.VertexChainLink'},'initialize':{type:'void',declaredBy:'weavejs.geom.VertexChainLink'},'insert':{type:'void',
declaredBy:'weavejs.geom.VertexChainLink'},'equals2D':{type:'Boolean',declaredBy:'weavejs.geom.VertexChainLink'},'removeFromChain':{type:'void',declaredBy:'weavejs.geom.VertexChainLink'},'validateImportance':{type:'void',declaredBy:'weavejs.geom.VertexChainLink'}}}}};goog.provide('weavejs.geom.BLGTreeUtils');goog.require('weavejs.geom.VertexChainLink');weavejs.geom.BLGTreeUtils=function(){};weavejs.geom.BLGTreeUtils.METHOD_SORT='BLGTreeUtils.METHOD_SORT';weavejs.geom.BLGTreeUtils.METHOD_SAMPLE='BLGTreeUtils.METHOD_SAMPLE';
weavejs.geom.BLGTreeUtils.buildBLGTree=function(vertexChain,output,method){method=typeof method!=='undefined'?method:null;switch(method){case weavejs.geom.BLGTreeUtils.METHOD_SORT:return weavejs.geom.BLGTreeUtils.buildBLGTreeSortMethod(vertexChain,output);case weavejs.geom.BLGTreeUtils.METHOD_SAMPLE:return weavejs.geom.BLGTreeUtils.buildBLGTreeSampleMethod(vertexChain,output);default:}};weavejs.geom.BLGTreeUtils.tempBounds=new weavejs.geom.Bounds2D;
weavejs.geom.BLGTreeUtils.buildBLGTreeSortMethod=function(firstVertex,outputCoordinates){var startingChainLength=0;var vertex=firstVertex;weavejs.geom.BLGTreeUtils.tempBounds.reset();do{weavejs.geom.BLGTreeUtils.tempBounds.includeCoords(vertex.x,vertex.y);startingChainLength++;vertex=vertex.next}while(vertex!=firstVertex);var maxImportance=weavejs.geom.BLGTreeUtils.tempBounds.getArea();if(maxImportance==0){var length=weavejs.geom.BLGTreeUtils.tempBounds.getWidth()+weavejs.geom.BLGTreeUtils.tempBounds.getHeight();
if(length>0)maxImportance=length*length;else maxImportance=Infinity}var minSize=2;var sortArray=[];var index;var currentChainLength=startingChainLength;while(startingChainLength>minSize){sortArray.length=startingChainLength;vertex=firstVertex;for(index=0;index<startingChainLength;index++){vertex.validateImportance();sortArray[index]=vertex;vertex=vertex.next}weavejs.util.StandardLib.sortOn(sortArray,weavejs.geom.VertexChainLink.IMPORTANCE);for(index=0;index<startingChainLength&&currentChainLength>
minSize;index++){vertex=sortArray[index];if(!vertex.importanceIsValid)continue;firstVertex=vertex.next;outputCoordinates.insert(vertex.vertexID,vertex.importance,vertex.x,vertex.y);vertex.removeFromChain();currentChainLength--}startingChainLength=currentChainLength}for(index=0;index<startingChainLength;index++){vertex=firstVertex.next;outputCoordinates.insert(vertex.vertexID,maxImportance,vertex.x,vertex.y);vertex.removeFromChain()}};
weavejs.geom.BLGTreeUtils.buildBLGTreeSampleMethod=function(firstVertex,output,sampleInterval){sampleInterval=typeof sampleInterval!=='undefined'?sampleInterval:3;var tree=output;var vertex=firstVertex;var chainLength=0;do{chainLength++;vertex=vertex.next}while(vertex!=firstVertex);while(chainLength!=0){for(var i=0;i<sampleInterval-1;i++)vertex=vertex.next;vertex.next.validateImportance();output.insert(vertex.next.vertexID,vertex.next.importance,vertex.next.x,vertex.next.y);vertex.next.removeFromChain();
chainLength--}};weavejs.geom.BLGTreeUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'BLGTreeUtils',qName:'weavejs.geom.BLGTreeUtils'}]};goog.exportSymbol('weavejs.geom.BLGTreeUtils',weavejs.geom.BLGTreeUtils);weavejs.geom.BLGTreeUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.geom.GeometryType');weavejs.geom.GeometryType=function(){};weavejs.geom.GeometryType.POINT='Point';weavejs.geom.GeometryType.LINE='Arc';weavejs.geom.GeometryType.POLYGON='Polygon';
weavejs.geom.GeometryType.fromGeoJsonType=function(type){switch(type){case weavejs.geom.GeoJSON.T_MULTI_POINT:case weavejs.geom.GeoJSON.T_POINT:return weavejs.geom.GeometryType.POINT;case weavejs.geom.GeoJSON.T_MULTI_LINE_STRING:case weavejs.geom.GeoJSON.T_LINE_STRING:return weavejs.geom.GeometryType.LINE;case weavejs.geom.GeoJSON.T_MULTI_POLYGON:case weavejs.geom.GeoJSON.T_POLYGON:return weavejs.geom.GeometryType.POLYGON;default:return null}};
weavejs.geom.GeometryType.toGeoJsonType=function(type,multi){if(type==weavejs.geom.GeometryType.POINT)return multi?weavejs.geom.GeoJSON.T_MULTI_POINT:weavejs.geom.GeoJSON.T_POINT;if(type==weavejs.geom.GeometryType.LINE)return multi?weavejs.geom.GeoJSON.T_MULTI_LINE_STRING:weavejs.geom.GeoJSON.T_LINE_STRING;if(type==weavejs.geom.GeometryType.POLYGON)return multi?weavejs.geom.GeoJSON.T_MULTI_POLYGON:weavejs.geom.GeoJSON.T_POLYGON;return null};
weavejs.geom.GeometryType.fromPostGISType=function(postGISType){switch(postGISType){case 1:case 4:return weavejs.geom.GeometryType.POINT;break;case 2:case 5:return weavejs.geom.GeometryType.LINE;break;case 3:case 6:return weavejs.geom.GeometryType.POLYGON;break;default:return null}};weavejs.geom.GeometryType.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeometryType',qName:'weavejs.geom.GeometryType'}]};goog.exportSymbol('weavejs.geom.GeometryType',weavejs.geom.GeometryType);
weavejs.geom.GeometryType.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.ISimpleGeometry');weavejs.api.data.ISimpleGeometry=function(){};weavejs.api.data.ISimpleGeometry.prototype.isLine=function(){};weavejs.api.data.ISimpleGeometry.prototype.isPoint=function(){};weavejs.api.data.ISimpleGeometry.prototype.isPolygon=function(){};weavejs.api.data.ISimpleGeometry.prototype.getVertices=function(){};weavejs.api.data.ISimpleGeometry.prototype.setVertices=function(o){};
weavejs.api.data.ISimpleGeometry.prototype.FLEXJS_CLASS_INFO={names:[{name:'ISimpleGeometry',qName:'weavejs.api.data.ISimpleGeometry'}]};
weavejs.api.data.ISimpleGeometry.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'isLine':{type:'Boolean',declaredBy:'weavejs.api.data.ISimpleGeometry'},'isPoint':{type:'Boolean',declaredBy:'weavejs.api.data.ISimpleGeometry'},'isPolygon':{type:'Boolean',declaredBy:'weavejs.api.data.ISimpleGeometry'},'getVertices':{type:'Array',declaredBy:'weavejs.api.data.ISimpleGeometry'},'setVertices':{type:'void',declaredBy:'weavejs.api.data.ISimpleGeometry'}}}}};goog.provide('weavejs.geom.SimpleGeometry');goog.require('weavejs.api.data.ISimpleGeometry');weavejs.geom.SimpleGeometry=function(type,points){type=typeof type!=='undefined'?type:'Polygon';points=typeof points!=='undefined'?points:null;this.bounds=new weavejs.geom.Bounds2D;this._type=type;if(points)this.setVertices(points)};weavejs.geom.SimpleGeometry.prototype.getVertices=function(){return this._vertices};
weavejs.geom.SimpleGeometry.prototype.setVertices=function(points){this._vertices=points.concat();this.bounds.reset();var foreachiter0_target=this._vertices;for(var foreachiter0 in foreachiter0_target){var obj=foreachiter0_target[foreachiter0];this.bounds.includeCoords(obj.x,obj.y)}};weavejs.geom.SimpleGeometry.prototype.isPolygon=function(){return this._type==weavejs.geom.GeometryType.POLYGON};weavejs.geom.SimpleGeometry.prototype.isLine=function(){return this._type==weavejs.geom.GeometryType.LINE};
weavejs.geom.SimpleGeometry.prototype.isPoint=function(){return this._type==weavejs.geom.GeometryType.POINT};weavejs.geom.SimpleGeometry.prototype.bounds;weavejs.geom.SimpleGeometry.prototype._vertices=null;weavejs.geom.SimpleGeometry.prototype._type='';
weavejs.geom.SimpleGeometry.getNewGeometryFromBounds=function(bounds){var xMin=bounds.getXMin();var xMax=bounds.getXMax();var yMin=bounds.getYMin();var yMax=bounds.getYMax();var geom=new weavejs.geom.SimpleGeometry(weavejs.geom.GeometryType.POLYGON);geom.setVertices([new weavejs.geom.Point(xMin,yMin),new weavejs.geom.Point(xMax,yMin),new weavejs.geom.Point(xMax,yMax),new weavejs.geom.Point(xMin,yMax)]);return geom};
weavejs.geom.SimpleGeometry.prototype.FLEXJS_CLASS_INFO={names:[{name:'SimpleGeometry',qName:'weavejs.geom.SimpleGeometry'}],interfaces:[weavejs.api.data.ISimpleGeometry]};goog.exportSymbol('weavejs.geom.SimpleGeometry',weavejs.geom.SimpleGeometry);
weavejs.geom.SimpleGeometry.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'bounds':{type:'Bounds2D'}}},accessors:function(){return{}},methods:function(){return{'SimpleGeometry':{type:'',declaredBy:'weavejs.geom.SimpleGeometry'},'getVertices':{type:'Array',declaredBy:'weavejs.geom.SimpleGeometry'},'setVertices':{type:'void',declaredBy:'weavejs.geom.SimpleGeometry'},'isPolygon':{type:'Boolean',declaredBy:'weavejs.geom.SimpleGeometry'},'isLine':{type:'Boolean',declaredBy:'weavejs.geom.SimpleGeometry'},
'isPoint':{type:'Boolean',declaredBy:'weavejs.geom.SimpleGeometry'}}}}};goog.provide('weavejs.geom.GeneralizedGeometry');goog.require('weavejs.geom.BLGTree');goog.require('weavejs.geom.BLGTreeUtils');goog.require('weavejs.geom.Bounds2D');goog.require('weavejs.geom.GeometryType');goog.require('weavejs.geom.SimpleGeometry');goog.require('weavejs.geom.VertexChainLink');
weavejs.geom.GeneralizedGeometry=function(geomType){geomType=typeof geomType!=='undefined'?geomType:'Polygon';this.partMarkers=[];this.map_blgTree_receivedPartMarker=new weavejs.util.JS.WeakMap;this.parts=[];this.bounds=new weavejs.geom.Bounds2D;this._simplifiedParts=[];this.geomType=geomType;this.parts[0]=new weavejs.geom.BLGTree};
weavejs.geom.GeneralizedGeometry.fromGeoJson=function(geoJsonGeom){var type=geoJsonGeom[weavejs.geom.GeoJSON.P_TYPE];var coords=geoJsonGeom[weavejs.geom.GeoJSON.G_P_COORDINATES];if(type==weavejs.geom.GeoJSON.T_POINT)type=weavejs.geom.GeometryType.POINT,coords=[[[coords]]];else if(type==weavejs.geom.GeoJSON.T_MULTI_POINT)type=weavejs.geom.GeometryType.POINT,coords=[[coords]];else if(type==weavejs.geom.GeoJSON.T_LINE_STRING)type=weavejs.geom.GeometryType.LINE,coords=[[coords]];else if(type==weavejs.geom.GeoJSON.T_MULTI_LINE_STRING)type=
weavejs.geom.GeometryType.LINE,coords=[coords];else if(type==weavejs.geom.GeoJSON.T_POLYGON)type=weavejs.geom.GeometryType.POLYGON,coords=[coords];else if(type==weavejs.geom.GeoJSON.T_MULTI_POLYGON)type=weavejs.geom.GeometryType.POLYGON;var result=[];var foreachiter0_target=coords;for(var foreachiter0 in foreachiter0_target){var poly=foreachiter0_target[foreachiter0];var geom=new weavejs.geom.GeneralizedGeometry(type);var xyCoords=[];var foreachiter1_target=poly;for(var foreachiter1 in foreachiter1_target){var part=
foreachiter1_target[foreachiter1];if(xyCoords.length>0)xyCoords.push(NaN,NaN);var foreachiter2_target=part;for(var foreachiter2 in foreachiter2_target){var point=foreachiter2_target[foreachiter2];xyCoords.push(point[0],point[1])}}geom.setCoordinates(xyCoords,weavejs.geom.BLGTreeUtils.METHOD_SAMPLE);result.push(geom)}return result};
weavejs.geom.GeneralizedGeometry.prototype.toGeoJson=function(minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;var type=weavejs.geom.GeometryType.toGeoJsonType(this.geomType,true);var coords=[];var parts=this.getSimplifiedGeometry(minImportance,visibleBounds);var part;var node;if(type==weavejs.geom.GeoJSON.T_MULTI_POINT){var foreachiter3_target=parts;for(var foreachiter3 in foreachiter3_target){part=
foreachiter3_target[foreachiter3];var foreachiter4_target=part;for(var foreachiter4 in foreachiter4_target){node=foreachiter4_target[foreachiter4];coords.push([node.x,node.y])}}}else if(type==weavejs.geom.GeoJSON.T_MULTI_LINE_STRING){var foreachiter5_target=parts;for(var foreachiter5 in foreachiter5_target){part=foreachiter5_target[foreachiter5];var lineString=[];var foreachiter6_target=part;for(var foreachiter6 in foreachiter6_target){node=foreachiter6_target[foreachiter6];lineString.push([node.x,
node.y])}if(lineString.length)coords.push(lineString)}}else if(type==weavejs.geom.GeoJSON.T_MULTI_POLYGON){var polygon=[];var foreachiter7_target=parts;for(var foreachiter7 in foreachiter7_target){part=foreachiter7_target[foreachiter7];var linearRing=[];var foreachiter8_target=part;for(var foreachiter8 in foreachiter8_target){node=foreachiter8_target[foreachiter8];linearRing.push([node.x,node.y])}var first=linearRing[0];var last=linearRing[linearRing.length-1];if(first&&!(first[0]==last[0]&&first[1]==
last[1]))linearRing.push(first.concat());if(linearRing.length)polygon.push(linearRing)}if(polygon.length)coords.push(polygon)}if(!coords.length)return null;var geom={};geom[weavejs.geom.GeoJSON.P_TYPE]=type;geom[weavejs.geom.GeoJSON.G_P_COORDINATES]=coords;return geom};weavejs.geom.GeneralizedGeometry.prototype.partMarkers;weavejs.geom.GeneralizedGeometry.prototype.map_blgTree_receivedPartMarker;weavejs.geom.GeneralizedGeometry.prototype.parts;weavejs.geom.GeneralizedGeometry.prototype.bounds;weavejs.geom.GeneralizedGeometry.prototype.geomType;
weavejs.geom.GeneralizedGeometry.prototype.isLine=function(){return this.geomType==weavejs.geom.GeometryType.LINE};weavejs.geom.GeneralizedGeometry.prototype.isPoint=function(){return this.geomType==weavejs.geom.GeometryType.POINT};weavejs.geom.GeneralizedGeometry.prototype.isPolygon=function(){return this.geomType==weavejs.geom.GeometryType.POLYGON};
weavejs.geom.GeneralizedGeometry.prototype.getSimpleGeometries=function(minImportance,visibleBounds,output){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;output=typeof output!=='undefined'?output:null;var result=output||[];var parts=this.getSimplifiedGeometry(minImportance,visibleBounds);for(var i=0;i<parts.length;i++){var part=parts[i];var geom=org.apache.flex.utils.Language.as(result[i],weavejs.api.data.ISimpleGeometry)||
new weavejs.geom.SimpleGeometry(this.geomType);geom.setVertices(weavejs.util.ArrayUtils.copy(part,[]));result[i]=geom}return result};
weavejs.geom.GeneralizedGeometry.prototype.getSimplifiedGeometry=function(minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;if(visibleBounds&&visibleBounds.containsBounds(this.bounds))visibleBounds=null;this._simplifiedParts.length=0;var part;for(var i=0;i<this.parts.length;i++){part=org.apache.flex.utils.Language.as(this.parts[i],weavejs.geom.BLGTree);if(this.parts.length>1&&!this.map_blgTree_receivedPartMarker.get(part))continue;
var simplifiedPart=part.getPointVector(minImportance,visibleBounds);if(simplifiedPart.length==0)continue;if(simplifiedPart.length==1&&this.geomType!=weavejs.geom.GeometryType.POINT)continue;if(simplifiedPart.length==2&&this.geomType==weavejs.geom.GeometryType.POLYGON)continue;this._simplifiedParts.push(simplifiedPart)}return this._simplifiedParts};weavejs.geom.GeneralizedGeometry.prototype._simplifiedParts;
weavejs.geom.GeneralizedGeometry.prototype.addPoint=function(vertexID,importance,x,y){var partID=weavejs.util.ArrayUtils.binarySearch(this.partMarkers,vertexID,false);if(partID<this.partMarkers.length&&this.partMarkers[partID]==vertexID)partID++;var part=org.apache.flex.utils.Language.as(this.parts[partID],weavejs.geom.BLGTree);part.insert(vertexID,importance,x,y)};
weavejs.geom.GeneralizedGeometry.prototype.addPartMarker=function(beginIndex,endIndex){this.splitAtIndex(beginIndex);this.splitAtIndex(endIndex);var partID=weavejs.util.ArrayUtils.binarySearch(this.partMarkers,endIndex,false);var part=org.apache.flex.utils.Language.as(this.parts[partID],weavejs.geom.BLGTree);this.map_blgTree_receivedPartMarker.set(part,true)};
weavejs.geom.GeneralizedGeometry.prototype.splitAtIndex=function(vertexID){if(vertexID<=0||vertexID>=Number.MAX_VALUE||weavejs.util.ArrayUtils.binarySearch(this.partMarkers,vertexID,true)>=0)return;for(var i=this.partMarkers.length;i>0;i--){if(vertexID>this.partMarkers[i-1])break;this.partMarkers[i]=this.partMarkers[i-1];this.parts[i+1]=this.parts[i]}this.partMarkers[i]=vertexID;this.parts[i+1]=org.apache.flex.utils.Language.as(this.parts[i],weavejs.geom.BLGTree).splitAtIndex(vertexID)};
weavejs.geom.GeneralizedGeometry.prototype.setCoordinates=function(xyCoordinates,method){method=typeof method!=='undefined'?method:'BLGTreeUtils.METHOD_SAMPLE';this.bounds.reset();this.partMarkers.length=0;this.parts.length=1;var coordinates=org.apache.flex.utils.Language.as(this.parts[0],weavejs.geom.BLGTree);coordinates.clear();this.map_blgTree_receivedPartMarker.set(coordinates,true);var firstVertex=null;var newVertex;var x,y;var firstVertexID=0;var ix=0;if(this.geomType==weavejs.geom.GeometryType.POINT){for(;ix+
1<xyCoordinates.length;ix+=2){x=xyCoordinates[ix];y=xyCoordinates[ix+1];coordinates.insert(ix/2,Infinity,x,y);this.bounds.includeCoords(x,y)}return}while(ix+1<xyCoordinates.length){var numPoints=0;for(;ix+1<xyCoordinates.length;ix+=2){x=xyCoordinates[ix];y=xyCoordinates[ix+1];if(isNaN(x)&&isNaN(y)){if(numPoints>0){ix+=2;break}continue}if(!isFinite(x)||!isFinite(y))continue;newVertex=weavejs.geom.VertexChainLink.getUnusedInstance(firstVertexID+numPoints,x,y);if(numPoints==0)firstVertex=newVertex;else{if(newVertex.equals2D(firstVertex.prev)){weavejs.geom.VertexChainLink.saveUnusedInstance(newVertex);
continue}if(newVertex.equals2D(firstVertex)){ix+=2;weavejs.geom.VertexChainLink.saveUnusedInstance(newVertex);break}firstVertex.insert(newVertex)}this.bounds.includeCoords(x,y);numPoints++}if(numPoints>0){if(this.geomType==weavejs.geom.GeometryType.LINE&&numPoints>0){firstVertex.importance=Infinity;firstVertex.prev.importance=Infinity}if(firstVertexID>0){coordinates=new weavejs.geom.BLGTree;this.map_blgTree_receivedPartMarker.set(coordinates,true);this.parts.push(coordinates);this.partMarkers.push(firstVertexID)}weavejs.geom.BLGTreeUtils.buildBLGTree(firstVertex,
coordinates,method)}firstVertexID+=numPoints}};Object.defineProperties(weavejs.geom.GeneralizedGeometry.prototype,{isEmpty:{get:function(){if(this.partMarkers.length>0)return false;return org.apache.flex.utils.Language.as(this.parts[0],weavejs.geom.BLGTree).isEmpty}}});weavejs.geom.GeneralizedGeometry.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeneralizedGeometry',qName:'weavejs.geom.GeneralizedGeometry'}]};goog.exportSymbol('weavejs.geom.GeneralizedGeometry',weavejs.geom.GeneralizedGeometry);
weavejs.geom.GeneralizedGeometry.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'bounds':{type:'Bounds2D'},'geomType':{type:'String'}}},accessors:function(){return{'isEmpty':{type:'Boolean',declaredBy:'weavejs.geom.GeneralizedGeometry'}}},methods:function(){return{'GeneralizedGeometry':{type:'',declaredBy:'weavejs.geom.GeneralizedGeometry'},'toGeoJson':{type:'Object',declaredBy:'weavejs.geom.GeneralizedGeometry'},'isLine':{type:'Boolean',declaredBy:'weavejs.geom.GeneralizedGeometry'},
'isPoint':{type:'Boolean',declaredBy:'weavejs.geom.GeneralizedGeometry'},'isPolygon':{type:'Boolean',declaredBy:'weavejs.geom.GeneralizedGeometry'},'getSimpleGeometries':{type:'Array',declaredBy:'weavejs.geom.GeneralizedGeometry'},'getSimplifiedGeometry':{type:'Array',declaredBy:'weavejs.geom.GeneralizedGeometry'},'addPoint':{type:'void',declaredBy:'weavejs.geom.GeneralizedGeometry'},'addPartMarker':{type:'void',declaredBy:'weavejs.geom.GeneralizedGeometry'},'setCoordinates':{type:'void',declaredBy:'weavejs.geom.GeneralizedGeometry'}}}}};goog.provide('weavejs.data.column.GeometryColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.geom.GeneralizedGeometry');goog.require('weavejs.api.data.IBaseColumn');
weavejs.data.column.GeometryColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this.map_key_geomArray=new weavejs.util.JS.WeakMap;this._geometryVector=[];this._geometryToIndexMapping=new weavejs.util.JS.WeakMap;this._uniqueKeys=new Array;weavejs.data.column.GeometryColumn.base(this,'constructor',metadata)};goog.inherits(weavejs.data.column.GeometryColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.GeometryColumn.prototype.map_key_geomArray;weavejs.data.column.GeometryColumn.prototype._geometryVector;
weavejs.data.column.GeometryColumn.prototype._geometryToIndexMapping;weavejs.data.column.GeometryColumn.prototype._uniqueKeys;weavejs.data.column.GeometryColumn.prototype.containsKey=function(key){return this.map_key_geomArray.has(key)};
weavejs.data.column.GeometryColumn.prototype.setRecords=function(keys,geometries){if(this._geometryVector.length>0){this.map_key_geomArray=new weavejs.util.JS.WeakMap;this._geometryToIndexMapping=new weavejs.util.JS.WeakMap}if(keys.length!=geometries.length){weavejs.util.JS.error('number of keys does not match number of geometires in GeometryColumn.setGeometries()');return}var geom;var key;var uniqueKeyIndex=0;for(var geomIndex=0;geomIndex<geometries.length;geomIndex++){geom=org.apache.flex.utils.Language.as(geometries[geomIndex],
weavejs.geom.GeneralizedGeometry);key=org.apache.flex.utils.Language.as(keys[geomIndex],weavejs.api.data.IQualifiedKey);this._geometryVector[geomIndex]=geom;if(!this.map_key_geomArray.has(key)){this.map_key_geomArray.set(key,[geom]);this._uniqueKeys[uniqueKeyIndex]=key;uniqueKeyIndex++}else org.apache.flex.utils.Language.as(this.map_key_geomArray.get(key),Array).push(geom);this._geometryToIndexMapping[geom]=geomIndex}this._geometryVector.length=geometries.length;this._uniqueKeys.length=uniqueKeyIndex;
this.triggerCallbacks()};
weavejs.data.column.GeometryColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var value=this.map_key_geomArray.get(key);if(dataType==Boolean)value=org.apache.flex.utils.Language.is(value,Array);else if(dataType==Number){var sum=org.apache.flex.utils.Language.is(value,Array)?0:NaN;var foreachiter0_target=value;for(var foreachiter0 in foreachiter0_target){var geom=foreachiter0_target[foreachiter0];sum+=geom.bounds.getArea()}value=sum}else if(dataType==
String)value=value?'Geometry('+key.keyType+'#'+key.localName+')':undefined;return value};Object.defineProperties(weavejs.data.column.GeometryColumn.prototype,{keys:{get:function(){return this._uniqueKeys}}});weavejs.data.column.GeometryColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeometryColumn',qName:'weavejs.data.column.GeometryColumn'}],interfaces:[weavejs.api.data.IBaseColumn]};goog.exportSymbol('weavejs.data.column.GeometryColumn',weavejs.data.column.GeometryColumn);
weavejs.data.column.GeometryColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.GeometryColumn'}}},methods:function(){return{'GeometryColumn':{type:'',declaredBy:'weavejs.data.column.GeometryColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.GeometryColumn'},'setRecords':{type:'void',declaredBy:'weavejs.data.column.GeometryColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.GeometryColumn'}}}}};goog.provide('weavejs.data.column.KeyColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');weavejs.data.column.KeyColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString);weavejs.data.column.KeyColumn.base(this,'constructor',metadata||{})};goog.inherits(weavejs.data.column.KeyColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.KeyColumn.csvParser;
weavejs.data.column.KeyColumn.prototype.getMetadata=function(propertyName){if(propertyName==weavejs.api.data.ColumnMetadata.TITLE){var kt=this.keyType.value;if(kt)return Weave.lang('Key ({0})',kt);return Weave.lang('Key')}if(propertyName==weavejs.api.data.ColumnMetadata.KEY_TYPE)return this.keyType.value;return weavejs.data.column.KeyColumn.base(this,'getMetadata',propertyName)};
weavejs.data.column.KeyColumn.prototype.getMetadataPropertyNames=function(){return weavejs.util.ArrayUtils.union(weavejs.data.column.KeyColumn.base(this,'getMetadataPropertyNames'),[weavejs.api.data.ColumnMetadata.TITLE,weavejs.api.data.ColumnMetadata.KEY_TYPE])};weavejs.data.column.KeyColumn.prototype.keyType;
weavejs.data.column.KeyColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var kt=this.keyType.value;if(kt&&key.keyType!=kt)return weavejs.data.EquationColumnLib.cast(undefined,dataType);if(dataType==String)return key.toString();if(dataType==Number)return key.toNumber();if(dataType==weavejs.api.data.IQualifiedKey)return key;return weavejs.data.EquationColumnLib.cast(key,dataType)};
Object.defineProperties(weavejs.data.column.KeyColumn.prototype,{keys:{get:function(){return[]}}});weavejs.data.column.KeyColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeyColumn',qName:'weavejs.data.column.KeyColumn'}]};goog.exportSymbol('weavejs.data.column.KeyColumn',weavejs.data.column.KeyColumn);
weavejs.data.column.KeyColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'keyType':{type:'LinkableString'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.KeyColumn'}}},methods:function(){return{'KeyColumn':{type:'',declaredBy:'weavejs.data.column.KeyColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.KeyColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.column.KeyColumn'},'getValueFromKey':{type:'*',
declaredBy:'weavejs.data.column.KeyColumn'}}}}};goog.provide('weavejs.data.column.NormalizedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');
weavejs.data.column.NormalizedColumn=function(min,max){min=typeof min!=='undefined'?min:0;max=typeof max!=='undefined'?max:1;this.min=Weave.linkableChild(this,weavejs.core.LinkableNumber);this.max=Weave.linkableChild(this,weavejs.core.LinkableNumber);weavejs.data.column.NormalizedColumn.base(this,'constructor');this._stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn);Weave.getCallbacks(this._stats).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,
this,'triggerCallbacks'));this.min.value=min;this.max.value=max};goog.inherits(weavejs.data.column.NormalizedColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.NormalizedColumn.prototype._stats;weavejs.data.column.NormalizedColumn.prototype.min;weavejs.data.column.NormalizedColumn.prototype.max;
weavejs.data.column.NormalizedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(dataType==null)dataType=Number;if(dataType==Number){var norm=this._stats.getNorm(key);return this.min.value+norm*(this.max.value-this.min.value)}return weavejs.data.column.NormalizedColumn.base(this,'getValueFromKey',key,dataType)};weavejs.data.column.NormalizedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'NormalizedColumn',qName:'weavejs.data.column.NormalizedColumn'}]};
goog.exportSymbol('weavejs.data.column.NormalizedColumn',weavejs.data.column.NormalizedColumn);weavejs.data.column.NormalizedColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'min':{type:'LinkableNumber'},'max':{type:'LinkableNumber'}}},accessors:function(){return{}},methods:function(){return{'NormalizedColumn':{type:'',declaredBy:'weavejs.data.column.NormalizedColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.NormalizedColumn'}}}}};goog.provide('weavejs.data.column.NumberColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.NumberColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;weavejs.data.column.NumberColumn.base(this,'constructor',metadata);this.dataTask=new weavejs.data.column.ColumnDataTask(this,isFinite,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'));this.dataCache=new weavejs.util.Dictionary2D};goog.inherits(weavejs.data.column.NumberColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.NumberColumn.prototype.getMetadata=function(propertyName){if(propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.NUMBER;return weavejs.data.column.NumberColumn.base(this,'getMetadata',propertyName)};
weavejs.data.column.NumberColumn.prototype.setRecords=function(keys,numericData){this.dataTask.begin(keys,numericData);this.numberToStringFunction=null;var stringFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(stringFormat)try{this.numberToStringFunction=weavejs.util.JS.compile(stringFormat,[weavejs.api.data.ColumnMetadata.NUMBER,'array'],org.apache.flex.utils.Language.closure(this.errorHandler,this,'errorHandler'))}catch(e){this.errorHandler(e)}};
weavejs.data.column.NumberColumn.prototype.asyncComplete=function(){this.dataCache.map.clear();this.triggerCallbacks()};weavejs.data.column.NumberColumn.prototype.errorHandler=function(e){var str=org.apache.flex.utils.Language.is(e,Error)?e.message:String(e);str=weavejs.util.StandardLib.substitute('Error in script for attribute column {0}:\n{1}',Weave.stringify(this._metadata),str);if(this._lastError!=str){this._lastError=str;weavejs.util.JS.error(e)}};weavejs.data.column.NumberColumn.prototype._lastError;
weavejs.data.column.NumberColumn.prototype.numberToStringFunction=null;weavejs.data.column.NumberColumn.prototype.deriveStringFromNumber=function(number){if(this.numberToStringFunction!=null)return weavejs.util.StandardLib.asString(this.numberToStringFunction(number,[number]));return weavejs.util.StandardLib.formatNumber(number)};
weavejs.data.column.NumberColumn.prototype.generateValue=function(key,dataType){var array=this.dataTask.map_key_arrayData.get(key);if(dataType===Number)return weavejs.data.column.NumberColumn.aggregate(array,this._metadata?this._metadata[weavejs.api.data.ColumnMetadata.AGGREGATION]:null);if(dataType===String){var number=this.getValueFromKey(key,Number);if(this.numberToStringFunction!=null)return weavejs.util.StandardLib.asString(this.numberToStringFunction(number,array));if(isNaN(number)&&array&&
array.length>1){var aggregation=org.apache.flex.utils.Language.as(this._metadata&&this._metadata[weavejs.api.data.ColumnMetadata.AGGREGATION],String)||weavejs.api.data.Aggregation.DEFAULT;if(aggregation==weavejs.api.data.Aggregation.SAME)return Weave.lang(weavejs.api.data.Aggregation.AMBIGUOUS_DATA)}return weavejs.util.StandardLib.formatNumber(number)}if(dataType===weavejs.api.data.IQualifiedKey)return weavejs.WeaveAPI.QKeyManager.getQKey(weavejs.api.data.DataType.NUMBER,this.getValueFromKey(key,
Number));return null};
weavejs.data.column.NumberColumn.aggregate=function(numbers,aggregation){if(!numbers)return NaN;if(!aggregation)aggregation=weavejs.api.data.Aggregation.DEFAULT;switch(aggregation){case weavejs.api.data.Aggregation.SAME:var first=numbers[0];var foreachiter0_target=numbers;for(var foreachiter0 in foreachiter0_target){var value=foreachiter0_target[foreachiter0];if(value!=first)return NaN}return first;case weavejs.api.data.Aggregation.FIRST:return numbers[0];case weavejs.api.data.Aggregation.LAST:return numbers[numbers.length-1];
case weavejs.api.data.Aggregation.COUNT:return numbers.length;case weavejs.api.data.Aggregation.MEAN:return weavejs.util.StandardLib.mean(numbers);case weavejs.api.data.Aggregation.SUM:return weavejs.util.StandardLib.sum(numbers);case weavejs.api.data.Aggregation.MIN:return Math.min.apply(null,numbers);case weavejs.api.data.Aggregation.MAX:return Math.max.apply(null,numbers);default:return NaN}};
weavejs.data.column.NumberColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'NumberColumn',qName:'weavejs.data.column.NumberColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn,weavejs.api.data.IBaseColumn]};goog.exportSymbol('weavejs.data.column.NumberColumn',weavejs.data.column.NumberColumn);
weavejs.data.column.NumberColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'NumberColumn':{type:'',declaredBy:'weavejs.data.column.NumberColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.NumberColumn'},'setRecords':{type:'void',declaredBy:'weavejs.data.column.NumberColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.column.NumberColumn'}}}}};goog.provide('weavejs.data.column.ProxyColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IColumnWrapper');weavejs.data.column.ProxyColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this.watcher=Weave.linkableChild(this,new weavejs.core.LinkableWatcher(weavejs.api.data.IAttributeColumn));weavejs.data.column.ProxyColumn.base(this,'constructor',metadata)};goog.inherits(weavejs.data.column.ProxyColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.ProxyColumn.prototype.watcher;weavejs.data.column.ProxyColumn.prototype.containsKey=function(key){var column=org.apache.flex.utils.Language.as(this.watcher.target,weavejs.api.data.IAttributeColumn);return column?column.containsKey(key):false};weavejs.data.column.ProxyColumn.prototype.setMetadata=function(metadata){this._metadata=weavejs.data.column.AbstractAttributeColumn.copyValues(metadata);this.triggerCallbacks()};
weavejs.data.column.ProxyColumn.prototype.getMetadata=function(propertyName){if(propertyName===weavejs.api.data.ColumnMetadata.TITLE&&this._overrideTitle)return this._overrideTitle;var column=org.apache.flex.utils.Language.as(this.watcher.target,weavejs.api.data.IAttributeColumn);var overrideValue=weavejs.data.column.ProxyColumn.base(this,'getMetadata',propertyName);if(overrideValue==null&&column!=null)return column.getMetadata(propertyName);return overrideValue};
weavejs.data.column.ProxyColumn.prototype.getProxyMetadata=function(){return weavejs.data.column.AbstractAttributeColumn.copyValues(this._metadata)};
weavejs.data.column.ProxyColumn.prototype.getMetadataPropertyNames=function(){var column=org.apache.flex.utils.Language.as(this.watcher.target,weavejs.api.data.IAttributeColumn);if(column)return weavejs.util.ArrayUtils.union(weavejs.data.column.ProxyColumn.base(this,'getMetadataPropertyNames'),column.getMetadataPropertyNames());return weavejs.data.column.ProxyColumn.base(this,'getMetadataPropertyNames')};
weavejs.data.column.ProxyColumn.prototype.getInternalColumn=function(){return org.apache.flex.utils.Language.as(this.watcher.target,weavejs.api.data.IAttributeColumn)};weavejs.data.column.ProxyColumn.prototype.setInternalColumn=function(newColumn){this._overrideTitle=null;this.watcher.target=newColumn};
weavejs.data.column.ProxyColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var column=org.apache.flex.utils.Language.as(this.watcher.target,weavejs.api.data.IAttributeColumn);if(column)return column.getValueFromKey(key,dataType);return undefined};weavejs.data.column.ProxyColumn.prototype.dispose=function(){weavejs.data.column.ProxyColumn.base(this,'dispose');this._metadata=null};weavejs.data.column.ProxyColumn.prototype._overrideTitle;
weavejs.data.column.ProxyColumn.prototype.dataUnavailable=function(message){message=typeof message!=='undefined'?message:null;this.delayCallbacks();this.setInternalColumn(null);if(message)this._overrideTitle=message;else{var title=this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE);if(title)this._overrideTitle=Weave.lang('(Data unavailable: {0})',title);else this._overrideTitle=Weave.lang(weavejs.data.column.ProxyColumn.DATA_UNAVAILABLE)}this.triggerCallbacks();this.resumeCallbacks()};
weavejs.data.column.ProxyColumn.DATA_UNAVAILABLE='(Data unavailable)';Object.defineProperties(weavejs.data.column.ProxyColumn.prototype,{keys:{get:function(){var column=org.apache.flex.utils.Language.as(this.watcher.target,weavejs.api.data.IAttributeColumn);return column?column.keys:[]}}});weavejs.data.column.ProxyColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ProxyColumn',qName:'weavejs.data.column.ProxyColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};
goog.exportSymbol('weavejs.data.column.ProxyColumn',weavejs.data.column.ProxyColumn);
weavejs.data.column.ProxyColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.ProxyColumn'}}},methods:function(){return{'ProxyColumn':{type:'',declaredBy:'weavejs.data.column.ProxyColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.ProxyColumn'},'setMetadata':{type:'void',declaredBy:'weavejs.data.column.ProxyColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.ProxyColumn'},
'getProxyMetadata':{type:'Object',declaredBy:'weavejs.data.column.ProxyColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.column.ProxyColumn'},'getInternalColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.column.ProxyColumn'},'setInternalColumn':{type:'void',declaredBy:'weavejs.data.column.ProxyColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.ProxyColumn'},'dispose':{type:'void',declaredBy:'weavejs.data.column.ProxyColumn'},'dataUnavailable':{type:'void',
declaredBy:'weavejs.data.column.ProxyColumn'}}}}};goog.provide('weavejs.data.column.SortedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.api.data.IAttributeColumn');
weavejs.data.column.SortedColumn=function(){this.ascending=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this._keys=[];weavejs.data.column.SortedColumn.base(this,'constructor');Weave.linkableChild(this,weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn));this.sortCopyAscending=weavejs.data.key.SortedKeySet.generateSortCopyFunction([this.internalDynamicColumn],[1]);this.sortCopyDescending=weavejs.data.key.SortedKeySet.generateSortCopyFunction([this.internalDynamicColumn],
[-1])};goog.inherits(weavejs.data.column.SortedColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.SortedColumn.prototype.ascending;weavejs.data.column.SortedColumn.prototype._keys;weavejs.data.column.SortedColumn.prototype._prevTriggerCounter=0;weavejs.data.column.SortedColumn.prototype.sortCopyAscending;weavejs.data.column.SortedColumn.prototype.sortCopyDescending;
Object.defineProperties(weavejs.data.column.SortedColumn.prototype,{keys:{get:function(){if(this._prevTriggerCounter!=this.triggerCounter){if(this.ascending.value)this._keys=this.sortCopyAscending(org.apache.flex.utils.Language.superGetter(weavejs.data.column.SortedColumn,this,'keys'));else this._keys=this.sortCopyDescending(org.apache.flex.utils.Language.superGetter(weavejs.data.column.SortedColumn,this,'keys'));this._prevTriggerCounter=this.triggerCounter}return this._keys}}});
weavejs.data.column.SortedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'SortedColumn',qName:'weavejs.data.column.SortedColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.exportSymbol('weavejs.data.column.SortedColumn',weavejs.data.column.SortedColumn);
weavejs.data.column.SortedColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'ascending':{type:'LinkableBoolean'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.SortedColumn'}}},methods:function(){return{'SortedColumn':{type:'',declaredBy:'weavejs.data.column.SortedColumn'}}}}};goog.provide('weavejs.data.column.SortedIndexColumn');goog.require('weavejs.data.column.DynamicColumn');goog.require('weavejs.api.data.IAttributeColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.SortedIndexColumn=function(){this.map_key_sortIndex=new weavejs.util.JS.Map;this._statsWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher);weavejs.data.column.SortedIndexColumn.base(this,'constructor');this.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._updateStats,this,'_updateStats'))};goog.inherits(weavejs.data.column.SortedIndexColumn,weavejs.data.column.DynamicColumn);weavejs.data.column.SortedIndexColumn.prototype._sortedKeys;weavejs.data.column.SortedIndexColumn.prototype.map_key_sortIndex;
weavejs.data.column.SortedIndexColumn.prototype._column;weavejs.data.column.SortedIndexColumn.prototype._triggerCount=0;weavejs.data.column.SortedIndexColumn.prototype._statsWatcher;weavejs.data.column.SortedIndexColumn.prototype._updateStats=function(){this._column=this.getInternalColumn();this._statsWatcher.target=this._column&&weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this._column)};
weavejs.data.column.SortedIndexColumn.prototype.validate=function(){if(this._column){this.map_key_sortIndex=this._stats.getSortIndex();if(this.map_key_sortIndex)this._sortedKeys=weavejs.util.StandardLib.sortOn(this._column.keys,this.map_key_sortIndex,null,false);else this._sortedKeys=this._column.keys}else{this.map_key_sortIndex=null;this._sortedKeys=[]}this._triggerCount=this.triggerCounter};
weavejs.data.column.SortedIndexColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._triggerCount!=this.triggerCounter)this.validate();if(!this._column)return dataType==String?'':undefined;if(dataType==Number)return this.map_key_sortIndex?Number(this.map_key_sortIndex.get(key)):NaN;return this._column.getValueFromKey(key,dataType)};
weavejs.data.column.SortedIndexColumn.prototype.deriveStringFromNumber=function(index){if(this._triggerCount!=this.triggerCounter)this.validate();if(!this._column||index<0||index>=this._sortedKeys.length||org.apache.flex.utils.Language._int(index)!=index)return'';return this._column.getValueFromKey(this._sortedKeys[index],String)};
Object.defineProperties(weavejs.data.column.SortedIndexColumn.prototype,{_stats:{get:function(){return org.apache.flex.utils.Language.as(this._statsWatcher.target,weavejs.api.data.IColumnStatistics)}},keys:{get:function(){if(this._triggerCount!=this.triggerCounter)this.validate();return this._sortedKeys}}});
weavejs.data.column.SortedIndexColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'SortedIndexColumn',qName:'weavejs.data.column.SortedIndexColumn'}],interfaces:[weavejs.api.data.IAttributeColumn,weavejs.api.data.IPrimitiveColumn]};goog.exportSymbol('weavejs.data.column.SortedIndexColumn',weavejs.data.column.SortedIndexColumn);
weavejs.data.column.SortedIndexColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.column.SortedIndexColumn'}}},methods:function(){return{'SortedIndexColumn':{type:'',declaredBy:'weavejs.data.column.SortedIndexColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.SortedIndexColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.column.SortedIndexColumn'}}}}};goog.provide('weavejs.data.column.StringColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.StringColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this._uniqueStrings=[];this._uniqueStringLookup=new weavejs.util.JS.Map;this._asyncSort=Weave.disposableChild(this,weavejs.util.AsyncSort);this._numberToString=new weavejs.util.JS.Map;this._stringToNumber=new weavejs.util.JS.Map;weavejs.data.column.StringColumn.base(this,'constructor',metadata);this.dataTask=new weavejs.data.column.ColumnDataTask(this,org.apache.flex.utils.Language.closure(this.filterStringValue,
this,'filterStringValue'),org.apache.flex.utils.Language.closure(this.handleDataTaskComplete,this,'handleDataTaskComplete'));this.dataCache=new weavejs.util.Dictionary2D;Weave.getCallbacks(this._asyncSort).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.handleSortComplete,this,'handleSortComplete'))};goog.inherits(weavejs.data.column.StringColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.StringColumn.prototype.getMetadata=function(propertyName){var value=weavejs.data.column.StringColumn.base(this,'getMetadata',propertyName);if(!value&&propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.STRING;return value};weavejs.data.column.StringColumn.prototype._uniqueStrings;weavejs.data.column.StringColumn.prototype._uniqueStringLookup;
weavejs.data.column.StringColumn.prototype.setRecords=function(keys,stringData){this.dataTask.begin(keys,stringData);this._asyncSort.abort();this._uniqueStrings.length=0;this._uniqueStringLookup.clear();this._stringToNumberFunction=null;this._numberToStringFunction=null;var numberFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.NUMBER);if(numberFormat)try{this._stringToNumberFunction=weavejs.util.JS.compile(numberFormat,[weavejs.api.data.ColumnMetadata.STRING,'array'],org.apache.flex.utils.Language.closure(this.errorHandler,
this,'errorHandler'))}catch(e){weavejs.util.JS.error(e)}var stringFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(stringFormat)try{this._numberToStringFunction=weavejs.util.JS.compile(stringFormat,[weavejs.api.data.ColumnMetadata.NUMBER],org.apache.flex.utils.Language.closure(this.errorHandler,this,'errorHandler'))}catch(e){weavejs.util.JS.error(e)}};
weavejs.data.column.StringColumn.prototype.errorHandler=function(e){var str=org.apache.flex.utils.Language.is(e,Error)?e.message:String(e);str=weavejs.util.StandardLib.substitute('Error in script for AttributeColumn {0}:\n{1}',Weave.stringify(this._metadata),str);if(this._lastError!=str){this._lastError=str;weavejs.util.JS.error(e)}};weavejs.data.column.StringColumn.prototype._lastError;weavejs.data.column.StringColumn.prototype._stringToNumberFunction=null;
weavejs.data.column.StringColumn.prototype._numberToStringFunction=null;weavejs.data.column.StringColumn.prototype.filterStringValue=function(value){if(!value)return false;if(!this._uniqueStringLookup.has(value)){this._uniqueStrings.push(value);this._uniqueStringLookup.set(value,-1)}return true};weavejs.data.column.StringColumn.prototype.handleDataTaskComplete=function(){this._asyncSort.beginSort(this._uniqueStrings,weavejs.util.AsyncSort.compareCaseInsensitive)};weavejs.data.column.StringColumn.prototype._asyncSort;
weavejs.data.column.StringColumn.prototype.handleSortComplete=function(){if(!this._asyncSort.result)return;this._i=0;this._numberToString.clear();this._stringToNumber.clear();weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this._iterate,this,'_iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'))};weavejs.data.column.StringColumn.prototype._i;weavejs.data.column.StringColumn.prototype._numberToString;
weavejs.data.column.StringColumn.prototype._stringToNumber;
weavejs.data.column.StringColumn.prototype._iterate=function(stopTime){for(;this._i<this._uniqueStrings.length;this._i++){if(weavejs.util.JS.now()>stopTime)return this._i/this._uniqueStrings.length;var string=this._uniqueStrings[this._i];this._uniqueStringLookup.set(string,this._i);if(this._stringToNumberFunction!=null){var number=weavejs.util.StandardLib.asNumber(this._stringToNumberFunction(string));this._stringToNumber.set(string,number);this._numberToString.set(number,string)}}return 1};
weavejs.data.column.StringColumn.prototype.asyncComplete=function(){this.dataCache.map.clear();this.triggerCallbacks()};
weavejs.data.column.StringColumn.prototype.deriveStringFromNumber=function(number){if(this._metadata&&this._metadata[weavejs.api.data.ColumnMetadata.NUMBER]){if(this._numberToString.has(number))return this._numberToString.get(number);if(this._numberToStringFunction!=null){var string=weavejs.util.StandardLib.asString(this._numberToStringFunction(number));this._numberToString.set(number,string);return string}}else if(number==org.apache.flex.utils.Language._int(number)&&0<=number&&number<this._uniqueStrings.length)return this._uniqueStrings[org.apache.flex.utils.Language._int(number)];
return''};
weavejs.data.column.StringColumn.prototype.generateValue=function(key,dataType){var array=this.dataTask.map_key_arrayData.get(key);if(dataType===String)return weavejs.data.column.StringColumn.aggregate(array,this._metadata?this._metadata[weavejs.api.data.ColumnMetadata.AGGREGATION]:null)||'';var string=this.getValueFromKey(key,String);if(dataType===Number){if(this._stringToNumberFunction!=null)return Number(this._stringToNumber.get(string));return Number(this._uniqueStringLookup.get(string))}if(dataType===weavejs.api.data.IQualifiedKey){var type=
this._metadata?this._metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]:null;if(!type)type=weavejs.api.data.DataType.STRING;return weavejs.WeaveAPI.QKeyManager.getQKey(type,string)}return null};
weavejs.data.column.StringColumn.aggregate=function(strings,aggregation){if(!strings)return undefined;if(!aggregation)aggregation=weavejs.api.data.Aggregation.DEFAULT;switch(aggregation){case weavejs.api.data.Aggregation.SAME:var first=strings[0];var foreachiter0_target=strings;for(var foreachiter0 in foreachiter0_target){var value=foreachiter0_target[foreachiter0];if(value!=first)return Weave.lang(weavejs.api.data.Aggregation.AMBIGUOUS_DATA)}return first;case weavejs.api.data.Aggregation.FIRST:return strings[0];
case weavejs.api.data.Aggregation.LAST:return strings[strings.length-1];default:}return null};weavejs.data.column.StringColumn.getSupportedAggregationModes=function(){return[weavejs.api.data.Aggregation.SAME,weavejs.api.data.Aggregation.FIRST,weavejs.api.data.Aggregation.LAST]};weavejs.data.column.StringColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringColumn',qName:'weavejs.data.column.StringColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn,weavejs.api.data.IBaseColumn]};
goog.exportSymbol('weavejs.data.column.StringColumn',weavejs.data.column.StringColumn);
weavejs.data.column.StringColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'StringColumn':{type:'',declaredBy:'weavejs.data.column.StringColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.StringColumn'},'setRecords':{type:'void',declaredBy:'weavejs.data.column.StringColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.column.StringColumn'}}}}};goog.provide('weavejs.data.column.StringLookup');goog.require('weavejs.api.core.ILinkableObject');weavejs.data.column.StringLookup=function(column){this._uniqueStringValues=new Array;this.internalColumn=column;column.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.handleInternalColumnChange,this,'handleInternalColumnChange'));if(org.apache.flex.utils.Language.is(column,weavejs.api.core.ILinkableObject))Weave.linkableChild(this,org.apache.flex.utils.Language.as(column,weavejs.api.core.ILinkableObject))};
weavejs.data.column.StringLookup.prototype.internalColumn;weavejs.data.column.StringLookup.prototype.handleInternalColumnChange=function(){this._stringToKeysMap=null;this._stringToNumberMap=null;this._uniqueStringValues.length=0};weavejs.data.column.StringLookup.prototype._stringToKeysMap=null;weavejs.data.column.StringLookup.prototype._stringToNumberMap=null;weavejs.data.column.StringLookup.prototype._uniqueStringValues;
weavejs.data.column.StringLookup.prototype.createLookupTable=function(){this._uniqueStringValues.length=0;this._stringToKeysMap=new Object;this._stringToNumberMap=new Object;var keys=this.internalColumn?this.internalColumn.keys:[];for(var i=0;i<keys.length;i++){var key=keys[i];var stringValue=org.apache.flex.utils.Language.as(this.internalColumn.getValueFromKey(key,String),String);if(stringValue==null)continue;if(org.apache.flex.utils.Language.is(this._stringToKeysMap[stringValue],Array))org.apache.flex.utils.Language.as(this._stringToKeysMap[stringValue],
Array).push(key);else{this._stringToKeysMap[stringValue]=[key];this._uniqueStringValues.push(stringValue)}var numberValue=this.internalColumn.getValueFromKey(key,Number);if(this._stringToNumberMap[stringValue]==undefined)this._stringToNumberMap[stringValue]=numberValue;else if(!isNaN(this._stringToNumberMap[stringValue])&&this._stringToNumberMap[stringValue]!=numberValue)this._stringToNumberMap[stringValue]=NaN}weavejs.util.StandardLib.sortOn(this._uniqueStringValues,[this._stringToNumberMap,this._uniqueStringValues])};
weavejs.data.column.StringLookup.prototype.getKeysFromString=function(stringValue){if(this._stringToKeysMap==null)this.createLookupTable();return org.apache.flex.utils.Language.as(this._stringToKeysMap[stringValue],Array)||(this._stringToKeysMap[stringValue]=[])};weavejs.data.column.StringLookup.prototype.getNumberFromString=function(stringValue){if(this._stringToNumberMap==null)this.createLookupTable();return this._stringToNumberMap[stringValue]};
Object.defineProperties(weavejs.data.column.StringLookup.prototype,{uniqueStrings:{get:function(){if(this._stringToKeysMap==null)this.createLookupTable();return this._uniqueStringValues}}});weavejs.data.column.StringLookup.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringLookup',qName:'weavejs.data.column.StringLookup'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.data.column.StringLookup',weavejs.data.column.StringLookup);
weavejs.data.column.StringLookup.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'uniqueStrings':{type:'Array',declaredBy:'weavejs.data.column.StringLookup'}}},methods:function(){return{'StringLookup':{type:'',declaredBy:'weavejs.data.column.StringLookup'},'getKeysFromString':{type:'Array',declaredBy:'weavejs.data.column.StringLookup'},'getNumberFromString':{type:'Number',declaredBy:'weavejs.data.column.StringLookup'}}}}};goog.provide('weavejs.data.hierarchy.WeaveRootDataTreeNode');goog.require('weavejs.data.hierarchy.WeaveTreeDescriptorNode');goog.require('weavejs.api.core.ILinkableObject');
weavejs.data.hierarchy.WeaveRootDataTreeNode=function(root){var self=this;var __localFn0__=function(){var __localFn0__=function(ds,_){_=Array.prototype.slice.call(arguments,1);Weave.linkableChild(rootNode,ds);return ds.getHierarchyRoot()};var sources=root.getObjects(weavejs.api.data.IDataSource).concat(self.globalColumnDataSource);var nodes=sources.map(__localFn0__);var globalColumnsNode=nodes[nodes.length-1];if(!globalColumnsNode.getChildren().length)nodes.pop();return nodes};var rootNode=this;Weave.linkableChild(this,
root.childListCallbacks);this.globalColumnDataSource=Weave.linkableChild(this,weavejs.data.hierarchy.GlobalColumnDataSource.getInstance(root));weavejs.data.hierarchy.WeaveRootDataTreeNode.base(this,'constructor',{'dependency':rootNode,'label':Weave.lang('Data Sources'),'hasChildBranches':true,'children':__localFn0__})};goog.inherits(weavejs.data.hierarchy.WeaveRootDataTreeNode,weavejs.data.hierarchy.WeaveTreeDescriptorNode);weavejs.data.hierarchy.WeaveRootDataTreeNode.prototype.globalColumnDataSource;
weavejs.data.hierarchy.WeaveRootDataTreeNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveRootDataTreeNode',qName:'weavejs.data.hierarchy.WeaveRootDataTreeNode'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.data.hierarchy.WeaveRootDataTreeNode',weavejs.data.hierarchy.WeaveRootDataTreeNode);
weavejs.data.hierarchy.WeaveRootDataTreeNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'WeaveRootDataTreeNode':{type:'',declaredBy:'weavejs.data.hierarchy.WeaveRootDataTreeNode'}}}}};goog.provide('weavejs.data.key.ColumnDataFilterRange');
weavejs.data.key.ColumnDataFilterRange=function(obj){var prop;var foreachiter0_target=[weavejs.data.key.ColumnDataFilterRange.MIN,weavejs.data.key.ColumnDataFilterRange.MIN_INCLUSIVE,weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE];for(var foreachiter0 in foreachiter0_target){prop=foreachiter0_target[foreachiter0];if(obj.hasOwnProperty(prop))this.min=Math.max(this.min,obj[prop])}var foreachiter1_target=[weavejs.data.key.ColumnDataFilterRange.MAX,weavejs.data.key.ColumnDataFilterRange.MAX_INCLUSIVE,
weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE];for(var foreachiter1 in foreachiter1_target){prop=foreachiter1_target[foreachiter1];if(obj.hasOwnProperty(prop))this.max=Math.min(this.max,obj[prop])}if(obj.hasOwnProperty(weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE))this.minInclusive=false;if(obj.hasOwnProperty(weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE))this.maxInclusive=false};
weavejs.data.key.ColumnDataFilterRange.isRange=function(obj){if(!obj)return false;var count=0;var prop;var foreachiter2_target=[weavejs.data.key.ColumnDataFilterRange.MIN,weavejs.data.key.ColumnDataFilterRange.MIN_INCLUSIVE,weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE];for(var foreachiter2 in foreachiter2_target){prop=foreachiter2_target[foreachiter2];if(obj.hasOwnProperty(prop))count++}if(!count)return false;count=0;var foreachiter3_target=[weavejs.data.key.ColumnDataFilterRange.MAX,weavejs.data.key.ColumnDataFilterRange.MAX_INCLUSIVE,
weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE];for(var foreachiter3 in foreachiter3_target){prop=foreachiter3_target[foreachiter3];if(obj.hasOwnProperty(prop))count++}return count>0};weavejs.data.key.ColumnDataFilterRange.MIN='min';weavejs.data.key.ColumnDataFilterRange.MIN_INCLUSIVE='minInclusive';weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE='minExclusive';weavejs.data.key.ColumnDataFilterRange.MAX='max';weavejs.data.key.ColumnDataFilterRange.MAX_INCLUSIVE='maxInclusive';
weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE='maxExclusive';weavejs.data.key.ColumnDataFilterRange.prototype.min=-Infinity;weavejs.data.key.ColumnDataFilterRange.prototype.max=Infinity;weavejs.data.key.ColumnDataFilterRange.prototype.minInclusive=true;weavejs.data.key.ColumnDataFilterRange.prototype.maxInclusive=true;
weavejs.data.key.ColumnDataFilterRange.prototype.getState=function(){var state={};state[this.minInclusive?weavejs.data.key.ColumnDataFilterRange.MIN:weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE]=this.min;state[this.maxInclusive?weavejs.data.key.ColumnDataFilterRange.MAX:weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE]=this.max;return state};weavejs.data.key.ColumnDataFilterRange.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnDataFilterRange',qName:'weavejs.data.key.ColumnDataFilterRange'}]};
goog.exportSymbol('weavejs.data.key.ColumnDataFilterRange',weavejs.data.key.ColumnDataFilterRange);weavejs.data.key.ColumnDataFilterRange.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'min':{type:'*'},'max':{type:'*'},'minInclusive':{type:'Boolean'},'maxInclusive':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'ColumnDataFilterRange':{type:'',declaredBy:'weavejs.data.key.ColumnDataFilterRange'},'getState':{type:'Object',declaredBy:'weavejs.data.key.ColumnDataFilterRange'}}}}};goog.provide('weavejs.api.ui.IObjectWithDescription');weavejs.api.ui.IObjectWithDescription=function(){};weavejs.api.ui.IObjectWithDescription.prototype.getDescription=function(){};weavejs.api.ui.IObjectWithDescription.prototype.FLEXJS_CLASS_INFO={names:[{name:'IObjectWithDescription',qName:'weavejs.api.ui.IObjectWithDescription'}]};
weavejs.api.ui.IObjectWithDescription.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getDescription':{type:'String',declaredBy:'weavejs.api.ui.IObjectWithDescription'}}}}};goog.provide('weavejs.data.key.ColumnDataFilter');goog.require('weavejs.data.key.ColumnDataFilterRange');goog.require('weavejs.api.core.ILinkableObjectWithNewProperties');goog.require('weavejs.api.data.IKeyFilter');goog.require('weavejs.api.ui.IObjectWithDescription');
weavejs.data.key.ColumnDataFilter=function(){this.enabled=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true),org.apache.flex.utils.Language.closure(this._cacheVars,this,'_cacheVars'));this.includeMissingKeyTypes=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true),org.apache.flex.utils.Language.closure(this._cacheVars,this,'_cacheVars'));this.column=Weave.linkableChild(this,weavejs.data.column.DynamicColumn,org.apache.flex.utils.Language.closure(this._resetKeyLookup,this,'_resetKeyLookup'));
this.values=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array),org.apache.flex.utils.Language.closure(this._resetKeyLookup,this,'_resetKeyLookup'));this.map_key=new weavejs.util.JS.WeakMap};weavejs.data.key.ColumnDataFilter.prototype.getDescription=function(){return Weave.lang('Filter for {0}',weavejs.data.ColumnUtils.getTitle(this.column))};weavejs.data.key.ColumnDataFilter.REGEXP='regexp';weavejs.data.key.ColumnDataFilter.ALTERNATE_REGEX_PROPERTY='regex';weavejs.data.key.ColumnDataFilter.prototype.enabled;
weavejs.data.key.ColumnDataFilter.prototype.includeMissingKeyTypes;weavejs.data.key.ColumnDataFilter.prototype.column;weavejs.data.key.ColumnDataFilter.prototype.values;weavejs.data.key.ColumnDataFilter.prototype._enabled;weavejs.data.key.ColumnDataFilter.prototype._includeMissingKeyTypes;weavejs.data.key.ColumnDataFilter.prototype._stringLookup;weavejs.data.key.ColumnDataFilter.prototype._numberLookup;weavejs.data.key.ColumnDataFilter.prototype._ranges;weavejs.data.key.ColumnDataFilter.prototype._regexps;
weavejs.data.key.ColumnDataFilter.prototype._keyType;weavejs.data.key.ColumnDataFilter.prototype.map_key;weavejs.data.key.ColumnDataFilter.prototype._cacheVars=function(){this._enabled=this.enabled.value;this._includeMissingKeyTypes=this.includeMissingKeyTypes.value};
weavejs.data.key.ColumnDataFilter.prototype._resetKeyLookup=function(){var state=org.apache.flex.utils.Language.as(this.values.getSessionState(),Array);var value;var range;var regexp;this._keyType=this.column.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);this.map_key=new weavejs.util.JS.WeakMap;this._numberLookup=null;this._stringLookup=null;this._ranges=null;this._regexps=null;var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){value=foreachiter0_target[foreachiter0];
if(org.apache.flex.utils.Language.is(value,Number)){if(!this._numberLookup)this._numberLookup={};this._numberLookup[value]=true}else if(org.apache.flex.utils.Language.is(value,String)){if(!this._stringLookup)this._stringLookup={};this._stringLookup[value]=true}else if(weavejs.data.key.ColumnDataFilterRange.isRange(value))try{range=new weavejs.data.key.ColumnDataFilterRange(value);if(!this._ranges)this._ranges=[];this._ranges.push(range)}catch(e){}else if(weavejs.data.key.ColumnDataFilter.isRegExp(value)){if(!this._regexps)this._regexps=
[];regexp=weavejs.data.key.ColumnDataFilter.toRegExp(value);this._regexps.push(regexp)}}if(this._ranges){var newState=[];var foreachiter1_target=state;for(var foreachiter1 in foreachiter1_target){value=foreachiter1_target[foreachiter1];if(org.apache.flex.utils.Language.is(value,Number)||org.apache.flex.utils.Language.is(value,String))newState.push(value)}var foreachiter2_target=this._ranges;for(var foreachiter2 in foreachiter2_target){range=foreachiter2_target[foreachiter2];newState.push(range.getState())}var foreachiter3_target=
this._regexps;for(var foreachiter3 in foreachiter3_target){regexp=foreachiter3_target[foreachiter3];value={};value[weavejs.data.key.ColumnDataFilter.REGEXP]=regexp.source;newState.push(value)}this.values.setSessionState(newState)}};
weavejs.data.key.ColumnDataFilter.prototype.containsKey=function(key){if(!this._enabled)return true;var number;var string;var result=this.map_key.get(key);if(result===undefined){result=false;if(this._numberLookup||this._ranges)number=this.column.getValueFromKey(key,Number);if(this._stringLookup||this._regexps)string=this.column.getValueFromKey(key,String);if(this._numberLookup)result=this._numberLookup.hasOwnProperty(number);if(!result&&this._stringLookup)result=this._stringLookup.hasOwnProperty(string);
if(!result&&this._includeMissingKeyTypes&&key.keyType!=this._keyType)result=true;if(!result&&this._ranges){var foreachiter4_target=this._ranges;for(var foreachiter4 in foreachiter4_target){var range=foreachiter4_target[foreachiter4];if(range.minInclusive?number<range.min:number<=range.min)continue;if(range.maxInclusive?number>range.max:number>=range.max)continue;result=true;break}}if(!result&&this._regexps){var foreachiter5_target=this._regexps;for(var foreachiter5 in foreachiter5_target){var regexp=
foreachiter5_target[foreachiter5];if(regexp.test(string)){result=true;break}}}this.map_key.set(key,result)}return result};weavejs.data.key.ColumnDataFilter.prototype.stringifyValues=function(){var result=org.apache.flex.utils.Language.as(this.values.getSessionState(),Array)||[];return result.map(org.apache.flex.utils.Language.closure(this.stringifyValue,this,'stringifyValue'))};
weavejs.data.key.ColumnDataFilter.prototype.stringifyValue=function(value,_){_=Array.prototype.slice.call(arguments,1);if(org.apache.flex.utils.Language.is(value,String))return value;else if(org.apache.flex.utils.Language.is(value,Number))return weavejs.data.ColumnUtils.deriveStringFromNumber(this.column,value);else if(weavejs.data.key.ColumnDataFilterRange.isRange(value)){var range=new weavejs.data.key.ColumnDataFilterRange(value);var leftBracket=range.minInclusive?'[':'(';var rightBracket=range.maxInclusive?
']':')';return leftBracket+this.stringifyValue(range.min)+', '+this.stringifyValue(range.max)+rightBracket}else if(weavejs.data.key.ColumnDataFilter.isRegExp(value))return weavejs.data.key.ColumnDataFilter.toRegExp(value).toString();return null};weavejs.data.key.ColumnDataFilter.isRegExp=function(obj){return obj!=null&&typeof obj=='object'&&(obj.hasOwnProperty(weavejs.data.key.ColumnDataFilter.REGEXP)||obj.hasOwnProperty(weavejs.data.key.ColumnDataFilter.ALTERNATE_REGEX_PROPERTY))};
weavejs.data.key.ColumnDataFilter.toRegExp=function(value){return new RegExp(value[weavejs.data.key.ColumnDataFilter.REGEXP]||value[weavejs.data.key.ColumnDataFilter.ALTERNATE_REGEX_PROPERTY])};weavejs.data.key.ColumnDataFilter.prototype._deprecatedRangeState;
weavejs.data.key.ColumnDataFilter.prototype.handleMissingSessionStateProperties=function(newState){var STRING_VALUE='stringValue';if(newState.hasOwnProperty(STRING_VALUE))this.values.setSessionState([newState[STRING_VALUE]]);var STRING_VALUES='stringValues';if(newState.hasOwnProperty(STRING_VALUES))this.values.setSessionState(newState[STRING_VALUES]);var foreachiter6_target=['min','max'];for(var foreachiter6 in foreachiter6_target){var property=foreachiter6_target[foreachiter6];if(newState.hasOwnProperty(property)){if(!this._deprecatedRangeState)this._deprecatedRangeState=
{};this._deprecatedRangeState[property]=newState[property];this.values.setSessionState([this._deprecatedRangeState])}}};Object.defineProperties(weavejs.data.key.ColumnDataFilter.prototype,{deprecatedStateMapping:{get:function(){return org.apache.flex.utils.Language.closure(this.handleMissingSessionStateProperties,this,'handleMissingSessionStateProperties')}}});
weavejs.data.key.ColumnDataFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnDataFilter',qName:'weavejs.data.key.ColumnDataFilter'}],interfaces:[weavejs.api.data.IKeyFilter,weavejs.api.core.ILinkableObjectWithNewProperties,weavejs.api.ui.IObjectWithDescription]};goog.exportSymbol('weavejs.data.key.ColumnDataFilter',weavejs.data.key.ColumnDataFilter);
weavejs.data.key.ColumnDataFilter.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'enabled':{type:'LinkableBoolean'},'includeMissingKeyTypes':{type:'LinkableBoolean'},'column':{type:'DynamicColumn'},'values':{type:'LinkableVariable'}}},accessors:function(){return{'deprecatedStateMapping':{type:'Object',declaredBy:'weavejs.data.key.ColumnDataFilter'}}},methods:function(){return{'getDescription':{type:'String',declaredBy:'weavejs.data.key.ColumnDataFilter'},'containsKey':{type:'Boolean',
declaredBy:'weavejs.data.key.ColumnDataFilter'},'stringifyValues':{type:'Array',declaredBy:'weavejs.data.key.ColumnDataFilter'}}}}};goog.provide('weavejs.api.data.IDynamicKeySet');goog.require('weavejs.api.core.ILinkableDynamicObject');weavejs.api.data.IDynamicKeySet=function(){};weavejs.api.data.IDynamicKeySet.prototype.getInternalKeySet=function(){};weavejs.api.data.IDynamicKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDynamicKeySet',qName:'weavejs.api.data.IDynamicKeySet'}],interfaces:[weavejs.api.core.ILinkableDynamicObject]};
weavejs.api.data.IDynamicKeySet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getInternalKeySet':{type:'IKeySet',declaredBy:'weavejs.api.data.IDynamicKeySet'}}}}};goog.provide('weavejs.data.key.DynamicKeySet');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.api.data.IDynamicKeySet');weavejs.data.key.DynamicKeySet=function(){weavejs.data.key.DynamicKeySet.base(this,'constructor',weavejs.api.data.IKeySet)};goog.inherits(weavejs.data.key.DynamicKeySet,weavejs.core.LinkableDynamicObject);weavejs.data.key.DynamicKeySet.prototype.getInternalKeySet=function(){return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IKeySet)};
weavejs.data.key.DynamicKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicKeySet',qName:'weavejs.data.key.DynamicKeySet'}],interfaces:[weavejs.api.data.IDynamicKeySet]};goog.exportSymbol('weavejs.data.key.DynamicKeySet',weavejs.data.key.DynamicKeySet);
weavejs.data.key.DynamicKeySet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'DynamicKeySet':{type:'',declaredBy:'weavejs.data.key.DynamicKeySet'},'getInternalKeySet':{type:'IKeySet',declaredBy:'weavejs.data.key.DynamicKeySet'}}}}};goog.provide('weavejs.data.key.KeySetCallbackInterface');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.data.IKeySetCallbackInterface');weavejs.data.key.KeySetCallbackInterface=function(){this._keysAdded=[];this._keysRemoved=[];weavejs.data.key.KeySetCallbackInterface.base(this,'constructor',org.apache.flex.utils.Language.closure(this.setCallbackVariables,this,'setCallbackVariables'))};goog.inherits(weavejs.data.key.KeySetCallbackInterface,weavejs.core.CallbackCollection);
weavejs.data.key.KeySetCallbackInterface.prototype._keysAdded;weavejs.data.key.KeySetCallbackInterface.prototype._keysRemoved;weavejs.data.key.KeySetCallbackInterface.prototype.setCallbackVariables=function(keysAdded,keysRemoved){keysAdded=typeof keysAdded!=='undefined'?keysAdded:null;keysRemoved=typeof keysRemoved!=='undefined'?keysRemoved:null;this._keysAdded=keysAdded||[];this._keysRemoved=keysRemoved||[]};
weavejs.data.key.KeySetCallbackInterface.prototype.flushKeys=function(){if(this._keysAdded.length||this._keysRemoved.length)this._runCallbacksImmediately(this._keysAdded,this._keysRemoved);this.setCallbackVariables([],[])};Object.defineProperties(weavejs.data.key.KeySetCallbackInterface.prototype,{keysAdded:{get:function(){return this._keysAdded},set:function(qkeys){this._keysAdded=qkeys}},keysRemoved:{get:function(){return this._keysRemoved},set:function(qkeys){this._keysRemoved=qkeys}}});
weavejs.data.key.KeySetCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeySetCallbackInterface',qName:'weavejs.data.key.KeySetCallbackInterface'}],interfaces:[weavejs.api.data.IKeySetCallbackInterface]};goog.exportSymbol('weavejs.data.key.KeySetCallbackInterface',weavejs.data.key.KeySetCallbackInterface);
weavejs.data.key.KeySetCallbackInterface.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keysAdded':{type:'Array',declaredBy:'weavejs.data.key.KeySetCallbackInterface'},'keysRemoved':{type:'Array',declaredBy:'weavejs.data.key.KeySetCallbackInterface'}}},methods:function(){return{'KeySetCallbackInterface':{type:'',declaredBy:'weavejs.data.key.KeySetCallbackInterface'},'flushKeys':{type:'void',declaredBy:'weavejs.data.key.KeySetCallbackInterface'}}}}};goog.provide('weavejs.data.key.KeySet');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.data.key.KeySetCallbackInterface');goog.require('weavejs.api.data.IKeySet');
weavejs.data.key.KeySet=function(){this.keyCallbacks=Weave.linkableChild(this,weavejs.data.key.KeySetCallbackInterface);this.map_key_index=new weavejs.util.JS.Map;this._keys=new Array;weavejs.data.key.KeySet.base(this,'constructor',Array,org.apache.flex.utils.Language.closure(this.verifySessionState,this,'verifySessionState'));this.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'))};goog.inherits(weavejs.data.key.KeySet,weavejs.core.LinkableVariable);
weavejs.data.key.KeySet.prototype.keyCallbacks;weavejs.data.key.KeySet.prototype.verifySessionState=function(value){var foreachiter0_target=value;for(var foreachiter0 in foreachiter0_target){var row=foreachiter0_target[foreachiter0];if(!org.apache.flex.utils.Language.is(row,Array))return false}return true};weavejs.data.key.KeySet.prototype._currentlyUpdating=false;
weavejs.data.key.KeySet.prototype.updateKeys=function(){if(this._currentlyUpdating)return;var newKeys=[];var foreachiter1_target=this._sessionStateInternal;for(var foreachiter1 in foreachiter1_target){var row=foreachiter1_target[foreachiter1];newKeys.push.apply(newKeys,weavejs.WeaveAPI.QKeyManager.getQKeys(row[0],row.slice(1)))}this.delayCallbacks();this._currentlyUpdating=true;this.replaceKeys(newKeys);this.keyCallbacks.flushKeys();this._currentlyUpdating=false;this.resumeCallbacks()};
weavejs.data.key.KeySet.prototype.updateSessionState=function(){if(this._currentlyUpdating)return;var _keyTypeToKeysMap={};var foreachiter2_target=this._keys;for(var foreachiter2 in foreachiter2_target){var key=foreachiter2_target[foreachiter2];if(_keyTypeToKeysMap[key.keyType]==undefined)_keyTypeToKeysMap[key.keyType]=[];org.apache.flex.utils.Language.as(_keyTypeToKeysMap[key.keyType],Array).push(key.localName)}var keyTable=[];for(var keyType in _keyTypeToKeysMap){var newKeys=_keyTypeToKeysMap[keyType];
newKeys.unshift(keyType);keyTable.push(newKeys)}this.delayCallbacks();this._currentlyUpdating=true;this.setSessionState(keyTable);this.keyCallbacks.flushKeys();this._currentlyUpdating=false;this.resumeCallbacks()};weavejs.data.key.KeySet.prototype.map_key_index;weavejs.data.key.KeySet.prototype._keys;
weavejs.data.key.KeySet.prototype.replaceKeys=function(newKeys){if(this._locked)return false;weavejs.WeaveAPI.QKeyManager.convertToQKeys(newKeys);if(newKeys==this._keys)this._keys=this._keys.concat();var key;var changeDetected=false;var prevKeyIndex=this.map_key_index;this.map_key_index=new weavejs.util.JS.Map;this._keys.length=newKeys.length;var outputIndex=0;for(var inputIndex=0;inputIndex<newKeys.length;inputIndex++){key=org.apache.flex.utils.Language.as(newKeys[inputIndex],weavejs.api.data.IQualifiedKey);
if(this.map_key_index.has(key))continue;this._keys[outputIndex]=key;this.map_key_index.set(key,outputIndex);if(prevKeyIndex.get(key)===undefined){changeDetected=true;this.keyCallbacks.keysAdded.push(key)}outputIndex++}this._keys.length=outputIndex;var oldKeys=weavejs.util.JS.mapKeys(prevKeyIndex);var foreachiter3_target=oldKeys;for(var foreachiter3 in foreachiter3_target){key=foreachiter3_target[foreachiter3];if(!this.map_key_index.has(key)){changeDetected=true;this.keyCallbacks.keysRemoved.push(key)}}if(changeDetected)this.updateSessionState();
return changeDetected};weavejs.data.key.KeySet.prototype.clearKeys=function(){if(this._locked)return false;if(this._keys.length==0)return false;this.keyCallbacks.keysRemoved=this.keyCallbacks.keysRemoved.concat(this._keys);this.map_key_index=new weavejs.util.JS.Map;this._keys=[];this.updateSessionState();return true};weavejs.data.key.KeySet.prototype.containsKey=function(key){return this.map_key_index.has(key)};
weavejs.data.key.KeySet.prototype.addKeys=function(additionalKeys){if(this._locked)return false;var changeDetected=false;weavejs.WeaveAPI.QKeyManager.convertToQKeys(additionalKeys);var foreachiter4_target=additionalKeys;for(var foreachiter4 in foreachiter4_target){var key=foreachiter4_target[foreachiter4];if(!this.map_key_index.has(key)){var newIndex=this._keys.length;this._keys[newIndex]=key;this.map_key_index.set(key,newIndex);changeDetected=true;this.keyCallbacks.keysAdded.push(key)}}if(changeDetected)this.updateSessionState();
return changeDetected};
weavejs.data.key.KeySet.prototype.removeKeys=function(unwantedKeys){if(this._locked)return false;if(unwantedKeys==this._keys)return this.clearKeys();var changeDetected=false;weavejs.WeaveAPI.QKeyManager.convertToQKeys(unwantedKeys);var foreachiter5_target=unwantedKeys;for(var foreachiter5 in foreachiter5_target){var key=foreachiter5_target[foreachiter5];if(this.map_key_index.has(key)){var droppedIndex=this.map_key_index.get(key);if(droppedIndex<this._keys.length-1){var lastKey=org.apache.flex.utils.Language.as(this._keys[this.keys.length-
1],weavejs.api.data.IQualifiedKey);this._keys[droppedIndex]=lastKey;this.map_key_index.set(lastKey,droppedIndex)}this._keys.length--;this.map_key_index['delete'](key);changeDetected=true;this.keyCallbacks.keysRemoved.push(key)}}if(changeDetected)this.updateSessionState();return changeDetected};
weavejs.data.key.KeySet.prototype.setSessionState=function(value){if(!org.apache.flex.utils.Language.is(value,String)&&!org.apache.flex.utils.Language.is(value,Array)&&value!=null){var keysProperty='sessionedKeys';var keyTypeProperty='sessionedKeyType';if(value.hasOwnProperty(keysProperty)&&value.hasOwnProperty(keyTypeProperty))if(value[keyTypeProperty]!=null&&value[keysProperty]!=null)value=weavejs.WeaveAPI.CSVParser.createCSVRow([value[keyTypeProperty]])+','+value[keysProperty]}if(org.apache.flex.utils.Language.is(value,
String))value=weavejs.WeaveAPI.CSVParser.parseCSV(org.apache.flex.utils.Language.as(value,String));weavejs.data.key.KeySet.base(this,'setSessionState',value)};
weavejs.data.key.KeySet.test=function(){var __localFn0__=function(){weavejs.data.key.KeySet.traceKeySet(k)};var k=new weavejs.data.key.KeySet;var k2=new weavejs.data.key.KeySet;k.addImmediateCallback(null,__localFn0__);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.replaceKeys,k,'replaceKeys'),'create k','t',['a','b','c'],'t',['a','b','c']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.addKeys,k,'addKeys'),'add','t',['b','c','d','e'],
't',['a','b','c','d','e']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.removeKeys,k,'removeKeys'),'remove','t',['d','e','f','g'],'t',['a','b','c']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.replaceKeys,k,'replaceKeys'),'replace','t',['b','x'],'t',['b','x']);k2.replaceKeys(weavejs.WeaveAPI.QKeyManager.getQKeys('t',['a','b','x','y']));org.apache.flex.utils.Language.trace('copy k2 to k');weavejs.WeaveAPI.SessionManager.copySessionState(k2,
k);weavejs.data.key.KeySet.assert(k,weavejs.WeaveAPI.QKeyManager.getQKeys('t',['a','b','x','y']));org.apache.flex.utils.Language.trace('test deprecated session state');weavejs.WeaveAPI.SessionManager.setSessionState(k,{sessionedKeyType:'t2',sessionedKeys:'a,b,x,y'},true);weavejs.data.key.KeySet.assert(k,weavejs.WeaveAPI.QKeyManager.getQKeys('t2',['a','b','x','y']));weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.replaceKeys,k,'replaceKeys'),'replace k','t',['1'],'t',
['1']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.addKeys,k,'addKeys'),'add k','t2',['1'],'t',['1'],'t2',['1']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.removeKeys,k,'removeKeys'),'remove k','t',['1'],'t2',['1']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.addKeys,k,'addKeys'),'add k','t2',['1'],'t2',['1']);var foreachiter6_target=weavejs.WeaveAPI.QKeyManager.getAllKeyTypes();for(var foreachiter6 in foreachiter6_target){var t=
foreachiter6_target[foreachiter6];org.apache.flex.utils.Language.trace('all keys ('+t+'):',weavejs.data.key.KeySet.getKeyStrings(weavejs.WeaveAPI.QKeyManager.getAllQKeys(t)))}};weavejs.data.key.KeySet.getKeyStrings=function(qkeys){var keyStrings=[];var foreachiter7_target=qkeys;for(var foreachiter7 in foreachiter7_target){var key=foreachiter7_target[foreachiter7];keyStrings.push(key.keyType+'#'+key.localName)}return keyStrings};
weavejs.data.key.KeySet.traceKeySet=function(keySet){org.apache.flex.utils.Language.trace(' -\x3e',weavejs.data.key.KeySet.getKeyStrings(keySet.keys));org.apache.flex.utils.Language.trace('   ',Weave.stringify(weavejs.WeaveAPI.SessionManager.getSessionState(keySet)))};
weavejs.data.key.KeySet.testFunction=function(keySet,func,comment,keyType,keys,expectedResultKeyType,expectedResultKeys,expectedResultKeyType2,expectedResultKeys2){expectedResultKeyType2=typeof expectedResultKeyType2!=='undefined'?expectedResultKeyType2:null;expectedResultKeys2=typeof expectedResultKeys2!=='undefined'?expectedResultKeys2:null;org.apache.flex.utils.Language.trace(comment,keyType,keys);func(weavejs.WeaveAPI.QKeyManager.getQKeys(keyType,keys));var keys1=expectedResultKeys?weavejs.WeaveAPI.QKeyManager.getQKeys(expectedResultKeyType,
expectedResultKeys):[];var keys2=expectedResultKeys2?weavejs.WeaveAPI.QKeyManager.getQKeys(expectedResultKeyType2,expectedResultKeys2):[];weavejs.data.key.KeySet.assert(keySet,keys1,keys2)};
weavejs.data.key.KeySet.assert=function(keySet,expectedKeys1,expectedKeys2){expectedKeys2=typeof expectedKeys2!=='undefined'?expectedKeys2:null;var qkey;var map_key=new weavejs.util.JS.Map;var foreachiter8_target=[expectedKeys1,expectedKeys2];for(var foreachiter8 in foreachiter8_target){var keys=foreachiter8_target[foreachiter8];var foreachiter9_target=keys;for(var foreachiter9 in foreachiter9_target){qkey=foreachiter9_target[foreachiter9];if(!keySet.containsKey(qkey))throw new Error('KeySet does not contain expected keys');
map_key.set(qkey,true)}}var foreachiter10_target=keySet.keys;for(var foreachiter10 in foreachiter10_target){qkey=foreachiter10_target[foreachiter10];if(!map_key.has(qkey))throw new Error('KeySet contains unexpected keys');}};Object.defineProperties(weavejs.data.key.KeySet.prototype,{keys:{get:function(){return this._keys}}});weavejs.data.key.KeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeySet',qName:'weavejs.data.key.KeySet'}],interfaces:[weavejs.api.data.IKeySet]};
goog.exportSymbol('weavejs.data.key.KeySet',weavejs.data.key.KeySet);
weavejs.data.key.KeySet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'keyCallbacks':{type:'IKeySetCallbackInterface'}}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.key.KeySet'}}},methods:function(){return{'KeySet':{type:'',declaredBy:'weavejs.data.key.KeySet'},'replaceKeys':{type:'Boolean',declaredBy:'weavejs.data.key.KeySet'},'clearKeys':{type:'Boolean',declaredBy:'weavejs.data.key.KeySet'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.key.KeySet'},
'addKeys':{type:'Boolean',declaredBy:'weavejs.data.key.KeySet'},'removeKeys':{type:'Boolean',declaredBy:'weavejs.data.key.KeySet'},'setSessionState':{type:'void',declaredBy:'weavejs.data.key.KeySet'}}}}};goog.provide('weavejs.data.key.KeyFilter');goog.require('weavejs.data.key.KeySet');goog.require('weavejs.api.core.ILinkableObject');goog.require('weavejs.api.data.IKeyFilter');
weavejs.data.key.KeyFilter=function(){this.includeMissingKeys=Weave.linkableChild(this,weavejs.core.LinkableBoolean,org.apache.flex.utils.Language.closure(this.cacheValues,this,'cacheValues'));this.includeMissingKeyTypes=Weave.linkableChild(this,weavejs.core.LinkableBoolean,org.apache.flex.utils.Language.closure(this.cacheValues,this,'cacheValues'));this.included=Weave.linkableChild(this,weavejs.data.key.KeySet,org.apache.flex.utils.Language.closure(this.handleIncludeChange,this,'handleIncludeChange'));
this.excluded=Weave.linkableChild(this,weavejs.data.key.KeySet,org.apache.flex.utils.Language.closure(this.handleExcludeChange,this,'handleExcludeChange'));this.filters=Weave.linkableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IKeyFilter));this.filterSetOp=Weave.linkableChild(this,new weavejs.core.LinkableString(weavejs.data.key.KeyFilter.INTERSECTION,org.apache.flex.utils.Language.closure(this.verifyFilterSetOp,this,'verifyFilterSetOp')),org.apache.flex.utils.Language.closure(this.cacheValues,
this,'cacheValues'));this._includedKeyTypeMap=new Object;this._excludedKeyTypeMap=new Object;this.includeMissingKeys.value=false;this.includeMissingKeyTypes.value=true;this.filters.childListCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.cacheValues,this,'cacheValues'))};weavejs.data.key.KeyFilter.UNION='union';weavejs.data.key.KeyFilter.INTERSECTION='intersection';weavejs.data.key.KeyFilter.prototype.includeMissingKeys;weavejs.data.key.KeyFilter.prototype.includeMissingKeyTypes;
weavejs.data.key.KeyFilter.prototype.included;weavejs.data.key.KeyFilter.prototype.excluded;weavejs.data.key.KeyFilter.prototype.filters;weavejs.data.key.KeyFilter.prototype.filterSetOp;weavejs.data.key.KeyFilter.prototype.verifyFilterSetOp=function(value){return value===weavejs.data.key.KeyFilter.UNION||value===weavejs.data.key.KeyFilter.INTERSECTION};weavejs.data.key.KeyFilter.prototype._includeMissingKeys;weavejs.data.key.KeyFilter.prototype._includeMissingKeyTypes;weavejs.data.key.KeyFilter.prototype._filters;
weavejs.data.key.KeyFilter.prototype._filterSetOp;weavejs.data.key.KeyFilter.prototype.cacheValues=function(){this._includeMissingKeys=this.includeMissingKeys.value;this._includeMissingKeyTypes=this.includeMissingKeyTypes.value;this._filters=this.filters.getObjects();this._filterSetOp=this.filterSetOp.value};
weavejs.data.key.KeyFilter.prototype.replaceKeys=function(includeMissingKeys,includeMissingKeyTypes,includeKeys,excludeKeys){includeKeys=typeof includeKeys!=='undefined'?includeKeys:null;excludeKeys=typeof excludeKeys!=='undefined'?excludeKeys:null;Weave.getCallbacks(this).delayCallbacks();this.includeMissingKeys.value=includeMissingKeys;this.includeMissingKeyTypes.value=includeMissingKeyTypes;if(includeKeys)this.included.replaceKeys(includeKeys);else this.included.clearKeys();if(excludeKeys)this.excluded.replaceKeys(excludeKeys);
else this.excluded.clearKeys();Weave.getCallbacks(this).resumeCallbacks()};weavejs.data.key.KeyFilter.prototype.includeKeys=function(keys){this.included.addKeys(keys)};weavejs.data.key.KeyFilter.prototype.excludeKeys=function(keys){this.excluded.addKeys(keys)};weavejs.data.key.KeyFilter.prototype._includedKeyTypeMap;weavejs.data.key.KeyFilter.prototype._excludedKeyTypeMap;
weavejs.data.key.KeyFilter.prototype.handleIncludeChange=function(){var includedKeys=this.included.keys;this._includedKeyTypeMap=new Object;var foreachiter0_target=includedKeys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];this._includedKeyTypeMap[key.keyType]=true}this.excluded.removeKeys(includedKeys)};
weavejs.data.key.KeyFilter.prototype.handleExcludeChange=function(){var excludedKeys=this.excluded.keys;this._excludedKeyTypeMap=new Object;var foreachiter1_target=excludedKeys;for(var foreachiter1 in foreachiter1_target){var key=foreachiter1_target[foreachiter1];this._excludedKeyTypeMap[key.keyType]=true}this.included.removeKeys(excludedKeys)};
weavejs.data.key.KeyFilter.prototype.containsKey=function(key){var filter;if(this._filterSetOp===weavejs.data.key.KeyFilter.INTERSECTION){var foreachiter2_target=this._filters;for(var foreachiter2 in foreachiter2_target){filter=foreachiter2_target[foreachiter2];if(!filter.containsKey(key))return false}}else if(this._filterSetOp===weavejs.data.key.KeyFilter.UNION){var found=false;var foreachiter3_target=this._filters;for(var foreachiter3 in foreachiter3_target){filter=foreachiter3_target[foreachiter3];
if(filter.containsKey(key)){found=true;break}}if(!found)return false}if(this._includeMissingKeys||this._includeMissingKeyTypes&&!this._includedKeyTypeMap[key.keyType]){if(this.excluded.containsKey(key))return false;if(!this._includeMissingKeyTypes&&this._excludedKeyTypeMap[key.keyType])return false;return true}else{if(this.included.containsKey(key))return true;if(this._includeMissingKeyTypes&&!this._includedKeyTypeMap[key.keyType]&&!this._excludedKeyTypeMap[key.keyType])return true;return false}};
weavejs.data.key.KeyFilter.prototype.handleDeprecatedSessionedProperty=function(propertyName,value){if(this._deprecatedState==null){this._deprecatedState={};weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._applyDeprecatedSessionState,this,'_applyDeprecatedSessionState'))}this._deprecatedState[propertyName]=value};weavejs.data.key.KeyFilter.prototype._deprecatedState=null;
weavejs.data.key.KeyFilter.prototype._applyDeprecatedSessionState=function(){this._deprecatedState.sessionedKeys=this._deprecatedState.includedKeys;this.included.setSessionState(this._deprecatedState);this._deprecatedState.sessionedKeys=this._deprecatedState.excludedKeys;this.excluded.setSessionState(this._deprecatedState)};
Object.defineProperties(weavejs.data.key.KeyFilter.prototype,{sessionedKeyType:{set:function(value){this.handleDeprecatedSessionedProperty('sessionedKeyType',value)}},includedKeys:{set:function(value){this.handleDeprecatedSessionedProperty('includedKeys',value)}},excludedKeys:{set:function(value){this.handleDeprecatedSessionedProperty('excludedKeys',value)}}});
weavejs.data.key.KeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeyFilter',qName:'weavejs.data.key.KeyFilter'}],interfaces:[weavejs.api.data.IKeyFilter,weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.data.key.KeyFilter',weavejs.data.key.KeyFilter);
weavejs.data.key.KeyFilter.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'includeMissingKeys':{type:'LinkableBoolean'},'includeMissingKeyTypes':{type:'LinkableBoolean'},'included':{type:'KeySet'},'excluded':{type:'KeySet'},'filters':{type:'ILinkableHashMap'},'filterSetOp':{type:'LinkableString'}}},accessors:function(){return{'sessionedKeyType':{type:'String',declaredBy:'weavejs.data.key.KeyFilter',metadata:function(){return[]}},'includedKeys':{type:'String',declaredBy:'weavejs.data.key.KeyFilter',
metadata:function(){return[]}},'excludedKeys':{type:'String',declaredBy:'weavejs.data.key.KeyFilter',metadata:function(){return[]}}}},methods:function(){return{'KeyFilter':{type:'',declaredBy:'weavejs.data.key.KeyFilter'},'replaceKeys':{type:'void',declaredBy:'weavejs.data.key.KeyFilter'},'includeKeys':{type:'void',declaredBy:'weavejs.data.key.KeyFilter'},'excludeKeys':{type:'void',declaredBy:'weavejs.data.key.KeyFilter'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.key.KeyFilter'}}}}};goog.provide('weavejs.data.source.AbstractDataSource');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.data.IDataSource');
weavejs.data.source.AbstractDataSource=function(){this.label=Weave.linkableChild(this,weavejs.core.LinkableString);this.map_proxyColumn_pending=new weavejs.util.JS.Map;this._hierarchyRefresh=Weave.linkableChild(this,weavejs.core.CallbackCollection,org.apache.flex.utils.Language.closure(this.refreshHierarchy,this,'refreshHierarchy'));var cc=Weave.getCallbacks(this);cc.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.uninitialize,this,'uninitialize'));cc.addGroupedCallback(this,
org.apache.flex.utils.Language.closure(this.initialize,this,'initialize'),true,false)};weavejs.data.source.AbstractDataSource.prototype.label;weavejs.data.source.AbstractDataSource.prototype.getLabel=function(){if(this.label.value)return this.label.value;var root=Weave.getRoot(this);if(root)return root.getName(this);return null};weavejs.data.source.AbstractDataSource.prototype._initializeCalled=false;weavejs.data.source.AbstractDataSource.prototype._rootNode;weavejs.data.source.AbstractDataSource.prototype.map_proxyColumn_pending;
weavejs.data.source.AbstractDataSource.prototype._hierarchyRefresh;weavejs.data.source.AbstractDataSource.prototype.refreshHierarchy=function(){this._rootNode=null};weavejs.data.source.AbstractDataSource.prototype.getHierarchyRoot=function(){return this._rootNode};weavejs.data.source.AbstractDataSource.prototype.requestColumnFromSource=function(proxyColumn){};weavejs.data.source.AbstractDataSource.prototype.generateHierarchyNode=function(metadata){return null};
weavejs.data.source.AbstractDataSource.prototype.uninitialize=function(){this._initializeCalled=false};weavejs.data.source.AbstractDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;this._initializeCalled=true;if(forceRefresh)this.refreshAllProxyColumns(this.initializationComplete);else this.handleAllPendingColumnRequests(this.initializationComplete)};
weavejs.data.source.AbstractDataSource.prototype.findHierarchyNode=function(metadata){var path=weavejs.data.hierarchy.HierarchyUtils.findPathToNode(this.getHierarchyRoot(),this.generateHierarchyNode(metadata));if(path)return path[path.length-1];return null};
weavejs.data.source.AbstractDataSource.prototype.generateNewAttributeColumn=function(metadata){var proxyColumn=Weave.disposableChild(this,weavejs.data.column.ProxyColumn);proxyColumn.setMetadata(metadata);var name=this.getLabel()||Weave.className(this).split('.').pop();var description=name+' pending column request';weavejs.WeaveAPI.ProgressIndicator.addTask(proxyColumn,this,description);weavejs.WeaveAPI.ProgressIndicator.addTask(proxyColumn,proxyColumn,description);this.handlePendingColumnRequest(proxyColumn);
return proxyColumn};weavejs.data.source.AbstractDataSource.prototype.handlePendingColumnRequest=function(column,forced){forced=typeof forced!=='undefined'?forced:false;if(this.initializationComplete||forced){this.map_proxyColumn_pending.set(column,false);weavejs.WeaveAPI.ProgressIndicator.removeTask(column);this.requestColumnFromSource(column)}else this.map_proxyColumn_pending.set(column,true)};
weavejs.data.source.AbstractDataSource.prototype.handleAllPendingColumnRequests=function(forced){forced=typeof forced!=='undefined'?forced:false;var cols=weavejs.util.JS.mapKeys(this.map_proxyColumn_pending);var foreachiter0_target=cols;for(var foreachiter0 in foreachiter0_target){var proxyColumn=foreachiter0_target[foreachiter0];if(this.map_proxyColumn_pending.get(proxyColumn))this.handlePendingColumnRequest(org.apache.flex.utils.Language.as(proxyColumn,weavejs.data.column.ProxyColumn),forced)}};
weavejs.data.source.AbstractDataSource.prototype.refreshAllProxyColumns=function(forced){forced=typeof forced!=='undefined'?forced:false;var cols=weavejs.util.JS.mapKeys(this.map_proxyColumn_pending);var foreachiter1_target=cols;for(var foreachiter1 in foreachiter1_target){var proxyColumn=foreachiter1_target[foreachiter1];this.handlePendingColumnRequest(org.apache.flex.utils.Language.as(proxyColumn,weavejs.data.column.ProxyColumn),forced)}};
weavejs.data.source.AbstractDataSource.prototype.dispose=function(){var cols=weavejs.util.JS.mapKeys(this.map_proxyColumn_pending);var foreachiter2_target=cols;for(var foreachiter2 in foreachiter2_target){var column=foreachiter2_target[foreachiter2];weavejs.WeaveAPI.ProgressIndicator.removeTask(column)}this._initializeCalled=false;this.map_proxyColumn_pending=null};
Object.defineProperties(weavejs.data.source.AbstractDataSource.prototype,{isLocal:{get:function(){return false}},hierarchyRefresh:{get:function(){return this._hierarchyRefresh}},initializationComplete:{get:function(){return this._initializeCalled}}});weavejs.data.source.AbstractDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'AbstractDataSource',qName:'weavejs.data.source.AbstractDataSource'}],interfaces:[weavejs.api.data.IDataSource,weavejs.api.core.IDisposableObject]};
goog.exportSymbol('weavejs.data.source.AbstractDataSource',weavejs.data.source.AbstractDataSource);
weavejs.data.source.AbstractDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'label':{type:'LinkableString'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.AbstractDataSource'},'hierarchyRefresh':{type:'ICallbackCollection',declaredBy:'weavejs.data.source.AbstractDataSource'}}},methods:function(){return{'AbstractDataSource':{type:'',declaredBy:'weavejs.data.source.AbstractDataSource'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.AbstractDataSource'},
'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.AbstractDataSource'},'findHierarchyNode':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.AbstractDataSource'},'generateNewAttributeColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.source.AbstractDataSource'},'dispose':{type:'void',declaredBy:'weavejs.data.source.AbstractDataSource'}}}}};goog.provide('weavejs.core.LinkablePromise');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkablePromise=function(task,description,validateNow){description=typeof description!=='undefined'?description:null;validateNow=typeof validateNow!=='undefined'?validateNow:false;this._task=task;this._description=description;this._callbackCollection=Weave.getCallbacks(this);this._callbackCollection.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._immediateCallback,this,'_immediateCallback'));this._callbackCollection.addGroupedCallback(this,org.apache.flex.utils.Language.closure(this._groupedCallback,
this,'_groupedCallback'),validateNow,false);if(validateNow){this._lazy=false;this._immediateCallback()}};
weavejs.core.LinkablePromise.fromIterativeTask=function(initialize,iterativeTask,priority,description,validateNow){description=typeof description!=='undefined'?description:null;validateNow=typeof validateNow!=='undefined'?validateNow:false;var __localFn0__=function(){var __localFn0__=function(resolve,reject){weavejs.WeaveAPI.Scheduler.startTask(linkablePromise,iterativeTask,priority,resolve)};if(initialize!=null)initialize();return new weavejs.util.JS.Promise(__localFn0__)};var linkablePromise;var asyncStart=
__localFn0__;return linkablePromise=new weavejs.core.LinkablePromise(asyncStart,description,validateNow)};weavejs.core.LinkablePromise.prototype._task;weavejs.core.LinkablePromise.prototype._description;weavejs.core.LinkablePromise.prototype._callbackCollection;weavejs.core.LinkablePromise.prototype._lazy=true;weavejs.core.LinkablePromise.prototype._invalidated=true;weavejs.core.LinkablePromise.prototype._jsPromise;weavejs.core.LinkablePromise.prototype._selfTriggeredCount=0;weavejs.core.LinkablePromise.prototype._result;
weavejs.core.LinkablePromise.prototype._error;weavejs.core.LinkablePromise.prototype.validate=function(){if(!this._lazy)return;this._lazy=false;if(this._invalidated)this._callbackCollection.triggerCallbacks()};
weavejs.core.LinkablePromise.prototype._immediateCallback=function(){if(this._callbackCollection.triggerCounter==this._selfTriggeredCount)return;this._invalidated=true;this._jsPromise=null;this._result=null;this._error=null;weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));if(this._lazy)return;if(weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(this)){this._invalidated=false;return}var _tmp_description=null;if(org.apache.flex.utils.Language.is(this._description,
Function))_tmp_description=org.apache.flex.utils.Language.as(this._description,Function)();else _tmp_description=org.apache.flex.utils.Language.as(this._description,String);weavejs.WeaveAPI.ProgressIndicator.addTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'),this,_tmp_description)};
weavejs.core.LinkablePromise.prototype._groupedCallback=function(){try{if(this._lazy||!this._invalidated)return;var invokeResult=this._task.apply(null);if(!this._invalidated)return;this._invalidated=false;this._jsPromise=weavejs.util.WeavePromise.asPromise(invokeResult);if(this._jsPromise)this._jsPromise.then(this._handleResult.bind(this,this._jsPromise),this._handleFault.bind(this,this._jsPromise));else{this._result=invokeResult;weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._handleResult,
this,'_handleResult'))}}catch(invokeError){this._invalidated=false;this._jsPromise=null;this._error=invokeError;weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._handleFault,this,'_handleFault'))}};
weavejs.core.LinkablePromise.prototype._handleResult=function(jsPromise,result){jsPromise=typeof jsPromise!=='undefined'?jsPromise:null;result=typeof result!=='undefined'?result:undefined;if(this._invalidated||this._jsPromise!=jsPromise)return;weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));if(jsPromise)this._result=result;this._selfTriggeredCount=this._callbackCollection.triggerCounter+1;this._callbackCollection.triggerCallbacks()};
weavejs.core.LinkablePromise.prototype._handleFault=function(jsPromise,error){jsPromise=typeof jsPromise!=='undefined'?jsPromise:null;error=typeof error!=='undefined'?error:undefined;if(this._invalidated||this._jsPromise!=jsPromise)return;weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));if(jsPromise)this._error=error;this._selfTriggeredCount=this._callbackCollection.triggerCounter+1;this._callbackCollection.triggerCallbacks()};
weavejs.core.LinkablePromise.prototype.depend=function(dependency,otherDependencies){otherDependencies=Array.prototype.slice.call(arguments,1);otherDependencies.unshift(dependency);var foreachiter0_target=otherDependencies;for(var foreachiter0 in foreachiter0_target){dependency=foreachiter0_target[foreachiter0];Weave.linkableChild(this,dependency)}return this};
weavejs.core.LinkablePromise.prototype.dispose=function(){weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));this._lazy=true;this._invalidated=true;this._jsPromise=null;this._result=null;this._error=null};Object.defineProperties(weavejs.core.LinkablePromise.prototype,{result:{get:function(){this.validate();return this._result}},error:{get:function(){this.validate();return this._error}}});
weavejs.core.LinkablePromise.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkablePromise',qName:'weavejs.core.LinkablePromise'}],interfaces:[weavejs.api.core.ILinkableObject,weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.core.LinkablePromise',weavejs.core.LinkablePromise);
weavejs.core.LinkablePromise.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'result':{type:'Object',declaredBy:'weavejs.core.LinkablePromise'},'error':{type:'Object',declaredBy:'weavejs.core.LinkablePromise'}}},methods:function(){return{'LinkablePromise':{type:'',declaredBy:'weavejs.core.LinkablePromise'},'validate':{type:'void',declaredBy:'weavejs.core.LinkablePromise'},'depend':{type:'LinkablePromise',declaredBy:'weavejs.core.LinkablePromise'},
'dispose':{type:'void',declaredBy:'weavejs.core.LinkablePromise'}}}}};goog.provide('weavejs.net.RequestMethod');weavejs.net.RequestMethod=function(){};weavejs.net.RequestMethod.GET='get';weavejs.net.RequestMethod.POST='post';weavejs.net.RequestMethod.prototype.FLEXJS_CLASS_INFO={names:[{name:'RequestMethod',qName:'weavejs.net.RequestMethod'}]};goog.exportSymbol('weavejs.net.RequestMethod',weavejs.net.RequestMethod);weavejs.net.RequestMethod.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.ResponseType');weavejs.net.ResponseType=function(){};weavejs.net.ResponseType.UINT8ARRAY='uint8array';weavejs.net.ResponseType.ARRAYBUFFER='arraybuffer';weavejs.net.ResponseType.BLOB='blob';weavejs.net.ResponseType.DOCUMENT='document';weavejs.net.ResponseType.JSON='json';weavejs.net.ResponseType.TEXT='text';weavejs.net.ResponseType.DATAURI='datauri';weavejs.net.ResponseType.prototype.FLEXJS_CLASS_INFO={names:[{name:'ResponseType',qName:'weavejs.net.ResponseType'}]};
goog.exportSymbol('weavejs.net.ResponseType',weavejs.net.ResponseType);weavejs.net.ResponseType.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.URLRequest');goog.require('weavejs.net.RequestMethod');goog.require('weavejs.net.ResponseType');weavejs.net.URLRequest=function(url){url=typeof url!=='undefined'?url:null;this.method=weavejs.net.RequestMethod.GET;this.responseType=weavejs.net.ResponseType.UINT8ARRAY;this.url=url};weavejs.net.URLRequest.prototype.method;weavejs.net.URLRequest.prototype.url;weavejs.net.URLRequest.prototype.data;weavejs.net.URLRequest.prototype.requestHeaders;weavejs.net.URLRequest.prototype.responseType;
weavejs.net.URLRequest.prototype.mimeType;weavejs.net.URLRequest.prototype.FLEXJS_CLASS_INFO={names:[{name:'URLRequest',qName:'weavejs.net.URLRequest'}]};goog.exportSymbol('weavejs.net.URLRequest',weavejs.net.URLRequest);
weavejs.net.URLRequest.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'method':{type:'String'},'url':{type:'String'},'data':{type:'String'},'requestHeaders':{type:'Object'},'responseType':{type:'String'},'mimeType':{type:'String'}}},accessors:function(){return{}},methods:function(){return{'URLRequest':{type:'',declaredBy:'weavejs.net.URLRequest'}}}}};goog.provide('weavejs.net.URLRequestUtils');goog.require('weavejs.api.net.IURLRequestUtils');weavejs.net.URLRequestUtils=function(){this.d2d_weaveRoot_fileName_promise=new weavejs.util.Dictionary2D(true)};weavejs.net.URLRequestUtils.prototype.byteArrayToDataUri=function(byteArray,mimeType){return'data:'+(mimeType||'')+';base64,'+weavejs.util.JS.global.btoa(weavejs.util.StandardLib.byteArrayToString(byteArray))};
weavejs.net.URLRequestUtils.prototype.request=function(relevantContext,urlRequest){var self=this;var __localFn0__=function(byteArray){switch(responseType){case weavejs.net.ResponseType.TEXT:return weavejs.util.StandardLib.byteArrayToString(byteArray);case weavejs.net.ResponseType.JSON:return JSON.parse(weavejs.util.StandardLib.byteArrayToString(byteArray));case weavejs.net.ResponseType.BLOB:return new weavejs.util.JS.global.Blob([byteArray.buffer]);case weavejs.net.ResponseType.ARRAYBUFFER:return byteArray.buffer;
case weavejs.net.ResponseType.DOCUMENT:throw new Error('responseType '+weavejs.net.ResponseType.DOCUMENT+' not supported for local files');case weavejs.net.ResponseType.UINT8ARRAY:return byteArray;case weavejs.net.ResponseType.DATAURI:return self.byteArrayToDataUri(byteArray,urlRequest.mimeType);default:}};var __localFn1__=function(resolve,reject){var __localFn0__=function(event){var result=ie9_XHR?xhr.responseText:xhr.response;if(responseType===weavejs.net.ResponseType.UINT8ARRAY)result=new weavejs.util.JS.Uint8Array(result);
if(responseType===weavejs.net.ResponseType.DATAURI)result=self.byteArrayToDataUri(new weavejs.util.JS.Uint8Array(result),urlRequest.mimeType);if(xhr.status<200||xhr.status>299){reject(xhr);done=true}else{resolve(result);done=true}};var __localFn1__=function(event){if(!done)reject(xhr);done=true};var __localFn2__=function(){var __localFn0__=function(){if(!done)reject(xhr);done=true};if(xhr.readyState==4&&xhr.status!=200)weavejs.util.JS.setTimeout(__localFn0__,1E3)};var done=false;var ie9_XHR=weavejs.util.JS.global.XDomainRequest;
var XHR=ie9_XHR||weavejs.util.JS.global.XMLHttpRequest;var xhr=new XHR;xhr.open(urlRequest.method||weavejs.net.RequestMethod.GET,urlRequest.url,true);for(var name in urlRequest.requestHeaders)xhr.setRequestHeader(name,urlRequest.requestHeaders[name],false);if(responseType===weavejs.net.ResponseType.UINT8ARRAY||responseType===weavejs.net.ResponseType.DATAURI)xhr.responseType=weavejs.net.ResponseType.ARRAYBUFFER;else xhr.responseType=responseType;xhr.onload=__localFn0__;xhr.onerror=__localFn1__;xhr.onreadystatechange=
__localFn2__;xhr.send(urlRequest.data)};var responseType=urlRequest.responseType||weavejs.net.ResponseType.UINT8ARRAY;var promise;if(String(urlRequest.url).indexOf(weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME)==0){var fileName=String(urlRequest.url).substr(weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME.length);var weaveRoot=Weave.getRoot(org.apache.flex.utils.Language.as(relevantContext,weavejs.api.core.ILinkableObject));var cachedPromise=this.get_d2d_weaveRoot_fileName_promise(weaveRoot,
fileName);if(cachedPromise.getResult()==null&&cachedPromise.getError()==null)if(weaveRoot)this.removeLocalFile(weaveRoot,fileName);else cachedPromise.setError(new Error(Weave.lang('To request a '+weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME+' URL, the relevantContext must be an ILinkableObject registered under an instance of Weave.')));promise=(new weavejs.util.WeavePromise(relevantContext)).setResult(cachedPromise).then(__localFn0__)}else promise=new weavejs.util.WeavePromise(relevantContext,
__localFn1__);var ilo=org.apache.flex.utils.Language.as(relevantContext,weavejs.api.core.ILinkableObject);if(ilo)weavejs.WeaveAPI.ProgressIndicator.addTask(promise,ilo,urlRequest.url);return promise};weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME='local://';weavejs.net.URLRequestUtils.prototype.d2d_weaveRoot_fileName_promise;
weavejs.net.URLRequestUtils.prototype.get_d2d_weaveRoot_fileName_promise=function(weaveRoot,fileName){var context=weaveRoot||this;var promise=this.d2d_weaveRoot_fileName_promise.get(context,fileName);if(!promise){promise=(new weavejs.util.WeavePromise(context)).setResult(null);this.d2d_weaveRoot_fileName_promise.set(context,fileName,promise)}return promise};
weavejs.net.URLRequestUtils.prototype.saveLocalFile=function(weaveRoot,fileName,byteArray){var promise=this.get_d2d_weaveRoot_fileName_promise(weaveRoot,fileName);promise.setResult(byteArray);return weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME+fileName};weavejs.net.URLRequestUtils.prototype.getLocalFile=function(weaveRoot,fileName){var promise=this.get_d2d_weaveRoot_fileName_promise(weaveRoot,fileName);var result=promise.getResult();return result};
weavejs.net.URLRequestUtils.prototype.removeLocalFile=function(weaveRoot,fileName){var promise=this.get_d2d_weaveRoot_fileName_promise(weaveRoot,fileName);promise.setError(new Error(Weave.lang('Local file missing: {0}',fileName)))};weavejs.net.URLRequestUtils.prototype.getLocalFileNames=function(weaveRoot){return this.d2d_weaveRoot_fileName_promise.secondaryKeys(weaveRoot).sort()};
weavejs.net.URLRequestUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'URLRequestUtils',qName:'weavejs.net.URLRequestUtils'}],interfaces:[weavejs.api.net.IURLRequestUtils]};goog.exportSymbol('weavejs.net.URLRequestUtils',weavejs.net.URLRequestUtils);
weavejs.net.URLRequestUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'request':{type:'WeavePromise',declaredBy:'weavejs.net.URLRequestUtils'},'saveLocalFile':{type:'String',declaredBy:'weavejs.net.URLRequestUtils'},'getLocalFile':{type:'Array',declaredBy:'weavejs.net.URLRequestUtils'},'removeLocalFile':{type:'void',declaredBy:'weavejs.net.URLRequestUtils'},'getLocalFileNames':{type:'Array',declaredBy:'weavejs.net.URLRequestUtils'}}}}};goog.provide('weavejs.core.LinkableFile');goog.require('weavejs.core.LinkablePromise');goog.require('weavejs.net.URLRequest');goog.require('weavejs.net.URLRequestUtils');goog.require('weavejs.api.core.ILinkableVariable');
weavejs.core.LinkableFile=function(defaultValue,taskDescription,responseType){defaultValue=typeof defaultValue!=='undefined'?defaultValue:null;taskDescription=typeof taskDescription!=='undefined'?taskDescription:null;responseType=typeof responseType!=='undefined'?responseType:'uint8array';this.responseType=responseType;this.linkablePromise=Weave.linkableChild(this,new weavejs.core.LinkablePromise(org.apache.flex.utils.Language.closure(this.requestContent,this,'requestContent'),taskDescription));this.url=
Weave.linkableChild(this.linkablePromise,new weavejs.core.LinkableString(defaultValue))};weavejs.core.LinkableFile.prototype.linkablePromise;weavejs.core.LinkableFile.prototype.url;weavejs.core.LinkableFile.prototype.responseType;weavejs.core.LinkableFile.prototype.requestContent=function(){if(!this.url.value)return null;var request=new weavejs.net.URLRequest(this.url.value);request.responseType=this.responseType;return weavejs.WeaveAPI.URLRequestUtils.request(this.linkablePromise,request)};
weavejs.core.LinkableFile.prototype.setSessionState=function(value){this.url.setSessionState(value)};weavejs.core.LinkableFile.prototype.getSessionState=function(){return this.url.getSessionState()};
Object.defineProperties(weavejs.core.LinkableFile.prototype,{isLocal:{get:function(){return this.url.value&&org.apache.flex.utils.Language.as(this.url.value,Object).startsWith(weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME)||!this.url.value}},result:{get:function(){return org.apache.flex.utils.Language.as(this.linkablePromise.result,Object)}},error:{get:function(){return this.linkablePromise.error}},value:{get:function(){return this.url.value},set:function(new_value){this.url.value=new_value}}});
weavejs.core.LinkableFile.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableFile',qName:'weavejs.core.LinkableFile'}],interfaces:[weavejs.api.core.ILinkableVariable]};goog.exportSymbol('weavejs.core.LinkableFile',weavejs.core.LinkableFile);
weavejs.core.LinkableFile.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.core.LinkableFile'},'result':{type:'Object',declaredBy:'weavejs.core.LinkableFile'},'error':{type:'Object',declaredBy:'weavejs.core.LinkableFile'},'value':{type:'String',declaredBy:'weavejs.core.LinkableFile'}}},methods:function(){return{'LinkableFile':{type:'',declaredBy:'weavejs.core.LinkableFile'},'setSessionState':{type:'void',
declaredBy:'weavejs.core.LinkableFile'},'getSessionState':{type:'Object',declaredBy:'weavejs.core.LinkableFile'}}}}};goog.provide('weavejs.api.data.IDataSource_File');goog.require('weavejs.api.data.IDataSource');weavejs.api.data.IDataSource_File=function(){};weavejs.api.data.IDataSource_File.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDataSource_File',qName:'weavejs.api.data.IDataSource_File'}],interfaces:[weavejs.api.data.IDataSource]};weavejs.api.data.IDataSource_File.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.data.source.CSVDataSource');goog.require('weavejs.core.LinkableFile');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.net.ResponseType');goog.require('weavejs.api.core.ILinkableObjectWithNewProperties');goog.require('weavejs.api.data.IDataSource_File');
weavejs.data.source.CSVDataSource=function(){this.csvData=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array,org.apache.flex.utils.Language.closure(this.verifyRows,this,'verifyRows')),org.apache.flex.utils.Language.closure(this.handleCSVDataChange,this,'handleCSVDataChange'));this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString,org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'));this.keyColumn=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,
org.apache.flex.utils.Language.closure(this.verifyKeyColumnId,this,'verifyKeyColumnId')),org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'));this.metadata=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.verifyMetadata,this,'verifyMetadata')));this.url=Weave.linkableChild(this,new weavejs.core.LinkableFile(null,null,weavejs.net.ResponseType.TEXT),org.apache.flex.utils.Language.closure(this.parseRawData,this,'parseRawData'));
this.delimiter=Weave.linkableChild(this,new weavejs.core.LinkableString(',',org.apache.flex.utils.Language.closure(this.verifyDelimiter,this,'verifyDelimiter')),org.apache.flex.utils.Language.closure(this.parseRawData,this,'parseRawData'));this.cachedDataTypes={};this.columnIds=[];this.keysCallbacks=Weave.linkableChild(this,weavejs.core.CallbackCollection);this.nullValues=[null,'','null','\\N','NaN'];weavejs.data.source.CSVDataSource.base(this,'constructor');Weave.linkableChild(this.hierarchyRefresh,
this.metadata)};goog.inherits(weavejs.data.source.CSVDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.CSVDataSource.prototype.getLabel=function(){return this.label.value||(this.url.value||'').split('/').pop()||weavejs.data.source.CSVDataSource.base(this,'getLabel')};weavejs.data.source.CSVDataSource.prototype.csvData;weavejs.data.source.CSVDataSource.prototype.verifyRows=function(rows){return weavejs.util.StandardLib.arrayIsType(rows,Array)};weavejs.data.source.CSVDataSource.prototype.keyType;
weavejs.data.source.CSVDataSource.prototype.keyColumn;weavejs.data.source.CSVDataSource.prototype.verifyKeyColumnId=function(value){return org.apache.flex.utils.Language.is(value,Number)||org.apache.flex.utils.Language.is(value,String)||value==null};weavejs.data.source.CSVDataSource.prototype.metadata;weavejs.data.source.CSVDataSource.prototype.verifyMetadata=function(value){return typeof value=='object'};weavejs.data.source.CSVDataSource.prototype.url;weavejs.data.source.CSVDataSource.prototype.delimiter;
weavejs.data.source.CSVDataSource.prototype.verifyDelimiter=function(value){return value&&value.length==1&&value!='"'};
weavejs.data.source.CSVDataSource.prototype.parseRawData=function(){if(!this.url.value){this.handleCSVDataChange();return}if(this.url.error)weavejs.util.JS.error(this.url.error);if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.parseRawData,this,'parseRawData'),this.delimiter)){if(this.csvParser)Weave.dispose(this.csvParser);this.csvParser=Weave.linkableChild(this,new weavejs.data.CSVParser(true,this.delimiter.value),org.apache.flex.utils.Language.closure(this.handleCSVParser,this,
'handleCSVParser'))}this.csvParser.parseCSV(String(this.url.result||''))};weavejs.data.source.CSVDataSource.prototype.csvParser;weavejs.data.source.CSVDataSource.prototype.handleCSVParser=function(){if(this.url.value)this.handleParsedRows(this.csvParser.parseResult);else this.csvData.setSessionState(this.csvParser.parseResult)};
weavejs.data.source.CSVDataSource.prototype.handleCSVDataChange=function(){var rows=org.apache.flex.utils.Language.as(this.csvData.getSessionState(),Array);if(this.url.value&&rows!=null&&rows.length)this.url.value=null;if(!this.url.value)this.handleParsedRows(rows)};weavejs.data.source.CSVDataSource.prototype.parsedRows;weavejs.data.source.CSVDataSource.prototype.cachedDataTypes;weavejs.data.source.CSVDataSource.prototype.columnIds;weavejs.data.source.CSVDataSource.prototype.keysArray;weavejs.data.source.CSVDataSource.prototype.keysCallbacks;
weavejs.data.source.CSVDataSource.prototype.handleParsedRows=function(rows){if(!rows)rows=[];this.cachedDataTypes={};this.parsedRows=rows;this.columnIds=org.apache.flex.utils.Language.is(rows[0],Array)?org.apache.flex.utils.Language.as(rows[0],Array).concat():[];var nameLookup={};for(var i=0;i<this.columnIds.length;i++)if(!this.columnIds[i]||nameLookup.hasOwnProperty(this.columnIds[i]))this.columnIds[i]=i;else nameLookup[this.columnIds[i]]=true;this.updateKeys(true);this.hierarchyRefresh.triggerCallbacks()};
weavejs.data.source.CSVDataSource.prototype.updateKeys=function(forced){forced=typeof forced!=='undefined'?forced:false;var changed=Weave.detectChange(org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'),this.keyType,this.keyColumn);if(this.parsedRows&&(forced||changed)){var colNames=this.parsedRows[0]||[];var keyColIndex=-1;if(org.apache.flex.utils.Language.is(this.keyColumn.state,String)&&this.keyColumn.state!=''){keyColIndex=colNames.indexOf(org.apache.flex.utils.Language.as(this.keyColumn.state,
String));if(keyColIndex<0)keyColIndex=-2}if(org.apache.flex.utils.Language.is(this.keyColumn.state,Number))keyColIndex=org.apache.flex.utils.Language.as(this.keyColumn.state,Number);var keyStrings=this.getColumnValues(this.parsedRows,keyColIndex,[]);var keyTypeString=this.keyType.value;this.keysArray=[];org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager).getQKeysAsync(this.keysCallbacks,this.keyType.value,keyStrings,org.apache.flex.utils.Language.closure(this.handleUpdatedKeys,
this,'handleUpdatedKeys'),this.keysArray)}};weavejs.data.source.CSVDataSource.prototype.handleUpdatedKeys=function(){this._keysAreUnique=weavejs.util.ArrayUtils.union(this.keysArray).length==this.keysArray.length};weavejs.data.source.CSVDataSource.prototype._keysAreUnique=true;weavejs.data.source.CSVDataSource.prototype.setCSVData=function(rows){if(!this.verifyRows(rows))throw new Error('Invalid data format. Expecting nested Arrays.');this.csvData.setSessionState(rows)};
weavejs.data.source.CSVDataSource.prototype.getCSVData=function(){return org.apache.flex.utils.Language.as(this.csvData.getSessionState(),Array)};weavejs.data.source.CSVDataSource.prototype.setCSVDataString=function(csvDataString){this.csvData.setSessionState(weavejs.WeaveAPI.CSVParser.parseCSV(csvDataString))};weavejs.data.source.CSVDataSource.prototype.getColumnNames=function(){return this.getColumnIds().map(org.apache.flex.utils.Language.closure(this.asString,this,'asString'))};
weavejs.data.source.CSVDataSource.prototype.asString=function(value,i,a){return org.apache.flex.utils.Language.as(value,String)};weavejs.data.source.CSVDataSource.prototype.getColumnIds=function(){return this.columnIds.concat()};
weavejs.data.source.CSVDataSource.prototype.getColumnMetadata=function(id){try{if(org.apache.flex.utils.Language.is(id,Number))id=this.columnIds[id];var meta=this.metadata.getSessionState();if(org.apache.flex.utils.Language.is(meta,Array)){var array=org.apache.flex.utils.Language.as(meta,Array);for(var i=0;i<array.length;i++){var item=array[i];var itemId=item[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME]||item[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX];if(itemId===undefined)itemId=
this.columnIds[i];if(itemId===id)return item}return null}else if(meta)return meta[id]}catch(e){weavejs.util.JS.error(e)}return null};weavejs.data.source.CSVDataSource.prototype.getColumnTitle=function(id){var meta=this.getColumnMetadata(id);var title=meta?meta[weavejs.api.data.ColumnMetadata.TITLE]:null;if(!title&&typeof id=='number'&&this.parsedRows&&this.parsedRows.length)title=this.parsedRows[0][id];if(!title)if(typeof id=='number')title=Weave.lang('Column {0}',id);else title=String(id);return title};
weavejs.data.source.CSVDataSource.prototype.generateMetadataForColumnId=function(id){var metadata={};metadata[weavejs.api.data.ColumnMetadata.TITLE]=this.getColumnTitle(id);metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.keyType.value||weavejs.api.data.DataType.STRING;if(this.cachedDataTypes[id])metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.cachedDataTypes[id];var meta=this.getColumnMetadata(id);for(var key in meta)metadata[key]=meta[key];if(typeof id=='number')metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX]=
String(id);else metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME]=String(id);return metadata};weavejs.data.source.CSVDataSource.prototype.generateNewAttributeColumn=function(metadata){if(typeof metadata!='object')metadata=this.generateMetadataForColumnId(metadata);return weavejs.data.source.CSVDataSource.base(this,'generateNewAttributeColumn',metadata)};
weavejs.data.source.CSVDataSource.prototype.getColumnById=function(columnNameOrIndex){return weavejs.WeaveAPI.AttributeColumnCache.getColumn(this,columnNameOrIndex)};
weavejs.data.source.CSVDataSource.prototype.putColumnInHashMap=function(columnNameOrIndex,destinationHashMap){var sourceOwner=org.apache.flex.utils.Language.as(Weave.getOwner(this),weavejs.api.core.ILinkableHashMap);if(!sourceOwner)return null;Weave.getCallbacks(destinationHashMap).delayCallbacks();var refCol=destinationHashMap.requestObject(null,weavejs.data.column.ReferencedColumn,false);refCol.setColumnReference(this,this.generateMetadataForColumnId(columnNameOrIndex));Weave.getCallbacks(destinationHashMap).resumeCallbacks();
return refCol};weavejs.data.source.CSVDataSource.prototype.putColumn=function(columnNameOrIndex,dynamicColumn){var sourceOwner=org.apache.flex.utils.Language.as(Weave.getOwner(this),weavejs.api.core.ILinkableHashMap);if(!sourceOwner||!dynamicColumn)return false;dynamicColumn.delayCallbacks();var refCol=dynamicColumn.requestLocalObject(weavejs.data.column.ReferencedColumn,false);refCol.setColumnReference(this,this.generateMetadataForColumnId(columnNameOrIndex));dynamicColumn.resumeCallbacks();return true};
weavejs.data.source.CSVDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;if(this.url.value)this.csvData.setSessionState(null);weavejs.data.source.CSVDataSource.base(this,'initialize',true)};
weavejs.data.source.CSVDataSource.prototype.getHierarchyRoot=function(){var self=this;var __localFn0__=function(root){var items=org.apache.flex.utils.Language.as(self.metadata.getSessionState(),Array);if(!items)items=self.getColumnIds();var children=[];for(var i=0;i<items.length;i++){var item=items[i];children[i]=self.generateHierarchyNode(item)||self.generateHierarchyNode(i)}return children};if(!this._rootNode)this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({cacheSettings:{'label':false},
dataSource:this,'label':org.apache.flex.utils.Language.closure(this.getLabel,this,'getLabel'),children:__localFn0__});return this._rootNode};
weavejs.data.source.CSVDataSource.prototype.generateHierarchyNode=function(metadata){if(typeof metadata!='object')metadata=this.generateMetadataForColumnId(metadata);if(!metadata)return null;if(metadata.hasOwnProperty(weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX)||metadata.hasOwnProperty(weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME))return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,'label':org.apache.flex.utils.Language.closure(this.getColumnNodeLabel,this,'getColumnNodeLabel'),
idFields:[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX,weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME],data:metadata});return null};weavejs.data.source.CSVDataSource.prototype.getColumnNodeLabel=function(node){var title=node.data[weavejs.api.data.ColumnMetadata.TITLE]||node.data[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME];if(!title&&node.data['name']){title=node.data['name'];if(node.data['year'])title=weavejs.util.StandardLib.substitute('{0} ({1})',title,node.data['year'])}return title};
weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX='csvColumnIndex';weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME='csvColumn';
weavejs.data.source.CSVDataSource.prototype.requestColumnFromSource=function(proxyColumn){var metadata=proxyColumn.getProxyMetadata();var columnId=metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX];if(columnId!=null)columnId=org.apache.flex.utils.Language._int(columnId);else{columnId=metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME];if(!columnId){for(var i=0;i<this.columnIds.length;i++){var meta=this.getColumnMetadata(this.columnIds[i]);if(!meta)continue;var found=0;
for(var key in metadata){if(meta[key]!=metadata[key]){found=0;break}found++}if(found){columnId=i;break}}if(!columnId)columnId=metadata['name']}}var colNames=this.parsedRows[0]||[];var colIndex,colName;if(typeof columnId=='number'){colIndex=org.apache.flex.utils.Language._int(columnId);colName=colNames[columnId]}else{colIndex=colNames.indexOf(columnId);colName=String(columnId)}if(colIndex<0){proxyColumn.dataUnavailable(Weave.lang('No such column: {0}',columnId));return}metadata=this.generateMetadataForColumnId(columnId);
proxyColumn.setMetadata(metadata);var strings=this.getColumnValues(this.parsedRows,colIndex,[]);var numbers=null;var dateFormats=null;if(!this.keysArray||strings.length!=this.keysArray.length){proxyColumn.setInternalColumn(null);return}var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];if(dataType==null||dataType==weavejs.api.data.DataType.NUMBER)numbers=this.stringsToNumbers(strings,dataType==weavejs.api.data.DataType.NUMBER);if(!numbers&&dataType==null||dataType==weavejs.api.data.DataType.DATE)dateFormats=
weavejs.data.column.DateColumn.detectDateFormats(strings);var newColumn;if(numbers){newColumn=new weavejs.data.column.NumberColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.NumberColumn).setRecords(this.keysArray,numbers)}else if(dataType==weavejs.api.data.DataType.DATE||dateFormats&&dateFormats.length>0){newColumn=new weavejs.data.column.DateColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.DateColumn).setRecords(this.keysArray,strings)}else{newColumn=
new weavejs.data.column.StringColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.StringColumn).setRecords(this.keysArray,strings)}this.cachedDataTypes[columnId]=newColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);proxyColumn.setInternalColumn(newColumn)};
weavejs.data.source.CSVDataSource.prototype.getColumnValues=function(rows,columnIndex,outputArray){outputArray.length=Math.max(0,rows.length-1);var i;if(columnIndex==-1)for(i=1;i<rows.length;i++)outputArray[i-1]=i;else for(i=1;i<rows.length;i++)outputArray[i-1]=rows[i][columnIndex];return outputArray};
weavejs.data.source.CSVDataSource.prototype.stringsToNumbers=function(strings,forced){var nonNumber=null;var foundNumber=forced;var numbers=new Array(strings.length);var i=strings.length;outerLoop:while(i--){var string=weavejs.util.StandardLib.trim(String(strings[i]));var foreachiter0_target=this.nullValues;for(var foreachiter0 in foreachiter0_target){var nullValue=foreachiter0_target[foreachiter0];var a=nullValue&&nullValue.toLocaleLowerCase();var b=string&&string.toLocaleLowerCase();if(a==b){numbers[i]=
NaN;continue outerLoop}}if(!forced&&string.length>1&&string.charAt(0)=='0'&&string.charAt(1)!='.')return null;if(string.indexOf(',')>=0)string=string.split(',').join('');var number=Number(string);if(forced||isFinite(number))foundNumber=true;else if(nonNumber&&nonNumber!=string)return null;else nonNumber=string;numbers[i]=number}return foundNumber?numbers:null};weavejs.data.source.CSVDataSource.prototype.nullValues;weavejs.data.source.CSVDataSource.prototype.getColumnByName=function(name){return this.getColumnById(name)};
Object.defineProperties(weavejs.data.source.CSVDataSource.prototype,{isLocal:{get:function(){return!!this.csvData.state||this.url.isLocal}},keysAreUnique:{get:function(){return this._keysAreUnique}},initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.CSVDataSource,this,'initializationComplete')&&this.parsedRows&&this.keysArray&&!Weave.isBusy(this.keysCallbacks)}},deprecatedStateMapping:{get:function(){return{keyColName:this.keyColumn,csvDataString:org.apache.flex.utils.Language.closure(this.setCSVDataString,
this,'setCSVDataString')}}}});weavejs.data.source.CSVDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'CSVDataSource',qName:'weavejs.data.source.CSVDataSource'}],interfaces:[weavejs.api.data.IDataSource_File,weavejs.api.core.ILinkableObjectWithNewProperties]};goog.exportSymbol('weavejs.data.source.CSVDataSource',weavejs.data.source.CSVDataSource);
weavejs.data.source.CSVDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'csvData':{type:'LinkableVariable'},'keyType':{type:'LinkableString'},'keyColumn':{type:'LinkableVariable'},'metadata':{type:'LinkableVariable'},'url':{type:'LinkableFile'},'delimiter':{type:'LinkableString'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.CSVDataSource'},'keysAreUnique':{type:'Boolean',declaredBy:'weavejs.data.source.CSVDataSource'},
'deprecatedStateMapping':{type:'Object',declaredBy:'weavejs.data.source.CSVDataSource'}}},methods:function(){return{'CSVDataSource':{type:'',declaredBy:'weavejs.data.source.CSVDataSource'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.CSVDataSource'},'setCSVData':{type:'void',declaredBy:'weavejs.data.source.CSVDataSource'},'getCSVData':{type:'Array',declaredBy:'weavejs.data.source.CSVDataSource'},'setCSVDataString':{type:'void',declaredBy:'weavejs.data.source.CSVDataSource'},'getColumnNames':{type:'Array',
declaredBy:'weavejs.data.source.CSVDataSource'},'getColumnIds':{type:'Array',declaredBy:'weavejs.data.source.CSVDataSource'},'getColumnTitle':{type:'String',declaredBy:'weavejs.data.source.CSVDataSource'},'generateMetadataForColumnId':{type:'Object',declaredBy:'weavejs.data.source.CSVDataSource'},'generateNewAttributeColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.source.CSVDataSource'},'getColumnById':{type:'IAttributeColumn',declaredBy:'weavejs.data.source.CSVDataSource'},'putColumnInHashMap':{type:'IAttributeColumn',
declaredBy:'weavejs.data.source.CSVDataSource'},'putColumn':{type:'Boolean',declaredBy:'weavejs.data.source.CSVDataSource'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.CSVDataSource'},'getColumnByName':{type:'IAttributeColumn',declaredBy:'weavejs.data.source.CSVDataSource',metadata:function(){return[]}}}}}};goog.provide('weavejs.net.Protocol');weavejs.net.Protocol=function(){};weavejs.net.Protocol.URL_PARAMS='url params/jsonrpc 2.0';weavejs.net.Protocol.COMPRESSED_AMF='amf3/compressed amf3';weavejs.net.Protocol.JSONRPC_2_0='jsonrpc 2.0';weavejs.net.Protocol.JSONRPC_2_0_AMF='jsonrpc 2.0/amf3';weavejs.net.Protocol.prototype.FLEXJS_CLASS_INFO={names:[{name:'Protocol',qName:'weavejs.net.Protocol'}]};goog.exportSymbol('weavejs.net.Protocol',weavejs.net.Protocol);
weavejs.net.Protocol.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.util.StringView');
weavejs.util.StringView=function(vInput,sEncoding,nOffset,nLength){sEncoding=typeof sEncoding!=='undefined'?sEncoding:null;nOffset=typeof nOffset!=='undefined'?nOffset:NaN;nLength=typeof nLength!=='undefined'?nLength:NaN;var fTAView,aWhole,aRaw,fPutOutptCode,fGetOutptChrSize,nInptLen,nStartIdx=isFinite(nOffset)?nOffset:0,nTranscrType=15;var nChrCode,nChrIdx;if(sEncoding)this.encoding=sEncoding.toString();encSwitch:switch(this.encoding){case 'UTF-8':fPutOutptCode=weavejs.util.StringView.putUTF8CharCode;
fGetOutptChrSize=weavejs.util.StringView.getUTF8CharLength;fTAView=weavejs.util.StringView.Uint8Array;break encSwitch;case 'UTF-16':fPutOutptCode=weavejs.util.StringView.putUTF16CharCode;fGetOutptChrSize=weavejs.util.StringView.getUTF16CharLength;fTAView=weavejs.util.StringView.Uint16Array;break encSwitch;case 'UTF-32':fTAView=weavejs.util.StringView.Uint32Array;nTranscrType&=14;break encSwitch;default:fTAView=weavejs.util.StringView.Uint8Array;nTranscrType&=14}typeSwitch:switch(typeof vInput){case 'string':nTranscrType&=
7;break typeSwitch;case 'object':classSwitch:switch(vInput.constructor){case weavejs.util.StringView:nTranscrType&=3;break typeSwitch;case String:nTranscrType&=7;break typeSwitch;case weavejs.util.StringView.ArrayBuffer:aWhole=new fTAView(vInput);nInptLen=this.encoding==='UTF-32'?vInput.byteLength>>>2:this.encoding==='UTF-16'?vInput.byteLength>>>1:vInput.byteLength;aRaw=nStartIdx===0&&(!isFinite(nLength)||nLength===nInptLen)?aWhole:new fTAView(vInput,nStartIdx,!isFinite(nLength)?nInptLen-nStartIdx:
nLength);break typeSwitch;case weavejs.util.StringView.Uint32Array:case weavejs.util.StringView.Uint16Array:case weavejs.util.StringView.Uint8Array:fTAView=vInput.constructor;nInptLen=vInput.length;aWhole=vInput.byteOffset===0&&vInput.length===(fTAView===weavejs.util.StringView.Uint32Array?vInput.buffer.byteLength>>>2:fTAView===weavejs.util.StringView.Uint16Array?vInput.buffer.byteLength>>>1:vInput.buffer.byteLength)?vInput:new fTAView(vInput.buffer);aRaw=nStartIdx===0&&(!isFinite(nLength)||nLength===
nInptLen)?vInput:vInput.subarray(nStartIdx,isFinite(nLength)?nStartIdx+nLength:nInptLen);break typeSwitch;default:aWhole=new fTAView(vInput);nInptLen=aWhole.length;aRaw=nStartIdx===0&&(!isFinite(nLength)||nLength===nInptLen)?aWhole:aWhole.subarray(nStartIdx,isFinite(nLength)?nStartIdx+nLength:nInptLen)}break typeSwitch;default:aWhole=aRaw=new fTAView(Number(vInput)||0)}if(nTranscrType<8){var vSource,nOutptLen,nCharStart,nCharEnd,nEndIdx,fGetInptChrSize,fGetInptChrCode;if(nTranscrType&4){vSource=vInput;
nOutptLen=nInptLen=vSource.length;nTranscrType^=this.encoding==='UTF-32'?0:2;nStartIdx=nCharStart=nOffset?Math.max((nOutptLen+nOffset)%nOutptLen,0):0;nEndIdx=nCharEnd=(weavejs.util.StringView.Number_isInteger(nLength)?Math.min(Math.max(nLength,0)+nStartIdx,nOutptLen):nOutptLen)-1}else{vSource=vInput.rawData;nInptLen=vInput.makeIndex();nStartIdx=nCharStart=nOffset?Math.max((nInptLen+nOffset)%nInptLen,0):0;nOutptLen=weavejs.util.StringView.Number_isInteger(nLength)?Math.min(Math.max(nLength,0),nInptLen-
nCharStart):nInptLen;nEndIdx=nCharEnd=nOutptLen+nCharStart;if(vInput.encoding==='UTF-8'){fGetInptChrSize=weavejs.util.StringView.getUTF8CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF8CharCode}else if(vInput.encoding==='UTF-16'){fGetInptChrSize=weavejs.util.StringView.getUTF16CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF16CharCode}else nTranscrType&=1}if(nOutptLen===0||nTranscrType<4&&vSource.encoding===this.encoding&&nCharStart===0&&nOutptLen===nInptLen)nTranscrType=7;conversionSwitch:switch(nTranscrType){case 0:aWhole=
new fTAView(nOutptLen);for(var nOutptIdx=0;nOutptIdx<nOutptLen;aWhole[nOutptIdx]=vSource[nStartIdx+nOutptIdx++])break conversionSwitch;case 1:nOutptLen=0;for(var nInptIdx=nStartIdx;nInptIdx<nEndIdx;nInptIdx++)nOutptLen+=fGetOutptChrSize(vSource[nInptIdx]);aWhole=new fTAView(nOutptLen);for(nInptIdx=nStartIdx,nOutptIdx=0;nOutptIdx<nOutptLen;nInptIdx++)nOutptIdx=fPutOutptCode(aWhole,vSource[nInptIdx],nOutptIdx);break conversionSwitch;case 2:nStartIdx=0;for(nChrIdx=0;nChrIdx<nCharStart;nChrIdx++){nChrCode=
fGetInptChrCode(vSource,nStartIdx);nStartIdx+=fGetInptChrSize(nChrCode)}aWhole=new fTAView(nOutptLen);for(nInptIdx=nStartIdx,nOutptIdx=0;nOutptIdx<nOutptLen;nInptIdx+=fGetInptChrSize(nChrCode),nOutptIdx++){nChrCode=fGetInptChrCode(vSource,nInptIdx);aWhole[nOutptIdx]=nChrCode}break conversionSwitch;case 3:nOutptLen=0;for(nChrIdx=0,nInptIdx=0;nChrIdx<nCharEnd;nInptIdx+=fGetInptChrSize(nChrCode)){nChrCode=fGetInptChrCode(vSource,nInptIdx);if(nChrIdx===nCharStart)nStartIdx=nInptIdx;if(++nChrIdx>nCharStart)nOutptLen+=
fGetOutptChrSize(nChrCode)}aWhole=new fTAView(nOutptLen);for(nInptIdx=nStartIdx,nOutptIdx=0;nOutptIdx<nOutptLen;nInptIdx+=fGetInptChrSize(nChrCode)){nChrCode=fGetInptChrCode(vSource,nInptIdx);nOutptIdx=fPutOutptCode(aWhole,nChrCode,nOutptIdx)}break conversionSwitch;case 4:aWhole=new fTAView(nOutptLen);for(var nIdx=0;nIdx<nOutptLen;nIdx++)aWhole[nIdx]=vSource.charCodeAt(nIdx)&255;break conversionSwitch;case 5:nOutptLen=0;for(var nMapIdx=0;nMapIdx<nInptLen;nMapIdx++){if(nMapIdx===nCharStart)nStartIdx=
nOutptLen;nOutptLen+=fGetOutptChrSize(vSource.charCodeAt(nMapIdx));if(nMapIdx===nCharEnd)nEndIdx=nOutptLen}aWhole=new fTAView(nOutptLen);for(nOutptIdx=0,nChrIdx=0;nOutptIdx<nOutptLen;nChrIdx++)nOutptIdx=fPutOutptCode(aWhole,vSource.charCodeAt(nChrIdx),nOutptIdx);break conversionSwitch;case 6:aWhole=new fTAView(nOutptLen);for(nIdx=0;nIdx<nOutptLen;nIdx++)aWhole[nIdx]=vSource.charCodeAt(nIdx);break conversionSwitch;case 7:aWhole=new fTAView(nOutptLen?vSource:0);break conversionSwitch}aRaw=nTranscrType>
3&&(nStartIdx>0||nEndIdx<aWhole.length-1)?aWhole.subarray(nStartIdx,nEndIdx):aWhole}this.buffer=aWhole.buffer;this.bufferView=aWhole;this.rawData=aRaw};weavejs.util.StringView.ArrayBuffer=weavejs.util.JS.global.ArrayBuffer;weavejs.util.StringView.Uint32Array=weavejs.util.JS.global.Uint32Array;weavejs.util.StringView.Uint16Array=weavejs.util.JS.global.Uint16Array;weavejs.util.StringView.Uint8Array=weavejs.util.JS.global.Uint8Array;weavejs.util.StringView.prototype.buffer;weavejs.util.StringView.prototype.bufferView;
weavejs.util.StringView.prototype.rawData;weavejs.util.StringView.Number_isInteger=function(nVal){return typeof nVal==='number'&&isFinite(nVal)&&nVal>-9007199254740992&&nVal<9007199254740992&&Math.floor(nVal)===nVal};
weavejs.util.StringView.loadUTF8CharCode=function(aChars,nIdx){var nLen=aChars.length,nPart=aChars[nIdx];return nPart>251&&nPart<254&&nIdx+5<nLen?(nPart-252)*1073741824+(aChars[nIdx+1]-128<<24)+(aChars[nIdx+2]-128<<18)+(aChars[nIdx+3]-128<<12)+(aChars[nIdx+4]-128<<6)+aChars[nIdx+5]-128:nPart>247&&nPart<252&&nIdx+4<nLen?(nPart-248<<24)+(aChars[nIdx+1]-128<<18)+(aChars[nIdx+2]-128<<12)+(aChars[nIdx+3]-128<<6)+aChars[nIdx+4]-128:nPart>239&&nPart<248&&nIdx+3<nLen?(nPart-240<<18)+(aChars[nIdx+1]-128<<
12)+(aChars[nIdx+2]-128<<6)+aChars[nIdx+3]-128:nPart>223&&nPart<240&&nIdx+2<nLen?(nPart-224<<12)+(aChars[nIdx+1]-128<<6)+aChars[nIdx+2]-128:nPart>191&&nPart<224&&nIdx+1<nLen?(nPart-192<<6)+aChars[nIdx+1]-128:nPart};
weavejs.util.StringView.putUTF8CharCode=function(aTarget,nChar,nPutAt){var nIdx=nPutAt;if(nChar<128)aTarget[nIdx++]=nChar;else if(nChar<2048){aTarget[nIdx++]=192+(nChar>>>6);aTarget[nIdx++]=128+(nChar&63)}else if(nChar<65536){aTarget[nIdx++]=224+(nChar>>>12);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}else if(nChar<2097152){aTarget[nIdx++]=240+(nChar>>>18);aTarget[nIdx++]=128+(nChar>>>12&63);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}else if(nChar<67108864){aTarget[nIdx++]=
248+(nChar>>>24);aTarget[nIdx++]=128+(nChar>>>18&63);aTarget[nIdx++]=128+(nChar>>>12&63);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}else{aTarget[nIdx++]=252+nChar/1073741824;aTarget[nIdx++]=128+(nChar>>>24&63);aTarget[nIdx++]=128+(nChar>>>18&63);aTarget[nIdx++]=128+(nChar>>>12&63);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}return nIdx};
weavejs.util.StringView.getUTF8CharLength=function(nChar){return nChar<128?1:nChar<2048?2:nChar<65536?3:nChar<2097152?4:nChar<67108864?5:6};weavejs.util.StringView.loadUTF16CharCode=function(aChars,nIdx){var nFrstChr=aChars[nIdx];return nFrstChr>55231&&nIdx+1<aChars.length?(nFrstChr-55296<<10)+aChars[nIdx+1]+9216:nFrstChr};
weavejs.util.StringView.putUTF16CharCode=function(aTarget,nChar,nPutAt){var nIdx=nPutAt;if(nChar<65536)aTarget[nIdx++]=nChar;else{aTarget[nIdx++]=55232+(nChar>>>10);aTarget[nIdx++]=56320+(nChar&1023)}return nIdx};weavejs.util.StringView.getUTF16CharLength=function(nChar){return nChar<65536?1:2};weavejs.util.StringView.b64ToUint6=function(nChr){return nChr>64&&nChr<91?nChr-65:nChr>96&&nChr<123?nChr-71:nChr>47&&nChr<58?nChr+4:nChr===43?62:nChr===47?63:0};
weavejs.util.StringView.uint6ToB64=function(nUint6){return nUint6<26?nUint6+65:nUint6<52?nUint6+71:nUint6<62?nUint6-4:nUint6===62?43:nUint6===63?47:65};
weavejs.util.StringView.bytesToBase64=function(aBytes){var sB64Enc='';var nMod3,nLen=aBytes.length,nUint24=0,nIdx=0;for(;nIdx<nLen;nIdx++){nMod3=nIdx%3;if(nIdx>0&&nIdx*4/3%76===0)sB64Enc+='\r\n';nUint24|=aBytes[nIdx]<<(16>>>nMod3&24);if(nMod3===2||aBytes.length-nIdx===1){sB64Enc+=String.fromCharCode(weavejs.util.StringView.uint6ToB64(nUint24>>>18&63),weavejs.util.StringView.uint6ToB64(nUint24>>>12&63),weavejs.util.StringView.uint6ToB64(nUint24>>>6&63),weavejs.util.StringView.uint6ToB64(nUint24&63));
nUint24=0}}return sB64Enc.replace(/A(?=A$|$)/g,'\x3d')};
weavejs.util.StringView.base64ToBytes=function(sBase64,nBlockBytes){nBlockBytes=typeof nBlockBytes!=='undefined'?nBlockBytes:undefined;var sB64Enc=sBase64.replace(/[^A-Za-z0-9\+\/]/g,''),nInLen=sB64Enc.length,nOutLen=nBlockBytes?Math.ceil((nInLen*3+1>>>2)/nBlockBytes)*nBlockBytes:nInLen*3+1>>>2,aBytes=new weavejs.util.StringView.Uint8Array(nOutLen);var nMod3,nMod4,nUint24=0,nOutIdx=0,nInIdx=0;for(;nInIdx<nInLen;nInIdx++){nMod4=nInIdx&3;nUint24|=weavejs.util.StringView.b64ToUint6(sB64Enc.charCodeAt(nInIdx))<<
18-6*nMod4;if(nMod4===3||nInLen-nInIdx===1){for(nMod3=0;nMod3<3&&nOutIdx<nOutLen;nMod3++,nOutIdx++)aBytes[nOutIdx]=nUint24>>>(16>>>nMod3&24)&255;nUint24=0}}return aBytes};weavejs.util.StringView.makeFromBase64=function(sB64Inpt,sEncoding,nByteOffset,nLength){return new weavejs.util.StringView(sEncoding==='UTF-16'||sEncoding==='UTF-32'?weavejs.util.StringView.base64ToBytes(sB64Inpt,sEncoding==='UTF-16'?2:4).buffer:weavejs.util.StringView.base64ToBytes(sB64Inpt),sEncoding,nByteOffset,nLength)};
weavejs.util.StringView.prototype.encoding='UTF-8';
weavejs.util.StringView.prototype.makeIndex=function(nChrLength,nStartFrom){nChrLength=typeof nChrLength!=='undefined'?nChrLength:undefined;nStartFrom=typeof nStartFrom!=='undefined'?nStartFrom:undefined;var aTarget=this.rawData,nChrEnd,nRawLength=aTarget.length,nStartIdx=nStartFrom||0,nIdxEnd=nStartIdx,nStopAtChr=isNaN(nChrLength)?Infinity:nChrLength;if(nChrLength+1>aTarget.length)throw new RangeError("public function makeIndex - The offset can't be major than the length of the array - 1.");switch(this.encoding){case 'UTF-8':var nPart;
for(nChrEnd=0;nIdxEnd<nRawLength&&nChrEnd<nStopAtChr;nChrEnd++){nPart=aTarget[nIdxEnd];nIdxEnd+=nPart>251&&nPart<254&&nIdxEnd+5<nRawLength?6:nPart>247&&nPart<252&&nIdxEnd+4<nRawLength?5:nPart>239&&nPart<248&&nIdxEnd+3<nRawLength?4:nPart>223&&nPart<240&&nIdxEnd+2<nRawLength?3:nPart>191&&nPart<224&&nIdxEnd+1<nRawLength?2:1}break;case 'UTF-16':for(nChrEnd=nStartIdx;nIdxEnd<nRawLength&&nChrEnd<nStopAtChr;nChrEnd++)nIdxEnd+=aTarget[nIdxEnd]>55231&&nIdxEnd+1<aTarget.length?2:1;break;default:nIdxEnd=nChrEnd=
isFinite(nChrLength)?nChrLength:nRawLength-1}if(nChrLength)return nIdxEnd;return nChrEnd};
weavejs.util.StringView.prototype.toBase64=function(bWholeBuffer){return weavejs.util.StringView.bytesToBase64(bWholeBuffer?this.bufferView.constructor===weavejs.util.StringView.Uint8Array?this.bufferView:new weavejs.util.StringView.Uint8Array(this.buffer):this.rawData.constructor===weavejs.util.StringView.Uint8Array?this.rawData:new weavejs.util.StringView.Uint8Array(this.buffer,this.rawData.byteOffset,this.rawData.length<<(this.rawData.constructor===weavejs.util.StringView.Uint16Array?1:2)))};
weavejs.util.StringView.prototype.subview=function(nCharOffset,nCharLength){var nChrLen,nCharStart,nStrLen,bVariableLen=this.encoding==='UTF-8'||this.encoding==='UTF-16',nStartOffset=nCharOffset,nStringLength,nRawLen=this.rawData.length;if(nRawLen===0)return new weavejs.util.StringView(this.buffer,this.encoding);nStringLength=bVariableLen?this.makeIndex():nRawLen;nCharStart=nCharOffset?Math.max((nStringLength+nCharOffset)%nStringLength,0):0;nStrLen=weavejs.util.StringView.Number_isInteger(nCharLength)?
Math.max(nCharLength,0)+nCharStart>nStringLength?nStringLength-nCharStart:nCharLength:nStringLength;if(nCharStart===0&&nStrLen===nStringLength)return this;if(bVariableLen){nStartOffset=this.makeIndex(nCharStart);nChrLen=this.makeIndex(nStrLen,nStartOffset)-nStartOffset}else{nStartOffset=nCharStart;nChrLen=nCharLength-nCharStart}if(this.encoding==='UTF-16')nStartOffset<<=1;else if(this.encoding==='UTF-32')nStartOffset<<=2;return new weavejs.util.StringView(this.buffer,this.encoding,nStartOffset,nChrLen)};
weavejs.util.StringView.prototype.forEachChar=function(fCallback,oThat,nChrOffset,nChrLen){var aSource=this.rawData,nRawEnd,nRawIdx;if(this.encoding==='UTF-8'||this.encoding==='UTF-16'){var fGetInptChrSize,fGetInptChrCode;if(this.encoding==='UTF-8'){fGetInptChrSize=weavejs.util.StringView.getUTF8CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF8CharCode}else if(this.encoding==='UTF-16'){fGetInptChrSize=weavejs.util.StringView.getUTF16CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF16CharCode}nRawIdx=
isFinite(nChrOffset)?this.makeIndex(nChrOffset):0;nRawEnd=isFinite(nChrLen)?this.makeIndex(nChrLen,nRawIdx):aSource.length;var nChrCode,nChrIdx=0;for(;nRawIdx<nRawEnd;nChrIdx++){nChrCode=fGetInptChrCode(aSource,nRawIdx);fCallback.call(oThat||null,nChrCode,nChrIdx,nRawIdx,aSource);nRawIdx+=fGetInptChrSize(nChrCode)}}else{nRawIdx=isFinite(nChrOffset)?nChrOffset:0;nRawEnd=isFinite(nChrLen)?nChrLen+nRawIdx:aSource.length;for(;nRawIdx<nRawEnd;nRawIdx++)fCallback.call(oThat||null,aSource[nRawIdx],nRawIdx,
nRawIdx,aSource)}};
weavejs.util.StringView.prototype.toString=function(){if(this.encoding!=='UTF-8'&&this.encoding!=='UTF-16')return String.fromCharCode.apply(null,this.rawData);var fGetCode,fGetIncr,sView='';if(this.encoding==='UTF-8'){fGetIncr=weavejs.util.StringView.getUTF8CharLength;fGetCode=weavejs.util.StringView.loadUTF8CharCode}else if(this.encoding==='UTF-16'){fGetIncr=weavejs.util.StringView.getUTF16CharLength;fGetCode=weavejs.util.StringView.loadUTF16CharCode}var nChr,nLen=this.rawData.length,nIdx=0;for(;nIdx<
nLen;nIdx+=fGetIncr(nChr)){nChr=fGetCode(this.rawData,nIdx);sView+=String.fromCharCode(nChr)}return sView};weavejs.util.StringView.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringView',qName:'weavejs.util.StringView'}]};goog.exportSymbol('weavejs.util.StringView',weavejs.util.StringView);
weavejs.util.StringView.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'buffer':{type:'*'},'encoding':{type:'String'}}},accessors:function(){return{}},methods:function(){return{'StringView':{type:'',declaredBy:'weavejs.util.StringView'},'makeIndex':{type:'Number',declaredBy:'weavejs.util.StringView'},'toBase64':{type:'String',declaredBy:'weavejs.util.StringView'},'subview':{type:'StringView',declaredBy:'weavejs.util.StringView'},'forEachChar':{type:'void',declaredBy:'weavejs.util.StringView'},
'toString':{type:'String',declaredBy:'weavejs.util.StringView'}}}}};goog.provide('weavejs.util.JSByteArray');goog.require('weavejs.util.StringView');
weavejs.util.JSByteArray=function(data,littleEndian){littleEndian=typeof littleEndian!=='undefined'?littleEndian:false;this.objectEncoding=this.ENCODING_AMF3;this.stringTable=[];this.objectTable=[];this.traitTable=[];var data_any=org.apache.flex.utils.Language.as(data,weavejs.util.JS.Uint8Array)||new weavejs.util.JS.Uint8Array(data);this.data=data_any;this.dataView=new weavejs.util.JS.DataView(this.data.buffer,this.data.byteOffset,this.data.length);this.littleEndian=littleEndian;this.length=this.data.length;
this.stringTable=[];this.objectTable=[];this.traitTable=[]};weavejs.util.JSByteArray.prototype.ENCODING_AMF0=0;weavejs.util.JSByteArray.prototype.ENCODING_AMF3=3;weavejs.util.JSByteArray.prototype.AMF0_Number=0;weavejs.util.JSByteArray.prototype.AMF0_Boolean=1;weavejs.util.JSByteArray.prototype.AMF0_String=2;weavejs.util.JSByteArray.prototype.AMF0_Object=3;weavejs.util.JSByteArray.prototype.AMF0_MovieClip=4;weavejs.util.JSByteArray.prototype.AMF0_Null=5;
weavejs.util.JSByteArray.prototype.AMF0_Undefined=6;weavejs.util.JSByteArray.prototype.AMF0_Reference=7;weavejs.util.JSByteArray.prototype.AMF0_ECMAArray=8;weavejs.util.JSByteArray.prototype.AMF0_ObjectEnd=9;weavejs.util.JSByteArray.prototype.AMF0_StrictArray=10;weavejs.util.JSByteArray.prototype.AMF0_Date=11;weavejs.util.JSByteArray.prototype.AMF0_LongString=12;weavejs.util.JSByteArray.prototype.AMF0_Unsupported=13;weavejs.util.JSByteArray.prototype.AMF0_Recordset=14;
weavejs.util.JSByteArray.prototype.AMF0_XMLObject=15;weavejs.util.JSByteArray.prototype.AMF0_TypedObject=16;weavejs.util.JSByteArray.prototype.AMF0_AvmPlusObject=17;weavejs.util.JSByteArray.prototype.AMF3_Undefined=0;weavejs.util.JSByteArray.prototype.AMF3_Null=1;weavejs.util.JSByteArray.prototype.AMF3_False=2;weavejs.util.JSByteArray.prototype.AMF3_True=3;weavejs.util.JSByteArray.prototype.AMF3_Integer=4;weavejs.util.JSByteArray.prototype.AMF3_Double=5;
weavejs.util.JSByteArray.prototype.AMF3_String=6;weavejs.util.JSByteArray.prototype.AMF3_XML=7;weavejs.util.JSByteArray.prototype.AMF3_Date=8;weavejs.util.JSByteArray.prototype.AMF3_Array=9;weavejs.util.JSByteArray.prototype.AMF3_Object=10;weavejs.util.JSByteArray.prototype.AMF3_AvmPlusXml=11;weavejs.util.JSByteArray.prototype.AMF3_ByteArray=12;weavejs.util.JSByteArray.prototype.data;weavejs.util.JSByteArray.prototype.dataView;weavejs.util.JSByteArray.prototype.length=0;
weavejs.util.JSByteArray.prototype.position=0;weavejs.util.JSByteArray.prototype.littleEndian=false;weavejs.util.JSByteArray.prototype.objectEncoding;weavejs.util.JSByteArray.prototype.stringTable;weavejs.util.JSByteArray.prototype.objectTable;weavejs.util.JSByteArray.prototype.traitTable;weavejs.util.JSByteArray.prototype.readByte=function(){return this.data[this.position++]};weavejs.util.JSByteArray.prototype.readUnsignedByte=function(){return this.data[this.position++]&255};
weavejs.util.JSByteArray.prototype.readBoolean=function(){return this.data[this.position++]&255?true:false};weavejs.util.JSByteArray.prototype.readUInt30=function(){if(this.littleEndian)return this.readUInt30LE();var ch1=this.data[this.position++]&255;var ch2=this.data[this.position++]&255;var ch3=this.data[this.position++]&255;var ch4=this.data[this.position++]&255;if(ch1>=64)return undefined;return ch4|ch3<<8|ch2<<16|ch1<<24};
weavejs.util.JSByteArray.prototype.readUnsignedInt=function(){var value=this.dataView.getUint32(this.position,this.littleEndian);this.position+=4;return value};weavejs.util.JSByteArray.prototype.readInt=function(){var value=this.dataView.getInt32(this.position,this.littleEndian);this.position+=4;return value};weavejs.util.JSByteArray.prototype.readUnsignedShort=function(){var value=this.dataView.getUint16(this.position,this.littleEndian);this.position+=2;return value};
weavejs.util.JSByteArray.prototype.readShort=function(){var value=this.dataView.getInt16(this.position,this.littleEndian);this.position+=2;return value};weavejs.util.JSByteArray.prototype.readFloat=function(){var value=this.dataView.getFloat32(this.position,this.littleEndian);this.position+=4;return value};weavejs.util.JSByteArray.prototype.readDouble=function(){var value=this.dataView.getFloat64(this.position,this.littleEndian);this.position+=8;return value};
weavejs.util.JSByteArray.prototype.readUInt29=function(){var value;var b=this.data[this.position++]&255;if(b<128)return b;value=(b&127)<<7;b=this.data[this.position++]&255;if(b<128)return value|b;value=(value|b&127)<<7;b=this.data[this.position++]&255;if(b<128)return value|b;value=(value|b&127)<<8;b=this.data[this.position++]&255;return value|b};
weavejs.util.JSByteArray.prototype.readUInt30LE=function(){var ch1=this.data[this.position++]&255;var ch2=this.data[this.position++]&255;var ch3=this.data[this.position++]&255;var ch4=this.data[this.position++]&255;if(ch4>=64)return undefined;return ch1|ch2<<8|ch3<<16|ch4<<24};weavejs.util.JSByteArray.prototype.readDate=function(){var time_ms=this.readDouble();var tz_min=this.readUnsignedShort();return new Date(time_ms+tz_min*60*1E3)};
weavejs.util.JSByteArray.prototype.readUTFBytes=function(len){var str=(new weavejs.util.StringView(this.data,'UTF-8',this.position,len)).toString();this.position+=len;return str};weavejs.util.JSByteArray.prototype.readUTF=function(){return this.readUTFBytes(this.readUnsignedShort())};weavejs.util.JSByteArray.prototype.readLongUTF=function(){return this.readUTFBytes(this.readUInt30())};
weavejs.util.JSByteArray.prototype.stringToXML=function(str){var xmlDoc;if(weavejs.util.JS.global.DOMParser){var parser=new weavejs.util.JS.global.DOMParser;xmlDoc=parser.parseFromString(str,'text/xml')}else{xmlDoc=new weavejs.util.JS.global.ActiveXObject('Microsoft.XMLDOM');xmlDoc.async=false;xmlDoc.loadXML(str)}return xmlDoc};weavejs.util.JSByteArray.prototype.readXML=function(){var xml=this.readLongUTF();return this.stringToXML(xml)};
weavejs.util.JSByteArray.prototype.readStringAMF3=function(){var ref=this.readUInt29();if((ref&1)==0)return this.stringTable[ref>>1];var len=ref>>1;if(0==len)return'';var str=this.readUTFBytes(len);this.stringTable.push(str);return str};
weavejs.util.JSByteArray.prototype.readTraits=function(ref){var traitInfo={};traitInfo.properties=[];if((ref&3)==1)return this.traitTable[ref>>2];traitInfo.externalizable=(ref&4)==4;traitInfo.dynamic=(ref&8)==8;traitInfo.count=ref>>4;traitInfo.className=this.readStringAMF3();this.traitTable.push(traitInfo);for(var i=0;i<traitInfo.count;i++){var propName=this.readStringAMF3();traitInfo.properties.push(propName)}return traitInfo};weavejs.util.JSByteArray.prototype.readExternalizable=function(className){return this.readObject()};
weavejs.util.JSByteArray.prototype.readObject=function(){if(this.objectEncoding==this.ENCODING_AMF0)return this.readAMF0Object();else if(this.objectEncoding==this.ENCODING_AMF3)return this.readAMF3Object();return undefined};
weavejs.util.JSByteArray.prototype.readAMF0Object=function(){var marker=this.data[this.position++]&255;var value,o;if(marker==this.AMF0_Number)return this.readDouble();else if(marker==this.AMF0_Boolean)return this.readBoolean();else if(marker==this.AMF0_String)return this.readUTF();else if(marker==this.AMF0_Object||marker==this.AMF0_ECMAArray){o={};var ismixed=marker==this.AMF0_ECMAArray;if(ismixed)this.readUInt30();while(true){var c1=this.data[this.position++]&255;var c2=this.data[this.position++]&
255;var name=this.readUTFBytes(c1<<8|c2);var k=this.data[this.position++]&255;if(k==this.AMF0_ObjectEnd)break;this.position--;o[name]=this.readObject()}return o}else if(marker==this.AMF0_StrictArray){var size=this.readInt();var a=[];for(var i=0;i<size;++i)a.push(this.readObject());return a}else if(marker==this.AMF0_TypedObject){o={};var typeName=this.readUTF();var propertyName=this.readUTF();var type=this.data[this.position++]&255;while(type!=this.AMF0_ObjectEnd){value=this.readObject();o[propertyName]=
value;propertyName=this.readUTF();type=this.data[this.position++]&255}return o}else if(marker==this.AMF0_AvmPlusObject)return this.readAMF3Object();else if(marker==this.AMF0_Null)return null;else if(marker==this.AMF0_Undefined)return undefined;else if(marker==this.AMF0_Reference){var refNum=this.readUnsignedShort();value=this.objectTable[refNum];return value}else if(marker==this.AMF0_Date)return this.readDate();else if(marker==this.AMF0_LongString)return this.readLongUTF();else if(marker==this.AMF0_XMLObject)return this.readXML();
return undefined};
weavejs.util.JSByteArray.prototype.readAMF3Object=function(){var marker=this.data[this.position++]&255;var ref,len,i,value;if(marker==this.AMF3_Undefined)return undefined;else if(marker==this.AMF3_Null)return null;else if(marker==this.AMF3_False)return false;else if(marker==this.AMF3_True)return true;else if(marker==this.AMF3_Integer){var int29=this.readUInt29();if(int29>=268435456)int29-=536870912;return int29}else if(marker==this.AMF3_Double)return this.readDouble();else if(marker==this.AMF3_String)return this.readStringAMF3();
else if(marker==this.AMF3_XML)return this.readXML();else if(marker==this.AMF3_Date){ref=this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>1];var d=this.readDouble();value=new Date(d);this.objectTable.push(value);return value}else if(marker==this.AMF3_Array){ref=this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>1];len=ref>>1;var key=this.readStringAMF3();if(key==''){var a=[];for(i=0;i<len;i++){value=this.readObject();a.push(value)}return a}var result={};while(key!=''){result[key]=
this.readObject();key=this.readStringAMF3()}for(i=0;i<len;i++)result[i]=this.readObject();return result}else if(marker==this.AMF3_Object){var o={};this.objectTable.push(o);ref=this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>1];var ti=this.readTraits(ref);var className=ti.className;var externalizable=ti.externalizable;if(externalizable)o=this.readExternalizable(className);else{len=ti.properties.length;for(i=0;i<len;i++){var propName=ti.properties[i];value=this.readObject();o[propName]=
value}if(ti.dynamic)for(;;){var name=this.readStringAMF3();if(name==null||name.length==0)break;value=this.readObject();o[name]=value}}return o}else if(marker==this.AMF3_AvmPlusXml){ref=this.readUInt29();if((ref&1)==0)return this.stringToXML(this.objectTable[ref>>1]);len=ref>>1;if(0==len)return null;var str=this.readUTFBytes(len);var xml=this.stringToXML(str);this.objectTable.push(xml);return xml}else if(marker==this.AMF3_ByteArray){ref=this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>
1];len=ref>>1;var ba=new weavejs.util.JSByteArray(this.data.subarray(this.position,this.position+=len));this.objectTable.push(ba);return ba}return undefined};weavejs.util.JSByteArray.prototype.FLEXJS_CLASS_INFO={names:[{name:'JSByteArray',qName:'weavejs.util.JSByteArray'}]};goog.exportSymbol('weavejs.util.JSByteArray',weavejs.util.JSByteArray);
weavejs.util.JSByteArray.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'ENCODING_AMF0':{type:'int'},'ENCODING_AMF3':{type:'int'},'data':{type:'Array'},'dataView':{type:'Object'},'length':{type:'int'},'position':{type:'int'},'littleEndian':{type:'Boolean'},'objectEncoding':{type:'int'},'stringTable':{type:'Array'},'objectTable':{type:'Array'},'traitTable':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'JSByteArray':{type:'',declaredBy:'weavejs.util.JSByteArray'},
'readByte':{type:'int',declaredBy:'weavejs.util.JSByteArray'},'readUnsignedByte':{type:'int',declaredBy:'weavejs.util.JSByteArray'},'readBoolean':{type:'Boolean',declaredBy:'weavejs.util.JSByteArray'},'readUnsignedInt':{type:'int',declaredBy:'weavejs.util.JSByteArray'},'readInt':{type:'int',declaredBy:'weavejs.util.JSByteArray'},'readUnsignedShort':{type:'int',declaredBy:'weavejs.util.JSByteArray'},'readShort':{type:'int',declaredBy:'weavejs.util.JSByteArray'},'readFloat':{type:'Number',declaredBy:'weavejs.util.JSByteArray'},
'readDouble':{type:'Number',declaredBy:'weavejs.util.JSByteArray'},'readUTFBytes':{type:'String',declaredBy:'weavejs.util.JSByteArray'},'readUTF':{type:'String',declaredBy:'weavejs.util.JSByteArray'},'readLongUTF':{type:'String',declaredBy:'weavejs.util.JSByteArray'},'readXML':{type:'Object',declaredBy:'weavejs.util.JSByteArray'},'readObject':{type:'Object',declaredBy:'weavejs.util.JSByteArray'}}}}};goog.provide('weavejs.api.net.IAsyncService');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.net.IAsyncService=function(){};weavejs.api.net.IAsyncService.prototype.invokeAsyncMethod=function(methodName,methodParameters){};weavejs.api.net.IAsyncService.prototype.FLEXJS_CLASS_INFO={names:[{name:'IAsyncService',qName:'weavejs.api.net.IAsyncService'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.net.IAsyncService.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'invokeAsyncMethod':{type:'WeavePromise',declaredBy:'weavejs.api.net.IAsyncService'}}}}};goog.provide('weavejs.net.Servlet');goog.require('weavejs.net.Protocol');goog.require('weavejs.util.JSByteArray');goog.require('weavejs.api.net.IAsyncService');
weavejs.net.Servlet=function(servletURL,methodVariableName,protocol){this.map_promise_methodParamsId=new weavejs.util.JS.WeakMap;if([weavejs.net.Protocol.URL_PARAMS,weavejs.net.Protocol.JSONRPC_2_0,weavejs.net.Protocol.JSONRPC_2_0_AMF].indexOf(protocol)<0)throw new Error(Weave.className(weavejs.net.Servlet)+': protocol not supported: "'+protocol+'"');this._servletURL=servletURL;this._protocol=protocol;this.METHOD=methodVariableName};weavejs.net.Servlet.prototype.map_promise_methodParamsId;
weavejs.net.Servlet.prototype.nextId=1;weavejs.net.Servlet.prototype.METHOD='method';weavejs.net.Servlet.prototype.PARAMS='params';weavejs.net.Servlet.prototype._servletURL;weavejs.net.Servlet.prototype._protocol;weavejs.net.Servlet.prototype._invokeLater=false;
weavejs.net.Servlet.prototype.invokeAsyncMethod=function(methodName,methodParameters){methodParameters=typeof methodParameters!=='undefined'?methodParameters:null;var promise=new weavejs.util.WeavePromise(this);this.map_promise_methodParamsId.set(promise,[methodName,methodParameters,this.nextId++]);if(!this._invokeLater)this.invokeNow(promise);return promise};weavejs.net.Servlet.prototype.getServletURLForMethod=function(methodName){return this._servletURL};
weavejs.net.Servlet.prototype.invokeNow=function(promise){var method0_params1_id2=this.map_promise_methodParamsId.get(promise);if(!method0_params1_id2)return;var method=method0_params1_id2[0];var params=method0_params1_id2[1];var id=method0_params1_id2[2];var url=this.getServletURLForMethod(method);var request=new weavejs.net.URLRequest(url);if(this._protocol==weavejs.net.Protocol.URL_PARAMS){params=weavejs.util.JS.copyObject(params);params[this.METHOD]=method;request.url=weavejs.net.Servlet.buildUrlWithParams(url,
params);request.method=weavejs.net.RequestMethod.GET}else if(this._protocol==weavejs.net.Protocol.JSONRPC_2_0){request.method=weavejs.net.RequestMethod.POST;request.data=JSON.stringify({jsonrpc:'2.0',method:method,params:params,id:id});request.responseType=weavejs.net.ResponseType.JSON}else if(this._protocol==weavejs.net.Protocol.JSONRPC_2_0_AMF){request.method=weavejs.net.RequestMethod.POST;request.data=JSON.stringify({jsonrpc:'2.0/AMF3',method:method,params:params,id:id})}var result=weavejs.WeaveAPI.URLRequestUtils.request(this,
request);if(this._protocol==weavejs.net.Protocol.JSONRPC_2_0_AMF)result=result.then(weavejs.net.Servlet.readAmf3Object);promise.setResult(result)};weavejs.net.Servlet.readAmf3Object=function(bytes){var obj=bytes&&bytes.length&&(new weavejs.util.JSByteArray(bytes)).readObject();if(obj&&(obj.faultCode&&obj.faultString))throw new Error(obj.faultCode+': '+obj.faultString);return obj};
weavejs.net.Servlet.buildUrlWithParams=function(url,params){var queryString='';var qi=url.indexOf('?');if(qi>=0){queryString=url.substr(qi+1);url=url.substr(0,qi)}for(var key in params){if(queryString)queryString+='\x26';var value=params[key];if(params!=null&&typeof params==='object')value=weavejs.util.JS.isPrimitive(value)?value:JSON.stringify(value);queryString+=encodeURIComponent(key)+'\x3d'+encodeURIComponent(value)}return url+'?'+queryString};
Object.defineProperties(weavejs.net.Servlet.prototype,{servletURL:{get:function(){return this._servletURL}}});weavejs.net.Servlet.prototype.FLEXJS_CLASS_INFO={names:[{name:'Servlet',qName:'weavejs.net.Servlet'}],interfaces:[weavejs.api.net.IAsyncService]};goog.exportSymbol('weavejs.net.Servlet',weavejs.net.Servlet);
weavejs.net.Servlet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'servletURL':{type:'String',declaredBy:'weavejs.net.Servlet'}}},methods:function(){return{'Servlet':{type:'',declaredBy:'weavejs.net.Servlet'},'invokeAsyncMethod':{type:'WeavePromise',declaredBy:'weavejs.net.Servlet'}}}}};goog.provide('weavejs.api.data.IDataSource_Service');goog.require('weavejs.api.data.IDataSource');weavejs.api.data.IDataSource_Service=function(){};weavejs.api.data.IDataSource_Service.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDataSource_Service',qName:'weavejs.api.data.IDataSource_Service'}],interfaces:[weavejs.api.data.IDataSource]};weavejs.api.data.IDataSource_Service.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.data.IExternalLink');weavejs.api.data.IExternalLink=function(){};weavejs.api.data.IExternalLink.prototype.getURL=function(){};weavejs.api.data.IExternalLink.prototype.FLEXJS_CLASS_INFO={names:[{name:'IExternalLink',qName:'weavejs.api.data.IExternalLink'}]};weavejs.api.data.IExternalLink.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getURL':{type:'String',declaredBy:'weavejs.api.data.IExternalLink'}}}}};goog.provide('weavejs.data.source.CKANDataSource');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.data.source.CSVDataSource');goog.require('weavejs.net.ResponseType');goog.require('weavejs.net.URLRequest');goog.require('weavejs.api.data.IDataSource_Service');goog.require('weavejs.api.data.IExternalLink');
weavejs.data.source.CKANDataSource=function(){weavejs.data.source.CKANDataSource.base(this,'constructor');this.url=Weave.linkableChild(this,new weavejs.core.LinkableString);this.apiVersion=Weave.linkableChild(this,new weavejs.core.LinkableNumber(3,org.apache.flex.utils.Language.closure(this.validateApiVersion,this,'validateApiVersion')));this.useHttpPost=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(false));this.showPackages=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));
this.showGroups=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.showTags=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.useDataStore=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this._dataSourceCache={}};goog.inherits(weavejs.data.source.CKANDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.CKANDataSource.prototype.url;weavejs.data.source.CKANDataSource.prototype.apiVersion;weavejs.data.source.CKANDataSource.prototype.useHttpPost;
weavejs.data.source.CKANDataSource.prototype.showPackages;weavejs.data.source.CKANDataSource.prototype.showGroups;weavejs.data.source.CKANDataSource.prototype.showTags;weavejs.data.source.CKANDataSource.prototype.useDataStore;weavejs.data.source.CKANDataSource.prototype.validateApiVersion=function(value){return[1,2,3].indexOf(value)>=0};
weavejs.data.source.CKANDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;weavejs.data.source.CKANDataSource.base(this,'initialize',forceRefresh)};
weavejs.data.source.CKANDataSource.prototype.refreshHierarchy=function(){Weave.getCallbacks(this).delayCallbacks();for(var url in this._dataSourceCache){var ds=this._dataSourceCache[url];ds.hierarchyRefresh.triggerCallbacks()}weavejs.data.source.CKANDataSource.base(this,'refreshHierarchy');Weave.getCallbacks(this).resumeCallbacks()};
weavejs.data.source.CKANDataSource.prototype.getHierarchyRoot=function(){if(!org.apache.flex.utils.Language.is(this._rootNode,weavejs.data.source.CKANDataSource.CKANAction))this._rootNode=new weavejs.data.source.CKANDataSource.CKANAction(this);return this._rootNode};
weavejs.data.source.CKANDataSource.prototype.generateHierarchyNode=function(metadata){if(!metadata)return null;var ds=this.getChildDataSource(metadata);if(!ds)return null;var node;if(metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]==weavejs.data.source.CKANDataSource.DATASTORE_FORMAT){node=new weavejs.data.source.CKANDataSource.CKANAction(this);node.action=weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN;node.params={};node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID]=
metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL]=metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]=metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FIELD]=metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FIELD];return node}var search=weavejs.util.JS.copyObject(metadata);
delete search[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID];delete search[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL];delete search[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT];var internalNode=ds.findHierarchyNode(search);if(!internalNode)return null;node=new weavejs.data.source.CKANDataSource.CKANAction(this);node.action=weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN;node.params={};node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID]=metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID];
node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL]=metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]=metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT];node.internalNode=internalNode;return node};
weavejs.data.source.CKANDataSource.prototype.requestColumnFromSource=function(proxyColumn){var metadata=proxyColumn.getProxyMetadata();var dataSource=this.getChildDataSource(metadata);if(dataSource){if(metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]==weavejs.data.source.CKANDataSource.DATASTORE_FORMAT)metadata=metadata[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FIELD];proxyColumn.setInternalColumn(dataSource.generateNewAttributeColumn(metadata))}else proxyColumn.dataUnavailable()};
weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID='ckan_id';weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL='ckan_url';weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT='ckan_format';weavejs.data.source.CKANDataSource.PARAMS_CKAN_FIELD='ckan_field';weavejs.data.source.CKANDataSource.DATASTORE_FORMAT='ckan_datastore';
weavejs.data.source.CKANDataSource.prototype.getBaseURL=function(){var baseurl=this.url.value||'';var i=baseurl.lastIndexOf('/api');if(i>=0)baseurl=baseurl.substr(0,i);if(baseurl.charAt(baseurl.length-1)!='/')baseurl+='/';return baseurl};weavejs.data.source.CKANDataSource.prototype.getFullURL=function(relativeURL){return this.getBaseURL()+relativeURL};
weavejs.data.source.CKANDataSource.prototype.getChildDataSource=function(params){var self=this;var __localFn0__=function(result){var __localFn0__=function(field,i,a){var type=field['type'];if(type=='numeric'||type=='int4'||type=='int'||type=='float'||type=='double')type=weavejs.api.data.DataType.NUMBER;if(type=='text')type=weavejs.api.data.DataType.STRING;if(type=='timestamp')type=weavejs.api.data.DataType.DATE;var meta={};meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=type;meta[weavejs.api.data.ColumnMetadata.TITLE]=
field['id'];meta[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME]=field['id'];return meta};datastore.metadata.setSessionState(result['fields'].map(__localFn0__))};var url=params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL];if(!url)return null;var dataSource=this._dataSourceCache[url];if(!dataSource){var format=String(params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]).toLowerCase();if(format=='csv'){var csv=new weavejs.data.source.CSVDataSource;csv.url.value=url;csv.keyType.value=
url;dataSource=csv}if(format==weavejs.data.source.CKANDataSource.DATASTORE_FORMAT){var datastore=new weavejs.data.source.CSVDataSource;datastore.url.value=this.getFullURL('datastore/dump/'+params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID]);var node=new weavejs.data.source.CKANDataSource.CKANAction(this);node.action=weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH;node.params={'resource_id':params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID],'limit':1};node.resultHandler=
__localFn0__;node.result;dataSource=datastore}}if(dataSource&&!this._dataSourceCache[url])this._dataSourceCache[url]=Weave.linkableChild(this,dataSource);return dataSource};weavejs.data.source.CKANDataSource.prototype._dataSourceCache;Object.defineProperties(weavejs.data.source.CKANDataSource.prototype,{isLocal:{get:function(){return false}}});weavejs.data.source.CKANDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'CKANDataSource',qName:'weavejs.data.source.CKANDataSource'}],interfaces:[weavejs.api.data.IDataSource_Service]};
goog.exportSymbol('weavejs.data.source.CKANDataSource',weavejs.data.source.CKANDataSource);
weavejs.data.source.CKANDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'url':{type:'LinkableString'},'apiVersion':{type:'LinkableNumber'},'useHttpPost':{type:'LinkableBoolean'},'showPackages':{type:'LinkableBoolean'},'showGroups':{type:'LinkableBoolean'},'showTags':{type:'LinkableBoolean'},'useDataStore':{type:'LinkableBoolean'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.CKANDataSource'}}},methods:function(){return{'CKANDataSource':{type:'',
declaredBy:'weavejs.data.source.CKANDataSource'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.CKANDataSource'},'getBaseURL':{type:'String',declaredBy:'weavejs.data.source.CKANDataSource'},'getFullURL':{type:'String',declaredBy:'weavejs.data.source.CKANDataSource'},'getChildDataSource':{type:'IDataSource',declaredBy:'weavejs.data.source.CKANDataSource'}}}}};
weavejs.data.source.CKANDataSource.CKANAction=function(source){this._result={};this._childNodes=[];this._KEY_ORDER=['title','display_name','name','description','format','resource_type','mimetype','url','url_type','created','publish-date','last_modified','revision_timestamp'];this.source=source};weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_LIST='package_list';weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW='package_show';
weavejs.data.source.CKANDataSource.CKANAction.GROUP_LIST='group_list';weavejs.data.source.CKANDataSource.CKANAction.GROUP_SHOW='group_show';weavejs.data.source.CKANDataSource.CKANAction.GROUP_PACKAGE_SHOW='group_package_show';weavejs.data.source.CKANDataSource.CKANAction.TAG_LIST='tag_list';weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW='tag_show';weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH='datastore_search';
weavejs.data.source.CKANDataSource.CKANAction.GET_DATASOURCE='get_datasource';weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN='get_column';weavejs.data.source.CKANDataSource.CKANAction.NO_ACTION='no_action';weavejs.data.source.CKANDataSource.CKANAction.prototype.source;weavejs.data.source.CKANDataSource.CKANAction.prototype.metadata;weavejs.data.source.CKANDataSource.CKANAction.prototype.action;weavejs.data.source.CKANDataSource.CKANAction.prototype.params;weavejs.data.source.CKANDataSource.CKANAction.prototype.internalNode;
weavejs.data.source.CKANDataSource.CKANAction.prototype._result;weavejs.data.source.CKANDataSource.CKANAction.prototype.resultHandler=null;
weavejs.data.source.CKANDataSource.CKANAction.prototype.getURLRequest=function(){var request;if(this.apiVersion3){request=new weavejs.net.URLRequest(this.source.getFullURL('api/3/action/'+this.action));if(this.params)if(this.source.useHttpPost.value){request.method=flash.net.URLRequestMethod.POST;request.requestHeaders={'Content-Type':'application/json; charset\x3dutf-8'};request.data=JSON.stringify(this.params)}else request.url=weavejs.net.Servlet.buildUrlWithParams(request.url,this.params)}else{var cmd=
'api/'+this.source.apiVersion.value+'/rest/'+this.action.split('_')[0];if(this.params&&this.params.hasOwnProperty('id'))cmd+='/'+this.params['id'];request=new weavejs.net.URLRequest(this.source.getFullURL(cmd))}request.responseType=weavejs.net.ResponseType.JSON;return request};
weavejs.data.source.CKANDataSource.CKANAction.prototype.handleResponse=function(placeholder,response){if(this._result!=placeholder)return;if(this.apiVersion3&&response&&response.hasOwnProperty('success')&&response['success'])this._result=response['result'];else if(!this.apiVersion3&&response)this._result=response;else{var error=response&&response.hasOwnProperty('error')?response['error']:response;weavejs.util.JS.error('CKAN action failed',this,error)}if(this.action==weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW&&
org.apache.flex.utils.Language.is(this._result,Array)&&this._result.length==1)this._result=this._result[0];if(this.resultHandler!=null)this.resultHandler(this._result)};
weavejs.data.source.CKANDataSource.CKANAction.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.source.CKANDataSource.CKANAction);if(!that)return false;if(this.internalNode&&that.internalNode)return this.source&&that.source&&this.internalNode.equals(that.internalNode);return!this.internalNode==!that.internalNode&&this.source==that.source&&this.action==that.action&&weavejs.util.StandardLib.compare(this.params,that.params)==0};
weavejs.data.source.CKANDataSource.CKANAction.prototype.getLabel=function(){if(this.internalNode)return this.internalNode.getLabel();if(!this.action)return this.source.getLabel();if(this.action==weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_LIST)return Weave.lang('Packages');if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_LIST)return Weave.lang('Groups');if(this.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_LIST)return Weave.lang('Tags');if(this.action==weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW||
this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_SHOW||this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_PACKAGE_SHOW||this.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW)return this.metadata['display_name']||this.metadata['name']||this.metadata['title']||this.metadata['description']||this.metadata['url']||(org.apache.flex.utils.Language.is(this.result,String)?org.apache.flex.utils.Language.as(this.result,String):this.result['title']||this.result['display_name']||
this.result['name'])||this.params['id'];if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GET_DATASOURCE||this.action==weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH){var str=this.metadata['name']||this.metadata['title']||this.metadata['description']||this.metadata['url']||this.metadata['id'];if(!this.metadata['format']&&this.metadata['mimetype']=='text/csv')this.metadata['format']='csv';if(this.metadata['format'])str=weavejs.util.StandardLib.substitute('{0} ({1})',str,
this.metadata['format']);return str}if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN)return this.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FIELD];return this.toString()};
weavejs.data.source.CKANDataSource.CKANAction.prototype.isBranch=function(){if(this.internalNode)return this.internalNode.isBranch();if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GET_DATASOURCE||this.action==weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH)return true;return this.action!=weavejs.data.source.CKANDataSource.CKANAction.NO_ACTION&&this.action!=weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN};
weavejs.data.source.CKANDataSource.CKANAction.prototype.hasChildBranches=function(){if(this.internalNode)return this.internalNode.hasChildBranches();if(this.action==weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW||this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_PACKAGE_SHOW)return this.getChildren().length>0;if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_SHOW||this.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW){var metapkg=this.metadata['packages'];
if(org.apache.flex.utils.Language.is(metapkg,Number))return metapkg>0;if(org.apache.flex.utils.Language.is(metapkg,Array))return org.apache.flex.utils.Language.as(metapkg,Array).length>0;return this.getChildren().length>0}return this.action!=weavejs.data.source.CKANDataSource.CKANAction.GET_DATASOURCE&&this.action!=weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH&&this.action!=weavejs.data.source.CKANDataSource.CKANAction.NO_ACTION};weavejs.data.source.CKANDataSource.CKANAction.prototype._childNodes;
weavejs.data.source.CKANDataSource.CKANAction.prototype.updateChildren=function(input,updater,nodeType){updater=typeof updater!=='undefined'?updater:null;nodeType=typeof nodeType!=='undefined'?nodeType:null;if(!nodeType)nodeType=weavejs.data.source.CKANDataSource.CKANAction;var outputIndex=0;var foreachiter0_target=input;for(var foreachiter0 in foreachiter0_target){var item=foreachiter0_target[foreachiter0];var node=this._childNodes[outputIndex];if(!node||Object(node).constructor!=nodeType)this._childNodes[outputIndex]=
node=new nodeType(this.source);var oldAction=node.action;var oldParams=node.params;updater(node,item);if(oldAction!=node.action||weavejs.util.StandardLib.compare(oldParams,node.params))node._result=null;outputIndex++}this._childNodes.length=outputIndex;return this._childNodes};
weavejs.data.source.CKANDataSource.CKANAction.prototype.getChildren=function(){var self=this;var __localFn0__=function(node,actionAndParams){node.action=actionAndParams[0];node.params=actionAndParams[1];node.metadata=null};var __localFn1__=function(node,id){if(self.action==weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_LIST||self.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW)node.action=weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW;if(self.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_LIST)node.action=
weavejs.data.source.CKANDataSource.CKANAction.GROUP_PACKAGE_SHOW;if(self.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_LIST)node.action=weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW;node.metadata=node.params={'id':id}};var __localFn2__=function(node,meta){if(self.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_LIST)node.action=weavejs.data.source.CKANDataSource.CKANAction.GROUP_PACKAGE_SHOW;if(self.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_LIST)node.action=
weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW;node.metadata=meta;if(!meta['id']&&meta['uuid'])meta['id']=meta['uuid'];node.params={'id':meta['id']}};var __localFn3__=function(node,pkg){if(org.apache.flex.utils.Language.is(pkg,String))pkg={'id':pkg};node.action=weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW;node.metadata=pkg;node.params={'id':pkg['id']}};var __localFn4__=function(node,resource){if(self.source.useDataStore.value&&resource['datastore_active']){node.action=weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH;
node.metadata=resource;node.params={'resource_id':resource['id'],'limit':1}}else{node.action=weavejs.data.source.CKANDataSource.CKANAction.GET_DATASOURCE;node.metadata=resource;node.params={};node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID]=resource['id'];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL]=resource['url'];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]=resource['format']}};var __localFn5__=function(node,field){node.action=weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN;
node.metadata=field;node.params={};node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID]=self.metadata['id'];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL]=weavejs.data.source.CKANDataSource.DATASTORE_FORMAT+'://'+self.metadata['id'];node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]=weavejs.data.source.CKANDataSource.DATASTORE_FORMAT;node.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FIELD]=field['id']};var __localFn6__=function(node,otherNode){node.action=
weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN;node.internalNode=otherNode;node.params=self.params};var __localFn7__=function(key,i,a){return self.metadata[key]!=null&&self.metadata[key]!=''};var __localFn8__=function(node,key){node.metadata=self.metadata;node.params=key};if(this.internalNode)return this.internalNode.getChildren();if(!this.action){var list=[];if(this.source.showPackages.value)list.push([weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_LIST,null]);if(this.source.showGroups.value)list.push([weavejs.data.source.CKANDataSource.CKANAction.GROUP_LIST,
{'all_fields':true}]);if(this.source.showTags.value)list.push([weavejs.data.source.CKANDataSource.CKANAction.TAG_LIST,{'all_fields':true}]);return this.updateChildren(list,__localFn0__)}if(weavejs.util.StandardLib.getArrayType(org.apache.flex.utils.Language.as(this.result,Array))==String)return this.updateChildren(org.apache.flex.utils.Language.as(this.result,Array),__localFn1__);if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_LIST||this.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_LIST)return this.updateChildren(org.apache.flex.utils.Language.as(this.result,
Array),__localFn2__);if(this.result&&(this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_SHOW||this.action==weavejs.data.source.CKANDataSource.CKANAction.GROUP_PACKAGE_SHOW||this.action==weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW))return this.updateChildren(org.apache.flex.utils.Language.as(this.result,Array)||this.result['packages'],__localFn3__);if(this.action==weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW&&this.result.hasOwnProperty('resources'))return this.updateChildren(this.result['resources'],
__localFn4__);if(this.action==weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH)return this.updateChildren(this.result['fields'],__localFn5__);if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GET_DATASOURCE){var ds=this.source.getChildDataSource(this.params);if(ds){var root=ds.getHierarchyRoot();return this.updateChildren(root.getChildren(),__localFn6__)}else{var keys=weavejs.util.JS.objectKeys(this.metadata);keys=keys.filter(__localFn7__);keys.sort(org.apache.flex.utils.Language.closure(this.keyCompare,
this,'keyCompare'));return this.updateChildren(keys,__localFn8__,weavejs.data.source.CKANDataSource.MetadataNode)}}this._childNodes.length=0;return this._childNodes};weavejs.data.source.CKANDataSource.CKANAction.prototype._KEY_ORDER;
weavejs.data.source.CKANDataSource.CKANAction.prototype.keyCompare=function(a,b){var order=this._KEY_ORDER;var ia=order.indexOf(a);var ib=order.indexOf(b);if(ia>=0&&ib>=0)return weavejs.util.StandardLib.numericCompare(ia,ib);if(ia>=0)return-1;if(ib>=0)return 1;return weavejs.util.StandardLib.stringCompare(org.apache.flex.utils.Language.as(a,String),org.apache.flex.utils.Language.as(b,String),true)};weavejs.data.source.CKANDataSource.CKANAction.prototype.getDataSource=function(){return this.source};
weavejs.data.source.CKANDataSource.CKANAction.prototype.getColumnMetadata=function(){if(org.apache.flex.utils.Language.is(this.internalNode,weavejs.api.data.IColumnReference)){var meta=org.apache.flex.utils.Language.as(this.internalNode,weavejs.api.data.IColumnReference).getColumnMetadata();meta[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID]=this.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_ID];meta[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT]=this.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_FORMAT];
meta[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL]=this.params[weavejs.data.source.CKANDataSource.PARAMS_CKAN_URL];return meta}if(this.action==weavejs.data.source.CKANDataSource.CKANAction.GET_COLUMN)return weavejs.util.JS.copyObject(this.params);return null};
weavejs.data.source.CKANDataSource.CKANAction.prototype.findPathToNode=function(descendant){if(!descendant)return null;if(this.equals(descendant))return[this];var foreachiter1_target=this._childNodes;for(var foreachiter1 in foreachiter1_target){var child=foreachiter1_target[foreachiter1];var path=child.findPathToNode(descendant);if(path){path.unshift(this);return path}}return null};
weavejs.data.source.CKANDataSource.CKANAction.prototype.toString=function(){if(!this.action&&!this.params)return Weave.stringify(this.metadata);return Weave.stringify({'action':this.action,'params':this.params})};
Object.defineProperties(weavejs.data.source.CKANDataSource.CKANAction.prototype,{result:{get:function(){if(Weave.detectChange(this,this.source.url,this.source.apiVersion,this.source.useHttpPost))if([weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_LIST,weavejs.data.source.CKANDataSource.CKANAction.PACKAGE_SHOW,weavejs.data.source.CKANDataSource.CKANAction.GROUP_LIST,weavejs.data.source.CKANDataSource.CKANAction.GROUP_SHOW,weavejs.data.source.CKANDataSource.CKANAction.GROUP_PACKAGE_SHOW,weavejs.data.source.CKANDataSource.CKANAction.TAG_LIST,
weavejs.data.source.CKANDataSource.CKANAction.TAG_SHOW,weavejs.data.source.CKANDataSource.CKANAction.DATASTORE_SEARCH].indexOf(this.action)>=0){this._result={};var handler=this.handleResponse.bind(this,this._result);weavejs.WeaveAPI.URLRequestUtils.request(this.source,this.getURLRequest()).then(handler,handler)}return this._result||{}}},apiVersion3:{get:function(){return this.source.apiVersion.value==3}}});
weavejs.data.source.CKANDataSource.CKANAction.prototype.FLEXJS_CLASS_INFO={names:[{name:'CKANAction',qName:'weavejs.data.source.CKANDataSource.CKANAction'}],interfaces:[weavejs.api.data.IWeaveTreeNode,weavejs.api.data.IColumnReference,weavejs.api.data.IWeaveTreeNodeWithPathFinding]};goog.exportSymbol('weavejs.data.source.CKANDataSource.CKANAction',weavejs.data.source.CKANDataSource.CKANAction);
weavejs.data.source.CKANDataSource.CKANAction.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'metadata':{type:'Object'},'action':{type:'String'},'params':{type:'Object'},'internalNode':{type:'IWeaveTreeNode'},'resultHandler':{type:'Function'}}},accessors:function(){return{'result':{type:'Object',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'}}},methods:function(){return{'CKANAction':{type:'',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'equals':{type:'Boolean',
declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'isBranch':{type:'Boolean',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'getChildren':{type:'Array',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'getDataSource':{type:'IDataSource',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},
'getColumnMetadata':{type:'Object',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'findPathToNode':{type:'Array',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'},'toString':{type:'String',declaredBy:'weavejs.data.source.CKANDataSource.CKANAction'}}}}};weavejs.data.source.CKANDataSource.MetadataNode=function(source){weavejs.data.source.CKANDataSource.MetadataNode.base(this,'constructor',source);this.action=weavejs.data.source.CKANDataSource.CKANAction.NO_ACTION};
goog.inherits(weavejs.data.source.CKANDataSource.MetadataNode,weavejs.data.source.CKANDataSource.CKANAction);weavejs.data.source.CKANDataSource.MetadataNode.prototype.getURL=function(){return this.params=='url'?this.metadata[this.params]:null};weavejs.data.source.CKANDataSource.MetadataNode.prototype.toString=function(){return Weave.lang('{0}: {1}',this.params,Weave.stringify(this.metadata[this.params]))};
weavejs.data.source.CKANDataSource.MetadataNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'MetadataNode',qName:'weavejs.data.source.CKANDataSource.MetadataNode'}],interfaces:[weavejs.api.data.IExternalLink]};goog.exportSymbol('weavejs.data.source.CKANDataSource.MetadataNode',weavejs.data.source.CKANDataSource.MetadataNode);
weavejs.data.source.CKANDataSource.MetadataNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'MetadataNode':{type:'',declaredBy:'weavejs.data.source.CKANDataSource.MetadataNode'},'getURL':{type:'String',declaredBy:'weavejs.data.source.CKANDataSource.MetadataNode'},'toString':{type:'String',declaredBy:'weavejs.data.source.CKANDataSource.MetadataNode'}}}}};goog.provide('weavejs.data.DataSourceUtils');weavejs.data.DataSourceUtils=function(){};weavejs.data.DataSourceUtils.numberRegex=/^(0|0?\\.[0-9]+|[1-9][0-9]*(\\.[0-9]+)?)([eE][-+]?[0-9]+)?$/;
weavejs.data.DataSourceUtils.guessDataType=function(data){var dateFormats=weavejs.data.column.DateColumn.detectDateFormats(data);if(dateFormats.length)return weavejs.api.data.DataType.DATE;var foreachiter0_target=data;for(var foreachiter0 in foreachiter0_target){var value=foreachiter0_target[foreachiter0];if(value!=null&&!org.apache.flex.utils.Language.is(value,Number)&&!weavejs.data.DataSourceUtils.numberRegex.test(value))return weavejs.api.data.DataType.STRING}return weavejs.api.data.DataType.NUMBER};
weavejs.data.DataSourceUtils._weakMap_dataSource_isLocal=new weavejs.util.JS.WeakMap;
weavejs.data.DataSourceUtils.hasRemoteColumnDependencies=function(dataSource){var foreachiter1_target=Weave.getDescendants(dataSource,weavejs.api.data.IAttributeColumn);for(var foreachiter1 in foreachiter1_target){var column=foreachiter1_target[foreachiter1];var foreachiter2_target=weavejs.data.ColumnUtils.getDataSources(column);for(var foreachiter2 in foreachiter2_target){var columnDataSource=foreachiter2_target[foreachiter2];if(columnDataSource===dataSource)continue;var isLocal;if(Weave.detectChange(weavejs.data.DataSourceUtils._weakMap_dataSource_isLocal,
columnDataSource)){isLocal=columnDataSource.isLocal;weavejs.data.DataSourceUtils._weakMap_dataSource_isLocal.set(columnDataSource,isLocal)}else isLocal=weavejs.data.DataSourceUtils._weakMap_dataSource_isLocal.has(columnDataSource)?weavejs.data.DataSourceUtils._weakMap_dataSource_isLocal.get(columnDataSource):true;if(!isLocal)return true}}return false};
weavejs.data.DataSourceUtils.initColumn=function(proxyColumn,keys,data){var __localFn0__=function(){var newColumn;if(dataType==weavejs.api.data.DataType.NUMBER){newColumn=new weavejs.data.column.NumberColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.NumberColumn).setRecords(qkeys,data)}else if(dataType==weavejs.api.data.DataType.DATE){newColumn=new weavejs.data.column.DateColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.DateColumn).setRecords(qkeys,
data)}else{newColumn=new weavejs.data.column.StringColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.StringColumn).setRecords(qkeys,data)}proxyColumn.setInternalColumn(newColumn)};var asyncCallback=__localFn0__;var metadata=proxyColumn.getProxyMetadata();var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];if(!dataType&&weavejs.util.StandardLib.getArrayType(data)===Number)dataType=weavejs.api.data.DataType.NUMBER;if(!dataType){dataType=weavejs.data.DataSourceUtils.guessDataType(data);
metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=dataType;proxyColumn.setMetadata(metadata)}var qkeys;if(weavejs.util.StandardLib.arrayIsType(keys,weavejs.api.data.IQualifiedKey)){qkeys=keys;asyncCallback()}else{qkeys=[];org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager).getQKeysAsync(proxyColumn,metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE],keys,asyncCallback,qkeys)}};
weavejs.data.DataSourceUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'DataSourceUtils',qName:'weavejs.data.DataSourceUtils'}]};goog.exportSymbol('weavejs.data.DataSourceUtils',weavejs.data.DataSourceUtils);weavejs.data.DataSourceUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.JsonCache');goog.require('weavejs.api.core.ILinkableObject');weavejs.net.JsonCache=function(requestHeaders){requestHeaders=typeof requestHeaders!=='undefined'?requestHeaders:null;this.cache={};this.requestHeaders=requestHeaders};weavejs.net.JsonCache.buildURL=function(base,params){var paramsStr='';for(var key in params)paramsStr+=(paramsStr?'\x26':'?')+encodeURIComponent(key)+'\x3d'+encodeURIComponent(params[key]);return base+paramsStr};
weavejs.net.JsonCache.prototype.requestHeaders=null;weavejs.net.JsonCache.prototype.cache;weavejs.net.JsonCache.prototype.clearCache=function(){var foreachiter0_target=this.cache;for(var foreachiter0 in foreachiter0_target){var promise=foreachiter0_target[foreachiter0];Weave.dispose(promise)}this.cache={};Weave.getCallbacks(this).triggerCallbacks()};weavejs.net.JsonCache.prototype.getJsonObject=function(url){return this.getJsonPromise(url).getResult()};
weavejs.net.JsonCache.prototype.getJsonPromise=function(url){var self=this;var __localFn0__=function(result){return result||{}};var promise=this.cache[url];if(!promise){var request=new weavejs.net.URLRequest(url);request.requestHeaders=this.requestHeaders;request.responseType=weavejs.net.ResponseType.JSON;promise=(new weavejs.util.WeavePromise(this)).setResult(weavejs.WeaveAPI.URLRequestUtils.request(this,request)).then(__localFn0__);this.cache[url]=promise}return promise};
weavejs.net.JsonCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'JsonCache',qName:'weavejs.net.JsonCache'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.net.JsonCache',weavejs.net.JsonCache);
weavejs.net.JsonCache.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'JsonCache':{type:'',declaredBy:'weavejs.net.JsonCache'},'clearCache':{type:'void',declaredBy:'weavejs.net.JsonCache'},'getJsonObject':{type:'Object',declaredBy:'weavejs.net.JsonCache'},'getJsonPromise':{type:'WeavePromise',declaredBy:'weavejs.net.JsonCache'}}}}};goog.provide('weavejs.data.source.CensusApi');goog.require('weavejs.net.JsonCache');goog.require('weavejs.api.core.ILinkableObject');weavejs.data.source.CensusApi=function(){this.jsonCache=Weave.linkableChild(this,weavejs.net.JsonCache)};weavejs.data.source.CensusApi.BASE_URL='http://api.census.gov/';weavejs.data.source.CensusApi.prototype.jsonCache;
weavejs.data.source.CensusApi.prototype.getUrl=function(serviceUrl,params){var paramsStr='';for(var key in params)paramsStr+=(paramsStr?'\x26':'?')+key+'\x3d'+params[key];return serviceUrl+paramsStr};weavejs.data.source.CensusApi.prototype.getDatasets=function(){return this.jsonCache.getJsonPromise(weavejs.data.source.CensusApi.BASE_URL+'data.json')};
weavejs.data.source.CensusApi.prototype.getDatasetPromise=function(dataSetIdentifier){var self=this;var __localFn0__=function(result){if(!result||!result.dataset)throw new Error('Malformed response from Census API.');var foreachiter0_target=result.dataset;for(var foreachiter0 in foreachiter0_target){var tmp_dataset=foreachiter0_target[foreachiter0];if(tmp_dataset.identifier==dataSetIdentifier)return tmp_dataset}throw new Error('No such dataset: '+dataSetIdentifier);};return this.getDatasets().then(__localFn0__)};
weavejs.data.source.CensusApi.prototype.getVariablesPromise=function(dataSetIdentifier){var self=this;var __localFn0__=function(dataset){return self.jsonCache.getJsonPromise(dataset.c_variablesLink)};return this.getDatasetPromise(dataSetIdentifier).then(__localFn0__)};weavejs.data.source.CensusApi.prototype.getGeographiesPromise=function(dataSetIdentifier){var self=this;var __localFn0__=function(dataset){return self.jsonCache.getJsonPromise(dataset.c_geographyLink)};return this.getDatasetPromise(dataSetIdentifier).then(__localFn0__)};
weavejs.data.source.CensusApi.prototype._variablesInfoCached;weavejs.data.source.CensusApi.prototype._variablesInfoProcessed;
weavejs.data.source.CensusApi.prototype.getVariables=function(dataSetIdentifier){var self=this;var __localFn0__=function(result){if(result.variables===self._variablesInfoCached)return self._variablesInfoProcessed;var variablesInfo=weavejs.util.JS.copyObject(result.variables);delete variablesInfo['for'];delete variablesInfo['in'];for(var key in variablesInfo){var label=variablesInfo[key]['label'];var title=weavejs.util.StandardLib.substitute('{0} ({1})',weavejs.util.StandardLib.replace(label,'!!',
'\u2014'),key);variablesInfo[key]['title']=title}self._variablesInfoProcessed=variablesInfo;self._variablesInfoCached=result.variables;return self._variablesInfoProcessed};return this.getVariablesPromise(dataSetIdentifier).then(__localFn0__)};
weavejs.data.source.CensusApi.prototype.getGeographies=function(dataSetIdentifier){var self=this;var __localFn0__=function(result){var geo={};var foreachiter1_target=result.fips;for(var foreachiter1 in foreachiter1_target){var geo_description=foreachiter1_target[foreachiter1];geo[geo_description.geoLevelId]={id:geo_description.geoLevelId,name:geo_description.name,requires:geo_description.requires,optional:geo_description.optionalWithWCFor||[]}}return geo};return this.getGeographiesPromise(dataSetIdentifier).then(__localFn0__)};
weavejs.data.source.CensusApi.prototype.getColumn=function(metadata){var self=this;var __localFn0__=function(context){dataset_name=dataSource.dataSet.value;return self.getDatasetPromise(dataset_name)};var __localFn1__=function(datasetInfo){if(datasetInfo&&datasetInfo.distribution&&datasetInfo.distribution[0])access_url=datasetInfo.distribution[0].accessURL;if(!access_url)throw new Error('Dataset distribution information malformed.');return self.getVariables(dataset_name)};var __localFn2__=function(variableInfo){if(variableInfo&&
variableInfo[variable_name])title=variableInfo[variable_name].title;return self.getGeographies(dataset_name)};var __localFn3__=function(geographyInfo){if(geographyInfo==null)return null;geography_id=dataSource.geographicScope.value;geography_filters=dataSource.geographicFilters.getSessionState();api_key=dataSource.apiKey.value;requires=weavejs.util.ArrayUtils.copy(geographyInfo[geography_id].requires||[]);requires.push(geographyInfo[geography_id].name);filters=[];for(var key in geography_filters)filters.push(key+
':'+geography_filters[key]);params['get']=variable_name;params['for']=geographyInfo[geography_id].name+':*';if(filters.length!=0)params['in']=filters.join(',');if(api_key)params['key']=api_key;return self.jsonCache.getJsonPromise(self.getUrl(access_url,params))};var __localFn4__=function(dataResult){if(dataResult==null)return null;var idx;var columns=org.apache.flex.utils.Language.as(dataResult[0],Array);var rows=org.apache.flex.utils.Language.as(dataResult,Array);var data_column=new Array(rows.length-
1);var key_column=new Array(rows.length-1);var key_column_indices=new Array(columns.length);var data_column_index=columns.indexOf(variable_name);var tmp_key_type=weavejs.WeaveAPI.CSVParser.createCSVRow(requires);metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=tmp_key_type;metadata[weavejs.api.data.ColumnMetadata.TITLE]=title;for(idx=0;idx<requires.length;idx++)key_column_indices[idx]=columns.indexOf(requires[idx]);for(var row_idx=0;row_idx<data_column.length;row_idx++){var row=rows[row_idx+1];
var key_values=new Array(key_column_indices.length);for(idx=0;idx<key_column_indices.length;idx++)key_values[idx]=row[key_column_indices[idx]];key_column[row_idx]=key_values.join('');data_column[row_idx]=row[data_column_index]}return{keys:key_column,data:data_column,metadata:metadata}};var dataSource=org.apache.flex.utils.Language.as(Weave.getOwner(this),weavejs.data.source.CensusDataSource);var dataset_name;var geography_id;var geography_filters;var api_key;var variable_name=metadata[weavejs.data.source.CensusDataSource.VARIABLE_NAME];
var params={};var title=null;var access_url=null;var filters=[];var requires=null;return(new weavejs.util.WeavePromise(this)).setResult(this).depend(dataSource.dataSet).then(__localFn0__).then(__localFn1__).then(__localFn2__).depend(dataSource.geographicScope,dataSource.apiKey,dataSource.geographicFilters).then(__localFn3__).then(__localFn4__)};
weavejs.data.source.CensusApi.state_fips={'01':'AL','02':'AK','04':'AZ','05':'AR','06':'CA','08':'CO','09':'CT',10:'DE',11:'DC',12:'FL',13:'GA',15:'HI',16:'ID',17:'IL',18:'IN',19:'IA',20:'KS',21:'KY',22:'LA',23:'ME',24:'MD',25:'MA',26:'MI',27:'MN',28:'MS',29:'MO',30:'MT',31:'NE',32:'NV',33:'NH',34:'NJ',35:'NM',36:'NY',37:'NC',38:'ND',39:'OH',40:'OK',41:'OR',42:'PA',44:'RI',45:'SC',46:'SD',47:'TN',48:'TX',49:'UT',50:'VT',51:'VA',53:'WA',54:'WV',55:'WI',56:'WY',72:'PR'};
weavejs.data.source.CensusApi.county_fips={'01':{'001':'Autauga County','003':'Baldwin County','005':'Barbour County','007':'Bibb County','009':'Blount County','011':'Bullock County','013':'Butler County','015':'Calhoun County','017':'Chambers County','019':'Cherokee County','021':'Chilton County','023':'Choctaw County','025':'Clarke County','027':'Clay County','029':'Cleburne County','031':'Coffee County','033':'Colbert County','035':'Conecuh County','037':'Coosa County','039':'Covington County',
'041':'Crenshaw County','043':'Cullman County','045':'Dale County','047':'Dallas County','049':'DeKalb County','051':'Elmore County','053':'Escambia County','055':'Etowah County','057':'Fayette County','059':'Franklin County','061':'Geneva County','063':'Greene County','065':'Hale County','067':'Henry County','069':'Houston County','071':'Jackson County','073':'Jefferson County','075':'Lamar County','077':'Lauderdale County','079':'Lawrence County','081':'Lee County','083':'Limestone County','085':'Lowndes County',
'087':'Macon County','089':'Madison County','091':'Marengo County','093':'Marion County','095':'Marshall County','097':'Mobile County','099':'Monroe County',101:'Montgomery County',103:'Morgan County',105:'Perry County',107:'Pickens County',109:'Pike County',111:'Randolph County',113:'Russell County',115:'St. Clair County',117:'Shelby County',119:'Sumter County',121:'Talladega County',123:'Tallapoosa County',125:'Tuscaloosa County',127:'Walker County',129:'Washington County',131:'Wilcox County',133:'Winston County'},
'02':{'013':'Aleutians East Borough','016':'Aleutians West Census Area','020':'Anchorage Municipality','050':'Bethel Census Area','060':'Bristol Bay Borough','068':'Denali Borough','070':'Dillingham Census Area','090':'Fairbanks North Star Borough',100:'Haines Borough',105:'Hoonah-Angoon Census Area',110:'Juneau City and Borough',122:'Kenai Peninsula Borough',130:'Ketchikan Gateway Borough',150:'Kodiak Island Borough',164:'Lake and Peninsula Borough',170:'Matanuska-Susitna Borough',180:'Nome Census Area',
185:'North Slope Borough',188:'Northwest Arctic Borough',195:'Petersburg Census Area',198:'Prince of Wales-Hyder Census Area',220:'Sitka City and Borough',230:'Skagway Municipality',240:'Southeast Fairbanks Census Area',261:'Valdez-Cordova Census Area',270:'Wade Hampton Census Area',275:'Wrangell City and Borough',282:'Yakutat City and Borough',290:'Yukon-Koyukuk Census Area'},'04':{'001':'Apache County','003':'Cochise County','005':'Coconino County','007':'Gila County','009':'Graham County','011':'Greenlee County',
'012':'La Paz County','013':'Maricopa County','015':'Mohave County','017':'Navajo County','019':'Pima County','021':'Pinal County','023':'Santa Cruz County','025':'Yavapai County','027':'Yuma County'},'05':{'001':'Arkansas County','003':'Ashley County','005':'Baxter County','007':'Benton County','009':'Boone County','011':'Bradley County','013':'Calhoun County','015':'Carroll County','017':'Chicot County','019':'Clark County','021':'Clay County','023':'Cleburne County','025':'Cleveland County','027':'Columbia County',
'029':'Conway County','031':'Craighead County','033':'Crawford County','035':'Crittenden County','037':'Cross County','039':'Dallas County','041':'Desha County','043':'Drew County','045':'Faulkner County','047':'Franklin County','049':'Fulton County','051':'Garland County','053':'Grant County','055':'Greene County','057':'Hempstead County','059':'Hot Spring County','061':'Howard County','063':'Independence County','065':'Izard County','067':'Jackson County','069':'Jefferson County','071':'Johnson County',
'073':'Lafayette County','075':'Lawrence County','077':'Lee County','079':'Lincoln County','081':'Little River County','083':'Logan County','085':'Lonoke County','087':'Madison County','089':'Marion County','091':'Miller County','093':'Mississippi County','095':'Monroe County','097':'Montgomery County','099':'Nevada County',101:'Newton County',103:'Ouachita County',105:'Perry County',107:'Phillips County',109:'Pike County',111:'Poinsett County',113:'Polk County',115:'Pope County',117:'Prairie County',
119:'Pulaski County',121:'Randolph County',123:'St. Francis County',125:'Saline County',127:'Scott County',129:'Searcy County',131:'Sebastian County',133:'Sevier County',135:'Sharp County',137:'Stone County',139:'Union County',141:'Van Buren County',143:'Washington County',145:'White County',147:'Woodruff County',149:'Yell County'},'06':{'001':'Alameda County','003':'Alpine County','005':'Amador County','007':'Butte County','009':'Calaveras County','011':'Colusa County','013':'Contra Costa County',
'015':'Del Norte County','017':'El Dorado County','019':'Fresno County','021':'Glenn County','023':'Humboldt County','025':'Imperial County','027':'Inyo County','029':'Kern County','031':'Kings County','033':'Lake County','035':'Lassen County','037':'Los Angeles County','039':'Madera County','041':'Marin County','043':'Mariposa County','045':'Mendocino County','047':'Merced County','049':'Modoc County','051':'Mono County','053':'Monterey County','055':'Napa County','057':'Nevada County','059':'Orange County',
'061':'Placer County','063':'Plumas County','065':'Riverside County','067':'Sacramento County','069':'San Benito County','071':'San Bernardino County','073':'San Diego County','075':'San Francisco County','077':'San Joaquin County','079':'San Luis Obispo County','081':'San Mateo County','083':'Santa Barbara County','085':'Santa Clara County','087':'Santa Cruz County','089':'Shasta County','091':'Sierra County','093':'Siskiyou County','095':'Solano County','097':'Sonoma County','099':'Stanislaus County',
101:'Sutter County',103:'Tehama County',105:'Trinity County',107:'Tulare County',109:'Tuolumne County',111:'Ventura County',113:'Yolo County',115:'Yuba County'},'08':{'001':'Adams County','003':'Alamosa County','005':'Arapahoe County','007':'Archuleta County','009':'Baca County','011':'Bent County','013':'Boulder County','014':'Broomfield County','015':'Chaffee County','017':'Cheyenne County','019':'Clear Creek County','021':'Conejos County','023':'Costilla County','025':'Crowley County','027':'Custer County',
'029':'Delta County','031':'Denver County','033':'Dolores County','035':'Douglas County','037':'Eagle County','039':'Elbert County','041':'El Paso County','043':'Fremont County','045':'Garfield County','047':'Gilpin County','049':'Grand County','051':'Gunnison County','053':'Hinsdale County','055':'Huerfano County','057':'Jackson County','059':'Jefferson County','061':'Kiowa County','063':'Kit Carson County','065':'Lake County','067':'La Plata County','069':'Larimer County','071':'Las Animas County',
'073':'Lincoln County','075':'Logan County','077':'Mesa County','079':'Mineral County','081':'Moffat County','083':'Montezuma County','085':'Montrose County','087':'Morgan County','089':'Otero County','091':'Ouray County','093':'Park County','095':'Phillips County','097':'Pitkin County','099':'Prowers County',101:'Pueblo County',103:'Rio Blanco County',105:'Rio Grande County',107:'Routt County',109:'Saguache County',111:'San Juan County',113:'San Miguel County',115:'Sedgwick County',117:'Summit County',
119:'Teller County',121:'Washington County',123:'Weld County',125:'Yuma County'},'09':{'001':'Fairfield County','003':'Hartford County','005':'Litchfield County','007':'Middlesex County','009':'New Haven County','011':'New London County','013':'Tolland County','015':'Windham County'},10:{'001':'Kent County','003':'New Castle County','005':'Sussex County'},11:{'001':'District of Columbia'},12:{'001':'Alachua County','003':'Baker County','005':'Bay County','007':'Bradford County','009':'Brevard County',
'011':'Broward County','013':'Calhoun County','015':'Charlotte County','017':'Citrus County','019':'Clay County','021':'Collier County','023':'Columbia County','027':'DeSoto County','029':'Dixie County','031':'Duval County','033':'Escambia County','035':'Flagler County','037':'Franklin County','039':'Gadsden County','041':'Gilchrist County','043':'Glades County','045':'Gulf County','047':'Hamilton County','049':'Hardee County','051':'Hendry County','053':'Hernando County','055':'Highlands County',
'057':'Hillsborough County','059':'Holmes County','061':'Indian River County','063':'Jackson County','065':'Jefferson County','067':'Lafayette County','069':'Lake County','071':'Lee County','073':'Leon County','075':'Levy County','077':'Liberty County','079':'Madison County','081':'Manatee County','083':'Marion County','085':'Martin County','086':'Miami-Dade County','087':'Monroe County','089':'Nassau County','091':'Okaloosa County','093':'Okeechobee County','095':'Orange County','097':'Osceola County',
'099':'Palm Beach County',101:'Pasco County',103:'Pinellas County',105:'Polk County',107:'Putnam County',109:'St. Johns County',111:'St. Lucie County',113:'Santa Rosa County',115:'Sarasota County',117:'Seminole County',119:'Sumter County',121:'Suwannee County',123:'Taylor County',125:'Union County',127:'Volusia County',129:'Wakulla County',131:'Walton County',133:'Washington County'},13:{'001':'Appling County','003':'Atkinson County','005':'Bacon County','007':'Baker County','009':'Baldwin County',
'011':'Banks County','013':'Barrow County','015':'Bartow County','017':'Ben Hill County','019':'Berrien County','021':'Bibb County','023':'Bleckley County','025':'Brantley County','027':'Brooks County','029':'Bryan County','031':'Bulloch County','033':'Burke County','035':'Butts County','037':'Calhoun County','039':'Camden County','043':'Candler County','045':'Carroll County','047':'Catoosa County','049':'Charlton County','051':'Chatham County','053':'Chattahoochee County','055':'Chattooga County',
'057':'Cherokee County','059':'Clarke County','061':'Clay County','063':'Clayton County','065':'Clinch County','067':'Cobb County','069':'Coffee County','071':'Colquitt County','073':'Columbia County','075':'Cook County','077':'Coweta County','079':'Crawford County','081':'Crisp County','083':'Dade County','085':'Dawson County','087':'Decatur County','089':'DeKalb County','091':'Dodge County','093':'Dooly County','095':'Dougherty County','097':'Douglas County','099':'Early County',101:'Echols County',
103:'Effingham County',105:'Elbert County',107:'Emanuel County',109:'Evans County',111:'Fannin County',113:'Fayette County',115:'Floyd County',117:'Forsyth County',119:'Franklin County',121:'Fulton County',123:'Gilmer County',125:'Glascock County',127:'Glynn County',129:'Gordon County',131:'Grady County',133:'Greene County',135:'Gwinnett County',137:'Habersham County',139:'Hall County',141:'Hancock County',143:'Haralson County',145:'Harris County',147:'Hart County',149:'Heard County',151:'Henry County',
153:'Houston County',155:'Irwin County',157:'Jackson County',159:'Jasper County',161:'Jeff Davis County',163:'Jefferson County',165:'Jenkins County',167:'Johnson County',169:'Jones County',171:'Lamar County',173:'Lanier County',175:'Laurens County',177:'Lee County',179:'Liberty County',181:'Lincoln County',183:'Long County',185:'Lowndes County',187:'Lumpkin County',189:'McDuffie County',191:'McIntosh County',193:'Macon County',195:'Madison County',197:'Marion County',199:'Meriwether County',201:'Miller County',
205:'Mitchell County',207:'Monroe County',209:'Montgomery County',211:'Morgan County',213:'Murray County',215:'Muscogee County',217:'Newton County',219:'Oconee County',221:'Oglethorpe County',223:'Paulding County',225:'Peach County',227:'Pickens County',229:'Pierce County',231:'Pike County',233:'Polk County',235:'Pulaski County',237:'Putnam County',239:'Quitman County',241:'Rabun County',243:'Randolph County',245:'Richmond County',247:'Rockdale County',249:'Schley County',251:'Screven County',253:'Seminole County',
255:'Spalding County',257:'Stephens County',259:'Stewart County',261:'Sumter County',263:'Talbot County',265:'Taliaferro County',267:'Tattnall County',269:'Taylor County',271:'Telfair County',273:'Terrell County',275:'Thomas County',277:'Tift County',279:'Toombs County',281:'Towns County',283:'Treutlen County',285:'Troup County',287:'Turner County',289:'Twiggs County',291:'Union County',293:'Upson County',295:'Walker County',297:'Walton County',299:'Ware County',301:'Warren County',303:'Washington County',
305:'Wayne County',307:'Webster County',309:'Wheeler County',311:'White County',313:'Whitfield County',315:'Wilcox County',317:'Wilkes County',319:'Wilkinson County',321:'Worth County'},15:{'001':'Hawaii County','003':'Honolulu County','005':'Kalawao County','007':'Kauai County','009':'Maui County'},16:{'001':'Ada County','003':'Adams County','005':'Bannock County','007':'Bear Lake County','009':'Benewah County','011':'Bingham County','013':'Blaine County','015':'Boise County','017':'Bonner County',
'019':'Bonneville County','021':'Boundary County','023':'Butte County','025':'Camas County','027':'Canyon County','029':'Caribou County','031':'Cassia County','033':'Clark County','035':'Clearwater County','037':'Custer County','039':'Elmore County','041':'Franklin County','043':'Fremont County','045':'Gem County','047':'Gooding County','049':'Idaho County','051':'Jefferson County','053':'Jerome County','055':'Kootenai County','057':'Latah County','059':'Lemhi County','061':'Lewis County','063':'Lincoln County',
'065':'Madison County','067':'Minidoka County','069':'Nez Perce County','071':'Oneida County','073':'Owyhee County','075':'Payette County','077':'Power County','079':'Shoshone County','081':'Teton County','083':'Twin Falls County','085':'Valley County','087':'Washington County'},17:{'001':'Adams County','003':'Alexander County','005':'Bond County','007':'Boone County','009':'Brown County','011':'Bureau County','013':'Calhoun County','015':'Carroll County','017':'Cass County','019':'Champaign County',
'021':'Christian County','023':'Clark County','025':'Clay County','027':'Clinton County','029':'Coles County','031':'Cook County','033':'Crawford County','035':'Cumberland County','037':'DeKalb County','039':'De Witt County','041':'Douglas County','043':'DuPage County','045':'Edgar County','047':'Edwards County','049':'Effingham County','051':'Fayette County','053':'Ford County','055':'Franklin County','057':'Fulton County','059':'Gallatin County','061':'Greene County','063':'Grundy County','065':'Hamilton County',
'067':'Hancock County','069':'Hardin County','071':'Henderson County','073':'Henry County','075':'Iroquois County','077':'Jackson County','079':'Jasper County','081':'Jefferson County','083':'Jersey County','085':'Jo Daviess County','087':'Johnson County','089':'Kane County','091':'Kankakee County','093':'Kendall County','095':'Knox County','097':'Lake County','099':'LaSalle County',101:'Lawrence County',103:'Lee County',105:'Livingston County',107:'Logan County',109:'McDonough County',111:'McHenry County',
113:'McLean County',115:'Macon County',117:'Macoupin County',119:'Madison County',121:'Marion County',123:'Marshall County',125:'Mason County',127:'Massac County',129:'Menard County',131:'Mercer County',133:'Monroe County',135:'Montgomery County',137:'Morgan County',139:'Moultrie County',141:'Ogle County',143:'Peoria County',145:'Perry County',147:'Piatt County',149:'Pike County',151:'Pope County',153:'Pulaski County',155:'Putnam County',157:'Randolph County',159:'Richland County',161:'Rock Island County',
163:'St. Clair County',165:'Saline County',167:'Sangamon County',169:'Schuyler County',171:'Scott County',173:'Shelby County',175:'Stark County',177:'Stephenson County',179:'Tazewell County',181:'Union County',183:'Vermilion County',185:'Wabash County',187:'Warren County',189:'Washington County',191:'Wayne County',193:'White County',195:'Whiteside County',197:'Will County',199:'Williamson County',201:'Winnebago County',203:'Woodford County'},18:{'001':'Adams County','003':'Allen County','005':'Bartholomew County',
'007':'Benton County','009':'Blackford County','011':'Boone County','013':'Brown County','015':'Carroll County','017':'Cass County','019':'Clark County','021':'Clay County','023':'Clinton County','025':'Crawford County','027':'Daviess County','029':'Dearborn County','031':'Decatur County','033':'DeKalb County','035':'Delaware County','037':'Dubois County','039':'Elkhart County','041':'Fayette County','043':'Floyd County','045':'Fountain County','047':'Franklin County','049':'Fulton County','051':'Gibson County',
'053':'Grant County','055':'Greene County','057':'Hamilton County','059':'Hancock County','061':'Harrison County','063':'Hendricks County','065':'Henry County','067':'Howard County','069':'Huntington County','071':'Jackson County','073':'Jasper County','075':'Jay County','077':'Jefferson County','079':'Jennings County','081':'Johnson County','083':'Knox County','085':'Kosciusko County','087':'LaGrange County','089':'Lake County','091':'LaPorte County','093':'Lawrence County','095':'Madison County',
'097':'Marion County','099':'Marshall County',101:'Martin County',103:'Miami County',105:'Monroe County',107:'Montgomery County',109:'Morgan County',111:'Newton County',113:'Noble County',115:'Ohio County',117:'Orange County',119:'Owen County',121:'Parke County',123:'Perry County',125:'Pike County',127:'Porter County',129:'Posey County',131:'Pulaski County',133:'Putnam County',135:'Randolph County',137:'Ripley County',139:'Rush County',141:'St. Joseph County',143:'Scott County',145:'Shelby County',
147:'Spencer County',149:'Starke County',151:'Steuben County',153:'Sullivan County',155:'Switzerland County',157:'Tippecanoe County',159:'Tipton County',161:'Union County',163:'Vanderburgh County',165:'Vermillion County',167:'Vigo County',169:'Wabash County',171:'Warren County',173:'Warrick County',175:'Washington County',177:'Wayne County',179:'Wells County',181:'White County',183:'Whitley County'},19:{'001':'Adair County','003':'Adams County','005':'Allamakee County','007':'Appanoose County','009':'Audubon County',
'011':'Benton County','013':'Black Hawk County','015':'Boone County','017':'Bremer County','019':'Buchanan County','021':'Buena Vista County','023':'Butler County','025':'Calhoun County','027':'Carroll County','029':'Cass County','031':'Cedar County','033':'Cerro Gordo County','035':'Cherokee County','037':'Chickasaw County','039':'Clarke County','041':'Clay County','043':'Clayton County','045':'Clinton County','047':'Crawford County','049':'Dallas County','051':'Davis County','053':'Decatur County',
'055':'Delaware County','057':'Des Moines County','059':'Dickinson County','061':'Dubuque County','063':'Emmet County','065':'Fayette County','067':'Floyd County','069':'Franklin County','071':'Fremont County','073':'Greene County','075':'Grundy County','077':'Guthrie County','079':'Hamilton County','081':'Hancock County','083':'Hardin County','085':'Harrison County','087':'Henry County','089':'Howard County','091':'Humboldt County','093':'Ida County','095':'Iowa County','097':'Jackson County','099':'Jasper County',
101:'Jefferson County',103:'Johnson County',105:'Jones County',107:'Keokuk County',109:'Kossuth County',111:'Lee County',113:'Linn County',115:'Louisa County',117:'Lucas County',119:'Lyon County',121:'Madison County',123:'Mahaska County',125:'Marion County',127:'Marshall County',129:'Mills County',131:'Mitchell County',133:'Monona County',135:'Monroe County',137:'Montgomery County',139:'Muscatine County',141:"O'Brien County",143:'Osceola County',145:'Page County',147:'Palo Alto County',149:'Plymouth County',
151:'Pocahontas County',153:'Polk County',155:'Pottawattamie County',157:'Poweshiek County',159:'Ringgold County',161:'Sac County',163:'Scott County',165:'Shelby County',167:'Sioux County',169:'Story County',171:'Tama County',173:'Taylor County',175:'Union County',177:'Van Buren County',179:'Wapello County',181:'Warren County',183:'Washington County',185:'Wayne County',187:'Webster County',189:'Winnebago County',191:'Winneshiek County',193:'Woodbury County',195:'Worth County',197:'Wright County'},
20:{'001':'Allen County','003':'Anderson County','005':'Atchison County','007':'Barber County','009':'Barton County','011':'Bourbon County','013':'Brown County','015':'Butler County','017':'Chase County','019':'Chautauqua County','021':'Cherokee County','023':'Cheyenne County','025':'Clark County','027':'Clay County','029':'Cloud County','031':'Coffey County','033':'Comanche County','035':'Cowley County','037':'Crawford County','039':'Decatur County','041':'Dickinson County','043':'Doniphan County',
'045':'Douglas County','047':'Edwards County','049':'Elk County','051':'Ellis County','053':'Ellsworth County','055':'Finney County','057':'Ford County','059':'Franklin County','061':'Geary County','063':'Gove County','065':'Graham County','067':'Grant County','069':'Gray County','071':'Greeley County','073':'Greenwood County','075':'Hamilton County','077':'Harper County','079':'Harvey County','081':'Haskell County','083':'Hodgeman County','085':'Jackson County','087':'Jefferson County','089':'Jewell County',
'091':'Johnson County','093':'Kearny County','095':'Kingman County','097':'Kiowa County','099':'Labette County',101:'Lane County',103:'Leavenworth County',105:'Lincoln County',107:'Linn County',109:'Logan County',111:'Lyon County',113:'McPherson County',115:'Marion County',117:'Marshall County',119:'Meade County',121:'Miami County',123:'Mitchell County',125:'Montgomery County',127:'Morris County',129:'Morton County',131:'Nemaha County',133:'Neosho County',135:'Ness County',137:'Norton County',139:'Osage County',
141:'Osborne County',143:'Ottawa County',145:'Pawnee County',147:'Phillips County',149:'Pottawatomie County',151:'Pratt County',153:'Rawlins County',155:'Reno County',157:'Republic County',159:'Rice County',161:'Riley County',163:'Rooks County',165:'Rush County',167:'Russell County',169:'Saline County',171:'Scott County',173:'Sedgwick County',175:'Seward County',177:'Shawnee County',179:'Sheridan County',181:'Sherman County',183:'Smith County',185:'Stafford County',187:'Stanton County',189:'Stevens County',
191:'Sumner County',193:'Thomas County',195:'Trego County',197:'Wabaunsee County',199:'Wallace County',201:'Washington County',203:'Wichita County',205:'Wilson County',207:'Woodson County',209:'Wyandotte County'},21:{'001':'Adair County','003':'Allen County','005':'Anderson County','007':'Ballard County','009':'Barren County','011':'Bath County','013':'Bell County','015':'Boone County','017':'Bourbon County','019':'Boyd County','021':'Boyle County','023':'Bracken County','025':'Breathitt County',
'027':'Breckinridge County','029':'Bullitt County','031':'Butler County','033':'Caldwell County','035':'Calloway County','037':'Campbell County','039':'Carlisle County','041':'Carroll County','043':'Carter County','045':'Casey County','047':'Christian County','049':'Clark County','051':'Clay County','053':'Clinton County','055':'Crittenden County','057':'Cumberland County','059':'Daviess County','061':'Edmonson County','063':'Elliott County','065':'Estill County','067':'Fayette County','069':'Fleming County',
'071':'Floyd County','073':'Franklin County','075':'Fulton County','077':'Gallatin County','079':'Garrard County','081':'Grant County','083':'Graves County','085':'Grayson County','087':'Green County','089':'Greenup County','091':'Hancock County','093':'Hardin County','095':'Harlan County','097':'Harrison County','099':'Hart County',101:'Henderson County',103:'Henry County',105:'Hickman County',107:'Hopkins County',109:'Jackson County',111:'Jefferson County',113:'Jessamine County',115:'Johnson County',
117:'Kenton County',119:'Knott County',121:'Knox County',123:'Larue County',125:'Laurel County',127:'Lawrence County',129:'Lee County',131:'Leslie County',133:'Letcher County',135:'Lewis County',137:'Lincoln County',139:'Livingston County',141:'Logan County',143:'Lyon County',145:'McCracken County',147:'McCreary County',149:'McLean County',151:'Madison County',153:'Magoffin County',155:'Marion County',157:'Marshall County',159:'Martin County',161:'Mason County',163:'Meade County',165:'Menifee County',
167:'Mercer County',169:'Metcalfe County',171:'Monroe County',173:'Montgomery County',175:'Morgan County',177:'Muhlenberg County',179:'Nelson County',181:'Nicholas County',183:'Ohio County',185:'Oldham County',187:'Owen County',189:'Owsley County',191:'Pendleton County',193:'Perry County',195:'Pike County',197:'Powell County',199:'Pulaski County',201:'Robertson County',203:'Rockcastle County',205:'Rowan County',207:'Russell County',209:'Scott County',211:'Shelby County',213:'Simpson County',215:'Spencer County',
217:'Taylor County',219:'Todd County',221:'Trigg County',223:'Trimble County',225:'Union County',227:'Warren County',229:'Washington County',231:'Wayne County',233:'Webster County',235:'Whitley County',237:'Wolfe County',239:'Woodford County'},22:{'001':'Acadia Parish','003':'Allen Parish','005':'Ascension Parish','007':'Assumption Parish','009':'Avoyelles Parish','011':'Beauregard Parish','013':'Bienville Parish','015':'Bossier Parish','017':'Caddo Parish','019':'Calcasieu Parish','021':'Caldwell Parish',
'023':'Cameron Parish','025':'Catahoula Parish','027':'Claiborne Parish','029':'Concordia Parish','031':'De Soto Parish','033':'East Baton Rouge Parish','035':'East Carroll Parish','037':'East Feliciana Parish','039':'Evangeline Parish','041':'Franklin Parish','043':'Grant Parish','045':'Iberia Parish','047':'Iberville Parish','049':'Jackson Parish','051':'Jefferson Parish','053':'Jefferson Davis Parish','055':'Lafayette Parish','057':'Lafourche Parish','059':'La Salle Parish','061':'Lincoln Parish',
'063':'Livingston Parish','065':'Madison Parish','067':'Morehouse Parish','069':'Natchitoches Parish','071':'Orleans Parish','073':'Ouachita Parish','075':'Plaquemines Parish','077':'Pointe Coupee Parish','079':'Rapides Parish','081':'Red River Parish','083':'Richland Parish','085':'Sabine Parish','087':'St. Bernard Parish','089':'St. Charles Parish','091':'St. Helena Parish','093':'St. James Parish','095':'St. John the Baptist Parish','097':'St. Landry Parish','099':'St. Martin Parish',101:'St. Mary Parish',
103:'St. Tammany Parish',105:'Tangipahoa Parish',107:'Tensas Parish',109:'Terrebonne Parish',111:'Union Parish',113:'Vermilion Parish',115:'Vernon Parish',117:'Washington Parish',119:'Webster Parish',121:'West Baton Rouge Parish',123:'West Carroll Parish',125:'West Feliciana Parish',127:'Winn Parish'},23:{'001':'Androscoggin County','003':'Aroostook County','005':'Cumberland County','007':'Franklin County','009':'Hancock County','011':'Kennebec County','013':'Knox County','015':'Lincoln County','017':'Oxford County',
'019':'Penobscot County','021':'Piscataquis County','023':'Sagadahoc County','025':'Somerset County','027':'Waldo County','029':'Washington County','031':'York County'},24:{'001':'Allegany County','003':'Anne Arundel County','005':'Baltimore County','009':'Calvert County','011':'Caroline County','013':'Carroll County','015':'Cecil County','017':'Charles County','019':'Dorchester County','021':'Frederick County','023':'Garrett County','025':'Harford County','027':'Howard County','029':'Kent County',
'031':'Montgomery County','033':"Prince George's County",'035':"Queen Anne's County",'037':"St. Mary's County",'039':'Somerset County','041':'Talbot County','043':'Washington County','045':'Wicomico County','047':'Worcester County',510:'Baltimore city'},25:{'001':'Barnstable County','003':'Berkshire County','005':'Bristol County','007':'Dukes County','009':'Essex County','011':'Franklin County','013':'Hampden County','015':'Hampshire County','017':'Middlesex County','019':'Nantucket County','021':'Norfolk County',
'023':'Plymouth County','025':'Suffolk County','027':'Worcester County'},26:{'001':'Alcona County','003':'Alger County','005':'Allegan County','007':'Alpena County','009':'Antrim County','011':'Arenac County','013':'Baraga County','015':'Barry County','017':'Bay County','019':'Benzie County','021':'Berrien County','023':'Branch County','025':'Calhoun County','027':'Cass County','029':'Charlevoix County','031':'Cheboygan County','033':'Chippewa County','035':'Clare County','037':'Clinton County','039':'Crawford County',
'041':'Delta County','043':'Dickinson County','045':'Eaton County','047':'Emmet County','049':'Genesee County','051':'Gladwin County','053':'Gogebic County','055':'Grand Traverse County','057':'Gratiot County','059':'Hillsdale County','061':'Houghton County','063':'Huron County','065':'Ingham County','067':'Ionia County','069':'Iosco County','071':'Iron County','073':'Isabella County','075':'Jackson County','077':'Kalamazoo County','079':'Kalkaska County','081':'Kent County','083':'Keweenaw County',
'085':'Lake County','087':'Lapeer County','089':'Leelanau County','091':'Lenawee County','093':'Livingston County','095':'Luce County','097':'Mackinac County','099':'Macomb County',101:'Manistee County',103:'Marquette County',105:'Mason County',107:'Mecosta County',109:'Menominee County',111:'Midland County',113:'Missaukee County',115:'Monroe County',117:'Montcalm County',119:'Montmorency County',121:'Muskegon County',123:'Newaygo County',125:'Oakland County',127:'Oceana County',129:'Ogemaw County',
131:'Ontonagon County',133:'Osceola County',135:'Oscoda County',137:'Otsego County',139:'Ottawa County',141:'Presque Isle County',143:'Roscommon County',145:'Saginaw County',147:'St. Clair County',149:'St. Joseph County',151:'Sanilac County',153:'Schoolcraft County',155:'Shiawassee County',157:'Tuscola County',159:'Van Buren County',161:'Washtenaw County',163:'Wayne County',165:'Wexford County'},27:{'001':'Aitkin County','003':'Anoka County','005':'Becker County','007':'Beltrami County','009':'Benton County',
'011':'Big Stone County','013':'Blue Earth County','015':'Brown County','017':'Carlton County','019':'Carver County','021':'Cass County','023':'Chippewa County','025':'Chisago County','027':'Clay County','029':'Clearwater County','031':'Cook County','033':'Cottonwood County','035':'Crow Wing County','037':'Dakota County','039':'Dodge County','041':'Douglas County','043':'Faribault County','045':'Fillmore County','047':'Freeborn County','049':'Goodhue County','051':'Grant County','053':'Hennepin County',
'055':'Houston County','057':'Hubbard County','059':'Isanti County','061':'Itasca County','063':'Jackson County','065':'Kanabec County','067':'Kandiyohi County','069':'Kittson County','071':'Koochiching County','073':'Lac qui Parle County','075':'Lake County','077':'Lake of the Woods County','079':'Le Sueur County','081':'Lincoln County','083':'Lyon County','085':'McLeod County','087':'Mahnomen County','089':'Marshall County','091':'Martin County','093':'Meeker County','095':'Mille Lacs County','097':'Morrison County',
'099':'Mower County',101:'Murray County',103:'Nicollet County',105:'Nobles County',107:'Norman County',109:'Olmsted County',111:'Otter Tail County',113:'Pennington County',115:'Pine County',117:'Pipestone County',119:'Polk County',121:'Pope County',123:'Ramsey County',125:'Red Lake County',127:'Redwood County',129:'Renville County',131:'Rice County',133:'Rock County',135:'Roseau County',137:'St. Louis County',139:'Scott County',141:'Sherburne County',143:'Sibley County',145:'Stearns County',147:'Steele County',
149:'Stevens County',151:'Swift County',153:'Todd County',155:'Traverse County',157:'Wabasha County',159:'Wadena County',161:'Waseca County',163:'Washington County',165:'Watonwan County',167:'Wilkin County',169:'Winona County',171:'Wright County',173:'Yellow Medicine County'},28:{'001':'Adams County','003':'Alcorn County','005':'Amite County','007':'Attala County','009':'Benton County','011':'Bolivar County','013':'Calhoun County','015':'Carroll County','017':'Chickasaw County','019':'Choctaw County',
'021':'Claiborne County','023':'Clarke County','025':'Clay County','027':'Coahoma County','029':'Copiah County','031':'Covington County','033':'DeSoto County','035':'Forrest County','037':'Franklin County','039':'George County','041':'Greene County','043':'Grenada County','045':'Hancock County','047':'Harrison County','049':'Hinds County','051':'Holmes County','053':'Humphreys County','055':'Issaquena County','057':'Itawamba County','059':'Jackson County','061':'Jasper County','063':'Jefferson County',
'065':'Jefferson Davis County','067':'Jones County','069':'Kemper County','071':'Lafayette County','073':'Lamar County','075':'Lauderdale County','077':'Lawrence County','079':'Leake County','081':'Lee County','083':'Leflore County','085':'Lincoln County','087':'Lowndes County','089':'Madison County','091':'Marion County','093':'Marshall County','095':'Monroe County','097':'Montgomery County','099':'Neshoba County',101:'Newton County',103:'Noxubee County',105:'Oktibbeha County',107:'Panola County',
109:'Pearl River County',111:'Perry County',113:'Pike County',115:'Pontotoc County',117:'Prentiss County',119:'Quitman County',121:'Rankin County',123:'Scott County',125:'Sharkey County',127:'Simpson County',129:'Smith County',131:'Stone County',133:'Sunflower County',135:'Tallahatchie County',137:'Tate County',139:'Tippah County',141:'Tishomingo County',143:'Tunica County',145:'Union County',147:'Walthall County',149:'Warren County',151:'Washington County',153:'Wayne County',155:'Webster County',
157:'Wilkinson County',159:'Winston County',161:'Yalobusha County',163:'Yazoo County'},29:{'001':'Adair County','003':'Andrew County','005':'Atchison County','007':'Audrain County','009':'Barry County','011':'Barton County','013':'Bates County','015':'Benton County','017':'Bollinger County','019':'Boone County','021':'Buchanan County','023':'Butler County','025':'Caldwell County','027':'Callaway County','029':'Camden County','031':'Cape Girardeau County','033':'Carroll County','035':'Carter County',
'037':'Cass County','039':'Cedar County','041':'Chariton County','043':'Christian County','045':'Clark County','047':'Clay County','049':'Clinton County','051':'Cole County','053':'Cooper County','055':'Crawford County','057':'Dade County','059':'Dallas County','061':'Daviess County','063':'DeKalb County','065':'Dent County','067':'Douglas County','069':'Dunklin County','071':'Franklin County','073':'Gasconade County','075':'Gentry County','077':'Greene County','079':'Grundy County','081':'Harrison County',
'083':'Henry County','085':'Hickory County','087':'Holt County','089':'Howard County','091':'Howell County','093':'Iron County','095':'Jackson County','097':'Jasper County','099':'Jefferson County',101:'Johnson County',103:'Knox County',105:'Laclede County',107:'Lafayette County',109:'Lawrence County',111:'Lewis County',113:'Lincoln County',115:'Linn County',117:'Livingston County',119:'McDonald County',121:'Macon County',123:'Madison County',125:'Maries County',127:'Marion County',129:'Mercer County',
131:'Miller County',133:'Mississippi County',135:'Moniteau County',137:'Monroe County',139:'Montgomery County',141:'Morgan County',143:'New Madrid County',145:'Newton County',147:'Nodaway County',149:'Oregon County',151:'Osage County',153:'Ozark County',155:'Pemiscot County',157:'Perry County',159:'Pettis County',161:'Phelps County',163:'Pike County',165:'Platte County',167:'Polk County',169:'Pulaski County',171:'Putnam County',173:'Ralls County',175:'Randolph County',177:'Ray County',179:'Reynolds County',
181:'Ripley County',183:'St. Charles County',185:'St. Clair County',186:'Ste. Genevieve County',187:'St. Francois County',189:'St. Louis County',195:'Saline County',197:'Schuyler County',199:'Scotland County',201:'Scott County',203:'Shannon County',205:'Shelby County',207:'Stoddard County',209:'Stone County',211:'Sullivan County',213:'Taney County',215:'Texas County',217:'Vernon County',219:'Warren County',221:'Washington County',223:'Wayne County',225:'Webster County',227:'Worth County',229:'Wright County',
510:'St. Louis city'},30:{'001':'Beaverhead County','003':'Big Horn County','005':'Blaine County','007':'Broadwater County','009':'Carbon County','011':'Carter County','013':'Cascade County','015':'Chouteau County','017':'Custer County','019':'Daniels County','021':'Dawson County','023':'Deer Lodge County','025':'Fallon County','027':'Fergus County','029':'Flathead County','031':'Gallatin County','033':'Garfield County','035':'Glacier County','037':'Golden Valley County','039':'Granite County','041':'Hill County',
'043':'Jefferson County','045':'Judith Basin County','047':'Lake County','049':'Lewis and Clark County','051':'Liberty County','053':'Lincoln County','055':'McCone County','057':'Madison County','059':'Meagher County','061':'Mineral County','063':'Missoula County','065':'Musselshell County','067':'Park County','069':'Petroleum County','071':'Phillips County','073':'Pondera County','075':'Powder River County','077':'Powell County','079':'Prairie County','081':'Ravalli County','083':'Richland County',
'085':'Roosevelt County','087':'Rosebud County','089':'Sanders County','091':'Sheridan County','093':'Silver Bow County','095':'Stillwater County','097':'Sweet Grass County','099':'Teton County',101:'Toole County',103:'Treasure County',105:'Valley County',107:'Wheatland County',109:'Wibaux County',111:'Yellowstone County'},31:{'001':'Adams County','003':'Antelope County','005':'Arthur County','007':'Banner County','009':'Blaine County','011':'Boone County','013':'Box Butte County','015':'Boyd County',
'017':'Brown County','019':'Buffalo County','021':'Burt County','023':'Butler County','025':'Cass County','027':'Cedar County','029':'Chase County','031':'Cherry County','033':'Cheyenne County','035':'Clay County','037':'Colfax County','039':'Cuming County','041':'Custer County','043':'Dakota County','045':'Dawes County','047':'Dawson County','049':'Deuel County','051':'Dixon County','053':'Dodge County','055':'Douglas County','057':'Dundy County','059':'Fillmore County','061':'Franklin County','063':'Frontier County',
'065':'Furnas County','067':'Gage County','069':'Garden County','071':'Garfield County','073':'Gosper County','075':'Grant County','077':'Greeley County','079':'Hall County','081':'Hamilton County','083':'Harlan County','085':'Hayes County','087':'Hitchcock County','089':'Holt County','091':'Hooker County','093':'Howard County','095':'Jefferson County','097':'Johnson County','099':'Kearney County',101:'Keith County',103:'Keya Paha County',105:'Kimball County',107:'Knox County',109:'Lancaster County',
111:'Lincoln County',113:'Logan County',115:'Loup County',117:'McPherson County',119:'Madison County',121:'Merrick County',123:'Morrill County',125:'Nance County',127:'Nemaha County',129:'Nuckolls County',131:'Otoe County',133:'Pawnee County',135:'Perkins County',137:'Phelps County',139:'Pierce County',141:'Platte County',143:'Polk County',145:'Red Willow County',147:'Richardson County',149:'Rock County',151:'Saline County',153:'Sarpy County',155:'Saunders County',157:'Scotts Bluff County',159:'Seward County',
161:'Sheridan County',163:'Sherman County',165:'Sioux County',167:'Stanton County',169:'Thayer County',171:'Thomas County',173:'Thurston County',175:'Valley County',177:'Washington County',179:'Wayne County',181:'Webster County',183:'Wheeler County',185:'York County'},32:{'001':'Churchill County','003':'Clark County','005':'Douglas County','007':'Elko County','009':'Esmeralda County','011':'Eureka County','013':'Humboldt County','015':'Lander County','017':'Lincoln County','019':'Lyon County','021':'Mineral County',
'023':'Nye County','027':'Pershing County','029':'Storey County','031':'Washoe County','033':'White Pine County',510:'Carson City'},33:{'001':'Belknap County','003':'Carroll County','005':'Cheshire County','007':'Coos County','009':'Grafton County','011':'Hillsborough County','013':'Merrimack County','015':'Rockingham County','017':'Strafford County','019':'Sullivan County'},34:{'001':'Atlantic County','003':'Bergen County','005':'Burlington County','007':'Camden County','009':'Cape May County','011':'Cumberland County',
'013':'Essex County','015':'Gloucester County','017':'Hudson County','019':'Hunterdon County','021':'Mercer County','023':'Middlesex County','025':'Monmouth County','027':'Morris County','029':'Ocean County','031':'Passaic County','033':'Salem County','035':'Somerset County','037':'Sussex County','039':'Union County','041':'Warren County'},35:{'001':'Bernalillo County','003':'Catron County','005':'Chaves County','006':'Cibola County','007':'Colfax County','009':'Curry County','011':'De Baca County',
'013':'Dona Ana County','015':'Eddy County','017':'Grant County','019':'Guadalupe County','021':'Harding County','023':'Hidalgo County','025':'Lea County','027':'Lincoln County','028':'Los Alamos County','029':'Luna County','031':'McKinley County','033':'Mora County','035':'Otero County','037':'Quay County','039':'Rio Arriba County','041':'Roosevelt County','043':'Sandoval County','045':'San Juan County','047':'San Miguel County','049':'Santa Fe County','051':'Sierra County','053':'Socorro County',
'055':'Taos County','057':'Torrance County','059':'Union County','061':'Valencia County'},36:{'001':'Albany County','003':'Allegany County','005':'Bronx County','007':'Broome County','009':'Cattaraugus County','011':'Cayuga County','013':'Chautauqua County','015':'Chemung County','017':'Chenango County','019':'Clinton County','021':'Columbia County','023':'Cortland County','025':'Delaware County','027':'Dutchess County','029':'Erie County','031':'Essex County','033':'Franklin County','035':'Fulton County',
'037':'Genesee County','039':'Greene County','041':'Hamilton County','043':'Herkimer County','045':'Jefferson County','047':'Kings County','049':'Lewis County','051':'Livingston County','053':'Madison County','055':'Monroe County','057':'Montgomery County','059':'Nassau County','061':'New York County','063':'Niagara County','065':'Oneida County','067':'Onondaga County','069':'Ontario County','071':'Orange County','073':'Orleans County','075':'Oswego County','077':'Otsego County','079':'Putnam County',
'081':'Queens County','083':'Rensselaer County','085':'Richmond County','087':'Rockland County','089':'St. Lawrence County','091':'Saratoga County','093':'Schenectady County','095':'Schoharie County','097':'Schuyler County','099':'Seneca County',101:'Steuben County',103:'Suffolk County',105:'Sullivan County',107:'Tioga County',109:'Tompkins County',111:'Ulster County',113:'Warren County',115:'Washington County',117:'Wayne County',119:'Westchester County',121:'Wyoming County',123:'Yates County'},37:{'001':'Alamance County',
'003':'Alexander County','005':'Alleghany County','007':'Anson County','009':'Ashe County','011':'Avery County','013':'Beaufort County','015':'Bertie County','017':'Bladen County','019':'Brunswick County','021':'Buncombe County','023':'Burke County','025':'Cabarrus County','027':'Caldwell County','029':'Camden County','031':'Carteret County','033':'Caswell County','035':'Catawba County','037':'Chatham County','039':'Cherokee County','041':'Chowan County','043':'Clay County','045':'Cleveland County',
'047':'Columbus County','049':'Craven County','051':'Cumberland County','053':'Currituck County','055':'Dare County','057':'Davidson County','059':'Davie County','061':'Duplin County','063':'Durham County','065':'Edgecombe County','067':'Forsyth County','069':'Franklin County','071':'Gaston County','073':'Gates County','075':'Graham County','077':'Granville County','079':'Greene County','081':'Guilford County','083':'Halifax County','085':'Harnett County','087':'Haywood County','089':'Henderson County',
'091':'Hertford County','093':'Hoke County','095':'Hyde County','097':'Iredell County','099':'Jackson County',101:'Johnston County',103:'Jones County',105:'Lee County',107:'Lenoir County',109:'Lincoln County',111:'McDowell County',113:'Macon County',115:'Madison County',117:'Martin County',119:'Mecklenburg County',121:'Mitchell County',123:'Montgomery County',125:'Moore County',127:'Nash County',129:'New Hanover County',131:'Northampton County',133:'Onslow County',135:'Orange County',137:'Pamlico County',
139:'Pasquotank County',141:'Pender County',143:'Perquimans County',145:'Person County',147:'Pitt County',149:'Polk County',151:'Randolph County',153:'Richmond County',155:'Robeson County',157:'Rockingham County',159:'Rowan County',161:'Rutherford County',163:'Sampson County',165:'Scotland County',167:'Stanly County',169:'Stokes County',171:'Surry County',173:'Swain County',175:'Transylvania County',177:'Tyrrell County',179:'Union County',181:'Vance County',183:'Wake County',185:'Warren County',187:'Washington County',
189:'Watauga County',191:'Wayne County',193:'Wilkes County',195:'Wilson County',197:'Yadkin County',199:'Yancey County'},38:{'001':'Adams County','003':'Barnes County','005':'Benson County','007':'Billings County','009':'Bottineau County','011':'Bowman County','013':'Burke County','015':'Burleigh County','017':'Cass County','019':'Cavalier County','021':'Dickey County','023':'Divide County','025':'Dunn County','027':'Eddy County','029':'Emmons County','031':'Foster County','033':'Golden Valley County',
'035':'Grand Forks County','037':'Grant County','039':'Griggs County','041':'Hettinger County','043':'Kidder County','045':'LaMoure County','047':'Logan County','049':'McHenry County','051':'McIntosh County','053':'McKenzie County','055':'McLean County','057':'Mercer County','059':'Morton County','061':'Mountrail County','063':'Nelson County','065':'Oliver County','067':'Pembina County','069':'Pierce County','071':'Ramsey County','073':'Ransom County','075':'Renville County','077':'Richland County',
'079':'Rolette County','081':'Sargent County','083':'Sheridan County','085':'Sioux County','087':'Slope County','089':'Stark County','091':'Steele County','093':'Stutsman County','095':'Towner County','097':'Traill County','099':'Walsh County',101:'Ward County',103:'Wells County',105:'Williams County'},39:{'001':'Adams County','003':'Allen County','005':'Ashland County','007':'Ashtabula County','009':'Athens County','011':'Auglaize County','013':'Belmont County','015':'Brown County','017':'Butler County',
'019':'Carroll County','021':'Champaign County','023':'Clark County','025':'Clermont County','027':'Clinton County','029':'Columbiana County','031':'Coshocton County','033':'Crawford County','035':'Cuyahoga County','037':'Darke County','039':'Defiance County','041':'Delaware County','043':'Erie County','045':'Fairfield County','047':'Fayette County','049':'Franklin County','051':'Fulton County','053':'Gallia County','055':'Geauga County','057':'Greene County','059':'Guernsey County','061':'Hamilton County',
'063':'Hancock County','065':'Hardin County','067':'Harrison County','069':'Henry County','071':'Highland County','073':'Hocking County','075':'Holmes County','077':'Huron County','079':'Jackson County','081':'Jefferson County','083':'Knox County','085':'Lake County','087':'Lawrence County','089':'Licking County','091':'Logan County','093':'Lorain County','095':'Lucas County','097':'Madison County','099':'Mahoning County',101:'Marion County',103:'Medina County',105:'Meigs County',107:'Mercer County',
109:'Miami County',111:'Monroe County',113:'Montgomery County',115:'Morgan County',117:'Morrow County',119:'Muskingum County',121:'Noble County',123:'Ottawa County',125:'Paulding County',127:'Perry County',129:'Pickaway County',131:'Pike County',133:'Portage County',135:'Preble County',137:'Putnam County',139:'Richland County',141:'Ross County',143:'Sandusky County',145:'Scioto County',147:'Seneca County',149:'Shelby County',151:'Stark County',153:'Summit County',155:'Trumbull County',157:'Tuscarawas County',
159:'Union County',161:'Van Wert County',163:'Vinton County',165:'Warren County',167:'Washington County',169:'Wayne County',171:'Williams County',173:'Wood County',175:'Wyandot County'},40:{'001':'Adair County','003':'Alfalfa County','005':'Atoka County','007':'Beaver County','009':'Beckham County','011':'Blaine County','013':'Bryan County','015':'Caddo County','017':'Canadian County','019':'Carter County','021':'Cherokee County','023':'Choctaw County','025':'Cimarron County','027':'Cleveland County',
'029':'Coal County','031':'Comanche County','033':'Cotton County','035':'Craig County','037':'Creek County','039':'Custer County','041':'Delaware County','043':'Dewey County','045':'Ellis County','047':'Garfield County','049':'Garvin County','051':'Grady County','053':'Grant County','055':'Greer County','057':'Harmon County','059':'Harper County','061':'Haskell County','063':'Hughes County','065':'Jackson County','067':'Jefferson County','069':'Johnston County','071':'Kay County','073':'Kingfisher County',
'075':'Kiowa County','077':'Latimer County','079':'Le Flore County','081':'Lincoln County','083':'Logan County','085':'Love County','087':'McClain County','089':'McCurtain County','091':'McIntosh County','093':'Major County','095':'Marshall County','097':'Mayes County','099':'Murray County',101:'Muskogee County',103:'Noble County',105:'Nowata County',107:'Okfuskee County',109:'Oklahoma County',111:'Okmulgee County',113:'Osage County',115:'Ottawa County',117:'Pawnee County',119:'Payne County',121:'Pittsburg County',
123:'Pontotoc County',125:'Pottawatomie County',127:'Pushmataha County',129:'Roger Mills County',131:'Rogers County',133:'Seminole County',135:'Sequoyah County',137:'Stephens County',139:'Texas County',141:'Tillman County',143:'Tulsa County',145:'Wagoner County',147:'Washington County',149:'Washita County',151:'Woods County',153:'Woodward County'},41:{'001':'Baker County','003':'Benton County','005':'Clackamas County','007':'Clatsop County','009':'Columbia County','011':'Coos County','013':'Crook County',
'015':'Curry County','017':'Deschutes County','019':'Douglas County','021':'Gilliam County','023':'Grant County','025':'Harney County','027':'Hood River County','029':'Jackson County','031':'Jefferson County','033':'Josephine County','035':'Klamath County','037':'Lake County','039':'Lane County','041':'Lincoln County','043':'Linn County','045':'Malheur County','047':'Marion County','049':'Morrow County','051':'Multnomah County','053':'Polk County','055':'Sherman County','057':'Tillamook County','059':'Umatilla County',
'061':'Union County','063':'Wallowa County','065':'Wasco County','067':'Washington County','069':'Wheeler County','071':'Yamhill County'},42:{'001':'Adams County','003':'Allegheny County','005':'Armstrong County','007':'Beaver County','009':'Bedford County','011':'Berks County','013':'Blair County','015':'Bradford County','017':'Bucks County','019':'Butler County','021':'Cambria County','023':'Cameron County','025':'Carbon County','027':'Centre County','029':'Chester County','031':'Clarion County',
'033':'Clearfield County','035':'Clinton County','037':'Columbia County','039':'Crawford County','041':'Cumberland County','043':'Dauphin County','045':'Delaware County','047':'Elk County','049':'Erie County','051':'Fayette County','053':'Forest County','055':'Franklin County','057':'Fulton County','059':'Greene County','061':'Huntingdon County','063':'Indiana County','065':'Jefferson County','067':'Juniata County','069':'Lackawanna County','071':'Lancaster County','073':'Lawrence County','075':'Lebanon County',
'077':'Lehigh County','079':'Luzerne County','081':'Lycoming County','083':'McKean County','085':'Mercer County','087':'Mifflin County','089':'Monroe County','091':'Montgomery County','093':'Montour County','095':'Northampton County','097':'Northumberland County','099':'Perry County',101:'Philadelphia County',103:'Pike County',105:'Potter County',107:'Schuylkill County',109:'Snyder County',111:'Somerset County',113:'Sullivan County',115:'Susquehanna County',117:'Tioga County',119:'Union County',121:'Venango County',
123:'Warren County',125:'Washington County',127:'Wayne County',129:'Westmoreland County',131:'Wyoming County',133:'York County'},44:{'001':'Bristol County','003':'Kent County','005':'Newport County','007':'Providence County','009':'Washington County'},45:{'001':'Abbeville County','003':'Aiken County','005':'Allendale County','007':'Anderson County','009':'Bamberg County','011':'Barnwell County','013':'Beaufort County','015':'Berkeley County','017':'Calhoun County','019':'Charleston County','021':'Cherokee County',
'023':'Chester County','025':'Chesterfield County','027':'Clarendon County','029':'Colleton County','031':'Darlington County','033':'Dillon County','035':'Dorchester County','037':'Edgefield County','039':'Fairfield County','041':'Florence County','043':'Georgetown County','045':'Greenville County','047':'Greenwood County','049':'Hampton County','051':'Horry County','053':'Jasper County','055':'Kershaw County','057':'Lancaster County','059':'Laurens County','061':'Lee County','063':'Lexington County',
'065':'McCormick County','067':'Marion County','069':'Marlboro County','071':'Newberry County','073':'Oconee County','075':'Orangeburg County','077':'Pickens County','079':'Richland County','081':'Saluda County','083':'Spartanburg County','085':'Sumter County','087':'Union County','089':'Williamsburg County','091':'York County'},46:{'003':'Aurora County','005':'Beadle County','007':'Bennett County','009':'Bon Homme County','011':'Brookings County','013':'Brown County','015':'Brule County','017':'Buffalo County',
'019':'Butte County','021':'Campbell County','023':'Charles Mix County','025':'Clark County','027':'Clay County','029':'Codington County','031':'Corson County','033':'Custer County','035':'Davison County','037':'Day County','039':'Deuel County','041':'Dewey County','043':'Douglas County','045':'Edmunds County','047':'Fall River County','049':'Faulk County','051':'Grant County','053':'Gregory County','055':'Haakon County','057':'Hamlin County','059':'Hand County','061':'Hanson County','063':'Harding County',
'065':'Hughes County','067':'Hutchinson County','069':'Hyde County','071':'Jackson County','073':'Jerauld County','075':'Jones County','077':'Kingsbury County','079':'Lake County','081':'Lawrence County','083':'Lincoln County','085':'Lyman County','087':'McCook County','089':'McPherson County','091':'Marshall County','093':'Meade County','095':'Mellette County','097':'Miner County','099':'Minnehaha County',101:'Moody County',103:'Pennington County',105:'Perkins County',107:'Potter County',109:'Roberts County',
111:'Sanborn County',113:'Shannon County',115:'Spink County',117:'Stanley County',119:'Sully County',121:'Todd County',123:'Tripp County',125:'Turner County',127:'Union County',129:'Walworth County',135:'Yankton County',137:'Ziebach County'},47:{'001':'Anderson County','003':'Bedford County','005':'Benton County','007':'Bledsoe County','009':'Blount County','011':'Bradley County','013':'Campbell County','015':'Cannon County','017':'Carroll County','019':'Carter County','021':'Cheatham County','023':'Chester County',
'025':'Claiborne County','027':'Clay County','029':'Cocke County','031':'Coffee County','033':'Crockett County','035':'Cumberland County','037':'Davidson County','039':'Decatur County','041':'DeKalb County','043':'Dickson County','045':'Dyer County','047':'Fayette County','049':'Fentress County','051':'Franklin County','053':'Gibson County','055':'Giles County','057':'Grainger County','059':'Greene County','061':'Grundy County','063':'Hamblen County','065':'Hamilton County','067':'Hancock County',
'069':'Hardeman County','071':'Hardin County','073':'Hawkins County','075':'Haywood County','077':'Henderson County','079':'Henry County','081':'Hickman County','083':'Houston County','085':'Humphreys County','087':'Jackson County','089':'Jefferson County','091':'Johnson County','093':'Knox County','095':'Lake County','097':'Lauderdale County','099':'Lawrence County',101:'Lewis County',103:'Lincoln County',105:'Loudon County',107:'McMinn County',109:'McNairy County',111:'Macon County',113:'Madison County',
115:'Marion County',117:'Marshall County',119:'Maury County',121:'Meigs County',123:'Monroe County',125:'Montgomery County',127:'Moore County',129:'Morgan County',131:'Obion County',133:'Overton County',135:'Perry County',137:'Pickett County',139:'Polk County',141:'Putnam County',143:'Rhea County',145:'Roane County',147:'Robertson County',149:'Rutherford County',151:'Scott County',153:'Sequatchie County',155:'Sevier County',157:'Shelby County',159:'Smith County',161:'Stewart County',163:'Sullivan County',
165:'Sumner County',167:'Tipton County',169:'Trousdale County',171:'Unicoi County',173:'Union County',175:'Van Buren County',177:'Warren County',179:'Washington County',181:'Wayne County',183:'Weakley County',185:'White County',187:'Williamson County',189:'Wilson County'},48:{'001':'Anderson County','003':'Andrews County','005':'Angelina County','007':'Aransas County','009':'Archer County','011':'Armstrong County','013':'Atascosa County','015':'Austin County','017':'Bailey County','019':'Bandera County',
'021':'Bastrop County','023':'Baylor County','025':'Bee County','027':'Bell County','029':'Bexar County','031':'Blanco County','033':'Borden County','035':'Bosque County','037':'Bowie County','039':'Brazoria County','041':'Brazos County','043':'Brewster County','045':'Briscoe County','047':'Brooks County','049':'Brown County','051':'Burleson County','053':'Burnet County','055':'Caldwell County','057':'Calhoun County','059':'Callahan County','061':'Cameron County','063':'Camp County','065':'Carson County',
'067':'Cass County','069':'Castro County','071':'Chambers County','073':'Cherokee County','075':'Childress County','077':'Clay County','079':'Cochran County','081':'Coke County','083':'Coleman County','085':'Collin County','087':'Collingsworth County','089':'Colorado County','091':'Comal County','093':'Comanche County','095':'Concho County','097':'Cooke County','099':'Coryell County',101:'Cottle County',103:'Crane County',105:'Crockett County',107:'Crosby County',109:'Culberson County',111:'Dallam County',
113:'Dallas County',115:'Dawson County',117:'Deaf Smith County',119:'Delta County',121:'Denton County',123:'DeWitt County',125:'Dickens County',127:'Dimmit County',129:'Donley County',131:'Duval County',133:'Eastland County',135:'Ector County',137:'Edwards County',139:'Ellis County',141:'El Paso County',143:'Erath County',145:'Falls County',147:'Fannin County',149:'Fayette County',151:'Fisher County',153:'Floyd County',155:'Foard County',157:'Fort Bend County',159:'Franklin County',161:'Freestone County',
163:'Frio County',165:'Gaines County',167:'Galveston County',169:'Garza County',171:'Gillespie County',173:'Glasscock County',175:'Goliad County',177:'Gonzales County',179:'Gray County',181:'Grayson County',183:'Gregg County',185:'Grimes County',187:'Guadalupe County',189:'Hale County',191:'Hall County',193:'Hamilton County',195:'Hansford County',197:'Hardeman County',199:'Hardin County',201:'Harris County',203:'Harrison County',205:'Hartley County',207:'Haskell County',209:'Hays County',211:'Hemphill County',
213:'Henderson County',215:'Hidalgo County',217:'Hill County',219:'Hockley County',221:'Hood County',223:'Hopkins County',225:'Houston County',227:'Howard County',229:'Hudspeth County',231:'Hunt County',233:'Hutchinson County',235:'Irion County',237:'Jack County',239:'Jackson County',241:'Jasper County',243:'Jeff Davis County',245:'Jefferson County',247:'Jim Hogg County',249:'Jim Wells County',251:'Johnson County',253:'Jones County',255:'Karnes County',257:'Kaufman County',259:'Kendall County',261:'Kenedy County',
263:'Kent County',265:'Kerr County',267:'Kimble County',269:'King County',271:'Kinney County',273:'Kleberg County',275:'Knox County',277:'Lamar County',279:'Lamb County',281:'Lampasas County',283:'La Salle County',285:'Lavaca County',287:'Lee County',289:'Leon County',291:'Liberty County',293:'Limestone County',295:'Lipscomb County',297:'Live Oak County',299:'Llano County',301:'Loving County',303:'Lubbock County',305:'Lynn County',307:'McCulloch County',309:'McLennan County',311:'McMullen County',
313:'Madison County',315:'Marion County',317:'Martin County',319:'Mason County',321:'Matagorda County',323:'Maverick County',325:'Medina County',327:'Menard County',329:'Midland County',331:'Milam County',333:'Mills County',335:'Mitchell County',337:'Montague County',339:'Montgomery County',341:'Moore County',343:'Morris County',345:'Motley County',347:'Nacogdoches County',349:'Navarro County',351:'Newton County',353:'Nolan County',355:'Nueces County',357:'Ochiltree County',359:'Oldham County',361:'Orange County',
363:'Palo Pinto County',365:'Panola County',367:'Parker County',369:'Parmer County',371:'Pecos County',373:'Polk County',375:'Potter County',377:'Presidio County',379:'Rains County',381:'Randall County',383:'Reagan County',385:'Real County',387:'Red River County',389:'Reeves County',391:'Refugio County',393:'Roberts County',395:'Robertson County',397:'Rockwall County',399:'Runnels County',401:'Rusk County',403:'Sabine County',405:'San Augustine County',407:'San Jacinto County',409:'San Patricio County',
411:'San Saba County',413:'Schleicher County',415:'Scurry County',417:'Shackelford County',419:'Shelby County',421:'Sherman County',423:'Smith County',425:'Somervell County',427:'Starr County',429:'Stephens County',431:'Sterling County',433:'Stonewall County',435:'Sutton County',437:'Swisher County',439:'Tarrant County',441:'Taylor County',443:'Terrell County',445:'Terry County',447:'Throckmorton County',449:'Titus County',451:'Tom Green County',453:'Travis County',455:'Trinity County',457:'Tyler County',
459:'Upshur County',461:'Upton County',463:'Uvalde County',465:'Val Verde County',467:'Van Zandt County',469:'Victoria County',471:'Walker County',473:'Waller County',475:'Ward County',477:'Washington County',479:'Webb County',481:'Wharton County',483:'Wheeler County',485:'Wichita County',487:'Wilbarger County',489:'Willacy County',491:'Williamson County',493:'Wilson County',495:'Winkler County',497:'Wise County',499:'Wood County',501:'Yoakum County',503:'Young County',505:'Zapata County',507:'Zavala County'},
49:{'001':'Beaver County','003':'Box Elder County','005':'Cache County','007':'Carbon County','009':'Daggett County','011':'Davis County','013':'Duchesne County','015':'Emery County','017':'Garfield County','019':'Grand County','021':'Iron County','023':'Juab County','025':'Kane County','027':'Millard County','029':'Morgan County','031':'Piute County','033':'Rich County','035':'Salt Lake County','037':'San Juan County','039':'Sanpete County','041':'Sevier County','043':'Summit County','045':'Tooele County',
'047':'Uintah County','049':'Utah County','051':'Wasatch County','053':'Washington County','055':'Wayne County','057':'Weber County'},50:{'001':'Addison County','003':'Bennington County','005':'Caledonia County','007':'Chittenden County','009':'Essex County','011':'Franklin County','013':'Grand Isle County','015':'Lamoille County','017':'Orange County','019':'Orleans County','021':'Rutland County','023':'Washington County','025':'Windham County','027':'Windsor County'},51:{'001':'Accomack County',
'003':'Albemarle County','005':'Alleghany County','007':'Amelia County','009':'Amherst County','011':'Appomattox County','013':'Arlington County','015':'Augusta County','017':'Bath County','019':'Bedford County','021':'Bland County','023':'Botetourt County','025':'Brunswick County','027':'Buchanan County','029':'Buckingham County','031':'Campbell County','033':'Caroline County','035':'Carroll County','036':'Charles City County','037':'Charlotte County','041':'Chesterfield County','043':'Clarke County',
'045':'Craig County','047':'Culpeper County','049':'Cumberland County','051':'Dickenson County','053':'Dinwiddie County','057':'Essex County','059':'Fairfax County','061':'Fauquier County','063':'Floyd County','065':'Fluvanna County','067':'Franklin County','069':'Frederick County','071':'Giles County','073':'Gloucester County','075':'Goochland County','077':'Grayson County','079':'Greene County','081':'Greensville County','083':'Halifax County','085':'Hanover County','087':'Henrico County','089':'Henry County',
'091':'Highland County','093':'Isle of Wight County','095':'James City County','097':'King and Queen County','099':'King George County',101:'King William County',103:'Lancaster County',105:'Lee County',107:'Loudoun County',109:'Louisa County',111:'Lunenburg County',113:'Madison County',115:'Mathews County',117:'Mecklenburg County',119:'Middlesex County',121:'Montgomery County',125:'Nelson County',127:'New Kent County',131:'Northampton County',133:'Northumberland County',135:'Nottoway County',137:'Orange County',
139:'Page County',141:'Patrick County',143:'Pittsylvania County',145:'Powhatan County',147:'Prince Edward County',149:'Prince George County',153:'Prince William County',155:'Pulaski County',157:'Rappahannock County',159:'Richmond County',161:'Roanoke County',163:'Rockbridge County',165:'Rockingham County',167:'Russell County',169:'Scott County',171:'Shenandoah County',173:'Smyth County',175:'Southampton County',177:'Spotsylvania County',179:'Stafford County',181:'Surry County',183:'Sussex County',
185:'Tazewell County',187:'Warren County',191:'Washington County',193:'Westmoreland County',195:'Wise County',197:'Wythe County',199:'York County',510:'Alexandria city',515:'Bedford city',520:'Bristol city',530:'Buena Vista city',540:'Charlottesville city',550:'Chesapeake city',570:'Colonial Heights city',580:'Covington city',590:'Danville city',595:'Emporia city',600:'Fairfax city',610:'Falls Church city',620:'Franklin city',630:'Fredericksburg city',640:'Galax city',650:'Hampton city',660:'Harrisonburg city',
670:'Hopewell city',678:'Lexington city',680:'Lynchburg city',683:'Manassas city',685:'Manassas Park city',690:'Martinsville city',700:'Newport News city',710:'Norfolk city',720:'Norton city',730:'Petersburg city',735:'Poquoson city',740:'Portsmouth city',750:'Radford city',760:'Richmond city',770:'Roanoke city',775:'Salem city',790:'Staunton city',800:'Suffolk city',810:'Virginia Beach city',820:'Waynesboro city',830:'Williamsburg city',840:'Winchester city'},53:{'001':'Adams County','003':'Asotin County',
'005':'Benton County','007':'Chelan County','009':'Clallam County','011':'Clark County','013':'Columbia County','015':'Cowlitz County','017':'Douglas County','019':'Ferry County','021':'Franklin County','023':'Garfield County','025':'Grant County','027':'Grays Harbor County','029':'Island County','031':'Jefferson County','033':'King County','035':'Kitsap County','037':'Kittitas County','039':'Klickitat County','041':'Lewis County','043':'Lincoln County','045':'Mason County','047':'Okanogan County',
'049':'Pacific County','051':'Pend Oreille County','053':'Pierce County','055':'San Juan County','057':'Skagit County','059':'Skamania County','061':'Snohomish County','063':'Spokane County','065':'Stevens County','067':'Thurston County','069':'Wahkiakum County','071':'Walla Walla County','073':'Whatcom County','075':'Whitman County','077':'Yakima County'},54:{'001':'Barbour County','003':'Berkeley County','005':'Boone County','007':'Braxton County','009':'Brooke County','011':'Cabell County','013':'Calhoun County',
'015':'Clay County','017':'Doddridge County','019':'Fayette County','021':'Gilmer County','023':'Grant County','025':'Greenbrier County','027':'Hampshire County','029':'Hancock County','031':'Hardy County','033':'Harrison County','035':'Jackson County','037':'Jefferson County','039':'Kanawha County','041':'Lewis County','043':'Lincoln County','045':'Logan County','047':'McDowell County','049':'Marion County','051':'Marshall County','053':'Mason County','055':'Mercer County','057':'Mineral County',
'059':'Mingo County','061':'Monongalia County','063':'Monroe County','065':'Morgan County','067':'Nicholas County','069':'Ohio County','071':'Pendleton County','073':'Pleasants County','075':'Pocahontas County','077':'Preston County','079':'Putnam County','081':'Raleigh County','083':'Randolph County','085':'Ritchie County','087':'Roane County','089':'Summers County','091':'Taylor County','093':'Tucker County','095':'Tyler County','097':'Upshur County','099':'Wayne County',101:'Webster County',103:'Wetzel County',
105:'Wirt County',107:'Wood County',109:'Wyoming County'},55:{'001':'Adams County','003':'Ashland County','005':'Barron County','007':'Bayfield County','009':'Brown County','011':'Buffalo County','013':'Burnett County','015':'Calumet County','017':'Chippewa County','019':'Clark County','021':'Columbia County','023':'Crawford County','025':'Dane County','027':'Dodge County','029':'Door County','031':'Douglas County','033':'Dunn County','035':'Eau Claire County','037':'Florence County','039':'Fond du Lac County',
'041':'Forest County','043':'Grant County','045':'Green County','047':'Green Lake County','049':'Iowa County','051':'Iron County','053':'Jackson County','055':'Jefferson County','057':'Juneau County','059':'Kenosha County','061':'Kewaunee County','063':'La Crosse County','065':'Lafayette County','067':'Langlade County','069':'Lincoln County','071':'Manitowoc County','073':'Marathon County','075':'Marinette County','077':'Marquette County','078':'Menominee County','079':'Milwaukee County','081':'Monroe County',
'083':'Oconto County','085':'Oneida County','087':'Outagamie County','089':'Ozaukee County','091':'Pepin County','093':'Pierce County','095':'Polk County','097':'Portage County','099':'Price County',101:'Racine County',103:'Richland County',105:'Rock County',107:'Rusk County',109:'St. Croix County',111:'Sauk County',113:'Sawyer County',115:'Shawano County',117:'Sheboygan County',119:'Taylor County',121:'Trempealeau County',123:'Vernon County',125:'Vilas County',127:'Walworth County',129:'Washburn County',
131:'Washington County',133:'Waukesha County',135:'Waupaca County',137:'Waushara County',139:'Winnebago County',141:'Wood County'},56:{'001':'Albany County','003':'Big Horn County','005':'Campbell County','007':'Carbon County','009':'Converse County','011':'Crook County','013':'Fremont County','015':'Goshen County','017':'Hot Springs County','019':'Johnson County','021':'Laramie County','023':'Lincoln County','025':'Natrona County','027':'Niobrara County','029':'Park County','031':'Platte County',
'033':'Sheridan County','035':'Sublette County','037':'Sweetwater County','039':'Teton County','041':'Uinta County','043':'Washakie County','045':'Weston County'},60:{'010':'Eastern District','020':"Manu'a District",'030':'Rose Island','040':'Swains Island','050':'Western District'},66:{'010':'Guam'},69:{'085':'Northern Islands Municipality',100:'Rota Municipality',110:'Saipan Municipality',120:'Tinian Municipality'},72:{'001':'Adjuntas Municipio','003':'Aguada Municipio','005':'Aguadilla Municipio',
'007':'Aguas Buenas Municipio','009':'Aibonito Municipio','011':'Anasco Municipio','013':'Arecibo Municipio','015':'Arroyo Municipio','017':'Barceloneta Municipio','019':'Barranquitas Municipio','021':'Bayamon Municipio','023':'Cabo Rojo Municipio','025':'Caguas Municipio','027':'Camuy Municipio','029':'Canovanas Municipio','031':'Carolina Municipio','033':'Catano Municipio','035':'Cayey Municipio','037':'Ceiba Municipio','039':'Ciales Municipio','041':'Cidra Municipio','043':'Coamo Municipio','045':'Comerio Municipio',
'047':'Corozal Municipio','049':'Culebra Municipio','051':'Dorado Municipio','053':'Fajardo Municipio','054':'Florida Municipio','055':'Guanica Municipio','057':'Guayama Municipio','059':'Guayanilla Municipio','061':'Guaynabo Municipio','063':'Gurabo Municipio','065':'Hatillo Municipio','067':'Hormigueros Municipio','069':'Humacao Municipio','071':'Isabela Municipio','073':'Jayuya Municipio','075':'Juana Diaz Municipio','077':'Juncos Municipio','079':'Lajas Municipio','081':'Lares Municipio','083':'Las Marias Municipio',
'085':'Las Piedras Municipio','087':'Loiza Municipio','089':'Luquillo Municipio','091':'Manati Municipio','093':'Maricao Municipio','095':'Maunabo Municipio','097':'Mayaguez Municipio','099':'Moca Municipio',101:'Morovis Municipio',103:'Naguabo Municipio',105:'Naranjito Municipio',107:'Orocovis Municipio',109:'Patillas Municipio',111:'Penuelas Municipio',113:'Ponce Municipio',115:'Quebradillas Municipio',117:'Rincon Municipio',119:'Rio Grande Municipio',121:'Sabana Grande Municipio',123:'Salinas Municipio',
125:'San German Municipio',127:'San Juan Municipio',129:'San Lorenzo Municipio',131:'San Sebastian Municipio',133:'Santa Isabel Municipio',135:'Toa Alta Municipio',137:'Toa Baja Municipio',139:'Trujillo Alto Municipio',141:'Utuado Municipio',143:'Vega Alta Municipio',145:'Vega Baja Municipio',147:'Vieques Municipio',149:'Villalba Municipio',151:'Yabucoa Municipio',153:'Yauco Municipio'},74:{300:'Midway Islands'},78:{'010':'St. Croix Island','020':'St. John Island','030':'St. Thomas Island'}};
weavejs.data.source.CensusApi.prototype.FLEXJS_CLASS_INFO={names:[{name:'CensusApi',qName:'weavejs.data.source.CensusApi'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.data.source.CensusApi',weavejs.data.source.CensusApi);
weavejs.data.source.CensusApi.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getDatasets':{type:'WeavePromise',declaredBy:'weavejs.data.source.CensusApi'},'getVariables':{type:'WeavePromise',declaredBy:'weavejs.data.source.CensusApi'},'getGeographies':{type:'WeavePromise',declaredBy:'weavejs.data.source.CensusApi'},'getColumn':{type:'WeavePromise',declaredBy:'weavejs.data.source.CensusApi'}}}}};goog.provide('weavejs.data.source.CensusDataSource');goog.require('weavejs.data.DataSourceUtils');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.data.source.CensusApi');goog.require('weavejs.api.data.IDataSource_Service');
weavejs.data.source.CensusDataSource=function(){weavejs.data.source.CensusDataSource.base(this,'constructor');this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString);this.apiKey=Weave.linkableChild(this,new weavejs.core.LinkableString(''));this.dataSet=Weave.linkableChild(this,new weavejs.core.LinkableString('http://api.census.gov/data/id/ACSSF2014'));this.geographicScope=Weave.linkableChild(this,new weavejs.core.LinkableString('040'));this.geographicFilters=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Object));
this.api=Weave.linkableChild(this,weavejs.data.source.CensusApi)};goog.inherits(weavejs.data.source.CensusDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.CensusDataSource.baseUrl='http://api.census.gov/';weavejs.data.source.CensusDataSource.CONCEPT_NAME='__CensusDataSource__concept';weavejs.data.source.CensusDataSource.VARIABLE_NAME='__CensusDataSource__variable';
weavejs.data.source.CensusDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;weavejs.data.source.CensusDataSource.base(this,'initialize',forceRefresh)};weavejs.data.source.CensusDataSource.prototype.keyType;weavejs.data.source.CensusDataSource.prototype.apiKey;weavejs.data.source.CensusDataSource.prototype.dataSet;weavejs.data.source.CensusDataSource.prototype.geographicScope;weavejs.data.source.CensusDataSource.prototype.geographicFilters;
weavejs.data.source.CensusDataSource.prototype.api;weavejs.data.source.CensusDataSource.prototype.getAPI=function(){return this.api};
weavejs.data.source.CensusDataSource.prototype.createDataSetNode=function(){var self=this;var __localFn0__=function(){return self.dataSet.value||name};var __localFn1__=function(node){var __localFn0__=function(result){var __localFn0__=function(obj){return obj.data[weavejs.data.source.CensusDataSource.VARIABLE_NAME]};var __localFn1__=function(obj){return obj.data[weavejs.data.source.CensusDataSource.CONCEPT_NAME]};var concept_nodes={};var concept_node;for(var variableId in result){var variableInfo=
result[variableId];concept_node=concept_nodes[variableInfo.concept];if(!concept_node){var concept_label=variableInfo.concept;if(!concept_label)concept_label=Weave.lang('No Concept');concept_node={dataSource:_ds,data:weavejs.util.JS.copyObject(data),'label':concept_label,idFields:[weavejs.data.source.CensusDataSource.CONCEPT_NAME],hasChildBranches:false,children:[]};concept_node.data[weavejs.data.source.CensusDataSource.CONCEPT_NAME]=variableInfo.concept;children.push(concept_node);concept_nodes[variableInfo.concept]=
concept_node}var variable_descriptor={dataSource:_ds,data:weavejs.util.JS.copyObject(concept_node.data),'label':variableInfo.title,idFields:[weavejs.data.source.CensusDataSource.CONCEPT_NAME,weavejs.data.source.CensusDataSource.VARIABLE_NAME],children:null};variable_descriptor.data[weavejs.data.source.CensusDataSource.VARIABLE_NAME]=variableId;concept_node.children.push(variable_descriptor)}var foreachiter0_target=concept_nodes;for(var foreachiter0 in foreachiter0_target){concept_node=foreachiter0_target[foreachiter0];
weavejs.util.StandardLib.sortOn(concept_node.children,__localFn0__)}weavejs.util.StandardLib.sortOn(children,__localFn1__)};var children=[];self.api.getVariables(self.dataSet.value).then(__localFn0__);return children};var __localFn2__=function(datasetsInfo){var foreachiter1_target=datasetsInfo.dataSet;for(var foreachiter1 in foreachiter1_target){var dataset=foreachiter1_target[foreachiter1];if(dataset.identifier==self.dataSet.value){ctn.label=dataset.title;return}}ctn.label=self.dataSet.value};var _ds=
this;var name=this.getLabel();var data={id:0,name:name};var ctn=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,data:data,'label':__localFn0__,hasChildBranches:true,children:__localFn1__});this.api.getDatasets().then(__localFn2__);return ctn};weavejs.data.source.CensusDataSource.prototype.getHierarchyRoot=function(){if(!this._rootNode)this._rootNode=this.createDataSetNode();return this._rootNode};
weavejs.data.source.CensusDataSource.prototype.generateHierarchyNode=function(metadata){if(!metadata)return null;var idFields=[weavejs.data.source.CensusDataSource.CONCEPT_NAME,weavejs.data.source.CensusDataSource.VARIABLE_NAME];var ctn=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,idFields:idFields,data:metadata});return ctn};
weavejs.data.source.CensusDataSource.prototype.requestColumnFromSource=function(proxyColumn){var self=this;var __localFn0__=function(columnInfo){if(!columnInfo)return;if(self.keyType.value)columnInfo.metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=self.keyType.value;proxyColumn.setMetadata(columnInfo.metadata);weavejs.data.DataSourceUtils.initColumn(proxyColumn,columnInfo.keys,columnInfo.data)};var metadata=weavejs.api.data.ColumnMetadata.getAllMetadata(proxyColumn);this.api.getColumn(metadata).then(__localFn0__)};
Object.defineProperties(weavejs.data.source.CensusDataSource.prototype,{isLocal:{get:function(){return false}}});weavejs.data.source.CensusDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'CensusDataSource',qName:'weavejs.data.source.CensusDataSource'}],interfaces:[weavejs.api.data.IDataSource_Service]};goog.exportSymbol('weavejs.data.source.CensusDataSource',weavejs.data.source.CensusDataSource);
weavejs.data.source.CensusDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'keyType':{type:'LinkableString'},'apiKey':{type:'LinkableString'},'dataSet':{type:'LinkableString'},'geographicScope':{type:'LinkableString'},'geographicFilters':{type:'LinkableVariable'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.CensusDataSource'}}},methods:function(){return{'CensusDataSource':{type:'',declaredBy:'weavejs.data.source.CensusDataSource'},
'getAPI':{type:'CensusApi',declaredBy:'weavejs.data.source.CensusDataSource'},'createDataSetNode':{type:'ColumnTreeNode',declaredBy:'weavejs.data.source.CensusDataSource'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.CensusDataSource'}}}}};goog.provide('org.vanrijkom.dbf.DbfError');org.vanrijkom.dbf.DbfError=function(msg,id){id=typeof id!=='undefined'?id:0;org.vanrijkom.dbf.DbfError.base(this,'constructor',msg);this['errorID']=id};goog.inherits(org.vanrijkom.dbf.DbfError,Error);org.vanrijkom.dbf.DbfError.ERROR_UNDEFINED=0;org.vanrijkom.dbf.DbfError.ERROR_OUTOFBOUNDS=1;org.vanrijkom.dbf.DbfError.prototype.FLEXJS_CLASS_INFO={names:[{name:'DbfError',qName:'org.vanrijkom.dbf.DbfError'}]};goog.exportSymbol('org.vanrijkom.dbf.DbfError',org.vanrijkom.dbf.DbfError);
org.vanrijkom.dbf.DbfError.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'DbfError':{type:'',declaredBy:'org.vanrijkom.dbf.DbfError'}}}}};goog.provide('org.vanrijkom.dbf.DbfRecord');org.vanrijkom.dbf.DbfRecord=function(src,header){this.offset=src.position;this.map_field_value=new weavejs.util.JS.Map;var foreachiter0_target=header.fields;for(var foreachiter0 in foreachiter0_target){var field=foreachiter0_target[foreachiter0];this.map_field_value.set(field.name,src.readUTFBytes(field.length))}};org.vanrijkom.dbf.DbfRecord.prototype.map_field_value;org.vanrijkom.dbf.DbfRecord.prototype.offset;
org.vanrijkom.dbf.DbfRecord.prototype.FLEXJS_CLASS_INFO={names:[{name:'DbfRecord',qName:'org.vanrijkom.dbf.DbfRecord'}]};goog.exportSymbol('org.vanrijkom.dbf.DbfRecord',org.vanrijkom.dbf.DbfRecord);org.vanrijkom.dbf.DbfRecord.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'map_field_value':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'DbfRecord':{type:'',declaredBy:'org.vanrijkom.dbf.DbfRecord'}}}}};goog.provide('org.vanrijkom.dbf.DbfTools');goog.require('org.vanrijkom.dbf.DbfError');goog.require('org.vanrijkom.dbf.DbfRecord');org.vanrijkom.dbf.DbfTools=function(){};org.vanrijkom.dbf.DbfTools.readZeroTermANSIString=function(src){var r='';var b;while(true){b=src.readUnsignedByte();if(!b)break;r+=String.fromCharCode(b)}return r};org.vanrijkom.dbf.DbfTools.readANSIString=function(src,length){var r='';while(length--)r+=String.fromCharCode(src.readUnsignedByte());return r};
org.vanrijkom.dbf.DbfTools.getRecord=function(src,header,index){if(index>header.recordCount)throw new org.vanrijkom.dbf.DbfError('',org.vanrijkom.dbf.DbfError.ERROR_OUTOFBOUNDS);src.position=header.recordsOffset+index*header.recordSize;return new org.vanrijkom.dbf.DbfRecord(src,header)};org.vanrijkom.dbf.DbfTools.prototype.FLEXJS_CLASS_INFO={names:[{name:'DbfTools',qName:'org.vanrijkom.dbf.DbfTools'}]};goog.exportSymbol('org.vanrijkom.dbf.DbfTools',org.vanrijkom.dbf.DbfTools);
org.vanrijkom.dbf.DbfTools.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('org.vanrijkom.dbf.DbfField');goog.require('org.vanrijkom.dbf.DbfTools');org.vanrijkom.dbf.DbfField=function(src){this.name=org.vanrijkom.dbf.DbfTools.readZeroTermANSIString(src);src.position+=10-this.name.length;this.type=src.readUnsignedByte();this.address=src.readUnsignedInt();this.length=src.readUnsignedByte();this.decimals=src.readUnsignedByte();src.position+=2;this.id=src.readUnsignedByte();src.position+=2;this.setFlag=src.readUnsignedByte();src.position+=7;this.indexFlag=src.readUnsignedByte()};
org.vanrijkom.dbf.DbfField.prototype.name;org.vanrijkom.dbf.DbfField.prototype.type;org.vanrijkom.dbf.DbfField.prototype.address;org.vanrijkom.dbf.DbfField.prototype.length;org.vanrijkom.dbf.DbfField.prototype.decimals;org.vanrijkom.dbf.DbfField.prototype.id;org.vanrijkom.dbf.DbfField.prototype.setFlag;org.vanrijkom.dbf.DbfField.prototype.indexFlag;org.vanrijkom.dbf.DbfField.prototype.FLEXJS_CLASS_INFO={names:[{name:'DbfField',qName:'org.vanrijkom.dbf.DbfField'}]};
goog.exportSymbol('org.vanrijkom.dbf.DbfField',org.vanrijkom.dbf.DbfField);org.vanrijkom.dbf.DbfField.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'name':{type:'String'},'type':{type:'uint'},'address':{type:'uint'},'length':{type:'uint'},'decimals':{type:'uint'},'id':{type:'uint'},'setFlag':{type:'uint'},'indexFlag':{type:'uint'}}},accessors:function(){return{}},methods:function(){return{'DbfField':{type:'',declaredBy:'org.vanrijkom.dbf.DbfField'}}}}};goog.provide('org.vanrijkom.dbf.DbfHeader');
org.vanrijkom.dbf.DbfHeader=function(src){src.littleEndian=true;this.version=src.readByte();this.updateYear=1900+src.readUnsignedByte();this.updateMonth=src.readUnsignedByte();this.updateDay=src.readUnsignedByte();this.recordCount=src.readUnsignedInt();this.headerSize=src.readUnsignedShort();this.recordSize=src.readUnsignedShort();src.position+=2;this.incompleteTransaction=src.readUnsignedByte();this.encrypted=src.readUnsignedByte();src.position+=12;this.mdx=src.readUnsignedByte();this.language=src.readUnsignedByte();
src.position+=2;this.fields=[];while(src.readByte()!=13){src.position--;this.fields.push(new org.vanrijkom.dbf.DbfField(src))}this._recordsOffset=this.headerSize+1};org.vanrijkom.dbf.DbfHeader.prototype.fileLength;org.vanrijkom.dbf.DbfHeader.prototype.version;org.vanrijkom.dbf.DbfHeader.prototype.updateYear;org.vanrijkom.dbf.DbfHeader.prototype.updateMonth;org.vanrijkom.dbf.DbfHeader.prototype.updateDay;org.vanrijkom.dbf.DbfHeader.prototype.recordCount;org.vanrijkom.dbf.DbfHeader.prototype.headerSize;
org.vanrijkom.dbf.DbfHeader.prototype.recordSize;org.vanrijkom.dbf.DbfHeader.prototype.incompleteTransaction;org.vanrijkom.dbf.DbfHeader.prototype.encrypted;org.vanrijkom.dbf.DbfHeader.prototype.mdx;org.vanrijkom.dbf.DbfHeader.prototype.language;org.vanrijkom.dbf.DbfHeader.prototype.fields;org.vanrijkom.dbf.DbfHeader.prototype._recordsOffset;Object.defineProperties(org.vanrijkom.dbf.DbfHeader.prototype,{recordsOffset:{get:function(){return this._recordsOffset}}});
org.vanrijkom.dbf.DbfHeader.prototype.FLEXJS_CLASS_INFO={names:[{name:'DbfHeader',qName:'org.vanrijkom.dbf.DbfHeader'}]};goog.exportSymbol('org.vanrijkom.dbf.DbfHeader',org.vanrijkom.dbf.DbfHeader);
org.vanrijkom.dbf.DbfHeader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'fileLength':{type:'int'},'version':{type:'int'},'updateYear':{type:'int'},'updateMonth':{type:'int'},'updateDay':{type:'int'},'recordCount':{type:'uint'},'headerSize':{type:'uint'},'recordSize':{type:'uint'},'incompleteTransaction':{type:'uint'},'encrypted':{type:'uint'},'mdx':{type:'uint'},'language':{type:'uint'},'fields':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'DbfHeader':{type:'',
declaredBy:'org.vanrijkom.dbf.DbfHeader'}}}}};goog.provide('org.vanrijkom.shp.ShpError');org.vanrijkom.shp.ShpError=function(msg,id){id=typeof id!=='undefined'?id:0;org.vanrijkom.shp.ShpError.base(this,'constructor',msg);this['errorID']=id};goog.inherits(org.vanrijkom.shp.ShpError,Error);org.vanrijkom.shp.ShpError.ERROR_UNDEFINED=0;org.vanrijkom.shp.ShpError.ERROR_NODATA=1;org.vanrijkom.shp.ShpError.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpError',qName:'org.vanrijkom.shp.ShpError'}]};goog.exportSymbol('org.vanrijkom.shp.ShpError',org.vanrijkom.shp.ShpError);
org.vanrijkom.shp.ShpError.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'ShpError':{type:'',declaredBy:'org.vanrijkom.shp.ShpError'}}}}};goog.provide('org.vanrijkom.shp.ShpHeader');goog.require('org.vanrijkom.shp.ShpError');
org.vanrijkom.shp.ShpHeader=function(src){src.littleEndian=false;if(src.length-src.position<100)throw new org.vanrijkom.shp.ShpError('Not a valid shape file header (too small)');if(src.readInt()!=9994)throw new org.vanrijkom.shp.ShpError('Not a valid signature. Expected 9994');src.position+=5*4;this.fileLength=src.readInt();src.littleEndian=true;this.version=src.readInt();this.shapeType=src.readInt();this.boundsXY=new weavejs.geom.Rectangle(src.readDouble(),src.readDouble(),src.readDouble(),src.readDouble());
this.boundsZ=new weavejs.geom.Point(src.readDouble(),src.readDouble());this.boundsM=new weavejs.geom.Point(src.readDouble(),src.readDouble())};org.vanrijkom.shp.ShpHeader.prototype.fileLength;org.vanrijkom.shp.ShpHeader.prototype.version;org.vanrijkom.shp.ShpHeader.prototype.shapeType;org.vanrijkom.shp.ShpHeader.prototype.boundsXY;org.vanrijkom.shp.ShpHeader.prototype.boundsZ;org.vanrijkom.shp.ShpHeader.prototype.boundsM;
org.vanrijkom.shp.ShpHeader.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpHeader',qName:'org.vanrijkom.shp.ShpHeader'}]};goog.exportSymbol('org.vanrijkom.shp.ShpHeader',org.vanrijkom.shp.ShpHeader);
org.vanrijkom.shp.ShpHeader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'fileLength':{type:'int'},'version':{type:'int'},'shapeType':{type:'int'},'boundsXY':{type:'Rectangle'},'boundsZ':{type:'Point'},'boundsM':{type:'Point'}}},accessors:function(){return{}},methods:function(){return{'ShpHeader':{type:'',declaredBy:'org.vanrijkom.shp.ShpHeader'}}}}};goog.provide('org.vanrijkom.shp.ShpObject');org.vanrijkom.shp.ShpObject=function(){};org.vanrijkom.shp.ShpObject.prototype.type;org.vanrijkom.shp.ShpObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpObject',qName:'org.vanrijkom.shp.ShpObject'}]};goog.exportSymbol('org.vanrijkom.shp.ShpObject',org.vanrijkom.shp.ShpObject);org.vanrijkom.shp.ShpObject.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'type':{type:'int'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('org.vanrijkom.shp.ShpType');org.vanrijkom.shp.ShpType=function(){};org.vanrijkom.shp.ShpType.SHAPE_UNKNOWN=-1;org.vanrijkom.shp.ShpType.SHAPE_NULL=0;org.vanrijkom.shp.ShpType.SHAPE_POINT=1;org.vanrijkom.shp.ShpType.SHAPE_POLYLINE=3;org.vanrijkom.shp.ShpType.SHAPE_POLYGON=5;org.vanrijkom.shp.ShpType.SHAPE_MULTIPOINT=8;org.vanrijkom.shp.ShpType.SHAPE_POINTZ=11;org.vanrijkom.shp.ShpType.SHAPE_POLYLINEZ=13;org.vanrijkom.shp.ShpType.SHAPE_POLYGONZ=15;
org.vanrijkom.shp.ShpType.SHAPE_MULTIPOINTZ=18;org.vanrijkom.shp.ShpType.SHAPE_POINTM=21;org.vanrijkom.shp.ShpType.SHAPE_POLYLINEM=23;org.vanrijkom.shp.ShpType.SHAPE_POLYGONM=25;org.vanrijkom.shp.ShpType.SHAPE_MULTIPOINTM=28;org.vanrijkom.shp.ShpType.SHAPE_MULTIPATCH=31;org.vanrijkom.shp.ShpType.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpType',qName:'org.vanrijkom.shp.ShpType'}]};goog.exportSymbol('org.vanrijkom.shp.ShpType',org.vanrijkom.shp.ShpType);
org.vanrijkom.shp.ShpType.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('org.vanrijkom.shp.ShpPoint');goog.require('org.vanrijkom.shp.ShpObject');goog.require('org.vanrijkom.shp.ShpType');
org.vanrijkom.shp.ShpPoint=function(src,size){org.vanrijkom.shp.ShpPoint.base(this,'constructor');src=typeof src!=='undefined'?src:null;size=typeof size!=='undefined'?size:0;this.type=org.vanrijkom.shp.ShpType.SHAPE_POINTZ;if(src){if(src.length-src.position<size)throw new org.vanrijkom.shp.ShpError('Not a Point record (to small)');this.x=size>0?src.readDouble():NaN;this.y=size>8?src.readDouble():NaN}};goog.inherits(org.vanrijkom.shp.ShpPoint,org.vanrijkom.shp.ShpObject);org.vanrijkom.shp.ShpPoint.prototype.x;
org.vanrijkom.shp.ShpPoint.prototype.y;org.vanrijkom.shp.ShpPoint.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpPoint',qName:'org.vanrijkom.shp.ShpPoint'}]};goog.exportSymbol('org.vanrijkom.shp.ShpPoint',org.vanrijkom.shp.ShpPoint);org.vanrijkom.shp.ShpPoint.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'x':{type:'Number'},'y':{type:'Number'}}},accessors:function(){return{}},methods:function(){return{'ShpPoint':{type:'',declaredBy:'org.vanrijkom.shp.ShpPoint'}}}}};goog.provide('org.vanrijkom.shp.ShpPolygon');goog.require('org.vanrijkom.shp.ShpObject');
org.vanrijkom.shp.ShpPolygon=function(src,size){org.vanrijkom.shp.ShpPolygon.base(this,'constructor');src=typeof src!=='undefined'?src:null;size=typeof size!=='undefined'?size:0;this.type=org.vanrijkom.shp.ShpType.SHAPE_POLYGON;this.rings=[];if(src){if(src.length-src.position<size)throw new org.vanrijkom.shp.ShpError('Not a Polygon record (to small)');src.littleEndian=true;this.box=new weavejs.geom.Rectangle(src.readDouble(),src.readDouble(),src.readDouble(),src.readDouble());var rc=src.readInt();
var pc=src.readInt();var ringOffsets=[];while(rc--)ringOffsets.push(src.readInt());var points=[];while(pc--)points.push(new org.vanrijkom.shp.ShpPoint(src,16));var removed=0;var split;ringOffsets.shift();while(ringOffsets.length){split=ringOffsets.shift();this.rings.push(points.splice(0,split-removed));removed=split}this.rings.push(points)}};goog.inherits(org.vanrijkom.shp.ShpPolygon,org.vanrijkom.shp.ShpObject);org.vanrijkom.shp.ShpPolygon.prototype.box;org.vanrijkom.shp.ShpPolygon.prototype.rings;
org.vanrijkom.shp.ShpPolygon.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpPolygon',qName:'org.vanrijkom.shp.ShpPolygon'}]};goog.exportSymbol('org.vanrijkom.shp.ShpPolygon',org.vanrijkom.shp.ShpPolygon);org.vanrijkom.shp.ShpPolygon.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'box':{type:'Rectangle'},'rings':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'ShpPolygon':{type:'',declaredBy:'org.vanrijkom.shp.ShpPolygon'}}}}};goog.provide('org.vanrijkom.shp.ShpPolyline');goog.require('org.vanrijkom.shp.ShpPolygon');org.vanrijkom.shp.ShpPolyline=function(src,size){src=typeof src!=='undefined'?src:null;size=typeof size!=='undefined'?size:0;org.vanrijkom.shp.ShpPolyline.base(this,'constructor',src,size);this.type=org.vanrijkom.shp.ShpType.SHAPE_POLYLINE};goog.inherits(org.vanrijkom.shp.ShpPolyline,org.vanrijkom.shp.ShpPolygon);org.vanrijkom.shp.ShpPolyline.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpPolyline',qName:'org.vanrijkom.shp.ShpPolyline'}]};
goog.exportSymbol('org.vanrijkom.shp.ShpPolyline',org.vanrijkom.shp.ShpPolyline);org.vanrijkom.shp.ShpPolyline.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'ShpPolyline':{type:'',declaredBy:'org.vanrijkom.shp.ShpPolyline'}}}}};goog.provide('org.vanrijkom.shp.ShpPointZ');goog.require('org.vanrijkom.shp.ShpPoint');org.vanrijkom.shp.ShpPointZ=function(src,size){src=typeof src!=='undefined'?src:null;size=typeof size!=='undefined'?size:0;org.vanrijkom.shp.ShpPointZ.base(this,'constructor');this.type=org.vanrijkom.shp.ShpType.SHAPE_POINT;if(src){this.z=size>16?src.readDouble():NaN;this.m=size>24?src.readDouble():NaN}};goog.inherits(org.vanrijkom.shp.ShpPointZ,org.vanrijkom.shp.ShpPoint);org.vanrijkom.shp.ShpPointZ.prototype.z;
org.vanrijkom.shp.ShpPointZ.prototype.m;org.vanrijkom.shp.ShpPointZ.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpPointZ',qName:'org.vanrijkom.shp.ShpPointZ'}]};goog.exportSymbol('org.vanrijkom.shp.ShpPointZ',org.vanrijkom.shp.ShpPointZ);org.vanrijkom.shp.ShpPointZ.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'z':{type:'Number'},'m':{type:'int'}}},accessors:function(){return{}},methods:function(){return{'ShpPointZ':{type:'',declaredBy:'org.vanrijkom.shp.ShpPointZ'}}}}};goog.provide('org.vanrijkom.shp.ShpRecord');goog.require('org.vanrijkom.shp.ShpPointZ');
org.vanrijkom.shp.ShpRecord=function(src){var availableBytes=src.length-src.position;if(availableBytes==0)throw new org.vanrijkom.shp.ShpError('',org.vanrijkom.shp.ShpError.ERROR_NODATA);if(src.length-src.position<8)throw new org.vanrijkom.shp.ShpError('Not a valid record header (too small)');src.littleEndian=false;this.number=src.readInt();this.contentLength=src.readInt();this.contentLengthBytes=this.contentLength*2-4;src.littleEndian=true;var shapeOffset=src.position;this.shapeType=src.readInt();
switch(this.shapeType){case org.vanrijkom.shp.ShpType.SHAPE_NULL:break;case org.vanrijkom.shp.ShpType.SHAPE_POINT:this.shape=new org.vanrijkom.shp.ShpPoint(src,this.contentLengthBytes);break;case org.vanrijkom.shp.ShpType.SHAPE_POINTZ:this.shape=new org.vanrijkom.shp.ShpPointZ(src,this.contentLengthBytes);break;case org.vanrijkom.shp.ShpType.SHAPE_POLYGON:this.shape=new org.vanrijkom.shp.ShpPolygon(src,this.contentLengthBytes);break;case org.vanrijkom.shp.ShpType.SHAPE_POLYLINE:this.shape=new org.vanrijkom.shp.ShpPolyline(src,
this.contentLengthBytes);break;case org.vanrijkom.shp.ShpType.SHAPE_MULTIPATCH:case org.vanrijkom.shp.ShpType.SHAPE_MULTIPOINT:case org.vanrijkom.shp.ShpType.SHAPE_MULTIPOINTM:case org.vanrijkom.shp.ShpType.SHAPE_MULTIPOINTZ:case org.vanrijkom.shp.ShpType.SHAPE_POINTM:case org.vanrijkom.shp.ShpType.SHAPE_POLYGONM:case org.vanrijkom.shp.ShpType.SHAPE_POLYGONZ:case org.vanrijkom.shp.ShpType.SHAPE_POLYLINEZ:case org.vanrijkom.shp.ShpType.SHAPE_POLYLINEM:throw new org.vanrijkom.shp.ShpError(this.shapeType+
' Shape type is currently unsupported by this library');break;default:throw new org.vanrijkom.shp.ShpError('Encountered unknown shape type ('+this.shapeType+')');break}};org.vanrijkom.shp.ShpRecord.prototype.number;org.vanrijkom.shp.ShpRecord.prototype.contentLength;org.vanrijkom.shp.ShpRecord.prototype.contentLengthBytes;org.vanrijkom.shp.ShpRecord.prototype.shapeType;org.vanrijkom.shp.ShpRecord.prototype.shape;org.vanrijkom.shp.ShpRecord.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpRecord',qName:'org.vanrijkom.shp.ShpRecord'}]};
goog.exportSymbol('org.vanrijkom.shp.ShpRecord',org.vanrijkom.shp.ShpRecord);org.vanrijkom.shp.ShpRecord.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'number':{type:'int'},'contentLength':{type:'int'},'contentLengthBytes':{type:'uint'},'shapeType':{type:'int'},'shape':{type:'ShpObject'}}},accessors:function(){return{}},methods:function(){return{'ShpRecord':{type:'',declaredBy:'org.vanrijkom.shp.ShpRecord'}}}}};goog.provide('org.vanrijkom.shp.ShpTools');org.vanrijkom.shp.ShpTools=function(){};org.vanrijkom.shp.ShpTools.readRecords=function(src){var record;var records=[];while(true)try{record=new org.vanrijkom.shp.ShpRecord(src);records.push(record)}catch(e){if(e.errorID==org.vanrijkom.shp.ShpError.ERROR_NODATA)break;else throw e;}return records};org.vanrijkom.shp.ShpTools.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpTools',qName:'org.vanrijkom.shp.ShpTools'}]};
goog.exportSymbol('org.vanrijkom.shp.ShpTools',org.vanrijkom.shp.ShpTools);org.vanrijkom.shp.ShpTools.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.geom.ShpFileReader');goog.require('org.vanrijkom.shp.ShpHeader');goog.require('org.vanrijkom.shp.ShpPolyline');goog.require('org.vanrijkom.shp.ShpRecord');goog.require('org.vanrijkom.shp.ShpTools');goog.require('weavejs.api.core.ILinkableObject');
weavejs.geom.ShpFileReader=function(shpData){this.geoms=[];this.shp=new org.vanrijkom.shp.ShpHeader(shpData);this.records=org.vanrijkom.shp.ShpTools.readRecords(shpData);weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'))};weavejs.geom.ShpFileReader.prototype.shp;weavejs.geom.ShpFileReader.prototype.records;
weavejs.geom.ShpFileReader.prototype.irecord=0;weavejs.geom.ShpFileReader.prototype.geoms;weavejs.geom.ShpFileReader.prototype._processingIsDone=false;
weavejs.geom.ShpFileReader.prototype.iterate=function(stopTime){for(;this.irecord<this.records.length;this.irecord++){if(weavejs.util.JS.now()>stopTime)return this.irecord/this.records.length;var iring;var ipoint;var point;var ring;var geom=new weavejs.geom.GeneralizedGeometry;var points=[];var record=org.apache.flex.utils.Language.as(this.records[this.irecord],org.vanrijkom.shp.ShpRecord);if(org.apache.flex.utils.Language.is(record.shape,org.vanrijkom.shp.ShpPolygon)){geom.geomType=weavejs.geom.GeometryType.POLYGON;
var poly=org.apache.flex.utils.Language.as(record.shape,org.vanrijkom.shp.ShpPolygon);for(iring=0;iring<poly.rings.length;iring++){if(iring>0)points.push(NaN,NaN);ring=org.apache.flex.utils.Language.as(poly.rings[iring],Array);for(ipoint=0;ipoint<ring.length;ipoint++){point=org.apache.flex.utils.Language.as(ring[ipoint],org.vanrijkom.shp.ShpPoint);points.push(point.x,point.y)}}}if(org.apache.flex.utils.Language.is(record.shape,org.vanrijkom.shp.ShpPolyline))geom.geomType=weavejs.geom.GeometryType.LINE;
if(org.apache.flex.utils.Language.is(record.shape,org.vanrijkom.shp.ShpPoint)){geom.geomType=weavejs.geom.GeometryType.POINT;point=org.apache.flex.utils.Language.as(record.shape,org.vanrijkom.shp.ShpPoint);points.push(point.x,point.y)}if(points)geom.setCoordinates(points,weavejs.geom.BLGTreeUtils.METHOD_SAMPLE);this.geoms.push(geom)}return 1};weavejs.geom.ShpFileReader.prototype.asyncComplete=function(){this._processingIsDone=true;Weave.getCallbacks(this).triggerCallbacks()};
Object.defineProperties(weavejs.geom.ShpFileReader.prototype,{geomsReady:{get:function(){return this._processingIsDone}}});weavejs.geom.ShpFileReader.prototype.FLEXJS_CLASS_INFO={names:[{name:'ShpFileReader',qName:'weavejs.geom.ShpFileReader'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.geom.ShpFileReader',weavejs.geom.ShpFileReader);
weavejs.geom.ShpFileReader.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'geoms':{type:'Array'}}},accessors:function(){return{'geomsReady':{type:'Boolean',declaredBy:'weavejs.geom.ShpFileReader'}}},methods:function(){return{'ShpFileReader':{type:'',declaredBy:'weavejs.geom.ShpFileReader'}}}}};goog.provide('weavejs.data.source.DBFDataSource');goog.require('org.vanrijkom.dbf.DbfField');goog.require('org.vanrijkom.dbf.DbfHeader');goog.require('org.vanrijkom.dbf.DbfTools');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.geom.ShpFileReader');goog.require('weavejs.api.data.IDataSource_File');
weavejs.data.source.DBFDataSource=function(){weavejs.data.source.DBFDataSource.base(this,'constructor');this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString);this.keyColName=Weave.linkableChild(this,weavejs.core.LinkableString);this.dbfUrl=Weave.linkableChild(this,weavejs.core.LinkableString);this.shpUrl=Weave.linkableChild(this,weavejs.core.LinkableString);this.projection=Weave.linkableChild(this,weavejs.core.LinkableString)};goog.inherits(weavejs.data.source.DBFDataSource,weavejs.data.source.AbstractDataSource);
weavejs.data.source.DBFDataSource.prototype.hack_urlIsLocal=function(url){return url&&org.apache.flex.utils.Language.as(url,Object).startsWith(weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME)||!url};weavejs.data.source.DBFDataSource.prototype.getLabel=function(){return this.label.value||(this.shpUrl.value||this.dbfUrl.value||'').split('/').pop()||weavejs.data.source.DBFDataSource.base(this,'getLabel')};
weavejs.data.source.DBFDataSource.prototype.uninitialize=function(){weavejs.data.source.DBFDataSource.base(this,'uninitialize');if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.uninitialize,this,'uninitialize'),this.dbfUrl)){this.dbfData=null;this.dbfHeader=null}if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.uninitialize,this,'uninitialize'),this.shpUrl)){if(this.shpfile)Weave.dispose(this.shpfile);this.shpfile=null}};
weavejs.data.source.DBFDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.initialize,this,'initialize'),this.dbfUrl)&&this.dbfUrl.value)weavejs.WeaveAPI.URLRequestUtils.request(this,new weavejs.net.URLRequest(this.dbfUrl.value)).then(this.handleDBFDownload.bind(this,this.dbfUrl.value),this.handleDBFDownloadError.bind(this,this.dbfUrl.value));if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.initialize,
this,'initialize'),this.shpUrl)&&this.shpUrl.value)weavejs.WeaveAPI.URLRequestUtils.request(this,new weavejs.net.URLRequest(this.shpUrl.value)).then(this.handleShpDownload.bind(this,this.shpUrl.value),this.handleShpDownloadError.bind(this,this.shpUrl.value));weavejs.data.source.DBFDataSource.base(this,'initialize',true)};weavejs.data.source.DBFDataSource.prototype.keyType;weavejs.data.source.DBFDataSource.prototype.keyColName;weavejs.data.source.DBFDataSource.prototype.dbfUrl;weavejs.data.source.DBFDataSource.prototype.shpUrl;
weavejs.data.source.DBFDataSource.prototype.projection;weavejs.data.source.DBFDataSource.prototype.dbfData=null;weavejs.data.source.DBFDataSource.prototype.dbfHeader=null;weavejs.data.source.DBFDataSource.prototype.shpfile=null;weavejs.data.source.DBFDataSource.DBF_COLUMN_NAME='name';weavejs.data.source.DBFDataSource.THE_GEOM_COLUMN='the_geom';weavejs.data.source.DBFDataSource.prototype.getGeomColumnTitle=function(){return Weave.lang('{0} geometry',this.getLabel())};
weavejs.data.source.DBFDataSource.prototype.handleDBFDownload=function(url,result){if(Weave.wasDisposed(this)||url!=this.dbfUrl.value)return;this.dbfData=new weavejs.util.JSByteArray(result);if(this.dbfData.length==0){this.dbfData=null;weavejs.util.JS.error('Zero-byte DBF: '+this.dbfUrl.value)}else try{this.dbfData.position=0;this.dbfHeader=new org.vanrijkom.dbf.DbfHeader(this.dbfData)}catch(e){this.dbfData=null;weavejs.util.JS.error(e)}Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.source.DBFDataSource.prototype.getHierarchyRoot=function(){if(!org.apache.flex.utils.Language.is(this._rootNode,weavejs.data.source.DBFDataSource.DBFColumnNode))this._rootNode=new weavejs.data.source.DBFDataSource.DBFColumnNode(this);return this._rootNode};
weavejs.data.source.DBFDataSource.prototype.generateHierarchyNode=function(metadata){if(!metadata)return null;var root=org.apache.flex.utils.Language.as(this.getHierarchyRoot(),weavejs.data.source.DBFDataSource.DBFColumnNode);if(!root)return weavejs.data.source.DBFDataSource.base(this,'generateHierarchyNode',metadata);if(metadata.hasOwnProperty(weavejs.data.source.DBFDataSource.DBF_COLUMN_NAME))return new weavejs.data.source.DBFDataSource.DBFColumnNode(this,metadata[weavejs.data.source.DBFDataSource.DBF_COLUMN_NAME]);
return null};weavejs.data.source.DBFDataSource.prototype.handleShpDownload=function(url,result){if(Weave.wasDisposed(this)||url!=this.shpUrl.value)return;if(this.shpfile){Weave.dispose(this.shpfile);this.shpfile=null}var bytes=new weavejs.util.JSByteArray(result);if(bytes.length==0)weavejs.util.JS.error('Zero-byte ShapeFile: '+this.shpUrl.value);else try{bytes.position=0;this.shpfile=Weave.linkableChild(this,new weavejs.geom.ShpFileReader(bytes))}catch(e){weavejs.util.JS.error(e)}Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.source.DBFDataSource.prototype.handleDBFDownloadError=function(url,error){if(Weave.wasDisposed(this))return;if(url!=this.dbfUrl.value)return;weavejs.util.JS.error(error);Weave.getCallbacks(this).triggerCallbacks()};weavejs.data.source.DBFDataSource.prototype.handleShpDownloadError=function(url,error){if(Weave.wasDisposed(this))return;if(url!=this.shpUrl.value)return;weavejs.util.JS.error(error);Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.source.DBFDataSource.prototype.requestColumnFromSource=function(proxyColumn){var self=this;var __localFn0__=function(str,i,a){return weavejs.util.StandardLib.asNumber(str)};var metadata=proxyColumn.getProxyMetadata();var columnName=metadata[weavejs.data.source.DBFDataSource.DBF_COLUMN_NAME];metadata=this.getColumnMetadata(columnName);if(!metadata){proxyColumn.dataUnavailable();return}proxyColumn.setMetadata(metadata);var qkeys=weavejs.WeaveAPI.QKeyManager.getQKeys(this.getKeyType(),this.getColumnValues(this.keyColName.value));
var data=this.getColumnValues(columnName);var newColumn;var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];if(dataType==weavejs.api.data.DataType.GEOMETRY){newColumn=new weavejs.data.column.GeometryColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.GeometryColumn).setRecords(qkeys,data)}else if(dataType==weavejs.api.data.DataType.DATE){newColumn=new weavejs.data.column.DateColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.DateColumn).setRecords(qkeys,
data)}else if(dataType==weavejs.api.data.DataType.NUMBER){newColumn=new weavejs.data.column.NumberColumn(metadata);data.forEach(__localFn0__);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.NumberColumn).setRecords(qkeys,data)}else{newColumn=new weavejs.data.column.StringColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.StringColumn).setRecords(qkeys,data)}proxyColumn.setInternalColumn(newColumn)};
weavejs.data.source.DBFDataSource.prototype.getKeyType=function(){return this.keyType.value||this.getLabel()};weavejs.data.source.DBFDataSource.prototype.getColumnNames=function(){var names=[];if(this.shpfile)names.push(weavejs.data.source.DBFDataSource.THE_GEOM_COLUMN);if(this.dbfHeader)for(var i=0;i<this.dbfHeader.fields.length;i++)names.push(org.apache.flex.utils.Language.as(this.dbfHeader.fields[i],org.vanrijkom.dbf.DbfField).name);return names};
weavejs.data.source.DBFDataSource.prototype.getColumnMetadata=function(columnName){if(!columnName)return null;var meta={};meta[weavejs.data.source.DBFDataSource.DBF_COLUMN_NAME]=columnName;meta[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.getKeyType();meta[weavejs.api.data.ColumnMetadata.PROJECTION]=this.projection.value;if(columnName==weavejs.data.source.DBFDataSource.THE_GEOM_COLUMN){meta[weavejs.api.data.ColumnMetadata.TITLE]=this.getGeomColumnTitle();meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=
weavejs.api.data.DataType.GEOMETRY;return meta}else if(this.dbfHeader){meta[weavejs.api.data.ColumnMetadata.TITLE]=columnName;var foreachiter0_target=this.dbfHeader.fields;for(var foreachiter0 in foreachiter0_target){var field=foreachiter0_target[foreachiter0];if(field.name==columnName){var typeChar=String.fromCharCode(field.type);var dataType=weavejs.data.source.DBFDataSource.FIELD_TYPE_LOOKUP[typeChar];if(dataType)meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=dataType;if(dataType==weavejs.api.data.DataType.DATE)meta[weavejs.api.data.ColumnMetadata.DATE_FORMAT]=
'YYYYMMDD';return meta}}}return null};
weavejs.data.source.DBFDataSource.prototype.getColumnValues=function(columnName){var values=[];if(columnName==weavejs.data.source.DBFDataSource.THE_GEOM_COLUMN)return this.shpfile?this.shpfile.geoms:[];if(!this.dbfHeader)return values;var record=null;for(var i=0;i<this.dbfHeader.recordCount;i++)if(columnName){record=org.vanrijkom.dbf.DbfTools.getRecord(this.dbfData,this.dbfHeader,i);var value=record.map_field_value.get(columnName);values.push(value)}else values.push(String(i+1));return values};
weavejs.data.source.DBFDataSource.FIELD_TYPE_LOOKUP={'C':weavejs.api.data.DataType.STRING,'D':weavejs.api.data.DataType.DATE,'F':weavejs.api.data.DataType.NUMBER,'N':weavejs.api.data.DataType.NUMBER,2:weavejs.api.data.DataType.NUMBER,4:weavejs.api.data.DataType.NUMBER,8:weavejs.api.data.DataType.NUMBER,'L':'boolean','M':null,'B':null,'G':null,'P':null,'I':null,0:null,'@':null,'+':null};
Object.defineProperties(weavejs.data.source.DBFDataSource.prototype,{isLocal:{get:function(){return this.hack_urlIsLocal(this.dbfUrl.value)&&this.hack_urlIsLocal(this.shpUrl.value)}},initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.DBFDataSource,this,'initializationComplete')&&this.dbfData&&(!this.shpfile||this.shpfile.geomsReady)}}});
weavejs.data.source.DBFDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'DBFDataSource',qName:'weavejs.data.source.DBFDataSource'}],interfaces:[weavejs.api.data.IDataSource_File]};goog.exportSymbol('weavejs.data.source.DBFDataSource',weavejs.data.source.DBFDataSource);
weavejs.data.source.DBFDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'keyType':{type:'LinkableString'},'keyColName':{type:'LinkableString'},'dbfUrl':{type:'LinkableString'},'shpUrl':{type:'LinkableString'},'projection':{type:'LinkableString'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.DBFDataSource'}}},methods:function(){return{'DBFDataSource':{type:'',declaredBy:'weavejs.data.source.DBFDataSource'},'getLabel':{type:'String',
declaredBy:'weavejs.data.source.DBFDataSource'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.DBFDataSource'},'getKeyType':{type:'String',declaredBy:'weavejs.data.source.DBFDataSource'},'getColumnNames':{type:'Array',declaredBy:'weavejs.data.source.DBFDataSource'},'getColumnMetadata':{type:'Object',declaredBy:'weavejs.data.source.DBFDataSource'}}}}};
weavejs.data.source.DBFDataSource.DBFColumnNode=function(source,columnName){source=typeof source!=='undefined'?source:null;columnName=typeof columnName!=='undefined'?columnName:null;this.source=source;this.columnName=columnName};weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.source;weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.columnName;weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.children;
weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.source.DBFDataSource.DBFColumnNode);return!!that&&this.source==that.source&&this.columnName==that.columnName};weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.getLabel=function(){if(!this.columnName)return this.source.getLabel();return this.columnName};weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.isBranch=function(){return!this.columnName};
weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.hasChildBranches=function(){return false};
weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.getChildren=function(){if(this.columnName)return null;if(!this.children)this.children=[];var names=this.source.getColumnNames();for(var i=0;i<names.length;i++)if(this.children[i])org.apache.flex.utils.Language.as(this.children[i],weavejs.data.source.DBFDataSource.DBFColumnNode).columnName=names[i];else this.children[i]=new weavejs.data.source.DBFDataSource.DBFColumnNode(this.source,names[i]);this.children.length=names.length;return this.children};
weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.getDataSource=function(){return this.source};weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.getColumnMetadata=function(){return this.source.getColumnMetadata(this.columnName)};weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'DBFColumnNode',qName:'weavejs.data.source.DBFDataSource.DBFColumnNode'}],interfaces:[weavejs.api.data.IWeaveTreeNode,weavejs.api.data.IColumnReference]};
goog.exportSymbol('weavejs.data.source.DBFDataSource.DBFColumnNode',weavejs.data.source.DBFDataSource.DBFColumnNode);
weavejs.data.source.DBFDataSource.DBFColumnNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'columnName':{type:'String'}}},accessors:function(){return{}},methods:function(){return{'DBFColumnNode':{type:'',declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'},'equals':{type:'Boolean',declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'},'isBranch':{type:'Boolean',
declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'},'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'},'getChildren':{type:'Array',declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'},'getDataSource':{type:'IDataSource',declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'},'getColumnMetadata':{type:'Object',declaredBy:'weavejs.data.source.DBFDataSource.DBFColumnNode'}}}}};goog.provide('weavejs.api.data.ISelectableAttributes');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.ISelectableAttributes=function(){};weavejs.api.data.ISelectableAttributes.prototype.selectableAttributes;weavejs.api.data.ISelectableAttributes.prototype.FLEXJS_CLASS_INFO={names:[{name:'ISelectableAttributes',qName:'weavejs.api.data.ISelectableAttributes'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.data.ISelectableAttributes.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'selectableAttributes':{type:'Object',declaredBy:'weavejs.api.data.ISelectableAttributes'}}},methods:function(){return{}}}};goog.provide('weavejs.data.source.ForeignDataMappingTransform');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.api.data.ISelectableAttributes');weavejs.data.source.ForeignDataMappingTransform=function(){weavejs.data.source.ForeignDataMappingTransform.base(this,'constructor');this.keyColumn=Weave.linkableChild(this,weavejs.data.column.DynamicColumn);this.dataColumns=Weave.linkableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IAttributeColumn))};
goog.inherits(weavejs.data.source.ForeignDataMappingTransform,weavejs.data.source.AbstractDataSource);weavejs.data.source.ForeignDataMappingTransform.DATA_COLUMNNAME_META='__DataColumnName__';weavejs.data.source.ForeignDataMappingTransform.prototype.keyColumn;weavejs.data.source.ForeignDataMappingTransform.prototype.dataColumns;
weavejs.data.source.ForeignDataMappingTransform.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;weavejs.data.source.ForeignDataMappingTransform.base(this,'initialize',true)};
weavejs.data.source.ForeignDataMappingTransform.prototype.getHierarchyRoot=function(){var self=this;var __localFn0__=function(){var __localFn0__=function(dataColumnName,_){_=Array.prototype.slice.call(arguments,1);var column=org.apache.flex.utils.Language.as(self.dataColumns.getObject(dataColumnName),weavejs.api.data.IAttributeColumn);var title=column.getMetadata(weavejs.api.data.ColumnMetadata.TITLE);var metadata={};metadata[weavejs.api.data.ColumnMetadata.TITLE]=title;metadata[weavejs.data.source.ForeignDataMappingTransform.DATA_COLUMNNAME_META]=
dataColumnName;return self.generateHierarchyNode(metadata)};return self.dataColumns.getNames().map(__localFn0__)};if(!this._rootNode)this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({cacheSettings:{'label':false},dataSource:this,dependency:this.dataColumns,data:this,'label':org.apache.flex.utils.Language.closure(this.getLabel,this,'getLabel'),hasChildBranches:false,children:__localFn0__});return this._rootNode};
weavejs.data.source.ForeignDataMappingTransform.prototype.generateHierarchyNode=function(metadata){if(!metadata)return null;var name=metadata[weavejs.data.source.ForeignDataMappingTransform.DATA_COLUMNNAME_META];metadata=this.getColumnMetadata(name);if(!metadata)return null;return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,idFields:[weavejs.data.source.ForeignDataMappingTransform.DATA_COLUMNNAME_META],data:metadata})};
weavejs.data.source.ForeignDataMappingTransform.prototype.getColumnMetadata=function(dataColumnName,includeSourceColumnMetadata){includeSourceColumnMetadata=typeof includeSourceColumnMetadata!=='undefined'?includeSourceColumnMetadata:true;var column=org.apache.flex.utils.Language.as(this.dataColumns.getObject(dataColumnName),weavejs.api.data.IAttributeColumn);if(!column)return null;var metadata=includeSourceColumnMetadata?weavejs.api.data.ColumnMetadata.getAllMetadata(column):{};metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=
this.keyColumn.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);metadata[weavejs.data.source.ForeignDataMappingTransform.DATA_COLUMNNAME_META]=dataColumnName;return metadata};
weavejs.data.source.ForeignDataMappingTransform.prototype.requestColumnFromSource=function(proxyColumn){var dataColumnName=proxyColumn.getMetadata(weavejs.data.source.ForeignDataMappingTransform.DATA_COLUMNNAME_META);var metadata=this.getColumnMetadata(dataColumnName,false);if(!metadata){proxyColumn.dataUnavailable();return}proxyColumn.setMetadata(metadata);var dataColumn=org.apache.flex.utils.Language.as(this.dataColumns.getObject(dataColumnName),weavejs.api.data.IAttributeColumn);var foreignDataColumn=
org.apache.flex.utils.Language.as(proxyColumn.getInternalColumn(),weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn)||new weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn(this);foreignDataColumn.setup(metadata,dataColumn);proxyColumn.setInternalColumn(foreignDataColumn)};
Object.defineProperties(weavejs.data.source.ForeignDataMappingTransform.prototype,{isLocal:{get:function(){return!weavejs.data.DataSourceUtils.hasRemoteColumnDependencies(this)}},selectableAttributes:{get:function(){return(new weavejs.util.JS.Map).set('Foreign key mapping',this.keyColumn).set('Data to transform',this.dataColumns)}},initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.ForeignDataMappingTransform,this,'initializationComplete')&&
!Weave.isBusy(this.keyColumn)&&!Weave.isBusy(this.dataColumns)}}});weavejs.data.source.ForeignDataMappingTransform.prototype.FLEXJS_CLASS_INFO={names:[{name:'ForeignDataMappingTransform',qName:'weavejs.data.source.ForeignDataMappingTransform'}],interfaces:[weavejs.api.data.ISelectableAttributes]};goog.exportSymbol('weavejs.data.source.ForeignDataMappingTransform',weavejs.data.source.ForeignDataMappingTransform);
weavejs.data.source.ForeignDataMappingTransform.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'keyColumn':{type:'DynamicColumn'},'dataColumns':{type:'ILinkableHashMap'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.ForeignDataMappingTransform'},'selectableAttributes':{type:'Object',declaredBy:'weavejs.data.source.ForeignDataMappingTransform'}}},methods:function(){return{'ForeignDataMappingTransform':{type:'',declaredBy:'weavejs.data.source.ForeignDataMappingTransform'},
'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.ForeignDataMappingTransform'}}}}};weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn=function(source){weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.base(this,'constructor');Weave.linkableChild(this,source);this._keyColumn=source.keyColumn};goog.inherits(weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype._keyColumn;
weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype._dataColumn;weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype._keyType;
weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.setup=function(metadata,dataColumn){if(this._dataColumn&&this._dataColumn!=dataColumn)org.apache.flex.utils.Language.as(weavejs.WeaveAPI.SessionManager,weavejs.core.SessionManager).unregisterLinkableChild(this,this._dataColumn);this._metadata=weavejs.data.column.AbstractAttributeColumn.copyValues(metadata);this._dataColumn=Weave.linkableChild(this,dataColumn);this._keyType=dataColumn.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);
this.triggerCallbacks()};weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.getMetadata=function(propertyName){return weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.base(this,'getMetadata',propertyName)||this._dataColumn.getMetadata(propertyName)};
weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.getMetadataPropertyNames=function(){if(this._dataColumn)return weavejs.util.ArrayUtils.union(weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.base(this,'getMetadataPropertyNames'),this._dataColumn.getMetadataPropertyNames());return weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.base(this,'getMetadataPropertyNames')};
weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.containsKey=function(key){return this._dataColumn.containsKey(key)};weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.deriveStringFromNumber=function(value){return weavejs.data.ColumnUtils.deriveStringFromNumber(this._dataColumn,value)};
weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var localName;if(this._keyColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)==weavejs.api.data.DataType.NUMBER)localName=this._keyColumn.getValueFromKey(key,Number);else localName=this._keyColumn.getValueFromKey(key,String);var foreignKey=weavejs.WeaveAPI.QKeyManager.getQKey(this._keyType,localName);return this._dataColumn.getValueFromKey(foreignKey,
dataType)};Object.defineProperties(weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype,{keys:{get:function(){return this._keyColumn.keys}}});weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ForeignDataColumn',qName:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};
goog.exportSymbol('weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn',weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn);
weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'}}},methods:function(){return{'ForeignDataColumn':{type:'',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'},'setup':{type:'void',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'},
'getMetadata':{type:'String',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.source.ForeignDataMappingTransform.ForeignDataColumn'}}}}};goog.provide('weavejs.data.source.GeoJSONDataSourceData');
weavejs.data.source.GeoJSONDataSourceData=function(obj,keyType,keyPropertyName){var self=this;var __localFn0__=function(item,i,a){return item===undefined};var __localFn1__=function(o,i,a){return i};var __localFn2__=function(props,i,a){for(var key in props){var value=props[key];if(value==null)continue;var oldType=self.propertyTypes[key];var newType=typeof value;if(!self.propertyTypes.hasOwnProperty(key)){self.propertyTypes[key]=newType;self.propertyNames.push(key)}else if(oldType!=newType)self.propertyTypes[key]=
'object'}};var crs=obj[weavejs.geom.GeoJSON.P_CRS];if(crs&&crs[weavejs.geom.GeoJSON.P_TYPE]==weavejs.geom.GeoJSON.CRS_T_NAME)this.projection=weavejs.geom.GeoJSON.getProjectionFromURN(crs[weavejs.geom.GeoJSON.CRS_P_PROPERTIES][weavejs.geom.GeoJSON.CRS_N_P_NAME]);var featureCollection=weavejs.geom.GeoJSON.asFeatureCollection(obj);var features=featureCollection[weavejs.geom.GeoJSON.FC_P_FEATURES];this.ids=weavejs.util.ArrayUtils.pluck(features,weavejs.geom.GeoJSON.F_P_ID);this.geometries=weavejs.util.ArrayUtils.pluck(features,
weavejs.geom.GeoJSON.F_P_GEOMETRY);this.properties=weavejs.util.ArrayUtils.pluck(features,weavejs.geom.GeoJSON.F_P_PROPERTIES);if(this.ids.every(__localFn0__))this.ids=features.map(__localFn1__);this.propertyNames=[];this.propertyTypes={};this.properties.forEach(__localFn2__);weavejs.util.AsyncSort.sortImmediately(this.propertyNames);this.resetQKeys(keyType,keyPropertyName)};weavejs.data.source.GeoJSONDataSourceData.prototype.projection=null;
weavejs.data.source.GeoJSONDataSourceData.prototype.ids=null;weavejs.data.source.GeoJSONDataSourceData.prototype.geometries=null;weavejs.data.source.GeoJSONDataSourceData.prototype.properties=null;weavejs.data.source.GeoJSONDataSourceData.prototype.propertyNames=null;weavejs.data.source.GeoJSONDataSourceData.prototype.propertyTypes=null;weavejs.data.source.GeoJSONDataSourceData.prototype.qkeys=null;
weavejs.data.source.GeoJSONDataSourceData.prototype.resetQKeys=function(keyType,propertyName){var values=this.ids;if(propertyName&&this.propertyNames.indexOf(propertyName)>=0)values=weavejs.util.ArrayUtils.pluck(this.properties,propertyName);this.qkeys=weavejs.WeaveAPI.QKeyManager.getQKeys(keyType,values)};weavejs.data.source.GeoJSONDataSourceData.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSONDataSourceData',qName:'weavejs.data.source.GeoJSONDataSourceData'}]};
goog.exportSymbol('weavejs.data.source.GeoJSONDataSourceData',weavejs.data.source.GeoJSONDataSourceData);
weavejs.data.source.GeoJSONDataSourceData.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'projection':{type:'String'},'ids':{type:'Array'},'geometries':{type:'Array'},'properties':{type:'Array'},'propertyNames':{type:'Array'},'propertyTypes':{type:'Object'},'qkeys':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'GeoJSONDataSourceData':{type:'',declaredBy:'weavejs.data.source.GeoJSONDataSourceData'},'resetQKeys':{type:'void',declaredBy:'weavejs.data.source.GeoJSONDataSourceData'}}}}};goog.provide('weavejs.data.source.GeoJSONDataSourceNode');goog.require('weavejs.api.data.IColumnReference');goog.require('weavejs.api.data.IWeaveTreeNode');weavejs.data.source.GeoJSONDataSourceNode=function(source,metadata,children,idFields){children=typeof children!=='undefined'?children:null;idFields=typeof idFields!=='undefined'?idFields:null;this.source=source;this.metadata=metadata||{};this.children=children;this.idFields=idFields};weavejs.data.source.GeoJSONDataSourceNode.prototype.idFields;
weavejs.data.source.GeoJSONDataSourceNode.prototype.source;weavejs.data.source.GeoJSONDataSourceNode.prototype.metadata;weavejs.data.source.GeoJSONDataSourceNode.prototype.children;
weavejs.data.source.GeoJSONDataSourceNode.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.source.GeoJSONDataSourceNode);if(that&&this.source==that.source&&weavejs.util.StandardLib.compare(this.idFields,that.idFields)==0){if(this.idFields&&this.idFields.length){var foreachiter0_target=this.idFields;for(var foreachiter0 in foreachiter0_target){var field=foreachiter0_target[foreachiter0];if(this.metadata[field]!=that.metadata[field])return false}return true}return weavejs.util.StandardLib.compare(this.metadata,
that.metadata)==0}return false};weavejs.data.source.GeoJSONDataSourceNode.prototype.getLabel=function(){return this.metadata[weavejs.api.data.ColumnMetadata.TITLE]};weavejs.data.source.GeoJSONDataSourceNode.prototype.isBranch=function(){return this.children!=null};weavejs.data.source.GeoJSONDataSourceNode.prototype.hasChildBranches=function(){return false};weavejs.data.source.GeoJSONDataSourceNode.prototype.getChildren=function(){return this.children};
weavejs.data.source.GeoJSONDataSourceNode.prototype.getDataSource=function(){return this.source};weavejs.data.source.GeoJSONDataSourceNode.prototype.getColumnMetadata=function(){return this.children?null:this.metadata};weavejs.data.source.GeoJSONDataSourceNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSONDataSourceNode',qName:'weavejs.data.source.GeoJSONDataSourceNode'}],interfaces:[weavejs.api.data.IWeaveTreeNode,weavejs.api.data.IColumnReference]};
goog.exportSymbol('weavejs.data.source.GeoJSONDataSourceNode',weavejs.data.source.GeoJSONDataSourceNode);
weavejs.data.source.GeoJSONDataSourceNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'GeoJSONDataSourceNode':{type:'',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'},'equals':{type:'Boolean',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'},'isBranch':{type:'Boolean',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'},
'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'},'getChildren':{type:'Array',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'},'getDataSource':{type:'IDataSource',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'},'getColumnMetadata':{type:'Object',declaredBy:'weavejs.data.source.GeoJSONDataSourceNode'}}}}};goog.provide('weavejs.data.source.GeoJSONDataSource');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.data.source.GeoJSONDataSourceData');goog.require('weavejs.data.source.GeoJSONDataSourceNode');goog.require('weavejs.api.data.IDataSource_File');
weavejs.data.source.GeoJSONDataSource=function(){weavejs.data.source.GeoJSONDataSource.base(this,'constructor');this.url=Weave.linkableChild(this,new weavejs.core.LinkableFile(null,null,weavejs.net.ResponseType.JSON),org.apache.flex.utils.Language.closure(this.handleFile,this,'handleFile'));this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString);this.keyProperty=Weave.linkableChild(this,weavejs.core.LinkableString);this.projection=Weave.linkableChild(this,weavejs.core.LinkableString)};
goog.inherits(weavejs.data.source.GeoJSONDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.GeoJSONDataSource.prototype.getLabel=function(){return this.label.value||(this.url.value||'').split('/').pop()||weavejs.data.source.GeoJSONDataSource.base(this,'getLabel')};weavejs.data.source.GeoJSONDataSource.prototype.url;weavejs.data.source.GeoJSONDataSource.prototype.keyType;weavejs.data.source.GeoJSONDataSource.prototype.keyProperty;weavejs.data.source.GeoJSONDataSource.prototype.projection;
weavejs.data.source.GeoJSONDataSource.prototype.jsonData=null;weavejs.data.source.GeoJSONDataSource.prototype.getProjection=function(){return this.projection.value||(this.jsonData?this.jsonData.projection:null)||'EPSG:4326'};weavejs.data.source.GeoJSONDataSource.prototype.getPropertyNames=function(){return this.jsonData&&this.jsonData.propertyNames?[].concat(this.jsonData.propertyNames):[]};
weavejs.data.source.GeoJSONDataSource.prototype.getKeyType=function(){var kt=this.keyType.value;if(!kt){kt=this.url.value;if(this.keyProperty.value)kt+='#'+this.keyProperty.value}return kt};
weavejs.data.source.GeoJSONDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;this._rootNode=null;if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.initialize,this,'initialize'),this.keyType,this.keyProperty))if(this.jsonData)this.jsonData.resetQKeys(this.getKeyType(),this.keyProperty.value);weavejs.data.source.GeoJSONDataSource.base(this,'initialize',true)};
weavejs.data.source.GeoJSONDataSource.prototype.handleFile=function(){if(Weave.isBusy(this.url))return;this.jsonData=null;if(!this.url.result){this.hierarchyRefresh.triggerCallbacks();if(this.url.error)weavejs.util.JS.error(this.url.error);return}try{var obj=this.url.result;if(!weavejs.geom.GeoJSON.isGeoJSONObject(obj))throw new Error('Invalid GeoJSON file: '+this.url.value);this.jsonData=new weavejs.data.source.GeoJSONDataSourceData(obj,this.getKeyType(),this.keyProperty.value);this.hierarchyRefresh.triggerCallbacks()}catch(e){weavejs.util.JS.error(e)}};
weavejs.data.source.GeoJSONDataSource.prototype.getHierarchyRoot=function(){var self=this;var __localFn0__=function(n,i,a){return self.generateHierarchyNode(n)};var __localFn1__=function(n,_){_=Array.prototype.slice.call(arguments,1);return n!=null};if(!org.apache.flex.utils.Language.is(this._rootNode,weavejs.data.source.GeoJSONDataSourceNode)){var meta={};meta[weavejs.api.data.ColumnMetadata.TITLE]=this.getLabel();var rootChildren=[];if(this.jsonData)rootChildren=[''].concat(this.jsonData.propertyNames).map(__localFn0__).filter(__localFn1__);
this._rootNode=new weavejs.data.source.GeoJSONDataSourceNode(this,meta,rootChildren)}return this._rootNode};
weavejs.data.source.GeoJSONDataSource.prototype.generateHierarchyNode=function(metadata){if(metadata==null||!this.jsonData)return null;if(org.apache.flex.utils.Language.is(metadata,String)){var str=org.apache.flex.utils.Language.as(metadata,String);metadata={};metadata[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]=str}if(metadata&&metadata.hasOwnProperty(weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME)){metadata=this.getMetadataForProperty(metadata[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]);
return new weavejs.data.source.GeoJSONDataSourceNode(this,metadata,null,[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME])}return null};
weavejs.data.source.GeoJSONDataSource.prototype.requestColumnFromSource=function(proxyColumn){var self=this;var __localFn0__=function(stopTime){if(!self.jsonData){proxyColumn.dataUnavailable();return 1}for(;i<self.jsonData.qkeys.length;i++){if(weavejs.util.JS.now()>stopTime)return i/self.jsonData.qkeys.length;var geomsFromJson=weavejs.geom.GeneralizedGeometry.fromGeoJson(self.jsonData.geometries[i]);var foreachiter0_target=geomsFromJson;for(var foreachiter0 in foreachiter0_target){var geom=foreachiter0_target[foreachiter0];
qkeys.push(self.jsonData.qkeys[i]);geoms.push(geom)}}return 1};var __localFn1__=function(){var gc=new weavejs.data.column.GeometryColumn(metadata);gc.setRecords(qkeys,geoms);proxyColumn.setInternalColumn(gc)};var propertyName=proxyColumn.getMetadata(weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME);var metadata=this.getMetadataForProperty(propertyName);if(!metadata||!this.jsonData||propertyName&&this.jsonData.propertyNames.indexOf(propertyName)<0){proxyColumn.dataUnavailable();return}proxyColumn.setMetadata(metadata);
var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];if(dataType==weavejs.api.data.DataType.GEOMETRY){var qkeys=[];var geoms=[];var i=0;var initGeoms=__localFn0__;var setGeoms=__localFn1__;weavejs.WeaveAPI.Scheduler.startTask(proxyColumn,initGeoms,weavejs.WeaveAPI.TASK_PRIORITY_HIGH,setGeoms)}else{var data=weavejs.util.ArrayUtils.pluck(this.jsonData.properties,propertyName);var type=this.jsonData.propertyTypes[propertyName];if(type=='number'){var nc=new weavejs.data.column.NumberColumn(metadata);
nc.setRecords(this.jsonData.qkeys,data);proxyColumn.setInternalColumn(nc)}else{var sc=new weavejs.data.column.StringColumn(metadata);sc.setRecords(this.jsonData.qkeys,data);proxyColumn.setInternalColumn(sc)}}};
weavejs.data.source.GeoJSONDataSource.prototype.getMetadataForProperty=function(propertyName){if(!this.jsonData)return null;var meta=null;if(!propertyName){meta={};meta[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]='';meta[weavejs.api.data.ColumnMetadata.TITLE]=this.getGeomColumnTitle();meta[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.getKeyType();meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=weavejs.api.data.DataType.GEOMETRY;meta[weavejs.api.data.ColumnMetadata.PROJECTION]=this.getProjection()}else if(this.jsonData.propertyNames.indexOf(propertyName)>=
0){meta={};meta[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]=propertyName;meta[weavejs.api.data.ColumnMetadata.TITLE]=propertyName;meta[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.getKeyType();if(propertyName==this.keyProperty.value)meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.getKeyType();else meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.jsonData.propertyTypes[propertyName]}return meta};weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME='geoJsonPropertyName';
weavejs.data.source.GeoJSONDataSource.prototype.getGeomColumnTitle=function(){return Weave.lang('{0} geometry',this.getLabel())};Object.defineProperties(weavejs.data.source.GeoJSONDataSource.prototype,{isLocal:{get:function(){return this.url.isLocal}},initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.GeoJSONDataSource,this,'initializationComplete')&&!Weave.isBusy(this.url)&&this.jsonData}}});
weavejs.data.source.GeoJSONDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSONDataSource',qName:'weavejs.data.source.GeoJSONDataSource'}],interfaces:[weavejs.api.data.IDataSource_File]};goog.exportSymbol('weavejs.data.source.GeoJSONDataSource',weavejs.data.source.GeoJSONDataSource);
weavejs.data.source.GeoJSONDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'url':{type:'LinkableFile'},'keyType':{type:'LinkableString'},'keyProperty':{type:'LinkableString'},'projection':{type:'LinkableString'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.GeoJSONDataSource'}}},methods:function(){return{'GeoJSONDataSource':{type:'',declaredBy:'weavejs.data.source.GeoJSONDataSource'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.GeoJSONDataSource'},
'getProjection':{type:'String',declaredBy:'weavejs.data.source.GeoJSONDataSource'},'getPropertyNames':{type:'Array',declaredBy:'weavejs.data.source.GeoJSONDataSource'},'getKeyType':{type:'String',declaredBy:'weavejs.data.source.GeoJSONDataSource'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.GeoJSONDataSource'}}}}};goog.provide('weavejs.data.source.GroupedDataTransform');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.api.data.ISelectableAttributes');
weavejs.data.source.GroupedDataTransform=function(){weavejs.data.source.GroupedDataTransform.base(this,'constructor');this.groupByColumn=Weave.linkableChild(this,weavejs.data.column.DynamicColumn);this.groupKeyType=Weave.linkableChild(this,weavejs.core.LinkableString);this.dataColumns=Weave.linkableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IAttributeColumn));this.aggregationModes=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.typeofIsObject,
this,'typeofIsObject')))};goog.inherits(weavejs.data.source.GroupedDataTransform,weavejs.data.source.AbstractDataSource);weavejs.data.source.GroupedDataTransform.DATA_COLUMNNAME_META='__GroupedDataColumnName__';weavejs.data.source.GroupedDataTransform.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;weavejs.data.source.GroupedDataTransform.base(this,'initialize',true)};weavejs.data.source.GroupedDataTransform.prototype.groupByColumn;weavejs.data.source.GroupedDataTransform.prototype.groupKeyType;
weavejs.data.source.GroupedDataTransform.prototype.dataColumns;weavejs.data.source.GroupedDataTransform.prototype.aggregationModes;weavejs.data.source.GroupedDataTransform.prototype.typeofIsObject=function(value){return typeof value=='object'};
weavejs.data.source.GroupedDataTransform.prototype.getHierarchyRoot=function(){var self=this;var __localFn0__=function(){var __localFn0__=function(columnName,_){_=Array.prototype.slice.call(arguments,1);var meta={};meta[weavejs.data.source.GroupedDataTransform.DATA_COLUMNNAME_META]=columnName;return self.generateHierarchyNode(meta)};return self.dataColumns.getNames().map(__localFn0__)};if(!this._rootNode)this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({cacheSettings:{'label':false},dataSource:this,
dependency:this.dataColumns.childListCallbacks,data:this,'label':org.apache.flex.utils.Language.closure(this.getLabel,this,'getLabel'),hasChildBranches:false,children:__localFn0__});return this._rootNode};
weavejs.data.source.GroupedDataTransform.prototype.generateHierarchyNode=function(metadata){if(!metadata)return null;metadata=this.getColumnMetadata(metadata[weavejs.data.source.GroupedDataTransform.DATA_COLUMNNAME_META]);if(!metadata)return null;return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,idFields:[weavejs.data.source.GroupedDataTransform.DATA_COLUMNNAME_META],data:metadata})};
weavejs.data.source.GroupedDataTransform.prototype.getColumnMetadata=function(dataColumnName){var column=org.apache.flex.utils.Language.as(this.dataColumns.getObject(dataColumnName),weavejs.api.data.IAttributeColumn);if(!column)return null;var metadata=weavejs.api.data.ColumnMetadata.getAllMetadata(column);metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.groupKeyType.value||this.groupByColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);metadata[weavejs.data.source.GroupedDataTransform.DATA_COLUMNNAME_META]=
dataColumnName;var aggState=this.aggregationModes.getSessionState();var aggregation=aggState?aggState[dataColumnName]:null;aggregation=aggregation||weavejs.api.data.Aggregation.DEFAULT;metadata[weavejs.api.data.ColumnMetadata.AGGREGATION]=aggregation;if(aggregation!=weavejs.api.data.Aggregation.SAME)metadata[weavejs.api.data.ColumnMetadata.TITLE]=Weave.lang('{0} ({1})',metadata[weavejs.api.data.ColumnMetadata.TITLE],aggregation);return metadata};
weavejs.data.source.GroupedDataTransform.prototype.requestColumnFromSource=function(proxyColumn){var columnName=proxyColumn.getMetadata(weavejs.data.source.GroupedDataTransform.DATA_COLUMNNAME_META);var metadata=this.getColumnMetadata(columnName);if(!metadata){proxyColumn.dataUnavailable();return}proxyColumn.setMetadata(metadata);var dataColumn=org.apache.flex.utils.Language.as(this.dataColumns.getObject(columnName),weavejs.api.data.IAttributeColumn);var aggregateColumn=org.apache.flex.utils.Language.as(proxyColumn.getInternalColumn(),
weavejs.data.source.GroupedDataTransform.AggregateColumn)||new weavejs.data.source.GroupedDataTransform.AggregateColumn(this);aggregateColumn.setup(metadata,dataColumn,this.getGroupKeys());proxyColumn.setInternalColumn(aggregateColumn)};weavejs.data.source.GroupedDataTransform.prototype._groupKeys;
weavejs.data.source.GroupedDataTransform.prototype.getGroupKeys=function(){if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.getGroupKeys,this,'getGroupKeys'),this.groupByColumn,this.groupKeyType)){this._groupKeys=[];var stringLookup={};var keyType=this.groupKeyType.value||this.groupByColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);var foreachiter0_target=this.groupByColumn.keys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];var localName;
if(this.groupByColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)==weavejs.api.data.DataType.NUMBER)localName=this.groupByColumn.getValueFromKey(key,Number);else localName=this.groupByColumn.getValueFromKey(key,String);if(!stringLookup[localName]){stringLookup[localName]=true;var groupKey=weavejs.WeaveAPI.QKeyManager.getQKey(keyType,localName);this._groupKeys.push(groupKey)}}}return this._groupKeys};
Object.defineProperties(weavejs.data.source.GroupedDataTransform.prototype,{isLocal:{get:function(){return!weavejs.data.DataSourceUtils.hasRemoteColumnDependencies(this)}},selectableAttributes:{get:function(){return(new weavejs.util.JS.Map).set('Group by',this.groupByColumn).set('Data to transform',this.dataColumns)}},initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.GroupedDataTransform,this,'initializationComplete')&&!Weave.isBusy(this.groupByColumn)&&
!Weave.isBusy(this.dataColumns)}}});weavejs.data.source.GroupedDataTransform.prototype.FLEXJS_CLASS_INFO={names:[{name:'GroupedDataTransform',qName:'weavejs.data.source.GroupedDataTransform'}],interfaces:[weavejs.api.data.ISelectableAttributes]};goog.exportSymbol('weavejs.data.source.GroupedDataTransform',weavejs.data.source.GroupedDataTransform);
weavejs.data.source.GroupedDataTransform.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'groupByColumn':{type:'DynamicColumn'},'groupKeyType':{type:'LinkableString'},'dataColumns':{type:'ILinkableHashMap'},'aggregationModes':{type:'ILinkableVariable'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.GroupedDataTransform'},'selectableAttributes':{type:'Object',declaredBy:'weavejs.data.source.GroupedDataTransform'}}},methods:function(){return{'GroupedDataTransform':{type:'',
declaredBy:'weavejs.data.source.GroupedDataTransform'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.GroupedDataTransform'}}}}};weavejs.data.source.GroupedDataTransform.AggregateColumn=function(source){weavejs.data.source.GroupedDataTransform.AggregateColumn.base(this,'constructor');Weave.linkableChild(this,source);this._groupByColumn=source.groupByColumn};goog.inherits(weavejs.data.source.GroupedDataTransform.AggregateColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype._groupByColumn;weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype._dataColumn;weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype._keys;weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype._cacheTriggerCounter=0;
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.setup=function(metadata,dataColumn,keys){if(this._dataColumn&&this._dataColumn!=dataColumn)org.apache.flex.utils.Language.as(weavejs.WeaveAPI.SessionManager,weavejs.core.SessionManager).unregisterLinkableChild(this,this._dataColumn);this._metadata=weavejs.data.column.AbstractAttributeColumn.copyValues(metadata);this._dataColumn=dataColumn&&Weave.linkableChild(this,dataColumn);this._keys=keys;this._cacheTriggerCounter=0;this.triggerCallbacks()};
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.getMetadata=function(propertyName){return weavejs.data.source.GroupedDataTransform.AggregateColumn.base(this,'getMetadata',propertyName)||(this._dataColumn?this._dataColumn.getMetadata(propertyName):null)};
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.getMetadataPropertyNames=function(){if(this._dataColumn)return weavejs.util.ArrayUtils.union(weavejs.data.source.GroupedDataTransform.AggregateColumn.base(this,'getMetadataPropertyNames'),this._dataColumn.getMetadataPropertyNames());return weavejs.data.source.GroupedDataTransform.AggregateColumn.base(this,'getMetadataPropertyNames')};
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.containsKey=function(key){return this._dataColumn&&this._dataColumn.containsKey(key)};weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.deriveStringFromNumber=function(value){return weavejs.data.ColumnUtils.deriveStringFromNumber(this._dataColumn,value)};
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.getValueFromKey=function(groupKey,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this.triggerCounter!=this._cacheTriggerCounter){this._cacheTriggerCounter=this.triggerCounter;this.dataCache=new weavejs.util.Dictionary2D}if(!dataType)dataType=Array;var value=this.dataCache.get(dataType,groupKey);if(value===undefined){value=this.getAggregateValue(groupKey,dataType);this.dataCache.set(dataType,groupKey,value===undefined?
weavejs.data.source.GroupedDataTransform.AggregateColumn.UNDEFINED:value)}else if(value===weavejs.data.source.GroupedDataTransform.AggregateColumn.UNDEFINED)value=undefined;return value};weavejs.data.source.GroupedDataTransform.AggregateColumn.UNDEFINED={};
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.getAggregateValue=function(groupKey,dataType){if(groupKey.keyType!=this.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE))return undefined;if(!dataType)dataType=Array;var tempKeys=weavejs.data.EquationColumnLib.getAssociatedKeys(this._groupByColumn,groupKey,true);var meta_dataType=this._dataColumn?this._dataColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE):null;var inputType=weavejs.api.data.DataType.getClass(meta_dataType);
if(dataType===Array)return weavejs.data.source.GroupedDataTransform.AggregateColumn.getValues(this._dataColumn,tempKeys,inputType);var meta_aggregation=this.getMetadata(weavejs.api.data.ColumnMetadata.AGGREGATION)||weavejs.api.data.Aggregation.DEFAULT;if(inputType===Number||inputType===Date){var array=org.apache.flex.utils.Language.as(this.getValueFromKey(groupKey,Array),Array);var number=weavejs.data.column.NumberColumn.aggregate(array,meta_aggregation);if(dataType===Number)return number;if(dataType===
Date)return new Date(number);if(dataType===String){if(isNaN(number)&&array&&array.length>1&&meta_aggregation==weavejs.api.data.Aggregation.SAME)return weavejs.api.data.Aggregation.AMBIGUOUS_DATA;return weavejs.data.ColumnUtils.deriveStringFromNumber(this._dataColumn,number)||weavejs.util.StandardLib.formatNumber(number)}return undefined}if(inputType===String){var values=weavejs.data.source.GroupedDataTransform.AggregateColumn.getValues(this._dataColumn,tempKeys,dataType);var string=weavejs.data.column.StringColumn.aggregate(values,
meta_aggregation);if(dataType===Number)return weavejs.util.StandardLib.asNumber(string);if(dataType===String)return string;return undefined}if(meta_dataType===weavejs.api.data.DataType.GEOMETRY)if(dataType===String)return this.containsKey(groupKey)?'Geometry('+groupKey.keyType+'#'+groupKey.localName+')':'';return undefined};
weavejs.data.source.GroupedDataTransform.AggregateColumn.getValues=function(column,keys,dataType){var values=[];if(!column)return values;var foreachiter1_target=keys;for(var foreachiter1 in foreachiter1_target){var key=foreachiter1_target[foreachiter1];if(!column.containsKey(key))continue;var value=column.getValueFromKey(key,dataType);if(org.apache.flex.utils.Language.is(value,Array))values.push.apply(values,value);else values.push(value)}return values};
Object.defineProperties(weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype,{keys:{get:function(){return this._keys}}});weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'AggregateColumn',qName:'weavejs.data.source.GroupedDataTransform.AggregateColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};goog.exportSymbol('weavejs.data.source.GroupedDataTransform.AggregateColumn',weavejs.data.source.GroupedDataTransform.AggregateColumn);
weavejs.data.source.GroupedDataTransform.AggregateColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'keys':{type:'Array',declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'}}},methods:function(){return{'AggregateColumn':{type:'',declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'},'setup':{type:'void',declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'},'getMetadata':{type:'String',
declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'},'getMetadataPropertyNames':{type:'Array',declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'},'deriveStringFromNumber':{type:'String',declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'},'getAggregateValue':{type:'*',
declaredBy:'weavejs.data.source.GroupedDataTransform.AggregateColumn'}}}}};goog.provide('weavejs.geom.KDNode');weavejs.geom.KDNode=function(){this.key=[]};weavejs.geom.KDNode.prototype.splitDimension;weavejs.geom.KDNode.prototype.location;weavejs.geom.KDNode.prototype.clearChildrenAndSetSplitDimension=function(value){value=typeof value!=='undefined'?value:0;this.left=null;this.right=null;this.splitDimension=value;this.location=this.key[this.splitDimension]};weavejs.geom.KDNode.prototype.key;weavejs.geom.KDNode.prototype.object;weavejs.geom.KDNode.prototype.left=null;
weavejs.geom.KDNode.prototype.right=null;weavejs.geom.KDNode.prototype.siblings;weavejs.geom.KDNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'KDNode',qName:'weavejs.geom.KDNode'}]};goog.exportSymbol('weavejs.geom.KDNode',weavejs.geom.KDNode);
weavejs.geom.KDNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'splitDimension':{type:'int'},'location':{type:'Number'},'key':{type:'Array'},'object':{type:'Object'},'left':{type:'KDNode'},'right':{type:'KDNode'},'siblings':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{'clearChildrenAndSetSplitDimension':{type:'void',declaredBy:'weavejs.geom.KDNode'}}}}};goog.provide('weavejs.geom.KDTree');goog.require('weavejs.geom.KDNode');weavejs.geom.KDTree=function(dimensionality){this.allNodes=[];this.balanceStack=[];this.nodeStack=[];this.dimensionality=dimensionality;if(dimensionality<=0)throw'KDTree dimensionality must be \x3e 0. (Given: '+dimensionality+')';};weavejs.geom.KDTree.prototype.dimensionality;weavejs.geom.KDTree.prototype.rootNode=null;weavejs.geom.KDTree.prototype.allNodes;weavejs.geom.KDTree.prototype.autoBalance=false;
weavejs.geom.KDTree.prototype.needsBalancing=false;weavejs.geom.KDTree.prototype.balanceStack;weavejs.geom.KDTree.prototype.LEFT_SIDE=0;weavejs.geom.KDTree.prototype.RIGHT_SIDE=1;
weavejs.geom.KDTree.prototype.balance=function(){this.needsBalancing=false;if(this.nodeCount==0)return;var params;var medianIndex,firstIndex,lastIndex;var medianNode;var nextAxis;var stackPos=0;this.balanceStack[0]={parent:null,firstIndex:0,lastIndex:this.allNodes.length-1,axis:0};while(stackPos>=0){params=org.apache.flex.utils.Language.as(this.balanceStack[stackPos],Object);this.balanceStack[stackPos]=null;stackPos--;firstIndex=params.firstIndex;lastIndex=params.lastIndex;nextAxis=params.axis;weavejs.geom.KDTree.compareNodesSortDimension=
nextAxis;medianIndex=weavejs.util.ArrayUtils.getMedianIndex(this.allNodes,weavejs.geom.KDTree.compareNodes,firstIndex,lastIndex);medianNode=this.allNodes[medianIndex];medianNode.clearChildrenAndSetSplitDimension(params.axis);if(params.parent==null)this.rootNode=medianNode;else if(params.side==this.LEFT_SIDE)org.apache.flex.utils.Language.as(params.parent,weavejs.geom.KDNode).left=medianNode;else org.apache.flex.utils.Language.as(params.parent,weavejs.geom.KDNode).right=medianNode;nextAxis=(params.axis+
1)%this.dimensionality;if(medianIndex>firstIndex)this.balanceStack[++stackPos]={parent:medianNode,side:this.LEFT_SIDE,firstIndex:firstIndex,lastIndex:medianIndex-1,axis:nextAxis};if(medianIndex<lastIndex)this.balanceStack[++stackPos]={parent:medianNode,side:this.RIGHT_SIDE,firstIndex:medianIndex+1,lastIndex:lastIndex,axis:nextAxis}}};
weavejs.geom.KDTree.prototype.insert=function(key,obj){if(key.length!=this.dimensionality)throw new Error('KDTree.insert key parameter must have same dimensionality as tree');var newNode;if(this.autoBalance){newNode=weavejs.geom.KDTree.getUnusedNode(key,obj);this.allNodes.push(newNode);this.needsBalancing=true;return newNode}if(obj==null)return null;if(this.rootNode==null){this.rootNode=weavejs.geom.KDTree.getUnusedNode(key,obj);this.allNodes.push(this.rootNode);return this.rootNode}var node=this.rootNode;
while(true)if(key[node.splitDimension]<node.location){if(node.left==null){node.left=weavejs.geom.KDTree.getUnusedNode(key,obj,(node.splitDimension+1)%this.dimensionality);this.allNodes.push(node.left);return node.left}node=node.left}else if(weavejs.util.StandardLib.compare(key,node.key)==0){if(node.siblings==null)node.siblings=[];newNode=weavejs.geom.KDTree.getUnusedNode(key,obj,node.splitDimension);node.siblings.push(newNode);return newNode}else{if(node.right==null){node.right=weavejs.geom.KDTree.getUnusedNode(key,
obj,(node.splitDimension+1)%this.dimensionality);this.allNodes.push(node.right);return node.right}node=node.right}throw'unreachable';};weavejs.geom.KDTree.prototype.remove=function(node){var index=this.allNodes.indexOf(node);if(index<0)return;this.allNodes.splice(index,1);node.object=null};
weavejs.geom.KDTree.prototype.clear=function(){this.rootNode=null;for(var i=this.allNodes.length;i--;)weavejs.geom.KDTree.saveUnusedNode(org.apache.flex.utils.Language.as(this.allNodes[i],weavejs.geom.KDNode));this.allNodes.length=0};weavejs.geom.KDTree.prototype.nodeStack;weavejs.geom.KDTree.ASCENDING='ascending';weavejs.geom.KDTree.DESCENDING='descending';
weavejs.geom.KDTree.prototype.queryRange=function(minKey,maxKey,boundaryInclusive,sortDimension,sortDirection){boundaryInclusive=typeof boundaryInclusive!=='undefined'?boundaryInclusive:true;sortDimension=typeof sortDimension!=='undefined'?sortDimension:-1;sortDirection=typeof sortDirection!=='undefined'?sortDirection:'ascending';var queryResult=new Array;if(minKey.length!=this.dimensionality||maxKey.length!=this.dimensionality)throw new Error('KDTree.queryRange parameters must have same dimensionality as tree');
if(this.needsBalancing)this.balance();var i;var parametersAreValid=true;for(i=0;i<this.dimensionality;i++)if(isNaN(minKey[i])||isNaN(maxKey[i]))parametersAreValid=false;var map_ignore=new weavejs.util.JS.Map;var resultCount=0;if(this.rootNode!=null&&!isNaN(this.rootNode.location)&&parametersAreValid){var inRange;var node,sibling,key,keyVal,dimension,location;var stackPos=0;this.nodeStack[0]=this.rootNode;while(stackPos>=0){node=this.nodeStack[stackPos];this.nodeStack[stackPos]=null;stackPos--;key=
node.key;dimension=node.splitDimension;location=node.location;if(node.object!=null&&!map_ignore.has(node.object)){inRange=true;for(i=0;i<this.dimensionality;i++){keyVal=key[i];if(boundaryInclusive==true){if(keyVal<minKey[i]||keyVal>maxKey[i]){inRange=false;break}}else if(keyVal<=minKey[i]||keyVal>=maxKey[i]){inRange=false;break}}if(inRange){if(sortDimension>=0){queryResult[resultCount++]=node;var foreachiter0_target=node.siblings;for(var foreachiter0 in foreachiter0_target){sibling=foreachiter0_target[foreachiter0];
queryResult[resultCount++]=sibling}}else{queryResult[resultCount++]=node.object;var foreachiter1_target=node.siblings;for(var foreachiter1 in foreachiter1_target){sibling=foreachiter1_target[foreachiter1];queryResult[resultCount++]=sibling.object}}map_ignore.set(node.object,true)}}if(node.left!=null&&!(minKey[dimension]>location))this.nodeStack[++stackPos]=node.left;if(node.right!=null&&!(maxKey[dimension]<location))this.nodeStack[++stackPos]=node.right}}queryResult.length=resultCount;if(sortDimension>=
0){weavejs.geom.KDTree.compareNodesSortDimension=sortDimension;weavejs.geom.KDTree.compareNodesDescending=sortDirection==weavejs.geom.KDTree.DESCENDING;weavejs.util.StandardLib.sortOn(queryResult,weavejs.geom.KDTree.getNodeSortValue,weavejs.geom.KDTree.compareNodesDescending?-1:1);i=resultCount;while(i--)queryResult[i]=org.apache.flex.utils.Language.as(queryResult[i],weavejs.geom.KDNode).object}return queryResult};weavejs.geom.KDTree.getNodeSortValue=function(node){return node.key[weavejs.geom.KDTree.compareNodesSortDimension]};
weavejs.geom.KDTree.compareNodes=function(node1,node2){var result=weavejs.util.StandardLib.numericCompare(node1.key[weavejs.geom.KDTree.compareNodesSortDimension],node2.key[weavejs.geom.KDTree.compareNodesSortDimension]);return weavejs.geom.KDTree.compareNodesDescending?-result:result};weavejs.geom.KDTree.compareNodesSortDimension=0;weavejs.geom.KDTree.compareNodesDescending=false;weavejs.geom.KDTree.unusedNodes=[];
weavejs.geom.KDTree.saveUnusedNode=function(node){var foreachiter2_target=node.siblings;for(var foreachiter2 in foreachiter2_target){var sibling=foreachiter2_target[foreachiter2];weavejs.geom.KDTree.saveUnusedNode(sibling)}node.object=null;node.left=null;node.right=null;if(node.siblings)node.siblings.length=0;weavejs.geom.KDTree.unusedNodes.push(node)};
weavejs.geom.KDTree.getUnusedNode=function(key,object,splitDimension){splitDimension=typeof splitDimension!=='undefined'?splitDimension:0;var node;if(weavejs.geom.KDTree.unusedNodes.length==0)node=new weavejs.geom.KDNode;else node=org.apache.flex.utils.Language.as(weavejs.geom.KDTree.unusedNodes.pop(),weavejs.geom.KDNode);var i=node.key.length=key.length;while(i--)node.key[i]=key[i];node.object=object;node.clearChildrenAndSetSplitDimension(splitDimension);return node};
Object.defineProperties(weavejs.geom.KDTree.prototype,{nodeCount:{get:function(){return this.allNodes.length}}});weavejs.geom.KDTree.prototype.FLEXJS_CLASS_INFO={names:[{name:'KDTree',qName:'weavejs.geom.KDTree'}]};goog.exportSymbol('weavejs.geom.KDTree',weavejs.geom.KDTree);
weavejs.geom.KDTree.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'autoBalance':{type:'Boolean'}}},accessors:function(){return{'nodeCount':{type:'int',declaredBy:'weavejs.geom.KDTree'}}},methods:function(){return{'KDTree':{type:'',declaredBy:'weavejs.geom.KDTree'},'balance':{type:'void',declaredBy:'weavejs.geom.KDTree'},'insert':{type:'KDNode',declaredBy:'weavejs.geom.KDTree'},'remove':{type:'void',declaredBy:'weavejs.geom.KDTree'},'clear':{type:'void',declaredBy:'weavejs.geom.KDTree'},
'queryRange':{type:'Array',declaredBy:'weavejs.geom.KDTree'}}}}};goog.provide('weavejs.geom.TileDescriptor');weavejs.geom.TileDescriptor=function(kdKey,tileID){this.kdKey=kdKey;this.tileID=tileID};weavejs.geom.TileDescriptor.prototype.kdKey;weavejs.geom.TileDescriptor.prototype.tileID;weavejs.geom.TileDescriptor.prototype.exclude=false;weavejs.geom.TileDescriptor.prototype.FLEXJS_CLASS_INFO={names:[{name:'TileDescriptor',qName:'weavejs.geom.TileDescriptor'}]};goog.exportSymbol('weavejs.geom.TileDescriptor',weavejs.geom.TileDescriptor);
weavejs.geom.TileDescriptor.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'kdKey':{type:'Array'},'tileID':{type:'int'},'exclude':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{'TileDescriptor':{type:'',declaredBy:'weavejs.geom.TileDescriptor'}}}}};goog.provide('weavejs.geom.GeometryStreamDecoder');goog.require('weavejs.geom.KDTree');goog.require('weavejs.geom.TileDescriptor');goog.require('weavejs.api.core.ILinkableObject');
weavejs.geom.GeometryStreamDecoder=function(){var self=this;this.geometries=[];this.collectiveBounds=new weavejs.geom.Bounds2D;this.keys=[];this.metadataCallbacks=Weave.linkableChild(this,weavejs.core.CallbackCollection);this.map_key_geoms=new weavejs.util.JS.Map;this.metadataTiles=Weave.disposableChild(this,new weavejs.geom.KDTree(this.KD_DIMENSIONALITY));this.geometryTiles=Weave.disposableChild(this,new weavejs.geom.KDTree(this.KD_DIMENSIONALITY));this.tileLookup=new weavejs.util.Dictionary2D;this.minKDKey=
[-Infinity,-Infinity,-Infinity,-Infinity,-Infinity];this.maxKDKey=[Infinity,Infinity,Infinity,Infinity,Infinity];this._currentGeometryType=weavejs.geom.GeometryType.POLYGON;var __localFn0__=function(){weavejs.util.JS.log(self.totalGeomTiles,'geomTiles,',self.totalVertices,'vertices')};if(weavejs.geom.GeometryStreamDecoder.debug)Weave.getCallbacks(this).addImmediateCallback(this,__localFn0__)};weavejs.geom.GeometryStreamDecoder.debug=false;
weavejs.geom.GeometryStreamDecoder.prototype.totalGeomTiles=0;weavejs.geom.GeometryStreamDecoder.prototype.totalVertices=0;weavejs.geom.GeometryStreamDecoder.prototype.streamVersion=0;weavejs.geom.GeometryStreamDecoder.prototype.geometries;weavejs.geom.GeometryStreamDecoder.prototype.collectiveBounds;weavejs.geom.GeometryStreamDecoder.prototype._keyType=null;weavejs.geom.GeometryStreamDecoder.prototype.keys;weavejs.geom.GeometryStreamDecoder.prototype.metadataCallbacks;weavejs.geom.GeometryStreamDecoder.prototype.map_key_geoms;
weavejs.geom.GeometryStreamDecoder.prototype.getGeometriesFromKey=function(geometryKey){return this.map_key_geoms.get(geometryKey)};weavejs.geom.GeometryStreamDecoder.prototype.metadataTiles;weavejs.geom.GeometryStreamDecoder.prototype.geometryTiles;weavejs.geom.GeometryStreamDecoder.prototype.tileLookup;weavejs.geom.GeometryStreamDecoder.prototype.XMIN_INDEX=0;weavejs.geom.GeometryStreamDecoder.prototype.YMIN_INDEX=1;weavejs.geom.GeometryStreamDecoder.prototype.XMAX_INDEX=2;
weavejs.geom.GeometryStreamDecoder.prototype.YMAX_INDEX=3;weavejs.geom.GeometryStreamDecoder.prototype.IMAX_INDEX=4;weavejs.geom.GeometryStreamDecoder.prototype.KD_DIMENSIONALITY=5;weavejs.geom.GeometryStreamDecoder.prototype.minKDKey;weavejs.geom.GeometryStreamDecoder.prototype.maxKDKey;weavejs.geom.GeometryStreamDecoder.prototype.getRequiredMetadataTileIDs=function(bounds,minImportance,removeTilesFromList){return this.getRequiredTileIDs(this.metadataTiles,bounds,minImportance,removeTilesFromList)};
weavejs.geom.GeometryStreamDecoder.prototype.getRequiredGeometryTileIDs=function(bounds,minImportance,removeTilesFromList){return this.getRequiredTileIDs(this.geometryTiles,bounds,minImportance,removeTilesFromList)};weavejs.geom.GeometryStreamDecoder.prototype._filterTiles=function(tile,_){_=Array.prototype.slice.call(arguments,1);return!tile.exclude};weavejs.geom.GeometryStreamDecoder.prototype._tileToId=function(tile,_){_=Array.prototype.slice.call(arguments,1);return tile.tileID};
weavejs.geom.GeometryStreamDecoder.prototype._getMaxImportance=function(tile){return tile.kdKey[this.IMAX_INDEX]};
weavejs.geom.GeometryStreamDecoder.prototype.getRequiredTileIDs=function(tileTree,bounds,minImportance,removeTilesFromList){this.minKDKey[this.IMAX_INDEX]=minImportance;this.minKDKey[this.XMAX_INDEX]=bounds.getXNumericMin();this.minKDKey[this.YMAX_INDEX]=bounds.getYNumericMin();this.maxKDKey[this.XMIN_INDEX]=bounds.getXNumericMax();this.maxKDKey[this.YMIN_INDEX]=bounds.getYNumericMax();var tiles=tileTree.queryRange(this.minKDKey,this.maxKDKey,true);tiles=tiles.filter(org.apache.flex.utils.Language.closure(this._filterTiles,
this,'_filterTiles'));weavejs.util.StandardLib.sortOn(tiles,org.apache.flex.utils.Language.closure(this._getMaxImportance,this,'_getMaxImportance'),-1);if(removeTilesFromList)var foreachiter0_target=tiles;for(var foreachiter0 in foreachiter0_target){var tile=foreachiter0_target[foreachiter0];tile.exclude=true}return tiles.map(org.apache.flex.utils.Language.closure(this._tileToId,this,'_tileToId'))};
weavejs.geom.GeometryStreamDecoder.prototype.decodeMetadataTileList=function(stream){this.decodeTileList(this.metadataTiles,stream)};weavejs.geom.GeometryStreamDecoder.prototype.decodeGeometryTileList=function(stream){this.decodeTileList(this.geometryTiles,stream)};
weavejs.geom.GeometryStreamDecoder.prototype.decodeTileList=function(tileTree,stream){var tiles=[];var tileID=0;while(stream.position<stream.length){var kdKey=new Array(this.KD_DIMENSIONALITY);kdKey[this.XMIN_INDEX]=stream.readDouble();kdKey[this.YMIN_INDEX]=stream.readDouble();kdKey[this.XMAX_INDEX]=stream.readDouble();kdKey[this.YMAX_INDEX]=stream.readDouble();kdKey[this.IMAX_INDEX]=stream.readFloat();if(stream.position>stream.length)throw new Error('Unexpected EOF in stream');if(weavejs.geom.GeometryStreamDecoder.debug)weavejs.util.JS.log((tileTree==
this.metadataTiles?'metadata tile':'geometry tile')+' '+tileID+'['+kdKey+']');tiles.push(new weavejs.geom.TileDescriptor(kdKey,tileID));this.collectiveBounds.includeCoords(kdKey[this.XMIN_INDEX],kdKey[this.YMIN_INDEX]);this.collectiveBounds.includeCoords(kdKey[this.XMAX_INDEX],kdKey[this.YMAX_INDEX]);tileID++}weavejs.util.ArrayUtils.randomSort(tiles);var foreachiter1_target=tiles;for(var foreachiter1 in foreachiter1_target){var tile=foreachiter1_target[foreachiter1];tileTree.insert(tile.kdKey,tile);
this.tileLookup.set(tileTree,tile.tileID,tile)}if(!Weave.isBusy(this.metadataCallbacks))this.metadataCallbacks.triggerCallbacks()};weavejs.geom.GeometryStreamDecoder.prototype._projectionWKT='';weavejs.geom.GeometryStreamDecoder.prototype._currentGeometryType;
weavejs.geom.GeometryStreamDecoder.prototype.setGeometryType=function(value){if(this._currentGeometryType==value)return;this._currentGeometryType=value;var geom;var foreachiter2_target=this.geometries;for(var foreachiter2 in foreachiter2_target){geom=foreachiter2_target[foreachiter2];if(geom!=null)geom.geomType=value}};
weavejs.geom.GeometryStreamDecoder.prototype.decodeMetadataStream=function(stream){var self=this;var __localFn0__=function(stopTime){var flag;var byte;var vertexID;var geometry;var geometryID;var key;while(stream.position<stream.length){flag=stream.readInt();if(flag<0){var tileID=-1-flag;var tile=self.tileLookup.get(self.metadataTiles,tileID);if(tile){tile.exclude=true;flag=stream.readInt();if(flag<0)self.streamVersion=-flag;else stream.position-=4;if(weavejs.geom.GeometryStreamDecoder.debug)weavejs.util.JS.log('got metadata tileID\x3d'+
tileID+'; '+stream.position+'/'+stream.length)}else{weavejs.util.JS.error('ERROR! decodeMetadataStream(): tileID '+tileID+' is out of range');break}if(weavejs.util.JS.now()>stopTime)return stream.position/stream.length}else{geometryID=flag;key=weavejs.WeaveAPI.QKeyManager.getQKey(self._keyType,self.readString(stream));geometry=org.apache.flex.utils.Language.as(self.geometries[geometryID],weavejs.geom.GeneralizedGeometry);if(!geometry)self.geometries[geometryID]=geometry=new weavejs.geom.GeneralizedGeometry(self._currentGeometryType);
var geomsForKey=self.map_key_geoms.get(key);if(!geomsForKey){self.keys.push(key);self.map_key_geoms.set(key,geomsForKey=[])}geomsForKey.push(geometry);geometry.bounds.setBounds(stream.readDouble(),stream.readDouble(),stream.readDouble(),stream.readDouble());var prev=0;while(stream.position<stream.length){vertexID=stream.readInt();if(vertexID<0)break;geometry.addPartMarker(prev,vertexID);prev=vertexID}if(prev>0)geometry.addPartMarker(prev,Number.MAX_VALUE);if(vertexID<-1){self.readShapeType(stream);
if(vertexID<-2)self._projectionWKT=self.readString(stream)}}}return 1};var task=__localFn0__;weavejs.WeaveAPI.Scheduler.startTask(this.metadataCallbacks,task,weavejs.WeaveAPI.TASK_PRIORITY_HIGH)};
weavejs.geom.GeometryStreamDecoder.prototype.readShapeType=function(stream){var type=stream.readInt();switch(type){case 1:case 21:case 8:case 28:this.setGeometryType(weavejs.geom.GeometryType.POINT);break;case 3:case 23:this.setGeometryType(weavejs.geom.GeometryType.LINE);break;case 5:case 25:this.setGeometryType(weavejs.geom.GeometryType.POLYGON);break;default:}};
weavejs.geom.GeometryStreamDecoder.prototype.readString=function(stream){var start=stream.position;while(stream.position<stream.length){var byte=stream.readByte();if(byte==0)break}var end=stream.position-1;stream.position=start;var str=stream.readUTFBytes(end-start);stream.position=end+1;return str};
weavejs.geom.GeometryStreamDecoder.prototype.decodeGeometryStream=function(stream){var self=this;var __localFn0__=function(stopTime){var i;var flag;var geometryID;var vertexID;var x,y,importance=0;while(stream.position<stream.length){flag=stream.readInt();if(flag<0){self.totalGeomTiles++;var tileID=-1-flag;var tile=self.tileLookup.get(self.geometryTiles,tileID);if(tile){tile.exclude=true;flag=stream.readInt();if(flag<0)self.streamVersion=-flag;else stream.position-=4;if(weavejs.geom.GeometryStreamDecoder.debug)weavejs.util.JS.log('got geometry tileID\x3d'+
tileID+'; '+stream.length)}else{weavejs.util.JS.error('ERROR! decodeGeometryStream(): tileID '+tileID+' is out of range');break}if(weavejs.util.JS.now()>stopTime)return stream.position/stream.length}else{self.totalVertices++;geometryID=flag;weavejs.geom.GeometryStreamDecoder.geometryIDArray.length=0;weavejs.geom.GeometryStreamDecoder.vertexIDArray.length=0;weavejs.geom.GeometryStreamDecoder.geometryIDArray.push(geometryID);while(stream.position<stream.length){vertexID=stream.readInt();if(vertexID<
0){vertexID=-1-vertexID;weavejs.geom.GeometryStreamDecoder.vertexIDArray.push(vertexID);break}weavejs.geom.GeometryStreamDecoder.vertexIDArray.push(vertexID);geometryID=stream.readInt();if(geometryID==-2)weavejs.geom.GeometryStreamDecoder.vertexIDArray.push(stream.readInt());if(geometryID<0)break;weavejs.geom.GeometryStreamDecoder.geometryIDArray.push(geometryID)}if(geometryID<0){importance=geometryID;if(weavejs.geom.GeometryStreamDecoder.vertexIDArray.length==1)weavejs.geom.GeometryStreamDecoder.vertexIDArray.unshift(0)}else{x=
stream.readDouble();y=stream.readDouble();importance=stream.readFloat()}for(i=weavejs.geom.GeometryStreamDecoder.geometryIDArray.length;i--;){geometryID=weavejs.geom.GeometryStreamDecoder.geometryIDArray[i];vertexID=weavejs.geom.GeometryStreamDecoder.vertexIDArray[i];var geometry=org.apache.flex.utils.Language.as(self.geometries[geometryID],weavejs.geom.GeneralizedGeometry);if(!geometry)self.geometries[geometryID]=geometry=new weavejs.geom.GeneralizedGeometry(self._currentGeometryType);if(importance<
0)geometry.addPartMarker(vertexID,weavejs.geom.GeometryStreamDecoder.vertexIDArray[i+1]);else geometry.addPoint(vertexID,importance,x,y)}}}return 1};var task=__localFn0__;weavejs.WeaveAPI.Scheduler.startTask(this,task,weavejs.WeaveAPI.TASK_PRIORITY_NORMAL)};weavejs.geom.GeometryStreamDecoder.geometryIDArray=[];weavejs.geom.GeometryStreamDecoder.vertexIDArray=[];Object.defineProperties(weavejs.geom.GeometryStreamDecoder.prototype,{keyType:{set:function(value){this._keyType=value}}});
weavejs.geom.GeometryStreamDecoder.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeometryStreamDecoder',qName:'weavejs.geom.GeometryStreamDecoder'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.geom.GeometryStreamDecoder',weavejs.geom.GeometryStreamDecoder);
weavejs.geom.GeometryStreamDecoder.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'totalGeomTiles':{type:'int'},'totalVertices':{type:'int'},'geometries':{type:'Array'},'collectiveBounds':{type:'Bounds2D'},'keys':{type:'Array'},'metadataCallbacks':{type:'ICallbackCollection'}}},accessors:function(){return{'keyType':{type:'String',declaredBy:'weavejs.geom.GeometryStreamDecoder'}}},methods:function(){return{'GeometryStreamDecoder':{type:'',declaredBy:'weavejs.geom.GeometryStreamDecoder'},
'getGeometriesFromKey':{type:'Array',declaredBy:'weavejs.geom.GeometryStreamDecoder'},'getRequiredMetadataTileIDs':{type:'Array',declaredBy:'weavejs.geom.GeometryStreamDecoder'},'getRequiredGeometryTileIDs':{type:'Array',declaredBy:'weavejs.geom.GeometryStreamDecoder'},'decodeMetadataTileList':{type:'void',declaredBy:'weavejs.geom.GeometryStreamDecoder'},'decodeGeometryTileList':{type:'void',declaredBy:'weavejs.geom.GeometryStreamDecoder'},'decodeMetadataStream':{type:'void',declaredBy:'weavejs.geom.GeometryStreamDecoder'},
'decodeGeometryStream':{type:'void',declaredBy:'weavejs.geom.GeometryStreamDecoder'}}}}};goog.provide('weavejs.data.column.StreamedGeometryColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.geom.GeometryStreamDecoder');goog.require('weavejs.geom.KDTree');
weavejs.data.column.StreamedGeometryColumn=function(metadataTileDescriptors,geometryTileDescriptors,tileService,metadata){var self=this;metadata=typeof metadata!=='undefined'?metadata:null;this._geometryStreamDecoder=Weave.linkableChild(this,weavejs.geom.GeometryStreamDecoder);var __localFn0__=function(){if(weavejs.data.column.StreamedGeometryColumn.debug)weavejs.util.DebugUtils.debugTrace(self,'boundingBoxCallbacks',self.boundingBoxCallbacks,self.keys.length,'keys')};var __localFn1__=function(){if(weavejs.data.column.StreamedGeometryColumn.debug)weavejs.util.DebugUtils.debugTrace(self,
self.keys.length,'keys')};weavejs.data.column.StreamedGeometryColumn.base(this,'constructor',metadata);this._tileService=Weave.linkableChild(this,tileService);Weave.getCallbacks(this._tileService).addDisposeCallback(this,org.apache.flex.utils.Language.closure(this.handleTileServiceDispose,this,'handleTileServiceDispose'));this._geometryStreamDecoder.keyType=metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE];weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._geometryStreamDecoder.decodeMetadataTileList,
this._geometryStreamDecoder,'decodeMetadataTileList'),[metadataTileDescriptors]);weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._geometryStreamDecoder.decodeGeometryTileList,this._geometryStreamDecoder,'decodeGeometryTileList'),[geometryTileDescriptors]);var self=this;this.boundingBoxCallbacks.addImmediateCallback(this,__localFn0__);this.addImmediateCallback(this,__localFn1__)};goog.inherits(weavejs.data.column.StreamedGeometryColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.StreamedGeometryColumn.debug=false;weavejs.data.column.StreamedGeometryColumn.prototype.handleTileServiceDispose=function(){if(weavejs.data.column.StreamedGeometryColumn.debug)weavejs.util.DebugUtils.debugTrace(this,'tile service disposed');Weave.dispose(this)};weavejs.data.column.StreamedGeometryColumn.prototype.getMetadata=function(propertyName){return weavejs.data.column.StreamedGeometryColumn.base(this,'getMetadata',propertyName)};
weavejs.data.column.StreamedGeometryColumn.prototype.containsKey=function(key){return this._geometryStreamDecoder.getGeometriesFromKey(key)!=null};
weavejs.data.column.StreamedGeometryColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var value=this._geometryStreamDecoder.getGeometriesFromKey(key);if(dataType==Boolean)value=org.apache.flex.utils.Language.is(value,Array);else if(dataType==Number){var sum=org.apache.flex.utils.Language.is(value,Array)?0:NaN;var foreachiter0_target=value;for(var foreachiter0 in foreachiter0_target){var geom=foreachiter0_target[foreachiter0];sum+=geom.bounds.getArea()}value=
sum}else if(dataType==String)value=value?'Geometry('+key.keyType+'#'+key.localName+')':undefined;return value};weavejs.data.column.StreamedGeometryColumn.prototype.isStillDownloading=function(){return this._metadataStreamDownloadCounter>0||this._geometryStreamDownloadCounter>0};weavejs.data.column.StreamedGeometryColumn.prototype._tileService;weavejs.data.column.StreamedGeometryColumn.prototype._geometryStreamDecoder;
weavejs.data.column.StreamedGeometryColumn.prototype._geometryStreamDownloadCounter=0;weavejs.data.column.StreamedGeometryColumn.prototype._metadataStreamDownloadCounter=0;weavejs.data.column.StreamedGeometryColumn.prototype.metadataTilesPerQuery=200;weavejs.data.column.StreamedGeometryColumn.prototype.geometryTilesPerQuery=200;
weavejs.data.column.StreamedGeometryColumn.prototype.requestAllMetadata=function(){var mode=weavejs.data.column.StreamedGeometryColumn.metadataRequestMode;weavejs.data.column.StreamedGeometryColumn.metadataRequestMode=weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_ALL;this.requestGeometryDetail(this.collectiveBounds,Infinity);weavejs.data.column.StreamedGeometryColumn.metadataRequestMode=mode};
weavejs.data.column.StreamedGeometryColumn.prototype.requestGeometryDetail=function(dataBounds,lowestImportance){if(dataBounds==null||isNaN(lowestImportance))return;if(dataBounds.isEmpty())return;var metaRequestBounds;var metaRequestImportance;switch(weavejs.data.column.StreamedGeometryColumn.metadataRequestMode){case weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_ALL:metaRequestBounds=this._geometryStreamDecoder.collectiveBounds;metaRequestImportance=0;break;case weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_XY:metaRequestBounds=
dataBounds;metaRequestImportance=0;break;case weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_XYZ:metaRequestBounds=dataBounds;metaRequestImportance=lowestImportance;break}var metadataTileIDs=this._geometryStreamDecoder.getRequiredMetadataTileIDs(metaRequestBounds,metaRequestImportance,true);var geometryTileIDs=this._geometryStreamDecoder.getRequiredGeometryTileIDs(dataBounds,lowestImportance,true);if(weavejs.data.column.StreamedGeometryColumn.debug){if(metadataTileIDs.length>0)weavejs.util.JS.log(this,
'requesting metadata tiles: '+metadataTileIDs);if(geometryTileIDs.length>0)weavejs.util.JS.log(this,'requesting geometry tiles: '+geometryTileIDs)}var query;while(metadataTileIDs.length>0){query=this._tileService.getMetadataTiles(metadataTileIDs.splice(0,this.metadataTilesPerQuery));query.then(org.apache.flex.utils.Language.closure(this.handleMetadataStreamDownload,this,'handleMetadataStreamDownload'),org.apache.flex.utils.Language.closure(this.handleMetadataDownloadFault,this,'handleMetadataDownloadFault'));
this._metadataStreamDownloadCounter++}while(geometryTileIDs.length>0){query=this._tileService.getGeometryTiles(geometryTileIDs.splice(0,this.geometryTilesPerQuery));query.then(org.apache.flex.utils.Language.closure(this.handleGeometryStreamDownload,this,'handleGeometryStreamDownload'),org.apache.flex.utils.Language.closure(this.handleGeometryDownloadFault,this,'handleGeometryDownloadFault'));this._geometryStreamDownloadCounter++}};
weavejs.data.column.StreamedGeometryColumn.prototype.handleMetadataDownloadFault=function(error){if(!this.wasDisposed)weavejs.util.JS.error(error);this._metadataStreamDownloadCounter--};weavejs.data.column.StreamedGeometryColumn.prototype.handleGeometryDownloadFault=function(error){if(!this.wasDisposed)weavejs.util.JS.error(error);this._geometryStreamDownloadCounter--};weavejs.data.column.StreamedGeometryColumn._tempDataBounds;weavejs.data.column.StreamedGeometryColumn._tempScreenBounds;
weavejs.data.column.StreamedGeometryColumn.prototype.requestGeometryDetailForZoomBounds=function(zoomBounds){if(!weavejs.data.column.StreamedGeometryColumn._tempDataBounds)weavejs.data.column.StreamedGeometryColumn._tempDataBounds=new weavejs.geom.Bounds2D;if(!weavejs.data.column.StreamedGeometryColumn._tempScreenBounds)weavejs.data.column.StreamedGeometryColumn._tempScreenBounds=new weavejs.geom.Bounds2D;zoomBounds.getDataBounds(weavejs.data.column.StreamedGeometryColumn._tempDataBounds);zoomBounds.getScreenBounds(weavejs.data.column.StreamedGeometryColumn._tempScreenBounds);
var minImportance=weavejs.data.column.StreamedGeometryColumn._tempDataBounds.getArea()/weavejs.data.column.StreamedGeometryColumn._tempScreenBounds.getArea();var requestedDataBounds=weavejs.data.column.StreamedGeometryColumn._tempDataBounds;var requestedMinImportance=minImportance;if(requestedDataBounds.isUndefined()){requestedDataBounds=this.collectiveBounds;requestedMinImportance=requestedDataBounds.getArea()/weavejs.data.column.StreamedGeometryColumn._tempScreenBounds.getArea()}if(!requestedDataBounds.isUndefined())this.requestGeometryDetail(requestedDataBounds,
requestedMinImportance)};weavejs.data.column.StreamedGeometryColumn.prototype.reportNullResult=function(token){weavejs.util.JS.error('Did not receive any data from service for geometry column.',token)};weavejs.data.column.StreamedGeometryColumn.prototype._totalDownloadedSize=0;
weavejs.data.column.StreamedGeometryColumn.prototype.handleMetadataStreamDownload=function(result){this._metadataStreamDownloadCounter--;if(result==null){this.reportNullResult(this);return}this._totalDownloadedSize+=result.length;this._geometryStreamDecoder.decodeMetadataStream(result)};
weavejs.data.column.StreamedGeometryColumn.prototype.handleGeometryStreamDownload=function(result){this._geometryStreamDownloadCounter--;if(result==null){this.reportNullResult(this);return}this._totalDownloadedSize+=result.length;this._geometryStreamDecoder.decodeGeometryStream(result)};weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_ALL='all';weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_XY='xy';
weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_XYZ='xyz';weavejs.data.column.StreamedGeometryColumn.metadataRequestMode=weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_XYZ;weavejs.data.column.StreamedGeometryColumn.geometryMinimumScreenArea=1;
weavejs.data.column.StreamedGeometryColumn.test_kdtree=function(weave,iterations){iterations=typeof iterations!=='undefined'?iterations:10;var cols=weavejs.WeaveAPI.SessionManager.getLinkableDescendants(weave.root,weavejs.data.column.StreamedGeometryColumn);var foreachiter1_target=cols;for(var foreachiter1 in foreachiter1_target){var sgc=foreachiter1_target[foreachiter1];return sgc.test_kdtree(iterations)}return'No StreamedGeometryColumn to test'};
weavejs.data.column.StreamedGeometryColumn.prototype.test_kdtree=function(iterations){iterations=typeof iterations!=='undefined'?iterations:10;var todo=[];var foreachiter2_target=this._geometryStreamDecoder.geometries;for(var foreachiter2 in foreachiter2_target){var geom=foreachiter2_target[foreachiter2];var bounds=org.apache.flex.utils.Language.as(geom.bounds,weavejs.geom.Bounds2D);var key=[bounds.getXNumericMin(),bounds.getYNumericMin(),bounds.getXNumericMax(),bounds.getYNumericMax(),bounds.getArea()];
todo.push([key,geom])}var results=[];for(var i=0;i<iterations;i++){weavejs.util.ArrayUtils.randomSort(todo);var t=weavejs.util.JS.now();var kdtree=new weavejs.geom.KDTree(5);var foreachiter3_target=todo;for(var foreachiter3 in foreachiter3_target){var params=foreachiter3_target[foreachiter3];kdtree.insert(params[0],params[1])}t=weavejs.util.JS.now()-t;Weave.dispose(kdtree);results.push(t)}return{node_count:todo.length,times_in_ms:results.join(', '),time_mean_ms:weavejs.util.StandardLib.mean(results),
time_min_ms:Math.min.apply(null,results),time_max_ms:Math.max.apply(null,results)}};Object.defineProperties(weavejs.data.column.StreamedGeometryColumn.prototype,{boundingBoxCallbacks:{get:function(){return this._geometryStreamDecoder.metadataCallbacks}},keys:{get:function(){return this._geometryStreamDecoder.keys}},collectiveBounds:{get:function(){return this._geometryStreamDecoder.collectiveBounds}}});
Object.defineProperties(weavejs.data.column.StreamedGeometryColumn,{metadataRequestModeEnum:{get:function(){return[weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_ALL,weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_XY,weavejs.data.column.StreamedGeometryColumn.METADATA_REQUEST_MODE_XYZ]}}});weavejs.data.column.StreamedGeometryColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'StreamedGeometryColumn',qName:'weavejs.data.column.StreamedGeometryColumn'}]};
goog.exportSymbol('weavejs.data.column.StreamedGeometryColumn',weavejs.data.column.StreamedGeometryColumn);
weavejs.data.column.StreamedGeometryColumn.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'metadataTilesPerQuery':{type:'int'},'geometryTilesPerQuery':{type:'int'}}},accessors:function(){return{'boundingBoxCallbacks':{type:'ICallbackCollection',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'keys':{type:'Array',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'collectiveBounds':{type:'Bounds2D',declaredBy:'weavejs.data.column.StreamedGeometryColumn'}}},
methods:function(){return{'StreamedGeometryColumn':{type:'',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'getMetadata':{type:'String',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'containsKey':{type:'Boolean',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'getValueFromKey':{type:'*',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'isStillDownloading':{type:'Boolean',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'requestAllMetadata':{type:'void',
declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'requestGeometryDetail':{type:'void',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'requestGeometryDetailForZoomBounds':{type:'void',declaredBy:'weavejs.data.column.StreamedGeometryColumn'},'test_kdtree':{type:'Object',declaredBy:'weavejs.data.column.StreamedGeometryColumn'}}}}};goog.provide('weavejs.api.net.beans.EntityMetadata');weavejs.api.net.beans.EntityMetadata=function(){this.privateMetadata={};this.publicMetadata={}};
weavejs.api.net.beans.EntityMetadata.getSuggestedPublicPropertyNames=function(){return[weavejs.api.data.ColumnMetadata.TITLE,weavejs.api.data.ColumnMetadata.NUMBER,weavejs.api.data.ColumnMetadata.STRING,weavejs.api.data.ColumnMetadata.KEY_TYPE,weavejs.api.data.ColumnMetadata.DATA_TYPE,weavejs.api.data.ColumnMetadata.PROJECTION,weavejs.api.data.ColumnMetadata.AGGREGATION,weavejs.api.data.ColumnMetadata.DATE_FORMAT,weavejs.api.data.ColumnMetadata.DATE_DISPLAY_FORMAT,weavejs.api.data.ColumnMetadata.OVERRIDE_BINS,
weavejs.api.data.ColumnMetadata.MIN,weavejs.api.data.ColumnMetadata.MAX,'year']};weavejs.api.net.beans.EntityMetadata.getSuggestedPrivatePropertyNames=function(){return['connection','sqlQuery','sqlParams','sqlTablePrefix','importMethod','fileName','keyColumn','sqlSchema','sqlTable','sqlKeyColumn','sqlColumn']};weavejs.api.net.beans.EntityMetadata.prototype.privateMetadata;weavejs.api.net.beans.EntityMetadata.prototype.publicMetadata;
weavejs.api.net.beans.EntityMetadata.prototype.objToStr=function(obj){var str='';for(var name in obj){if(str)str+='; ';str+=name+': '+obj[name]}return'{'+str+'}'};weavejs.api.net.beans.EntityMetadata.prototype.toString=function(){return this.objToStr({'publicMetadata':this.objToStr(this.publicMetadata),'privateMetadata':this.objToStr(this.privateMetadata)})};weavejs.api.net.beans.EntityMetadata.prototype.FLEXJS_CLASS_INFO={names:[{name:'EntityMetadata',qName:'weavejs.api.net.beans.EntityMetadata'}]};
goog.exportSymbol('weavejs.api.net.beans.EntityMetadata',weavejs.api.net.beans.EntityMetadata);weavejs.api.net.beans.EntityMetadata.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'privateMetadata':{type:'Object'},'publicMetadata':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'toString':{type:'String',declaredBy:'weavejs.api.net.beans.EntityMetadata'}}}}};goog.provide('weavejs.api.net.beans.Entity');goog.require('weavejs.api.net.beans.EntityMetadata');weavejs.api.net.beans.Entity=function(info){weavejs.api.net.beans.Entity.base(this,'constructor');info=typeof info!=='undefined'?info:null;this.id=-1;if(info){this.id=info.id;this.publicMetadata[weavejs.api.data.ColumnMetadata.TITLE]=info.title;this.publicMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE]=info.entityType}};goog.inherits(weavejs.api.net.beans.Entity,weavejs.api.net.beans.EntityMetadata);
weavejs.api.net.beans.Entity.prototype.id;weavejs.api.net.beans.Entity.prototype.parentIds;weavejs.api.net.beans.Entity.prototype.childIds;weavejs.api.net.beans.Entity.prototype.hasChildBranches;weavejs.api.net.beans.Entity.prototype._hasParent;weavejs.api.net.beans.Entity.prototype._hasChild;weavejs.api.net.beans.Entity.prototype.reset=function(){this.id=-1;this.parentIds=null;this.childIds=null;this._hasParent=null;this._hasChild=null;this.publicMetadata={};this.privateMetadata={}};
weavejs.api.net.beans.Entity.prototype.getEntityType=function(){return this.publicMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE]};weavejs.api.net.beans.Entity.prototype.hasParent=function(parentId){if(!this.parentIds)return false;if(!this._hasParent){this._hasParent={};var foreachiter0_target=this.parentIds;for(var foreachiter0 in foreachiter0_target){var pid=foreachiter0_target[foreachiter0];this._hasParent[pid]=true}}return this._hasParent[parentId]};
weavejs.api.net.beans.Entity.prototype.hasChild=function(childId){if(!this.childIds)return false;if(!this._hasChild){this._hasChild={};var foreachiter1_target=this.childIds;for(var foreachiter1 in foreachiter1_target){var cid=foreachiter1_target[foreachiter1];this._hasChild[cid]=true}}return this._hasChild[childId]};Object.defineProperties(weavejs.api.net.beans.Entity.prototype,{initialized:{get:function(){return this.id!=-1&&this.parentIds&&this.childIds}}});
weavejs.api.net.beans.Entity.prototype.FLEXJS_CLASS_INFO={names:[{name:'Entity',qName:'weavejs.api.net.beans.Entity'}]};goog.exportSymbol('weavejs.api.net.beans.Entity',weavejs.api.net.beans.Entity);
weavejs.api.net.beans.Entity.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'id':{type:'int'},'parentIds':{type:'Array'},'childIds':{type:'Array'},'hasChildBranches':{type:'Boolean'}}},accessors:function(){return{'initialized':{type:'Boolean',declaredBy:'weavejs.api.net.beans.Entity'}}},methods:function(){return{'Entity':{type:'',declaredBy:'weavejs.api.net.beans.Entity'},'reset':{type:'void',declaredBy:'weavejs.api.net.beans.Entity'},'getEntityType':{type:'String',
declaredBy:'weavejs.api.net.beans.Entity'},'hasParent':{type:'Boolean',declaredBy:'weavejs.api.net.beans.Entity'},'hasChild':{type:'Boolean',declaredBy:'weavejs.api.net.beans.Entity'}}}}};goog.provide('weavejs.api.data.IWeaveTreeNodeWithEditableChildren');goog.require('weavejs.api.data.IWeaveTreeNode');weavejs.api.data.IWeaveTreeNodeWithEditableChildren=function(){};weavejs.api.data.IWeaveTreeNodeWithEditableChildren.prototype.addChildAt=function(newChild,index){};weavejs.api.data.IWeaveTreeNodeWithEditableChildren.prototype.removeChild=function(child){};
weavejs.api.data.IWeaveTreeNodeWithEditableChildren.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveTreeNodeWithEditableChildren',qName:'weavejs.api.data.IWeaveTreeNodeWithEditableChildren'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};
weavejs.api.data.IWeaveTreeNodeWithEditableChildren.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'addChildAt':{type:'Boolean',declaredBy:'weavejs.api.data.IWeaveTreeNodeWithEditableChildren'},'removeChild':{type:'Boolean',declaredBy:'weavejs.api.data.IWeaveTreeNodeWithEditableChildren'}}}}};goog.provide('weavejs.data.hierarchy.EntityNode');goog.require('weavejs.api.net.beans.Entity');goog.require('weavejs.api.data.IColumnReference');goog.require('weavejs.api.data.IWeaveTreeNodeWithEditableChildren');goog.require('weavejs.api.data.IWeaveTreeNodeWithPathFinding');
weavejs.data.hierarchy.EntityNode=function(entityCache,rootFilterEntityType,overrideLabel){entityCache=typeof entityCache!=='undefined'?entityCache:null;rootFilterEntityType=typeof rootFilterEntityType!=='undefined'?rootFilterEntityType:null;overrideLabel=typeof overrideLabel!=='undefined'?overrideLabel:null;this._childNodes=[];this._childNodeCache={};this.setEntityCache(entityCache);this._rootFilterEntityType=rootFilterEntityType;this._overrideLabel=overrideLabel};weavejs.data.hierarchy.EntityNode.$map_cacheLookup;
weavejs.data.hierarchy.EntityNode.$cacheSerial=0;weavejs.data.hierarchy.EntityNode.debug=false;weavejs.data.hierarchy.EntityNode.prototype._rootFilterEntityType=null;weavejs.data.hierarchy.EntityNode.prototype._overrideLabel=null;weavejs.data.hierarchy.EntityNode.prototype._cacheId=0;weavejs.data.hierarchy.EntityNode.prototype.id=-1;
weavejs.data.hierarchy.EntityNode.prototype.setEntityCache=function(entityCache){if(!weavejs.data.hierarchy.EntityNode.$map_cacheLookup)weavejs.data.hierarchy.EntityNode.$map_cacheLookup=new weavejs.util.JS.Map;var cid=weavejs.data.hierarchy.EntityNode.$map_cacheLookup.get(entityCache);if(entityCache&&!cid){cid=++weavejs.data.hierarchy.EntityNode.$cacheSerial;weavejs.data.hierarchy.EntityNode.$map_cacheLookup.set(cid,entityCache);weavejs.data.hierarchy.EntityNode.$map_cacheLookup.set(entityCache,
cid)}if(cid!=this._cacheId){this._cacheId=cid;var foreachiter0_target=this._childNodeCache;for(var foreachiter0 in foreachiter0_target){var child=foreachiter0_target[foreachiter0];child.setEntityCache(entityCache)}}};weavejs.data.hierarchy.EntityNode.prototype.getEntityCache=function(){return weavejs.data.hierarchy.EntityNode.$map_cacheLookup?weavejs.data.hierarchy.EntityNode.$map_cacheLookup.get(this._cacheId):null};weavejs.data.hierarchy.EntityNode.prototype.getEntity=function(){return this.getEntityCache().getEntity(this.id)};
weavejs.data.hierarchy.EntityNode.prototype._childNodes;weavejs.data.hierarchy.EntityNode.prototype._childNodeCache;weavejs.data.hierarchy.EntityNode.prototype.equals=function(other){if(other==this)return true;var node=org.apache.flex.utils.Language.as(other,weavejs.data.hierarchy.EntityNode);return!!node&&this._cacheId==node._cacheId&&this.id==node.id};
weavejs.data.hierarchy.EntityNode.prototype.getDataSource=function(){var cache=this.getEntityCache();var owner=cache;while(owner){owner=Weave.getOwner(owner);if(org.apache.flex.utils.Language.is(owner,weavejs.api.data.IDataSource))return org.apache.flex.utils.Language.as(owner,weavejs.api.data.IDataSource)}return null};
weavejs.data.hierarchy.EntityNode.prototype.getColumnMetadata=function(){var meta={};var entity=this.getEntity();if(entity.getEntityType()!=weavejs.api.data.EntityType.COLUMN)return null;for(var key in entity.publicMetadata)meta[key]=entity.publicMetadata[key];meta[weavejs.data.source.WeaveDataSource.ENTITY_ID]=this.id;return meta};
weavejs.data.hierarchy.EntityNode.prototype.getLabel=function(){if(this._overrideLabel)return this._overrideLabel;var title;var entity;var entityType;var cache=this.getEntityCache();var branchInfo=cache.getBranchInfo(this.id);if(branchInfo){entityType=branchInfo.entityType||'entity';title=branchInfo.title||Weave.lang('Untitled {0}#{1}',entityType,branchInfo.id);if(entityType==weavejs.api.data.EntityType.TABLE)title=Weave.lang('{0} ({1})',title,branchInfo.numChildren)}else{entity=this.getEntity();
title=entity.publicMetadata[weavejs.api.data.ColumnMetadata.TITLE];if(!title){var name=entity.publicMetadata['name'];if(name)title='[name: '+name+']'}if(!title||weavejs.data.hierarchy.EntityNode.debug)entityType=entity.getEntityType()||'entity';if(!title&&!entity.initialized)if(this._rootFilterEntityType){var ds=this.getDataSource();if(ds)title=Weave.getRoot(ds).getName(ds)||title}else title='...'}if(cache.entityIsCached(this.id)){if(!entity)entity=cache.getEntity(this.id);if(entity.getEntityType()!=
weavejs.api.data.EntityType.COLUMN&&entity.parentIds.length>1)title+=Weave.lang(' ; Warning: Multiple parents ({0})',entity.parentIds)}var idStr;if(!title||weavejs.data.hierarchy.EntityNode.debug)idStr=Weave.lang('{0}#{1}',entityType,this.id);if(!title)title=idStr;if(weavejs.data.hierarchy.EntityNode.debug){var children=this.getChildren();if(entityType!=weavejs.api.data.EntityType.COLUMN&&children)idStr+='; '+children.length+' children';title=Weave.lang('({0}) {1} {2}',idStr,weavejs.util.DebugUtils.debugId(this),
title)}return title};weavejs.data.hierarchy.EntityNode.prototype.isBranch=function(){if(this._rootFilterEntityType)return true;var cache=this.getEntityCache();var info=cache.getBranchInfo(this.id);if(info)return info.entityType!=weavejs.api.data.EntityType.COLUMN;var entity=cache.getEntity(this.id);return entity.initialized&&entity.getEntityType()!=weavejs.api.data.EntityType.COLUMN};
weavejs.data.hierarchy.EntityNode.prototype.hasChildBranches=function(){if(this._rootFilterEntityType)return true;var cache=this.getEntityCache();var info=cache.getBranchInfo(this.id);if(info&&(info.entityType==weavejs.api.data.EntityType.TABLE||info.entityType==weavejs.api.data.EntityType.COLUMN))return false;return cache.getEntity(this.id).hasChildBranches};
weavejs.data.hierarchy.EntityNode.prototype.getCachedChildNode=function(childId){var child=org.apache.flex.utils.Language.as(this._childNodeCache[childId],weavejs.data.hierarchy.EntityNode);if(!child){child=new weavejs.data.hierarchy.EntityNode(this.getEntityCache());child.id=childId;this._childNodeCache[childId]=child}if(child.id!=childId){weavejs.util.JS.error('BUG: EntityNode id has changed since it was first cached');child.id=childId}return child};
weavejs.data.hierarchy.EntityNode.prototype.getChildren=function(){var cache=this.getEntityCache();var childIds;if(this._rootFilterEntityType)childIds=cache.getIdsByType(this._rootFilterEntityType);else{var entity=cache.getEntity(this.id);if(entity.getEntityType()==weavejs.api.data.EntityType.COLUMN)return null;childIds=entity.childIds}if(!childIds){this._childNodes.length=0;return this.isBranch()?this._childNodes:null}this._childNodes.length=childIds.length;for(var i=0;i<childIds.length;i++)this._childNodes[i]=
this.getCachedChildNode(childIds[i]);return this._childNodes};weavejs.data.hierarchy.EntityNode.prototype.addChildAt=function(child,index){var childNode=org.apache.flex.utils.Language.as(child,weavejs.data.hierarchy.EntityNode);if(childNode){if(this.getEntityCache()!=childNode.getEntityCache())return false;this.getEntityCache().add_child(this.id,childNode.id,index);return true}return false};
weavejs.data.hierarchy.EntityNode.prototype.removeChild=function(child){var childNode=org.apache.flex.utils.Language.as(child,weavejs.data.hierarchy.EntityNode);if(childNode){if(this.getEntityCache()!=childNode.getEntityCache())return false;childNode.getEntityCache().remove_child(this.id,childNode.id);return true}return false};
weavejs.data.hierarchy.EntityNode.prototype.findPathToNode=function(descendant){var node=org.apache.flex.utils.Language.as(descendant,weavejs.data.hierarchy.EntityNode);if(!node||this._cacheId!=node._cacheId)return null;var cache=this.getEntityCache();if(this._rootFilterEntityType==weavejs.api.data.EntityType.TABLE){var foreachiter1_target=node.getEntity().parentIds;for(var foreachiter1 in foreachiter1_target){var id=foreachiter1_target[foreachiter1];if(cache.getEntity(id).getEntityType()==weavejs.api.data.EntityType.TABLE){var tableNode=
this.getCachedChildNode(id);return[this,tableNode,tableNode.getCachedChildNode(node.id)]}}return null}var path=cache.getEntityPath(this.getEntity(),node.getEntity());if(path)for(var i=0;i<path.length;i++){if(i==0)node=this;else node=node.getCachedChildNode(org.apache.flex.utils.Language.as(path[i],weavejs.api.net.beans.Entity).id);path[i]=node}return path};
weavejs.data.hierarchy.EntityNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'EntityNode',qName:'weavejs.data.hierarchy.EntityNode'}],interfaces:[weavejs.api.data.IWeaveTreeNodeWithEditableChildren,weavejs.api.data.IWeaveTreeNodeWithPathFinding,weavejs.api.data.IColumnReference]};goog.exportSymbol('weavejs.data.hierarchy.EntityNode',weavejs.data.hierarchy.EntityNode);
weavejs.data.hierarchy.EntityNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'_overrideLabel':{type:'String'},'_cacheId':{type:'int'},'id':{type:'int'}}},accessors:function(){return{}},methods:function(){return{'EntityNode':{type:'',declaredBy:'weavejs.data.hierarchy.EntityNode'},'setEntityCache':{type:'void',declaredBy:'weavejs.data.hierarchy.EntityNode'},'getEntityCache':{type:'EntityCache',declaredBy:'weavejs.data.hierarchy.EntityNode'},'getEntity':{type:'Entity',
declaredBy:'weavejs.data.hierarchy.EntityNode'},'equals':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.EntityNode'},'getDataSource':{type:'IDataSource',declaredBy:'weavejs.data.hierarchy.EntityNode'},'getColumnMetadata':{type:'Object',declaredBy:'weavejs.data.hierarchy.EntityNode'},'getLabel':{type:'String',declaredBy:'weavejs.data.hierarchy.EntityNode'},'isBranch':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.EntityNode'},'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.EntityNode'},
'getChildren':{type:'Array',declaredBy:'weavejs.data.hierarchy.EntityNode'},'addChildAt':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.EntityNode'},'removeChild':{type:'Boolean',declaredBy:'weavejs.data.hierarchy.EntityNode'},'findPathToNode':{type:'Array',declaredBy:'weavejs.data.hierarchy.EntityNode'}}},metadata:function(){return[]}}};goog.provide('weavejs.api.net.beans.EntityHierarchyInfo');weavejs.api.net.beans.EntityHierarchyInfo=function(){};weavejs.api.net.beans.EntityHierarchyInfo.prototype.id;weavejs.api.net.beans.EntityHierarchyInfo.prototype.entityType;weavejs.api.net.beans.EntityHierarchyInfo.prototype.title;weavejs.api.net.beans.EntityHierarchyInfo.prototype.numChildren;weavejs.api.net.beans.EntityHierarchyInfo.prototype.FLEXJS_CLASS_INFO={names:[{name:'EntityHierarchyInfo',qName:'weavejs.api.net.beans.EntityHierarchyInfo'}]};
goog.exportSymbol('weavejs.api.net.beans.EntityHierarchyInfo',weavejs.api.net.beans.EntityHierarchyInfo);weavejs.api.net.beans.EntityHierarchyInfo.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'id':{type:'int'},'entityType':{type:'String'},'title':{type:'String'},'numChildren':{type:'int'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.util.CallbackUtils');weavejs.util.CallbackUtils=function(){};
weavejs.util.CallbackUtils.generateDelayedCallback=function(relevantContext,callback,delay,passDelayedParameters){delay=typeof delay!=='undefined'?delay:500;passDelayedParameters=typeof passDelayedParameters!=='undefined'?passDelayedParameters:false;var __localFn0__=function(params){params=Array.prototype.slice.call(arguments,0);if(_timeout)weavejs.util.JS.clearTimeout(_timeout);_timeout=weavejs.util.JS.setTimeout(callback_apply,delay);_delayedThisArg=this;_delayedParams=params};var __localFn1__=
function(_){_=Array.prototype.slice.call(arguments,0);if(Weave.wasDisposed(relevantContext)){if(_timeout)weavejs.util.JS.clearTimeout(_timeout);_timeout=0;_delayedThisArg=null;_delayedParams=null;relevantContext=null;callback=null;callback_apply=null;delayedCallback=null}else callback.apply(_delayedThisArg,passDelayedParameters?_delayedParams:null)};var _timeout=0;var _delayedThisArg;var _delayedParams;var delayedCallback=__localFn0__;var callback_apply=__localFn1__;return delayedCallback};
weavejs.util.CallbackUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'CallbackUtils',qName:'weavejs.util.CallbackUtils'}]};goog.exportSymbol('weavejs.util.CallbackUtils',weavejs.util.CallbackUtils);weavejs.util.CallbackUtils.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.net.IWeaveEntityService');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.net.IWeaveEntityService=function(){};weavejs.api.net.IWeaveEntityService.prototype.entityServiceInitialized;weavejs.api.net.IWeaveEntityService.prototype.getHierarchyInfo=function(publicMetadata){};weavejs.api.net.IWeaveEntityService.prototype.getEntities=function(ids){};weavejs.api.net.IWeaveEntityService.prototype.findEntityIds=function(publicMetadata,wildcardFields){};
weavejs.api.net.IWeaveEntityService.prototype.findPublicFieldValues=function(fieldName,valueSearch){};weavejs.api.net.IWeaveEntityService.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveEntityService',qName:'weavejs.api.net.IWeaveEntityService'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.net.IWeaveEntityService.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'entityServiceInitialized':{type:'Boolean',declaredBy:'weavejs.api.net.IWeaveEntityService'}}},methods:function(){return{'getHierarchyInfo':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityService'},'getEntities':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityService'},'findEntityIds':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityService'},
'findPublicFieldValues':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityService'}}}}};goog.provide('weavejs.api.net.IWeaveEntityManagementService');goog.require('weavejs.api.net.IWeaveEntityService');weavejs.api.net.IWeaveEntityManagementService=function(){};weavejs.api.net.IWeaveEntityManagementService.prototype.newEntity=function(metadata,parentId,insertAtIndex){};weavejs.api.net.IWeaveEntityManagementService.prototype.updateEntity=function(entityId,diff){};weavejs.api.net.IWeaveEntityManagementService.prototype.removeEntities=function(entityIds){};
weavejs.api.net.IWeaveEntityManagementService.prototype.addChild=function(parentId,childId,insertAtIndex){};weavejs.api.net.IWeaveEntityManagementService.prototype.removeChild=function(parentId,childId){};weavejs.api.net.IWeaveEntityManagementService.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveEntityManagementService',qName:'weavejs.api.net.IWeaveEntityManagementService'}],interfaces:[weavejs.api.net.IWeaveEntityService]};
weavejs.api.net.IWeaveEntityManagementService.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'newEntity':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityManagementService'},'updateEntity':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityManagementService'},'removeEntities':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityManagementService'},'addChild':{type:'WeavePromise',
declaredBy:'weavejs.api.net.IWeaveEntityManagementService'},'removeChild':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveEntityManagementService'}}}}};goog.provide('weavejs.net.EntityCache');goog.require('weavejs.api.net.beans.EntityHierarchyInfo');goog.require('weavejs.util.CallbackUtils');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableObject');
weavejs.net.EntityCache=function(service,purgeMissingEntities){purgeMissingEntities=typeof purgeMissingEntities!=='undefined'?purgeMissingEntities:false;this.idsToFetch={};this.entityCache={};this.idsToDelete={};this._idsByType={};this._infoLookup={};this.idsDirty={};this.purgeMissingEntities=purgeMissingEntities;this.service=service;this.adminService=org.apache.flex.utils.Language.as(service,weavejs.api.net.IWeaveEntityManagementService);Weave.linkableChild(this,service);this.callbacks.addImmediateCallback(this,
weavejs.util.CallbackUtils.generateDelayedCallback(this,org.apache.flex.utils.Language.closure(this.delayedCallback,this,'delayedCallback'),0))};weavejs.net.EntityCache.ROOT_ID=-1;weavejs.net.EntityCache.MAX_ENTITY_REQUEST_COUNT=1E3;weavejs.net.EntityCache.prototype.service=null;weavejs.net.EntityCache.prototype.adminService=null;weavejs.net.EntityCache.prototype.idsToFetch;weavejs.net.EntityCache.prototype.entityCache;weavejs.net.EntityCache.prototype.idsToDelete;weavejs.net.EntityCache.prototype._idsByType;
weavejs.net.EntityCache.prototype._infoLookup;weavejs.net.EntityCache.prototype.idsDirty;weavejs.net.EntityCache.prototype.purgeMissingEntities=false;weavejs.net.EntityCache.prototype.getService=function(){return this.service};
weavejs.net.EntityCache.prototype.hasCachedRelationship=function(parentId,childId){if(this.entityCache[parentId]&&(!this.idsToFetch[parentId]||!this.entityCache[childId]))return org.apache.flex.utils.Language.as(this.entityCache[parentId],weavejs.api.net.beans.Entity).hasChild(childId);if(this.entityCache[childId])return org.apache.flex.utils.Language.as(this.entityCache[childId],weavejs.api.net.beans.Entity).hasParent(parentId);return false};
weavejs.net.EntityCache.prototype.invalidate=function(id,alsoInvalidateRelatives){alsoInvalidateRelatives=typeof alsoInvalidateRelatives!=='undefined'?alsoInvalidateRelatives:false;if(Weave.wasDisposed(this))return;this.callbacks.delayCallbacks();weavejs.WeaveAPI.SessionManager.assignBusyTask(org.apache.flex.utils.Language.closure(this.delayedCallback,this,'delayedCallback'),this);if(!this.idsToFetch[id])this.callbacks.triggerCallbacks();this.idsDirty[id]=false;this.idsToFetch[id]=true;if(!this.entityCache[id])this.entityCache[id]=
new weavejs.api.net.beans.Entity(this._infoLookup[id]);if(alsoInvalidateRelatives){var children=org.apache.flex.utils.Language.as(this.entityCache[id],weavejs.api.net.beans.Entity).childIds;if(children&&children.length){var foreachiter0_target=children;for(var foreachiter0 in foreachiter0_target){var childId=foreachiter0_target[foreachiter0];this.invalidate(childId)}}var parents=org.apache.flex.utils.Language.as(this.entityCache[id],weavejs.api.net.beans.Entity).parentIds;if(parents&&parents.length){var foreachiter1_target=
parents;for(var foreachiter1 in foreachiter1_target){var parentId=foreachiter1_target[foreachiter1];this.invalidate(parentId)}}else this.invalidate(weavejs.net.EntityCache.ROOT_ID)}this.callbacks.resumeCallbacks()};weavejs.net.EntityCache.prototype.getEntity=function(id){if(!this.entityCache[id]||this.idsDirty[id])this.invalidate(id);return org.apache.flex.utils.Language.as(this.entityCache[id],weavejs.api.net.beans.Entity)};
weavejs.net.EntityCache.prototype.entityIsCached=function(id){var entity=org.apache.flex.utils.Language.as(this.entityCache[id],weavejs.api.net.beans.Entity);return entity&&entity.initialized};
weavejs.net.EntityCache.prototype.delayedCallback=function(){if(!this.service.entityServiceInitialized)return;var id;var deleted=false;var idsToRemove=[];for(id in this.idsToDelete)idsToRemove.push(id);if(this.adminService&&idsToRemove.length){this.adminService.removeEntities(idsToRemove).then(this.handleIdsToInvalidate.bind(this,true));this.idsToDelete={}}var ids=[];for(id in this.idsToFetch)if(id==weavejs.net.EntityCache.ROOT_ID){var tableMetadata={};tableMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE]=
weavejs.api.data.EntityType.TABLE;this.service.getHierarchyInfo(tableMetadata).then(this.handleEntityHierarchyInfo.bind(this,tableMetadata));var hierarchyMetadata={};hierarchyMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE]=weavejs.api.data.EntityType.HIERARCHY;this.service.getHierarchyInfo(hierarchyMetadata).then(this.handleEntityHierarchyInfo.bind(this,hierarchyMetadata))}else ids.push(org.apache.flex.utils.Language._int(id));delete this.idsToFetch[weavejs.net.EntityCache.ROOT_ID];if(ids.length>
0)this.idsToFetch={};while(ids.length>0){var splicedIds=ids.splice(0,weavejs.net.EntityCache.MAX_ENTITY_REQUEST_COUNT);this.service.getEntities(splicedIds).then(this.getEntityHandler.bind(this,splicedIds))}weavejs.WeaveAPI.SessionManager.unassignBusyTask(org.apache.flex.utils.Language.closure(this.delayedCallback,this,'delayedCallback'))};
weavejs.net.EntityCache.prototype.handleIdsToInvalidate=function(alsoInvalidateRelatives,result){this.callbacks.delayCallbacks();var foreachiter2_target=result;for(var foreachiter2 in foreachiter2_target){var id=foreachiter2_target[foreachiter2];this.invalidate(id,alsoInvalidateRelatives)}this.callbacks.resumeCallbacks()};
weavejs.net.EntityCache.prototype.getEntityHandler=function(requestedIds,result){var id;var entity;var info;var foreachiter3_target=requestedIds;for(var foreachiter3 in foreachiter3_target){id=foreachiter3_target[foreachiter3];entity=this.entityCache[id]||new weavejs.api.net.beans.Entity;entity.reset();this.entityCache[id]=entity;this.idsDirty[id]=true}var foreachiter4_target=result;for(var foreachiter4 in foreachiter4_target){entity=foreachiter4_target[foreachiter4];if(!entity.parentIds)entity.parentIds=
[];if(!entity.childIds)entity.childIds=[];id=entity.id;this.entityCache[id]=entity;this.idsDirty[id]=false;info=this._infoLookup[id];if(info){info.entityType=entity.publicMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE];info.title=entity.publicMetadata[weavejs.api.data.ColumnMetadata.TITLE];info.numChildren=entity.childIds.length}}var foreachiter5_target=requestedIds;for(var foreachiter5 in foreachiter5_target){id=foreachiter5_target[foreachiter5];if(this.idsDirty[id])if(this.purgeMissingEntities)delete this._infoLookup[id];
else{info=this._infoLookup[id]||new weavejs.api.net.beans.EntityHierarchyInfo;info.id=id;info.numChildren=0;info.title=Weave.lang('[Error: Entity #{0} does not exist]',id);this._infoLookup[id]=info;this.idsDirty[id]=false}}this.callbacks.triggerCallbacks()};weavejs.net.EntityCache.prototype.getHierarchyInfo=function(publicMetadata){return this.service.getHierarchyInfo(publicMetadata).then(this.handleEntityHierarchyInfo.bind(this,publicMetadata))};
weavejs.net.EntityCache.prototype.handleEntityHierarchyInfo=function(publicMetadata,result){var entityType=publicMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE];var infoArray=result||[];var ids=new Array(infoArray.length);for(var i=0;i<infoArray.length;i++){var info=org.apache.flex.utils.Language.as(infoArray[i],weavejs.api.net.beans.EntityHierarchyInfo,true);info.entityType=entityType;this._infoLookup[info.id]=info;ids[i]=info.id}var keys=weavejs.util.JS.objectKeys(publicMetadata);if(keys.length==
1&&keys[0]==weavejs.api.data.ColumnMetadata.ENTITY_TYPE)this._idsByType[entityType]=ids;this.callbacks.triggerCallbacks();return result};weavejs.net.EntityCache.prototype.getIdsByType=function(entityType){this.getEntity(weavejs.net.EntityCache.ROOT_ID);return this._idsByType[entityType]=this._idsByType[entityType]||[]};weavejs.net.EntityCache.prototype.getBranchInfo=function(id){this.getEntity(weavejs.net.EntityCache.ROOT_ID);var info=this._infoLookup[id];return info};
weavejs.net.EntityCache.prototype.invalidateAll=function(purge){purge=typeof purge!=='undefined'?purge:false;if(Weave.wasDisposed(this))return;if(purge){this.idsToFetch={};this.entityCache={};this.idsToDelete={};this._idsByType={};this._infoLookup={};this.idsDirty={}}else for(var id in this.entityCache)this.idsDirty[id]=true;this.callbacks.triggerCallbacks()};
weavejs.net.EntityCache.prototype.update_metadata=function(id,diff){if(!this.adminService){weavejs.util.JS.error('Unable to update metadata (Not an admin service)');return}this.adminService.updateEntity(id,diff);this.invalidate(id)};
weavejs.net.EntityCache.prototype.add_category=function(title,parentId,index){if(!this.adminService){weavejs.util.JS.error('Unable to create entities (Not an admin service)');return}var entityType=parentId==weavejs.net.EntityCache.ROOT_ID?weavejs.api.data.EntityType.HIERARCHY:weavejs.api.data.EntityType.CATEGORY;var em=new weavejs.api.net.beans.EntityMetadata;em.publicMetadata[weavejs.api.data.ColumnMetadata.TITLE]=title;em.publicMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE]=entityType;this.adminService.newEntity(em,
parentId,index);this.invalidate(parentId)};weavejs.net.EntityCache.prototype.delete_entity=function(id){this.idsToDelete[id]=true;this.invalidate(id,true)};
weavejs.net.EntityCache.prototype.add_child=function(parent_id,child_id,index){if(!this.adminService){weavejs.util.JS.error('Unable to modify hierarchy (Not an admin service)');return}if(this.idsToDelete[child_id]){delete this.idsToDelete[child_id];if(parent_id==weavejs.net.EntityCache.ROOT_ID)return;var diff=new weavejs.api.net.beans.EntityMetadata;diff.publicMetadata[weavejs.api.data.ColumnMetadata.ENTITY_TYPE]=weavejs.api.data.EntityType.CATEGORY;this.adminService.updateEntity(child_id,diff)}this.adminService.addChild(parent_id,
child_id,index).then(this.handleIdsToInvalidate.bind(this,false));this.invalidate(parent_id)};weavejs.net.EntityCache.prototype.remove_child=function(parent_id,child_id){if(!this.adminService){weavejs.util.JS.error('Unable to remove entities (Not an admin service)');return}if(parent_id==weavejs.net.EntityCache.ROOT_ID)this.delete_entity(child_id);else this.adminService.removeChild(parent_id,child_id);this.invalidate(child_id,true)};
weavejs.net.EntityCache.prototype.getEntityPath=function(root,descendant){if(!root.id==weavejs.net.EntityCache.ROOT_ID){var type=descendant.getEntityType();if(type==weavejs.api.data.EntityType.TABLE||type==weavejs.api.data.EntityType.HIERARCHY)return[root,descendant]}if(root.id==descendant.id)return[root];var foreachiter6_target=descendant.parentIds;for(var foreachiter6 in foreachiter6_target){var parentId=foreachiter6_target[foreachiter6];var parent=this.getEntity(parentId);if(!parent.initialized)continue;
var path=this.getEntityPath(root,parent);if(path){path.push(descendant);return path}}return null};weavejs.net.EntityCache.prototype.dispose=function(){weavejs.WeaveAPI.SessionManager.unassignBusyTask(org.apache.flex.utils.Language.closure(this.delayedCallback,this,'delayedCallback'))};Object.defineProperties(weavejs.net.EntityCache.prototype,{callbacks:{get:function(){return Weave.getCallbacks(this)}}});
weavejs.net.EntityCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'EntityCache',qName:'weavejs.net.EntityCache'}],interfaces:[weavejs.api.core.ILinkableObject,weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.net.EntityCache',weavejs.net.EntityCache);
weavejs.net.EntityCache.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'EntityCache':{type:'',declaredBy:'weavejs.net.EntityCache'},'getService':{type:'IWeaveEntityService',declaredBy:'weavejs.net.EntityCache'},'hasCachedRelationship':{type:'Boolean',declaredBy:'weavejs.net.EntityCache'},'invalidate':{type:'void',declaredBy:'weavejs.net.EntityCache'},'getEntity':{type:'Entity',declaredBy:'weavejs.net.EntityCache'},
'entityIsCached':{type:'Boolean',declaredBy:'weavejs.net.EntityCache'},'getHierarchyInfo':{type:'WeavePromise',declaredBy:'weavejs.net.EntityCache'},'getIdsByType':{type:'Array',declaredBy:'weavejs.net.EntityCache'},'getBranchInfo':{type:'EntityHierarchyInfo',declaredBy:'weavejs.net.EntityCache'},'invalidateAll':{type:'void',declaredBy:'weavejs.net.EntityCache'},'update_metadata':{type:'void',declaredBy:'weavejs.net.EntityCache'},'add_category':{type:'void',declaredBy:'weavejs.net.EntityCache'},'delete_entity':{type:'void',
declaredBy:'weavejs.net.EntityCache'},'add_child':{type:'void',declaredBy:'weavejs.net.EntityCache'},'remove_child':{type:'void',declaredBy:'weavejs.net.EntityCache'},'getEntityPath':{type:'Array',declaredBy:'weavejs.net.EntityCache'},'dispose':{type:'void',declaredBy:'weavejs.net.EntityCache'}}}}};goog.provide('weavejs.net.AMF3Servlet');goog.require('weavejs.net.Servlet');weavejs.net.AMF3Servlet=function(servletURL,invokeImmediately){invokeImmediately=typeof invokeImmediately!=='undefined'?invokeImmediately:true;weavejs.net.AMF3Servlet.base(this,'constructor',servletURL,'method',weavejs.net.Protocol.JSONRPC_2_0_AMF);this._invokeLater=!invokeImmediately};goog.inherits(weavejs.net.AMF3Servlet,weavejs.net.Servlet);weavejs.net.AMF3Servlet.prototype.invokeDeferred=function(promise){this.invokeNow(promise)};
weavejs.net.AMF3Servlet.prototype.FLEXJS_CLASS_INFO={names:[{name:'AMF3Servlet',qName:'weavejs.net.AMF3Servlet'}]};goog.exportSymbol('weavejs.net.AMF3Servlet',weavejs.net.AMF3Servlet);weavejs.net.AMF3Servlet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'AMF3Servlet':{type:'',declaredBy:'weavejs.net.AMF3Servlet'},'invokeDeferred':{type:'void',declaredBy:'weavejs.net.AMF3Servlet'}}}}};goog.provide('weavejs.net.beans.AttributeColumnData');weavejs.net.beans.AttributeColumnData=function(){};weavejs.net.beans.AttributeColumnData.NO_TABLE_ID=-1;weavejs.net.beans.AttributeColumnData.prototype.id;weavejs.net.beans.AttributeColumnData.prototype.tableId;weavejs.net.beans.AttributeColumnData.prototype.tableField;weavejs.net.beans.AttributeColumnData.prototype.metadata;weavejs.net.beans.AttributeColumnData.prototype.keys;weavejs.net.beans.AttributeColumnData.prototype.data;weavejs.net.beans.AttributeColumnData.prototype.thirdColumn;
weavejs.net.beans.AttributeColumnData.prototype.metadataTileDescriptors;weavejs.net.beans.AttributeColumnData.prototype.geometryTileDescriptors;weavejs.net.beans.AttributeColumnData.prototype.FLEXJS_CLASS_INFO={names:[{name:'AttributeColumnData',qName:'weavejs.net.beans.AttributeColumnData'}]};goog.exportSymbol('weavejs.net.beans.AttributeColumnData',weavejs.net.beans.AttributeColumnData);
weavejs.net.beans.AttributeColumnData.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'id':{type:'int'},'tableId':{type:'int'},'tableField':{type:'String'},'metadata':{type:'Object'},'keys':{type:'Array'},'data':{type:'Array'},'thirdColumn':{type:'Array'},'metadataTileDescriptors':{type:'JSByteArray'},'geometryTileDescriptors':{type:'JSByteArray'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.beans.GeometryStreamMetadata');weavejs.net.beans.GeometryStreamMetadata=function(){};weavejs.net.beans.GeometryStreamMetadata.prototype.id;weavejs.net.beans.GeometryStreamMetadata.prototype.metadata;weavejs.net.beans.GeometryStreamMetadata.prototype.metadataTileDescriptors;weavejs.net.beans.GeometryStreamMetadata.prototype.geometryTileDescriptors;weavejs.net.beans.GeometryStreamMetadata.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeometryStreamMetadata',qName:'weavejs.net.beans.GeometryStreamMetadata'}]};
goog.exportSymbol('weavejs.net.beans.GeometryStreamMetadata',weavejs.net.beans.GeometryStreamMetadata);weavejs.net.beans.GeometryStreamMetadata.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'id':{type:'int'},'metadata':{type:'Object'},'metadataTileDescriptors':{type:'JSByteArray'},'geometryTileDescriptors':{type:'JSByteArray'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.beans.TableData');weavejs.net.beans.TableData=function(){};weavejs.net.beans.TableData.prototype.id;weavejs.net.beans.TableData.prototype.keyColumns;weavejs.net.beans.TableData.prototype.columns;weavejs.net.beans.TableData.prototype.derived_qkeys;weavejs.net.beans.TableData.prototype.FLEXJS_CLASS_INFO={names:[{name:'TableData',qName:'weavejs.net.beans.TableData'}]};goog.exportSymbol('weavejs.net.beans.TableData',weavejs.net.beans.TableData);
weavejs.net.beans.TableData.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'id':{type:'int'},'keyColumns':{type:'Array'},'columns':{type:'Object'},'derived_qkeys':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.api.net.IWeaveGeometryTileService');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.net.IWeaveGeometryTileService=function(){};weavejs.api.net.IWeaveGeometryTileService.prototype.getMetadataTiles=function(tileIDs){};weavejs.api.net.IWeaveGeometryTileService.prototype.getGeometryTiles=function(tileIDs){};
weavejs.api.net.IWeaveGeometryTileService.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveGeometryTileService',qName:'weavejs.api.net.IWeaveGeometryTileService'}],interfaces:[weavejs.api.core.ILinkableObject]};
weavejs.api.net.IWeaveGeometryTileService.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'getMetadataTiles':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveGeometryTileService'},'getGeometryTiles':{type:'WeavePromise',declaredBy:'weavejs.api.net.IWeaveGeometryTileService'}}}}};goog.provide('weavejs.net.WeaveDataServlet');goog.require('weavejs.net.AMF3Servlet');goog.require('weavejs.net.beans.AttributeColumnData');goog.require('weavejs.net.beans.GeometryStreamMetadata');goog.require('weavejs.net.beans.TableData');goog.require('weavejs.api.net.IWeaveEntityService');goog.require('weavejs.api.net.IWeaveGeometryTileService');
weavejs.net.WeaveDataServlet=function(url){url=typeof url!=='undefined'?url:null;this.map_method_name=new weavejs.util.JS.Map;this._promisesPendingAuthentication=[];this.servlet=Weave.linkableChild(this,new weavejs.net.AMF3Servlet(url||weavejs.net.WeaveDataServlet.DEFAULT_URL,false))};weavejs.net.WeaveDataServlet.DEFAULT_URL='/WeaveServices/DataService';weavejs.net.WeaveDataServlet.WEAVE_AUTHENTICATION_EXCEPTION='WeaveAuthenticationException';weavejs.net.WeaveDataServlet.AUTHENTICATED_USER='authenticatedUser';
weavejs.net.WeaveDataServlet.prototype.map_method_name;weavejs.net.WeaveDataServlet.prototype.servlet;weavejs.net.WeaveDataServlet.prototype._serverInfo=null;
weavejs.net.WeaveDataServlet.prototype.getMethodName=function(method){if(org.apache.flex.utils.Language.is(method,String))return org.apache.flex.utils.Language.as(method,String);if(!this.map_method_name.has(method)){var foreachiter0_target=weavejs.util.JS.getPropertyNames(this,true);for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(this[name]===method){this.map_method_name.set(method,name);return name}}}return this.map_method_name.get(method)};
weavejs.net.WeaveDataServlet.prototype.invoke=function(method,parameters,returnType_or_castFunction){var self=this;returnType_or_castFunction=typeof returnType_or_castFunction!=='undefined'?returnType_or_castFunction:null;var __localFn0__=function(error){if(error.code==weavejs.net.WeaveDataServlet.WEAVE_AUTHENTICATION_EXCEPTION){self._authenticationRequired=true;self._promisesPendingAuthentication.push(promise)}else weavejs.util.JS.error(error)};parameters=weavejs.util.JS.toArray(parameters)||parameters;
var methodName=this.getMethodName(method);if(!methodName)throw new Error('method must be a member of '+Weave.className(this));var promise=this.servlet.invokeAsyncMethod(methodName,parameters);var promiseThen=promise;if(!this._authenticationRequired)this.servlet.invokeDeferred(promise);if(returnType_or_castFunction){if(!(org.apache.flex.utils.Language.is(returnType_or_castFunction,Function)||weavejs.util.JS.isClass(returnType_or_castFunction)))throw new Error('returnType_or_castFunction parameter must either be a Class or a Function');
if([Array,String,Number].indexOf(returnType_or_castFunction)<0)promiseThen=promise.then(weavejs.net.WeaveDataServlet.castResult.bind(this,returnType_or_castFunction),__localFn0__)}return promiseThen};
weavejs.net.WeaveDataServlet.castResult=function(cast,originalResult){var results=org.apache.flex.utils.Language.as(originalResult,Array)||[originalResult];for(var i=0;i<results.length;i++)if(weavejs.util.JS.isClass(cast)){var resultItem=results[i];if(resultItem===null||org.apache.flex.utils.Language.is(resultItem,weavejs.util.JS.asClass(cast)))continue;var newResult=new cast;for(var key in resultItem)newResult[key]=resultItem[key];results[i]=newResult}else results[i]=cast(results[i]);return originalResult===
results?results:results[0]};weavejs.net.WeaveDataServlet.prototype._authenticationRequired=false;weavejs.net.WeaveDataServlet.prototype._user=null;weavejs.net.WeaveDataServlet.prototype._pass=null;weavejs.net.WeaveDataServlet.prototype._promisesPendingAuthentication;
weavejs.net.WeaveDataServlet.prototype.authenticate=function(user,pass){if(user&&pass){this._user=user;this._pass=pass;var promise=this.invoke(org.apache.flex.utils.Language.closure(this.authenticate,this,'authenticate'),arguments);promise.then(org.apache.flex.utils.Language.closure(this.handleAuthenticateResult,this,'handleAuthenticateResult'),org.apache.flex.utils.Language.closure(this.handleAuthenticateFault,this,'handleAuthenticateFault'));if(this._authenticationRequired)this.servlet.invokeDeferred(promise)}else{this._user=
null;this._pass=null}};weavejs.net.WeaveDataServlet.prototype.handleAuthenticateResult=function(_){while(this._promisesPendingAuthentication.length)this.servlet.invokeDeferred(org.apache.flex.utils.Language.as(this._promisesPendingAuthentication.shift(),weavejs.util.WeavePromise));this.getServerInfo()[weavejs.net.WeaveDataServlet.AUTHENTICATED_USER]=this._user};weavejs.net.WeaveDataServlet.prototype.handleAuthenticateFault=function(_){this._user=null;this._pass=null};
weavejs.net.WeaveDataServlet.prototype.getServerInfo=function(){var self=this;var __localFn0__=function(result){self._serverInfo=result||{}};var __localFn1__=function(error){self._serverInfo={'error':error}};if(!this._serverInfo){this._serverInfo=true;this.invoke(org.apache.flex.utils.Language.closure(this.getServerInfo,this,'getServerInfo'),arguments).then(__localFn0__,__localFn1__)}return typeof this._serverInfo==='object'?this._serverInfo:null};
weavejs.net.WeaveDataServlet.prototype.getHierarchyInfo=function(publicMetadata){return this.invoke(org.apache.flex.utils.Language.closure(this.getHierarchyInfo,this,'getHierarchyInfo'),arguments,weavejs.api.net.beans.EntityHierarchyInfo)};weavejs.net.WeaveDataServlet.prototype.getEntities=function(ids){return this.invoke(org.apache.flex.utils.Language.closure(this.getEntities,this,'getEntities'),arguments,weavejs.api.net.beans.Entity)};
weavejs.net.WeaveDataServlet.prototype.findEntityIds=function(publicMetadata,wildcardFields){return this.invoke(org.apache.flex.utils.Language.closure(this.findEntityIds,this,'findEntityIds'),arguments)};weavejs.net.WeaveDataServlet.prototype.findPublicFieldValues=function(fieldName,valueSearch){return this.invoke(org.apache.flex.utils.Language.closure(this.findPublicFieldValues,this,'findPublicFieldValues'),arguments)};
weavejs.net.WeaveDataServlet.prototype.getColumn=function(columnId,minParam,maxParam,sqlParams){return this.invoke(org.apache.flex.utils.Language.closure(this.getColumn,this,'getColumn'),arguments,weavejs.net.beans.AttributeColumnData)};weavejs.net.WeaveDataServlet.prototype.getTable=function(id,sqlParams){return this.invoke(org.apache.flex.utils.Language.closure(this.getTable,this,'getTable'),arguments,weavejs.net.beans.TableData)};
weavejs.net.WeaveDataServlet.prototype.getGeometryStreamTileDescriptors=function(columnId){return this.invoke(org.apache.flex.utils.Language.closure(this.getGeometryStreamTileDescriptors,this,'getGeometryStreamTileDescriptors'),arguments,weavejs.net.beans.GeometryStreamMetadata)};
weavejs.net.WeaveDataServlet.prototype.getGeometryStreamMetadataTiles=function(columnId,tileIDs){return this.invoke(org.apache.flex.utils.Language.closure(this.getGeometryStreamMetadataTiles,this,'getGeometryStreamMetadataTiles'),arguments)};weavejs.net.WeaveDataServlet.prototype.getGeometryStreamGeometryTiles=function(columnId,tileIDs){return this.invoke(org.apache.flex.utils.Language.closure(this.getGeometryStreamGeometryTiles,this,'getGeometryStreamGeometryTiles'),arguments)};
weavejs.net.WeaveDataServlet.prototype.createTileService=function(columnId){var tileService=new weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet(this,columnId);Weave.disposableChild(this,tileService);return tileService};
weavejs.net.WeaveDataServlet.prototype.getRows=function(keys){var keysArray=[];var foreachiter1_target=keys;for(var foreachiter1 in foreachiter1_target){var key=foreachiter1_target[foreachiter1];keysArray.push(key.localName)}var keytype=org.apache.flex.utils.Language.as(keys[0],weavejs.api.data.IQualifiedKey).keyType;return this.invoke(org.apache.flex.utils.Language.closure(this.getRows,this,'getRows'),[keytype,keysArray])};
weavejs.net.WeaveDataServlet.prototype.getColumnFromMetadata=function(metadata){return this.invoke(org.apache.flex.utils.Language.closure(this.getColumnFromMetadata,this,'getColumnFromMetadata'),arguments,weavejs.net.beans.AttributeColumnData)};
Object.defineProperties(weavejs.net.WeaveDataServlet.prototype,{authenticationSupported:{get:function(){var info=this.getServerInfo();return info&&info['hasDirectoryService']}},authenticationRequired:{get:function(){return this._authenticationRequired&&!this._user&&!this._pass}},authenticatedUser:{get:function(){var info=this.getServerInfo();return info?info[weavejs.net.WeaveDataServlet.AUTHENTICATED_USER]:null}},entityServiceInitialized:{get:function(){return this.getServerInfo()!=null}}});
weavejs.net.WeaveDataServlet.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveDataServlet',qName:'weavejs.net.WeaveDataServlet'}],interfaces:[weavejs.api.net.IWeaveEntityService]};goog.exportSymbol('weavejs.net.WeaveDataServlet',weavejs.net.WeaveDataServlet);
weavejs.net.WeaveDataServlet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'authenticationSupported':{type:'Boolean',declaredBy:'weavejs.net.WeaveDataServlet'},'authenticationRequired':{type:'Boolean',declaredBy:'weavejs.net.WeaveDataServlet'},'authenticatedUser':{type:'String',declaredBy:'weavejs.net.WeaveDataServlet'},'entityServiceInitialized':{type:'Boolean',declaredBy:'weavejs.net.WeaveDataServlet'}}},methods:function(){return{'WeaveDataServlet':{type:'',
declaredBy:'weavejs.net.WeaveDataServlet'},'authenticate':{type:'void',declaredBy:'weavejs.net.WeaveDataServlet'},'getServerInfo':{type:'Object',declaredBy:'weavejs.net.WeaveDataServlet'},'getHierarchyInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'getEntities':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'findEntityIds':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'findPublicFieldValues':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},
'getColumn':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'getTable':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'getGeometryStreamTileDescriptors':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'getGeometryStreamMetadataTiles':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'getGeometryStreamGeometryTiles':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'createTileService':{type:'IWeaveGeometryTileService',declaredBy:'weavejs.net.WeaveDataServlet'},
'getRows':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'},'getColumnFromMetadata':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet'}}}}};weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet=function(service,columnId){this._service=service;this._columnId=columnId};weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet.prototype._service;weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet.prototype._columnId;
weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet.prototype.getMetadataTiles=function(tileIDs){var token=this._service.getGeometryStreamMetadataTiles(this._columnId,tileIDs);weavejs.WeaveAPI.ProgressIndicator.addTask(token,this);return token};weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet.prototype.getGeometryTiles=function(tileIDs){var token=this._service.getGeometryStreamGeometryTiles(this._columnId,tileIDs);weavejs.WeaveAPI.ProgressIndicator.addTask(token,this);return token};
weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveGeometryTileServlet',qName:'weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet'}],interfaces:[weavejs.api.net.IWeaveGeometryTileService]};goog.exportSymbol('weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet',weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet);
weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'WeaveGeometryTileServlet':{type:'',declaredBy:'weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet'},'getMetadataTiles':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet'},'getGeometryTiles':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveDataServlet.WeaveGeometryTileServlet'}}}}};goog.provide('weavejs.api.data.IDataSourceWithAuthentication');goog.require('weavejs.api.data.IDataSource');weavejs.api.data.IDataSourceWithAuthentication=function(){};weavejs.api.data.IDataSourceWithAuthentication.prototype.authenticationSupported;weavejs.api.data.IDataSourceWithAuthentication.prototype.authenticate=function(user,pass){};
weavejs.api.data.IDataSourceWithAuthentication.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDataSourceWithAuthentication',qName:'weavejs.api.data.IDataSourceWithAuthentication'}],interfaces:[weavejs.api.data.IDataSource]};
weavejs.api.data.IDataSourceWithAuthentication.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'authenticationSupported':{type:'Boolean',declaredBy:'weavejs.api.data.IDataSourceWithAuthentication'},'authenticationRequired':{type:'Boolean',declaredBy:'weavejs.api.data.IDataSourceWithAuthentication'},'authenticatedUser':{type:'String',declaredBy:'weavejs.api.data.IDataSourceWithAuthentication'}}},methods:function(){return{'authenticate':{type:'void',
declaredBy:'weavejs.api.data.IDataSourceWithAuthentication'}}}}};goog.provide('weavejs.data.source.WeaveDataSource');goog.require('weavejs.data.column.StreamedGeometryColumn');goog.require('weavejs.data.hierarchy.EntityNode');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.net.EntityCache');goog.require('weavejs.net.WeaveDataServlet');goog.require('weavejs.net.beans.AttributeColumnData');goog.require('weavejs.api.data.IDataSourceWithAuthentication');goog.require('weavejs.api.data.IDataSource_Service');
weavejs.data.source.WeaveDataSource=function(){weavejs.data.source.WeaveDataSource.base(this,'constructor');this.url=Weave.linkableChild(this,weavejs.core.LinkableString);this.hierarchyURL=Weave.linkableChild(this,weavejs.core.LinkableString);this.rootId=Weave.linkableChild(this,weavejs.core.LinkableVariable);this._idFields=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array,org.apache.flex.utils.Language.closure(this.verifyStringArray,this,'verifyStringArray')));this.url.addImmediateCallback(this,
org.apache.flex.utils.Language.closure(this.handleURLChange,this,'handleURLChange'),true)};goog.inherits(weavejs.data.source.WeaveDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.WeaveDataSource.SQLPARAMS='sqlParams';weavejs.data.source.WeaveDataSource.debug=false;weavejs.data.source.WeaveDataSource.prototype._service=null;weavejs.data.source.WeaveDataSource.prototype._tablePromiseCache;weavejs.data.source.WeaveDataSource.prototype.map_proxy_promise;
weavejs.data.source.WeaveDataSource.prototype._entityCache=null;weavejs.data.source.WeaveDataSource.prototype.url;weavejs.data.source.WeaveDataSource.prototype.hierarchyURL;weavejs.data.source.WeaveDataSource.prototype.rootId;weavejs.data.source.WeaveDataSource.prototype._idFields;weavejs.data.source.WeaveDataSource.prototype._overrideIdFields;
weavejs.data.source.WeaveDataSource.prototype.handleDeprecatedIdFields=function(){var state=org.apache.flex.utils.Language.as(this._overrideIdFields.getSessionState(),Array);if(state)this._idFields.setSessionState(state)};weavejs.data.source.WeaveDataSource.prototype.authenticate=function(user,pass){this._service.authenticate(user,pass)};weavejs.data.source.WeaveDataSource.prototype.verifyStringArray=function(array){return!array||weavejs.util.StandardLib.getArrayType(array)==String};
weavejs.data.source.WeaveDataSource.prototype.refreshHierarchy=function(){weavejs.data.source.WeaveDataSource.base(this,'refreshHierarchy');this.entityCache.invalidateAll();if(org.apache.flex.utils.Language.is(this._rootNode,weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms))org.apache.flex.utils.Language.as(this._rootNode,weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms).refresh()};
weavejs.data.source.WeaveDataSource.prototype.getHierarchyRoot=function(){var id=this.rootId.getSessionState();if(typeof id=='string')id=weavejs.util.StandardLib.asNumber(id);var isNumber=typeof id=='number'&&isFinite(org.apache.flex.utils.Language.as(id,Number));var isObject=id!=null&&typeof id=='object';if(!isNumber&&!isObject){if(!org.apache.flex.utils.Language.is(this._rootNode,weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms))this._rootNode=new weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms(this);
return this._rootNode}var node=org.apache.flex.utils.Language.as(this._rootNode,weavejs.data.hierarchy.EntityNode);if(!node)this._rootNode=node=new weavejs.data.hierarchy.EntityNode;node.setEntityCache(this.entityCache);if(isNumber)node.id=org.apache.flex.utils.Language.as(id,Number);else if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.getHierarchyRoot,this,'getHierarchyRoot'),this.rootId)){node.id=-1;this._service.findEntityIds(id,null).then(this.handleRootId.bind(this,this.rootId.triggerCounter))}return this._rootNode};
weavejs.data.source.WeaveDataSource.prototype.handleRootId=function(triggerCount,result){var node=org.apache.flex.utils.Language.as(this.getHierarchyRoot(),weavejs.data.hierarchy.EntityNode);if(!node||this.rootId.triggerCounter!=triggerCount)return;var ids=result||[];if(!ids.length){weavejs.util.JS.error('No entity matches specified rootId: '+Weave.stringify(this.rootId.getSessionState()));return}if(ids.length>1)weavejs.util.JS.error('Multiple entities ('+ids.length+') match specified rootId: '+Weave.stringify(this.rootId.getSessionState()));
node.id=ids[0];Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.source.WeaveDataSource.prototype.generateHierarchyNode=function(metadata){if(!metadata)return null;var id;if(typeof metadata!='object')id=weavejs.util.StandardLib.asNumber(metadata);else if(metadata.hasOwnProperty(weavejs.data.source.WeaveDataSource.ENTITY_ID))id=metadata[weavejs.data.source.WeaveDataSource.ENTITY_ID];else return weavejs.data.source.WeaveDataSource.base(this,'generateHierarchyNode',metadata);var node=new weavejs.data.hierarchy.EntityNode(this.entityCache);node.id=id;
return node};weavejs.data.source.WeaveDataSource.DEFAULT_BASE_URL='/WeaveServices';weavejs.data.source.WeaveDataSource.DEFAULT_SERVLET_NAME='/DataService';
weavejs.data.source.WeaveDataSource.prototype.handleURLChange=function(){this.url.delayCallbacks();var foreachiter0_target=['/OpenIndicatorsDataServices','/OpenIndicatorsDataService'];for(var foreachiter0 in foreachiter0_target){var deprecatedBaseURL=foreachiter0_target[foreachiter0];if(this.url.value==deprecatedBaseURL||this.url.value==deprecatedBaseURL+weavejs.data.source.WeaveDataSource.DEFAULT_SERVLET_NAME)this.url.value=null}if(this.url.value&&this.url.value.split('/').pop()==weavejs.data.source.WeaveDataSource.DEFAULT_BASE_URL.split('/').pop())this.url.value+=
weavejs.data.source.WeaveDataSource.DEFAULT_SERVLET_NAME;Weave.dispose(this._service);Weave.dispose(this._entityCache);this._service=Weave.linkableChild(this,new weavejs.net.WeaveDataServlet(this.url.value),org.apache.flex.utils.Language.closure(this.setIdFields,this,'setIdFields'));this._entityCache=Weave.linkableChild(this._service,new weavejs.net.EntityCache(this._service));this._tablePromiseCache={};this.map_proxy_promise=new weavejs.util.JS.WeakMap;this.refreshAllProxyColumns();this.url.resumeCallbacks()};
weavejs.data.source.WeaveDataSource.prototype.setIdFields=function(){if(this._overrideIdFields&&this._overrideIdFields.getSessionState())return;var info=this._service.getServerInfo();this._idFields.setSessionState(info?org.apache.flex.utils.Language.as(info['idFields'],Array):null)};weavejs.data.source.WeaveDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;weavejs.data.source.WeaveDataSource.base(this,'initialize',forceRefresh)};
weavejs.data.source.WeaveDataSource.prototype.generateNewAttributeColumn=function(metadata){if(typeof metadata!='object'){var meta;var id=weavejs.util.StandardLib.asNumber(metadata);if(isFinite(id))meta=weavejs.util.JS.copyObject(this.entityCache.getEntity(id).publicMetadata);else meta={};meta[weavejs.data.source.WeaveDataSource.ENTITY_ID]=metadata;metadata=meta}return weavejs.data.source.WeaveDataSource.base(this,'generateNewAttributeColumn',metadata)};
weavejs.data.source.WeaveDataSource.NO_RESULT_ERROR='Received null result from Weave server.';weavejs.data.source.WeaveDataSource.ENTITY_ID='weaveEntityId';
weavejs.data.source.WeaveDataSource.prototype.requestColumnFromSource=function(proxyColumn){var params=this.getMetadata(proxyColumn,[weavejs.data.source.WeaveDataSource.ENTITY_ID,weavejs.api.data.ColumnMetadata.MIN,weavejs.api.data.ColumnMetadata.MAX,weavejs.data.source.WeaveDataSource.SQLPARAMS],false);var query;var idFieldsArray=org.apache.flex.utils.Language.as(this._idFields.getSessionState(),Array);if(idFieldsArray||params[weavejs.data.source.WeaveDataSource.ENTITY_ID]){var id=idFieldsArray?
this.getMetadata(proxyColumn,idFieldsArray,true):weavejs.util.StandardLib.asNumber(params[weavejs.data.source.WeaveDataSource.ENTITY_ID]);var sqlParams=this.parseSqlParams(params[weavejs.data.source.WeaveDataSource.SQLPARAMS]);query=this._service.getColumn(id,params[weavejs.api.data.ColumnMetadata.MIN],params[weavejs.api.data.ColumnMetadata.MAX],sqlParams)}else{this.getMetadata(proxyColumn,[weavejs.api.data.ColumnMetadata.DATA_TYPE,'dataTable','name','year','sqlParams'],false,params);if(params[weavejs.api.data.ColumnMetadata.DATA_TYPE]!=
weavejs.api.data.DataType.GEOMETRY)delete params[weavejs.api.data.ColumnMetadata.DATA_TYPE];query=this._service.getColumnFromMetadata(params)}query.then(this.handleGetColumn.bind(this,proxyColumn),this.handleGetColumnFault.bind(this,proxyColumn));weavejs.WeaveAPI.ProgressIndicator.addTask(query,proxyColumn,'Requesting column from server: '+Weave.stringify(params))};
weavejs.data.source.WeaveDataSource.prototype.getMetadata=function(column,propertyNames,forUniqueId,output){output=typeof output!=='undefined'?output:null;if(!output)output={};var found=false;var name;var foreachiter1_target=propertyNames;for(var foreachiter1 in foreachiter1_target){name=foreachiter1_target[foreachiter1];var value=column.getMetadata(name);if(value){found=true;output[name]=value}}if(!found&&forUniqueId)var foreachiter2_target=propertyNames;for(var foreachiter2 in foreachiter2_target){name=
foreachiter2_target[foreachiter2];output[name]=''}return output};weavejs.data.source.WeaveDataSource.prototype.handleGetColumnFault=function(column,error){if(column.wasDisposed)return;weavejs.util.JS.error(error,'Error retrieving column:',column.getProxyMetadata(),column);column.dataUnavailable()};
weavejs.data.source.WeaveDataSource.prototype.parseSqlParams=function(sqlParams){var result;try{result=org.apache.flex.utils.Language.as(JSON.parse(sqlParams),Array)}catch(e){}if(!org.apache.flex.utils.Language.is(result,Array)){result=weavejs.WeaveAPI.CSVParser.parseCSVRow(sqlParams);if(result&&result.length==0)result=null}return result};
weavejs.data.source.WeaveDataSource.prototype.handleGetColumn=function(proxyColumn,result){var self=this;var __localFn0__=function(qkeys){var __localFn0__=function(){var newGeometricColumn=new weavejs.data.column.GeometryColumn(metadata);newGeometricColumn.setRecords(qkeys,geometriesVector);proxyColumn.setInternalColumn(newGeometricColumn)};if(result.data==null){proxyColumn.dataUnavailable();return}if(!dataType)dataType=weavejs.api.data.DataType.getDataTypeFromData(result.data);if(isGeom){var geometriesVector=
[];var createGeomColumn=__localFn0__;var pgGeomTask=weavejs.data.source.WeaveDataSource.PGGeomUtil.newParseTask(result.data,geometriesVector);weavejs.WeaveAPI.Scheduler.startTask(proxyColumn,pgGeomTask,weavejs.WeaveAPI.TASK_PRIORITY_HIGH,createGeomColumn)}else if(result.thirdColumn!=null){var newColumn=new weavejs.data.column.SecondaryKeyNumColumn(metadata);newColumn.baseTitle=metadata['baseTitle'];newColumn.updateRecords(qkeys,result.thirdColumn,result.data);proxyColumn.setInternalColumn(newColumn);
proxyColumn.setMetadata(null)}else if(weavejs.util.StandardLib.stringCompare(dataType,weavejs.api.data.DataType.NUMBER,true)==0){var newNumericColumn=new weavejs.data.column.NumberColumn(metadata);newNumericColumn.setRecords(qkeys,result.data);proxyColumn.setInternalColumn(newNumericColumn)}else if(weavejs.util.StandardLib.stringCompare(dataType,weavejs.api.data.DataType.DATE,true)==0){var newDateColumn=new weavejs.data.column.DateColumn(metadata);newDateColumn.setRecords(qkeys,result.data);proxyColumn.setInternalColumn(newDateColumn)}else{var newStringColumn=
new weavejs.data.column.StringColumn(metadata);newStringColumn.setRecords(qkeys,result.data);proxyColumn.setInternalColumn(newStringColumn)}};var __localFn1__=function(tableData){var __localFn0__=function(v,i,a){return'row'+i};if(weavejs.data.source.WeaveDataSource.debug)weavejs.util.JS.log('received',weavejs.util.DebugUtils.debugId(tableData),hash);if(!tableData.keyColumns)tableData.keyColumns=[];if(!tableData.columns)tableData.columns={};var name;var foreachiter3_target=tableData.keyColumns;for(var foreachiter3 in foreachiter3_target){name=
foreachiter3_target[foreachiter3];if(!tableData.columns.hasOwnProperty(name))throw new Error(Weave.lang('Table {0} is missing key column "{1}"',tableData.id,name));}if(tableData.keyColumns.length==1){keyStrings=tableData.columns[tableData.keyColumns[0]];return tableData}var nCol=tableData.keyColumns.length;var iCol,iRow,nRow=0;for(iCol=0;iCol<nCol;iCol++){var keyCol=tableData.columns[tableData.keyColumns[iCol]];if(iCol==0)keyStrings=new Array(keyCol.length);nRow=keyStrings.length;for(iRow=0;iRow<
nRow;iRow++){if(iCol==0)keyStrings[iRow]=new Array(nCol);keyStrings[iRow][iCol]=keyCol[iRow]}}for(iRow=0;iRow<nRow;iRow++)keyStrings[iRow]=weavejs.WeaveAPI.CSVParser.createCSVRow(keyStrings[iRow]);if(!keyStrings){var col;var foreachiter4_target=tableData.columns;for(var foreachiter4 in foreachiter4_target){col=foreachiter4_target[foreachiter4];break}keyStrings=col.map(__localFn0__)}return tableData};var __localFn2__=function(tableData){var __localFn0__=function(qkeys){if(weavejs.data.source.WeaveDataSource.debug)weavejs.util.JS.log('got QKeys',
weavejs.util.DebugUtils.debugId(tableData),hash);tableData.derived_qkeys=qkeys;return tableData};if(weavejs.data.source.WeaveDataSource.debug)weavejs.util.JS.log('promising QKeys',weavejs.util.DebugUtils.debugId(tableData),hash);return org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager).getQKeysPromise(getTablePromise,keyType,keyStrings).then(__localFn0__)};var __localFn3__=function(tableData){result.data=tableData.columns[result.tableField];if(result.data==
null){proxyColumn.dataUnavailable(Weave.lang('(Missing column: {0})',result.tableField));return}setRecords(tableData.derived_qkeys)};if(proxyColumn.wasDisposed)return;var metadata=proxyColumn.getProxyMetadata();try{if(!result){weavejs.util.JS.error('Did not receive any data from service for attribute column:',metadata);return}for(var metadataName in result.metadata){var metadataValue=result.metadata[metadataName];if(metadataValue)metadata[metadataName]=metadataValue}metadata[weavejs.data.source.WeaveDataSource.ENTITY_ID]=
result.id;proxyColumn.setMetadata(metadata);var dataType=weavejs.data.ColumnUtils.getDataType(proxyColumn);var isGeom=weavejs.util.StandardLib.stringCompare(dataType,weavejs.api.data.DataType.GEOMETRY,true)==0;if(isGeom&&result.data==null){var tileService=this._service.createTileService(result.id);proxyColumn.setInternalColumn(new weavejs.data.column.StreamedGeometryColumn(result.metadataTileDescriptors,result.geometryTileDescriptors,tileService,metadata));return}var setRecords=__localFn0__;var keyType=
weavejs.data.ColumnUtils.getKeyType(proxyColumn);if(result.data!=null)org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager).getQKeysPromise(proxyColumn,keyType,result.keys).then(setRecords);else{if(!result.tableField||result.tableId==weavejs.net.beans.AttributeColumnData.NO_TABLE_ID){proxyColumn.dataUnavailable();return}var sqlParams=this.parseSqlParams(proxyColumn.getMetadata(weavejs.data.source.WeaveDataSource.SQLPARAMS));var hash=Weave.stringify([result.tableId,
sqlParams]);var promise=this._tablePromiseCache[hash];if(!promise){var getTablePromise=(new weavejs.util.WeavePromise(this._service)).setResult(this._service.getTable(result.tableId,sqlParams));var keyStrings;promise=getTablePromise.then(__localFn1__).then(__localFn2__);this._tablePromiseCache[hash]=promise}promise.then(__localFn3__);if(!promise.getResult())weavejs.WeaveAPI.SessionManager.assignBusyTask(promise,proxyColumn)}}catch(e){weavejs.util.JS.error(e,'handleGetColumn',metadata)}};
Object.defineProperties(weavejs.data.source.WeaveDataSource.prototype,{isLocal:{get:function(){return false}},idFields:{get:function(){if(!this._overrideIdFields)this._overrideIdFields=Weave.linkableChild(this._idFields,new weavejs.core.LinkableVariable(Array,org.apache.flex.utils.Language.closure(this.verifyStringArray,this,'verifyStringArray')),org.apache.flex.utils.Language.closure(this.handleDeprecatedIdFields,this,'handleDeprecatedIdFields'));return this._overrideIdFields}},authenticationSupported:{get:function(){return this._service.authenticationSupported}},
authenticationRequired:{get:function(){return this._service.authenticationRequired}},authenticatedUser:{get:function(){return this._service.authenticatedUser}},entityCache:{get:function(){return this._entityCache}},serverVersion:{get:function(){var info=this._service.getServerInfo();return info?info['version']:null}},initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.WeaveDataSource,this,'initializationComplete')&&this._service.entityServiceInitialized}}});
weavejs.data.source.WeaveDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveDataSource',qName:'weavejs.data.source.WeaveDataSource'}],interfaces:[weavejs.api.data.IDataSource_Service,weavejs.api.data.IDataSourceWithAuthentication]};goog.exportSymbol('weavejs.data.source.WeaveDataSource',weavejs.data.source.WeaveDataSource);
weavejs.data.source.WeaveDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'url':{type:'LinkableString'},'hierarchyURL':{type:'LinkableString'},'rootId':{type:'LinkableVariable'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource'},'idFields':{type:'LinkableVariable',declaredBy:'weavejs.data.source.WeaveDataSource',metadata:function(){return[]}},'authenticationSupported':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource'},
'authenticationRequired':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource'},'authenticatedUser':{type:'String',declaredBy:'weavejs.data.source.WeaveDataSource'},'entityCache':{type:'EntityCache',declaredBy:'weavejs.data.source.WeaveDataSource'},'serverVersion':{type:'String',declaredBy:'weavejs.data.source.WeaveDataSource'}}},methods:function(){return{'WeaveDataSource':{type:'',declaredBy:'weavejs.data.source.WeaveDataSource'},'authenticate':{type:'void',declaredBy:'weavejs.data.source.WeaveDataSource'},
'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.WeaveDataSource'},'generateNewAttributeColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.source.WeaveDataSource'}}}}};weavejs.data.source.WeaveDataSource.PGGeomUtil=function(){};
weavejs.data.source.WeaveDataSource.PGGeomUtil.newParseTask=function(pgGeoms,output){var __localFn0__=function(returnTime){for(;i<n;i++){if(weavejs.util.JS.now()>returnTime)return i/n;var item=pgGeoms[i];var geomType=weavejs.geom.GeometryType.fromPostGISType(item[weavejs.data.source.WeaveDataSource.PGGeomUtil.TYPE]);var geometry=new weavejs.geom.GeneralizedGeometry(geomType);geometry.setCoordinates(item[weavejs.data.source.WeaveDataSource.PGGeomUtil.XYCOORDS],weavejs.geom.BLGTreeUtils.METHOD_SAMPLE);
output[i]=geometry}return 1};var i=0;var n=pgGeoms.length;output.length=n;return __localFn0__};weavejs.data.source.WeaveDataSource.PGGeomUtil.TYPE='type';weavejs.data.source.WeaveDataSource.PGGeomUtil.XYCOORDS='xyCoords';weavejs.data.source.WeaveDataSource.PGGeomUtil.prototype.FLEXJS_CLASS_INFO={names:[{name:'PGGeomUtil',qName:'weavejs.data.source.WeaveDataSource.PGGeomUtil'}]};goog.exportSymbol('weavejs.data.source.WeaveDataSource.PGGeomUtil',weavejs.data.source.WeaveDataSource.PGGeomUtil);
weavejs.data.source.WeaveDataSource.PGGeomUtil.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms=function(source){this.source=source;this.tableList=new weavejs.data.hierarchy.EntityNode(null,weavejs.api.data.EntityType.TABLE);this.geomList=new weavejs.data.source.WeaveDataSource.GeomListNode(source);this.children=[this.tableList,this.geomList]};
weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.source;weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.tableList;weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.geomList;weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.children;weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.refresh=function(){this.geomList.children=null};
weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.equals=function(other){return other==this};weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.getLabel=function(){return this.source.getLabel()};weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.isBranch=function(){return true};weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.hasChildBranches=function(){return true};
weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.getChildren=function(){this.tableList.setEntityCache(this.source.entityCache);var str=Weave.lang('Data Tables');if(this.tableList.getChildren().length)str=Weave.lang('{0} ({1})',str,this.tableList.getChildren().length);this.tableList._overrideLabel=str;return this.children};
weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.FLEXJS_CLASS_INFO={names:[{name:'RootNode_TablesAndGeoms',qName:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};goog.exportSymbol('weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms',weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms);
weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'RootNode_TablesAndGeoms':{type:'',declaredBy:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'},'refresh':{type:'void',declaredBy:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'},'equals':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'},
'getLabel':{type:'String',declaredBy:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'},'isBranch':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'},'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'},'getChildren':{type:'Array',declaredBy:'weavejs.data.source.WeaveDataSource.RootNode_TablesAndGeoms'}}}}};weavejs.data.source.WeaveDataSource.GeomListNode=function(source){this.source=source};
weavejs.data.source.WeaveDataSource.GeomListNode.prototype.source;weavejs.data.source.WeaveDataSource.GeomListNode.prototype.cache;weavejs.data.source.WeaveDataSource.GeomListNode.prototype.children;weavejs.data.source.WeaveDataSource.GeomListNode.prototype.equals=function(other){return other==this};
weavejs.data.source.WeaveDataSource.GeomListNode.prototype.getLabel=function(){var label=Weave.lang('Geometry Collections');this.getChildren();if(this.children&&this.children.length)return Weave.lang('{0} ({1})',label,this.children.length);return label};weavejs.data.source.WeaveDataSource.GeomListNode.prototype.isBranch=function(){return true};weavejs.data.source.WeaveDataSource.GeomListNode.prototype.hasChildBranches=function(){return false};
weavejs.data.source.WeaveDataSource.GeomListNode.prototype.getChildren=function(){if(!this.children||this.cache!=this.source.entityCache){this.cache=this.source.entityCache;this.children=[];var meta={};meta[weavejs.api.data.ColumnMetadata.ENTITY_TYPE]=weavejs.api.data.EntityType.COLUMN;meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=weavejs.api.data.DataType.GEOMETRY;this.cache.getHierarchyInfo(meta).then(this.handleHierarchyInfo.bind(this,this.children))}return this.children};
weavejs.data.source.WeaveDataSource.GeomListNode.prototype.handleHierarchyInfo=function(children,result){if(this.children!=children)return;var foreachiter5_target=result;for(var foreachiter5 in foreachiter5_target){var info=foreachiter5_target[foreachiter5];var node=new weavejs.data.source.WeaveDataSource.GeomColumnNode(this.source.entityCache);node.id=info.id;children.push(node)}Weave.getCallbacks(this.source).triggerCallbacks()};
weavejs.data.source.WeaveDataSource.GeomListNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeomListNode',qName:'weavejs.data.source.WeaveDataSource.GeomListNode'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};goog.exportSymbol('weavejs.data.source.WeaveDataSource.GeomListNode',weavejs.data.source.WeaveDataSource.GeomListNode);
weavejs.data.source.WeaveDataSource.GeomListNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'GeomListNode':{type:'',declaredBy:'weavejs.data.source.WeaveDataSource.GeomListNode'},'equals':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource.GeomListNode'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.WeaveDataSource.GeomListNode'},'isBranch':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource.GeomListNode'},
'hasChildBranches':{type:'Boolean',declaredBy:'weavejs.data.source.WeaveDataSource.GeomListNode'},'getChildren':{type:'Array',declaredBy:'weavejs.data.source.WeaveDataSource.GeomListNode'}}}}};weavejs.data.source.WeaveDataSource.GeomColumnNode=function(cache){weavejs.data.source.WeaveDataSource.GeomColumnNode.base(this,'constructor',cache)};goog.inherits(weavejs.data.source.WeaveDataSource.GeomColumnNode,weavejs.data.hierarchy.EntityNode);
weavejs.data.source.WeaveDataSource.GeomColumnNode.prototype.getLabel=function(){var title=weavejs.data.source.WeaveDataSource.GeomColumnNode.base(this,'getLabel');var cache=this.getEntityCache();var entity=this.getEntity();var foreachiter6_target=entity.parentIds;for(var foreachiter6 in foreachiter6_target){var parentId=foreachiter6_target[foreachiter6];var info=cache.getBranchInfo(parentId);if(info&&info.title&&info.title!=title)return title+' ('+info.title+')'}return title};
weavejs.data.source.WeaveDataSource.GeomColumnNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeomColumnNode',qName:'weavejs.data.source.WeaveDataSource.GeomColumnNode'}]};goog.exportSymbol('weavejs.data.source.WeaveDataSource.GeomColumnNode',weavejs.data.source.WeaveDataSource.GeomColumnNode);
weavejs.data.source.WeaveDataSource.GeomColumnNode.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'GeomColumnNode':{type:'',declaredBy:'weavejs.data.source.WeaveDataSource.GeomColumnNode'},'getLabel':{type:'String',declaredBy:'weavejs.data.source.WeaveDataSource.GeomColumnNode'}}}}};goog.provide('weavejs.data.source.WebSocketDataSource');goog.require('weavejs.data.source.AbstractDataSource');
weavejs.data.source.WebSocketDataSource=function(){weavejs.data.source.WebSocketDataSource.base(this,'constructor');this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString);this.keyProperty=Weave.linkableChild(this,weavejs.core.LinkableString);this.keepLast=Weave.linkableChild(this,weavejs.core.LinkableNumber,org.apache.flex.utils.Language.closure(this.onKeepLastChange,this,'onKeepLastChange'));this.selectionFilter=Weave.linkableChild(this,weavejs.data.key.DynamicKeyFilter,org.apache.flex.utils.Language.closure(this.onSelectionFilterChange,
this,'onSelectionFilterChange'));this.url=Weave.linkableChild(this,weavejs.core.LinkableString,org.apache.flex.utils.Language.closure(this.onUrlChange,this,'onUrlChange'));this.aggregationModes=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.typeofIsObject,this,'typeofIsObject')));this.records=[];this.propertyNames=new weavejs.util.JS.global.Set;this.selectionFilter.targetPath=['defaultSelectionKeySet']};
goog.inherits(weavejs.data.source.WebSocketDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.WebSocketDataSource.DATA_COLUMNNAME_META='__WebSocketJsonPropertyName__';weavejs.data.source.WebSocketDataSource.prototype.keyType;weavejs.data.source.WebSocketDataSource.prototype.keyProperty;weavejs.data.source.WebSocketDataSource.prototype.keepLast;weavejs.data.source.WebSocketDataSource.prototype.selectionFilter;weavejs.data.source.WebSocketDataSource.prototype.url;
weavejs.data.source.WebSocketDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;weavejs.data.source.WebSocketDataSource.base(this,'initialize',true)};
weavejs.data.source.WebSocketDataSource.prototype.onSelectionFilterChange=function(){var self=this;var __localFn0__=function(key,idx,a){return key.localName};if(this._socket&&this._socket.readyState==1){var ks=org.apache.flex.utils.Language.as(this.selectionFilter.getInternalKeyFilter(),weavejs.api.data.IKeySet);if(!ks||!ks.keys)return;this._socket.send(JSON.stringify(ks.keys.map(__localFn0__)))}};weavejs.data.source.WebSocketDataSource.prototype._socket=null;
weavejs.data.source.WebSocketDataSource.prototype.onUrlChange=function(){this.reconnect();this.records=[];this.propertyNames.clear()};
weavejs.data.source.WebSocketDataSource.prototype.reconnect=function(){weavejs.util.JS.global.clearTimeout(this.timeoutId);if(this._socket&&this._socket.readyState<2){this._socket.close(1E3,'No longer needed.');this._socket=null}this._socket=new weavejs.util.JS.global.WebSocket(this.url.value);this._socket.onmessage=org.apache.flex.utils.Language.closure(this.onMessage,this,'onMessage');this._socket.onclose=org.apache.flex.utils.Language.closure(this.onClose,this,'onClose');this._socket.onerror=org.apache.flex.utils.Language.closure(this.onError,
this,'onError')};weavejs.data.source.WebSocketDataSource.prototype.timeoutId=0;weavejs.data.source.WebSocketDataSource.prototype.onClose=function(event){this._socket=null;if(this.url.value&&event.code==1006)this.timeoutId=weavejs.util.JS.global.setTimeout(org.apache.flex.utils.Language.closure(this.reconnect,this,'reconnect'),1500)};weavejs.data.source.WebSocketDataSource.prototype.onError=function(event){weavejs.util.JS.error(event);this._socket=null};
weavejs.data.source.WebSocketDataSource.prototype.addRecord=function(record){if(this.records.length==this.keepLast.value&&this.keepLast.value>0)this.records.shift();this.records.push(record);var foreachiter0_target=weavejs.util.JS.objectKeys(record);for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];this.propertyNames.add(key)}};
weavejs.data.source.WebSocketDataSource.prototype.onMessage=function(event){var str=event.data;var message=JSON.parse(str);if(org.apache.flex.utils.Language.is(message,Array))message.forEach(org.apache.flex.utils.Language.closure(this.addRecord,this,'addRecord'));else this.addRecord(message);Weave.getCallbacks(this).triggerCallbacks()};weavejs.data.source.WebSocketDataSource.prototype.getPropertyNames=function(){return weavejs.util.JS.mapKeys(this.propertyNames)};
weavejs.data.source.WebSocketDataSource.prototype.onKeepLastChange=function(){var diff=this.records.length-this.keepLast.value;if(diff>0)this.records=this.records.slice(diff)};weavejs.data.source.WebSocketDataSource.prototype.aggregationModes;weavejs.data.source.WebSocketDataSource.prototype.typeofIsObject=function(value){return typeof value=='object'};weavejs.data.source.WebSocketDataSource.prototype.records;weavejs.data.source.WebSocketDataSource.prototype.propertyNames;
weavejs.data.source.WebSocketDataSource.prototype.getHierarchyRoot=function(){var self=this;var __localFn0__=function(){var __localFn0__=function(columnName,_){_=Array.prototype.slice.call(arguments,1);var meta={};meta[weavejs.data.source.WebSocketDataSource.DATA_COLUMNNAME_META]=columnName;return self.generateHierarchyNode(meta)};return weavejs.util.JS.mapValues(self.propertyNames).map(__localFn0__)};if(!this._rootNode)this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({cacheSettings:{'label':false},
dataSource:this,dependency:this,data:this,'label':org.apache.flex.utils.Language.closure(this.getLabel,this,'getLabel'),hasChildBranches:false,children:__localFn0__});return this._rootNode};
weavejs.data.source.WebSocketDataSource.prototype.generateHierarchyNode=function(metadata){if(!metadata)return null;metadata=this.getColumnMetadata(metadata[weavejs.data.source.WebSocketDataSource.DATA_COLUMNNAME_META]);if(!metadata)return null;return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,idFields:[weavejs.data.source.WebSocketDataSource.DATA_COLUMNNAME_META],data:metadata})};
weavejs.data.source.WebSocketDataSource.prototype.getColumnMetadata=function(dataColumnName){var metadata={};metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.keyType.value||weavejs.api.data.DataType.STRING;metadata[weavejs.data.source.WebSocketDataSource.DATA_COLUMNNAME_META]=dataColumnName;metadata[weavejs.api.data.ColumnMetadata.TITLE]=dataColumnName;var aggState=this.aggregationModes.getSessionState();var aggregation=aggState?aggState[dataColumnName]:null;aggregation=aggregation||weavejs.api.data.Aggregation.LAST;
metadata[weavejs.api.data.ColumnMetadata.AGGREGATION]=aggregation;if(aggregation!=weavejs.api.data.Aggregation.SAME)metadata[weavejs.api.data.ColumnMetadata.TITLE]=Weave.lang('{0} ({1})',metadata[weavejs.api.data.ColumnMetadata.TITLE],aggregation);return metadata};
weavejs.data.source.WebSocketDataSource.prototype.requestColumnFromSource=function(proxyColumn){var columnName=proxyColumn.getMetadata(weavejs.data.source.WebSocketDataSource.DATA_COLUMNNAME_META);var keys;var data=weavejs.util.StandardLib.lodash.map(this.records,columnName);if(this.keyProperty.value)keys=weavejs.util.StandardLib.lodash.map(this.records,this.keyProperty.value);else keys=weavejs.util.StandardLib.lodash.range(data.length);var metadata=this.getColumnMetadata(columnName);var dataType=
weavejs.data.DataSourceUtils.guessDataType(data);metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=dataType;proxyColumn.setMetadata(metadata);weavejs.data.DataSourceUtils.initColumn(proxyColumn,keys,data)};weavejs.data.source.WebSocketDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'WebSocketDataSource',qName:'weavejs.data.source.WebSocketDataSource'}]};goog.exportSymbol('weavejs.data.source.WebSocketDataSource',weavejs.data.source.WebSocketDataSource);
weavejs.data.source.WebSocketDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'keyType':{type:'LinkableString'},'keyProperty':{type:'LinkableString'},'keepLast':{type:'LinkableNumber'},'selectionFilter':{type:'DynamicKeyFilter'},'url':{type:'LinkableString'},'aggregationModes':{type:'ILinkableVariable'}}},accessors:function(){return{}},methods:function(){return{'WebSocketDataSource':{type:'',declaredBy:'weavejs.data.source.WebSocketDataSource'},'reconnect':{type:'void',
declaredBy:'weavejs.data.source.WebSocketDataSource'},'getPropertyNames':{type:'Array',declaredBy:'weavejs.data.source.WebSocketDataSource'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.WebSocketDataSource'}}}}};goog.provide('weavejs.geom.LinkableBounds2D');goog.require('weavejs.core.LinkableVariable');weavejs.geom.LinkableBounds2D=function(){weavejs.geom.LinkableBounds2D.base(this,'constructor')};goog.inherits(weavejs.geom.LinkableBounds2D,weavejs.core.LinkableVariable);weavejs.geom.LinkableBounds2D.prototype.setBounds=function(xMin,yMin,xMax,yMax){weavejs.geom.LinkableBounds2D.tempBounds.setBounds(xMin,yMin,xMax,yMax);this.setSessionState(weavejs.geom.LinkableBounds2D.tempBounds)};
weavejs.geom.LinkableBounds2D.tempBounds=new weavejs.geom.Bounds2D;weavejs.geom.LinkableBounds2D.prototype.copyFrom=function(sourceBounds){weavejs.geom.LinkableBounds2D.tempBounds.copyFrom(sourceBounds);this.setSessionState(weavejs.geom.LinkableBounds2D.tempBounds)};
weavejs.geom.LinkableBounds2D.prototype.copyTo=function(destinationBounds){weavejs.geom.LinkableBounds2D.tempBounds.reset();this.detectChanges();if(this._sessionStateInternal&&typeof this._sessionStateInternal=='object'){weavejs.geom.LinkableBounds2D.tempBounds.xMin=weavejs.util.StandardLib.asNumber(this._sessionStateInternal.xMin);weavejs.geom.LinkableBounds2D.tempBounds.yMin=weavejs.util.StandardLib.asNumber(this._sessionStateInternal.yMin);weavejs.geom.LinkableBounds2D.tempBounds.xMax=weavejs.util.StandardLib.asNumber(this._sessionStateInternal.xMax);
weavejs.geom.LinkableBounds2D.tempBounds.yMax=weavejs.util.StandardLib.asNumber(this._sessionStateInternal.yMax)}destinationBounds.copyFrom(weavejs.geom.LinkableBounds2D.tempBounds)};weavejs.geom.LinkableBounds2D.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableBounds2D',qName:'weavejs.geom.LinkableBounds2D'}]};goog.exportSymbol('weavejs.geom.LinkableBounds2D',weavejs.geom.LinkableBounds2D);
weavejs.geom.LinkableBounds2D.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'setBounds':{type:'void',declaredBy:'weavejs.geom.LinkableBounds2D'},'copyFrom':{type:'void',declaredBy:'weavejs.geom.LinkableBounds2D'},'copyTo':{type:'void',declaredBy:'weavejs.geom.LinkableBounds2D'}}}}};goog.provide('weavejs.geom.Range');weavejs.geom.Range=function(begin,end){begin=typeof begin!=='undefined'?begin:NaN;end=typeof end!=='undefined'?end:NaN;this.begin=begin;this.end=end};weavejs.geom.Range.prototype.begin;weavejs.geom.Range.prototype.end;weavejs.geom.Range.prototype.normalize=function(value){if(value==this.end)return 1;return(value-this.begin)/(this.end-this.begin)};weavejs.geom.Range.prototype.denormalize=function(value){return this.begin+(this.end-this.begin)*value};
weavejs.geom.Range.prototype.setRange=function(begin,end){this.begin=begin;this.end=end};weavejs.geom.Range.prototype.offset=function(delta){this.begin+=delta;this.end+=delta};weavejs.geom.Range.prototype.constrain=function(value){if(this.begin<this.end)return Math.max(this.begin,Math.min(value,this.end));return Math.max(this.end,Math.min(value,this.begin))};
weavejs.geom.Range.prototype.contains=function(value){if(this.begin<this.end)return this.begin<=value&&value<=this.end;return this.end<=value&&value<=this.begin};weavejs.geom.Range.prototype.compare=function(value){var min=this.min;var max=this.max;if(value<min)return-1;if(value>max)return 1;if(min<=value&&value<=max)return 0;return NaN};
weavejs.geom.Range.prototype.constrainRange=function(rangeToConstrain,allowShrinking){allowShrinking=typeof allowShrinking!=='undefined'?allowShrinking:false;if(isNaN(this.coverage))return;if(rangeToConstrain.coverage<this.coverage)if(rangeToConstrain.min<this.min)rangeToConstrain.offset(this.min-rangeToConstrain.min);else{if(rangeToConstrain.max>this.max)rangeToConstrain.offset(this.max-rangeToConstrain.max)}else if(allowShrinking)rangeToConstrain.setRange(this.begin,this.end);else if(rangeToConstrain.min>
this.min)rangeToConstrain.offset(this.min-rangeToConstrain.min);else if(rangeToConstrain.max<this.max)rangeToConstrain.offset(this.max-rangeToConstrain.max)};weavejs.geom.Range.prototype.includeInRange=function(value){if(this.end<this.begin){if(value<this.end)this.end=value;if(value>this.begin)this.begin=value}else{if(value<this.begin)this.begin=value;if(value>this.end)this.end=value}};weavejs.geom.Range.prototype.toString=function(){return'['+this.begin.toFixed(2)+' to '+this.end.toFixed(2)+']'};
Object.defineProperties(weavejs.geom.Range.prototype,{min:{get:function(){return Math.min(this.begin,this.end)}},max:{get:function(){return Math.max(this.begin,this.end)}},coverage:{get:function(){return Math.abs(this.end-this.begin)}}});weavejs.geom.Range.prototype.FLEXJS_CLASS_INFO={names:[{name:'Range',qName:'weavejs.geom.Range'}]};goog.exportSymbol('weavejs.geom.Range',weavejs.geom.Range);
weavejs.geom.Range.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'begin':{type:'Number'},'end':{type:'Number'}}},accessors:function(){return{'min':{type:'Number',declaredBy:'weavejs.geom.Range'},'max':{type:'Number',declaredBy:'weavejs.geom.Range'},'coverage':{type:'Number',declaredBy:'weavejs.geom.Range'}}},methods:function(){return{'Range':{type:'',declaredBy:'weavejs.geom.Range'},'normalize':{type:'Number',declaredBy:'weavejs.geom.Range'},'denormalize':{type:'Number',
declaredBy:'weavejs.geom.Range'},'setRange':{type:'void',declaredBy:'weavejs.geom.Range'},'offset':{type:'void',declaredBy:'weavejs.geom.Range'},'constrain':{type:'Number',declaredBy:'weavejs.geom.Range'},'contains':{type:'Boolean',declaredBy:'weavejs.geom.Range'},'compare':{type:'Number',declaredBy:'weavejs.geom.Range'},'constrainRange':{type:'void',declaredBy:'weavejs.geom.Range'},'includeInRange':{type:'void',declaredBy:'weavejs.geom.Range'},'toString':{type:'String',declaredBy:'weavejs.geom.Range'}}}}};goog.provide('weavejs.geom.TempHack_SolidFillStyle');goog.require('weavejs.api.core.ILinkableObject');weavejs.geom.TempHack_SolidFillStyle=function(){this.enable=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.color=Weave.linkableChild(this,new weavejs.data.column.AlwaysDefinedColumn(NaN));this.alpha=Weave.linkableChild(this,new weavejs.data.column.AlwaysDefinedColumn(1))};weavejs.geom.TempHack_SolidFillStyle.prototype.enable;weavejs.geom.TempHack_SolidFillStyle.prototype.color;
weavejs.geom.TempHack_SolidFillStyle.prototype.alpha;weavejs.geom.TempHack_SolidFillStyle.prototype.getStyle=function(key){return{'color':this.color.getValueFromKey(key,Number),'alpha':this.alpha.getValueFromKey(key,Number)}};Object.defineProperties(weavejs.geom.TempHack_SolidFillStyle.prototype,{recordFormat:{get:function(){return{'color':this.color,'alpha':this.alpha}}},recordType:{get:function(){return{'color':Number,'alpha':Number}}}});
weavejs.geom.TempHack_SolidFillStyle.prototype.FLEXJS_CLASS_INFO={names:[{name:'TempHack_SolidFillStyle',qName:'weavejs.geom.TempHack_SolidFillStyle'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.geom.TempHack_SolidFillStyle',weavejs.geom.TempHack_SolidFillStyle);
weavejs.geom.TempHack_SolidFillStyle.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'enable':{type:'LinkableBoolean'},'color':{type:'AlwaysDefinedColumn'},'alpha':{type:'AlwaysDefinedColumn'}}},accessors:function(){return{'recordFormat':{type:'Object',declaredBy:'weavejs.geom.TempHack_SolidFillStyle'},'recordType':{type:'Object',declaredBy:'weavejs.geom.TempHack_SolidFillStyle'}}},methods:function(){return{'getStyle':{type:'Object',declaredBy:'weavejs.geom.TempHack_SolidFillStyle'}}}}};goog.provide('weavejs.geom.TempHack_SolidLineStyle');goog.require('weavejs.api.core.ILinkableObject');
weavejs.geom.TempHack_SolidLineStyle=function(){this.map_column_dataType=new weavejs.util.JS.Map;this.map_column_defaultValue=new weavejs.util.JS.Map;this.enable=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.color=this.createColumn(Number,0);this.weight=this.createColumn(Number,1);this.alpha=this.createColumn(Number,.5);this.caps=this.createColumn(String,null);this.joints=this.createColumn(String,null);this.miterLimit=this.createColumn(Number,3);this._callbackCollection=Weave.getCallbacks(this);
this.weight.internalDynamicColumn.requestLocalObject(weavejs.data.column.NormalizedColumn,true);this.normalizedWeightColumn.min.value=1;this.normalizedWeightColumn.max.value=5};weavejs.geom.TempHack_SolidLineStyle.prototype._callbackCollection;weavejs.geom.TempHack_SolidLineStyle.prototype._triggerCounter=0;weavejs.geom.TempHack_SolidLineStyle.prototype.map_column_dataType;weavejs.geom.TempHack_SolidLineStyle.prototype.map_column_defaultValue;
weavejs.geom.TempHack_SolidLineStyle.prototype.createColumn=function(dataType,defaultValue){var column=Weave.linkableChild(this,weavejs.data.column.AlwaysDefinedColumn);this.map_column_dataType[column]=dataType;column.defaultValue.state=defaultValue;return column};weavejs.geom.TempHack_SolidLineStyle.prototype.enable;weavejs.geom.TempHack_SolidLineStyle.prototype.color;weavejs.geom.TempHack_SolidLineStyle.prototype.weight;weavejs.geom.TempHack_SolidLineStyle.prototype.alpha;weavejs.geom.TempHack_SolidLineStyle.prototype.caps;
weavejs.geom.TempHack_SolidLineStyle.prototype.joints;weavejs.geom.TempHack_SolidLineStyle.prototype.miterLimit;weavejs.geom.TempHack_SolidLineStyle.prototype.map_key_style;
weavejs.geom.TempHack_SolidLineStyle.prototype.getStyle=function(key){if(this._triggerCounter!=this._callbackCollection.triggerCounter){this._triggerCounter=this._callbackCollection.triggerCounter;for(var col in weavejs.util.JS.mapKeys(this.map_column_dataType)){var column=org.apache.flex.utils.Language.as(col,weavejs.data.column.AlwaysDefinedColumn);if(column.getInternalColumn()!=null)this.map_column_defaultValue['delete'](column);else this.map_column_defaultValue.set(column,weavejs.data.EquationColumnLib.cast(column.defaultValue.state,
this.map_column_dataType.get(column)))}this.map_key_style=new weavejs.util.JS.WeakMap}var params=this.map_key_style.get(key);if(params)return params;var _color=this.map_column_defaultValue.get(this.color);var _weight=this.map_column_defaultValue.get(this.weight);var _alpha=this.map_column_defaultValue.get(this.alpha);var _caps=this.map_column_defaultValue.get(this.caps);var _joints=this.map_column_defaultValue.get(this.joints);var _miterLimit=this.map_column_defaultValue.get(this.miterLimit);var lineColor=
_color!==undefined?_color:this.color.getValueFromKey(key,Number);var lineWeight=_weight!==undefined?_weight:this.weight.getValueFromKey(key,Number);var lineAlpha=_alpha!==undefined?_alpha:this.alpha.getValueFromKey(key,Number);var lineCaps=_caps!==undefined?_caps:org.apache.flex.utils.Language.as(this.caps.getValueFromKey(key,String),String)||null;var lineJoints=_joints!==undefined?_joints:org.apache.flex.utils.Language.as(this.joints.getValueFromKey(key,String),String)||null;var lineMiterLimit=_miterLimit!==
undefined?_miterLimit:this.miterLimit.getValueFromKey(key,Number);params={'color':lineColor,'weight':lineWeight,'alpha':lineAlpha,'caps':lineCaps,'joints':lineJoints,'miterLimit':lineMiterLimit};this.map_key_style.set(key,params);return params};
Object.defineProperties(weavejs.geom.TempHack_SolidLineStyle.prototype,{normalizedWeightColumn:{get:function(){return org.apache.flex.utils.Language.as(this.weight.getInternalColumn(),weavejs.data.column.NormalizedColumn)}},recordFormat:{get:function(){return{'color':this.color,'weight':this.weight,'alpha':this.alpha,'caps':this.caps,'joints':this.joints,'miterLimit':this.miterLimit}}},recordType:{get:function(){return{'color':Number,'weight':Number,'alpha':Number,'caps':String,'joints':String,'miterLimit':Number}}}});
weavejs.geom.TempHack_SolidLineStyle.prototype.FLEXJS_CLASS_INFO={names:[{name:'TempHack_SolidLineStyle',qName:'weavejs.geom.TempHack_SolidLineStyle'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.exportSymbol('weavejs.geom.TempHack_SolidLineStyle',weavejs.geom.TempHack_SolidLineStyle);
weavejs.geom.TempHack_SolidLineStyle.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'enable':{type:'LinkableBoolean'},'color':{type:'AlwaysDefinedColumn'},'weight':{type:'AlwaysDefinedColumn'},'alpha':{type:'AlwaysDefinedColumn'},'caps':{type:'AlwaysDefinedColumn'},'joints':{type:'AlwaysDefinedColumn'},'miterLimit':{type:'AlwaysDefinedColumn'}}},accessors:function(){return{'normalizedWeightColumn':{type:'NormalizedColumn',declaredBy:'weavejs.geom.TempHack_SolidLineStyle'},
'recordFormat':{type:'Object',declaredBy:'weavejs.geom.TempHack_SolidLineStyle'},'recordType':{type:'Object',declaredBy:'weavejs.geom.TempHack_SolidLineStyle'}}},methods:function(){return{'TempHack_SolidLineStyle':{type:'',declaredBy:'weavejs.geom.TempHack_SolidLineStyle'},'getStyle':{type:'Object',declaredBy:'weavejs.geom.TempHack_SolidLineStyle'}}}}};goog.provide('weavejs.geom.ZoomBounds');goog.require('weavejs.api.core.ILinkableVariable');weavejs.geom.ZoomBounds=function(){this._tempBounds=new weavejs.geom.Bounds2D;this._dataBounds=new weavejs.geom.Bounds2D;this._screenBounds=new weavejs.geom.Bounds2D};weavejs.geom.ZoomBounds.prototype._tempBounds;weavejs.geom.ZoomBounds.prototype._dataBounds;weavejs.geom.ZoomBounds.prototype._screenBounds;weavejs.geom.ZoomBounds.prototype._useFixedAspectRatio=false;
weavejs.geom.ZoomBounds.prototype.getSessionState=function(){if(this._useFixedAspectRatio)return{xCenter:weavejs.util.StandardLib.roundSignificant(this._dataBounds.getXCenter()),yCenter:weavejs.util.StandardLib.roundSignificant(this._dataBounds.getYCenter()),area:weavejs.util.StandardLib.roundSignificant(this._dataBounds.getArea())};else return{xMin:this._dataBounds.getXMin(),yMin:this._dataBounds.getYMin(),xMax:this._dataBounds.getXMax(),yMax:this._dataBounds.getYMax()}};
weavejs.geom.ZoomBounds.prototype.setSessionState=function(state){var cc=Weave.getCallbacks(this);cc.delayCallbacks();if(state==null){if(!this._dataBounds.isUndefined())cc.triggerCallbacks();this._dataBounds.reset()}else{var useFixedAspectRatio=false;if(state.hasOwnProperty('xCenter')){useFixedAspectRatio=true;if(weavejs.util.StandardLib.roundSignificant(this._dataBounds.getXCenter())!=state.xCenter){this._dataBounds.setXCenter(state.xCenter);cc.triggerCallbacks()}}if(state.hasOwnProperty('yCenter')){useFixedAspectRatio=
true;if(weavejs.util.StandardLib.roundSignificant(this._dataBounds.getYCenter())!=state.yCenter){this._dataBounds.setYCenter(state.yCenter);cc.triggerCallbacks()}}if(state.hasOwnProperty('area')){useFixedAspectRatio=true;if(weavejs.util.StandardLib.roundSignificant(this._dataBounds.getArea())!=state.area){var Ad=state.area;var HsWsRatio=this._screenBounds.getYCoverage()/this._screenBounds.getXCoverage();if(!isFinite(HsWsRatio))HsWsRatio=1;var Hd=Math.sqrt(Ad*HsWsRatio);var Wd=Ad/Hd;this._dataBounds.centeredResize(Wd,
Hd);cc.triggerCallbacks()}}if(!useFixedAspectRatio){var names=['xMin','yMin','xMax','yMax'];var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(state.hasOwnProperty(name)&&this._dataBounds[name]!=state[name]){this._dataBounds[name]=state[name];cc.triggerCallbacks()}}}this._useFixedAspectRatio=useFixedAspectRatio}cc.resumeCallbacks()};weavejs.geom.ZoomBounds.prototype.getDataBounds=function(outputDataBounds){outputDataBounds.copyFrom(this._dataBounds)};
weavejs.geom.ZoomBounds.prototype.getScreenBounds=function(outputScreenBounds){outputScreenBounds.copyFrom(this._screenBounds)};weavejs.geom.ZoomBounds.prototype.projectDataToScreen=function(inputAndOutput){this._dataBounds.projectPointTo(inputAndOutput,this._screenBounds)};weavejs.geom.ZoomBounds.prototype.projectScreenToData=function(inputAndOutput){this._screenBounds.projectPointTo(inputAndOutput,this._dataBounds)};
weavejs.geom.ZoomBounds.prototype.setBounds=function(dataBounds,screenBounds,useFixedAspectRatio){if(this._dataBounds.equals(dataBounds)&&this._screenBounds.equals(screenBounds)&&this._useFixedAspectRatio==useFixedAspectRatio)return;this._dataBounds.copyFrom(dataBounds);this._screenBounds.copyFrom(screenBounds);this._useFixedAspectRatio=useFixedAspectRatio;this._fixAspectRatio();Weave.getCallbacks(this).triggerCallbacks()};
weavejs.geom.ZoomBounds.prototype.setDataBounds=function(dataBounds,zoomOutIfNecessary){zoomOutIfNecessary=typeof zoomOutIfNecessary!=='undefined'?zoomOutIfNecessary:false;if(this._dataBounds.equals(dataBounds))return;this._dataBounds.copyFrom(dataBounds);this._fixAspectRatio(zoomOutIfNecessary);Weave.getCallbacks(this).triggerCallbacks()};
weavejs.geom.ZoomBounds.prototype.setScreenBounds=function(screenBounds,useFixedAspectRatio){if(this._useFixedAspectRatio==useFixedAspectRatio&&this._screenBounds.equals(screenBounds))return;this._useFixedAspectRatio=useFixedAspectRatio;this._screenBounds.copyFrom(screenBounds);this._fixAspectRatio();Weave.getCallbacks(this).triggerCallbacks()};
weavejs.geom.ZoomBounds.prototype._fixAspectRatio=function(zoomOutIfNecessary){zoomOutIfNecessary=typeof zoomOutIfNecessary!=='undefined'?zoomOutIfNecessary:false;if(this._useFixedAspectRatio&&!this._screenBounds.isEmpty()){var xInvScale=this._dataBounds.getXCoverage()/this._screenBounds.getXCoverage();var yInvScale=this._dataBounds.getYCoverage()/this._screenBounds.getYCoverage();if(xInvScale!=yInvScale){var scale=zoomOutIfNecessary?Math.max(xInvScale,yInvScale):Math.sqrt(xInvScale*yInvScale);this._dataBounds.centeredResize(this._screenBounds.getXCoverage()*
scale,this._screenBounds.getYCoverage()*scale)}}};weavejs.geom.ZoomBounds.prototype.getXScale=function(){return this._screenBounds.getXCoverage()/this._dataBounds.getXCoverage()};weavejs.geom.ZoomBounds.prototype.getYScale=function(){return this._screenBounds.getYCoverage()/this._dataBounds.getYCoverage()};weavejs.geom.ZoomBounds.prototype.FLEXJS_CLASS_INFO={names:[{name:'ZoomBounds',qName:'weavejs.geom.ZoomBounds'}],interfaces:[weavejs.api.core.ILinkableVariable]};
goog.exportSymbol('weavejs.geom.ZoomBounds',weavejs.geom.ZoomBounds);
weavejs.geom.ZoomBounds.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'ZoomBounds':{type:'',declaredBy:'weavejs.geom.ZoomBounds'},'getSessionState':{type:'Object',declaredBy:'weavejs.geom.ZoomBounds'},'setSessionState':{type:'void',declaredBy:'weavejs.geom.ZoomBounds'},'getDataBounds':{type:'void',declaredBy:'weavejs.geom.ZoomBounds'},'getScreenBounds':{type:'void',declaredBy:'weavejs.geom.ZoomBounds'},'projectDataToScreen':{type:'void',
declaredBy:'weavejs.geom.ZoomBounds'},'projectScreenToData':{type:'void',declaredBy:'weavejs.geom.ZoomBounds'},'setBounds':{type:'void',declaredBy:'weavejs.geom.ZoomBounds'},'setDataBounds':{type:'void',declaredBy:'weavejs.geom.ZoomBounds'},'setScreenBounds':{type:'void',declaredBy:'weavejs.geom.ZoomBounds'},'getXScale':{type:'Number',declaredBy:'weavejs.geom.ZoomBounds'},'getYScale':{type:'Number',declaredBy:'weavejs.geom.ZoomBounds'}}}}};goog.provide('weavejs.net.AsyncInvocationQueue');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableObjectWithBusyStatus');weavejs.net.AsyncInvocationQueue=function(paused){paused=typeof paused!=='undefined'?paused:false;this.map_queryToService=new weavejs.util.JS.WeakMap;this._downloadQueue=new Array;this._paused=paused};weavejs.net.AsyncInvocationQueue.debug=false;
weavejs.net.AsyncInvocationQueue.prototype.isBusy=function(){this.assertQueueValid();return this._downloadQueue.length>0};weavejs.net.AsyncInvocationQueue.prototype.dispose=function(){this.assertQueueValid();var foreachiter0_target=this._downloadQueue;for(var foreachiter0 in foreachiter0_target){var query=foreachiter0_target[foreachiter0];weavejs.WeaveAPI.ProgressIndicator.removeTask(query)}this._downloadQueue.length=0};weavejs.net.AsyncInvocationQueue.prototype._paused=false;
weavejs.net.AsyncInvocationQueue.prototype.begin=function(){this.assertQueueValid();if(this._paused){this._paused=false;var foreachiter1_target=this._downloadQueue;for(var foreachiter1 in foreachiter1_target){var query=foreachiter1_target[foreachiter1];weavejs.WeaveAPI.ProgressIndicator.addTask(query)}if(this._downloadQueue.length)this.performQuery(this._downloadQueue[0])}};weavejs.net.AsyncInvocationQueue.prototype.map_queryToService;
weavejs.net.AsyncInvocationQueue.prototype.addToQueue=function(query,service){var self=this;var __localFn0__=function(result){weavejs.util.JS.log('Query returned: ',query)};var __localFn1__=function(fault){weavejs.util.JS.log('Query failed: ',query)};this.assertQueueValid();if(this._downloadQueue.indexOf(query)>=0)return;if(!this._paused)weavejs.WeaveAPI.ProgressIndicator.addTask(query);this.map_queryToService.set(query,service);if(weavejs.net.AsyncInvocationQueue.debug)query.then(__localFn0__,__localFn1__);
this._downloadQueue.push(query);if(!this._paused&&this._downloadQueue.length==1)this.performQuery(query);else;};weavejs.net.AsyncInvocationQueue.prototype._downloadQueue;
weavejs.net.AsyncInvocationQueue.prototype.performQuery=function(query){var self=this;var __localFn0__=function(result){self.handleQueryResultOrFault(result,query)};var __localFn1__=function(fault){self.handleQueryResultOrFault(fault,query)};this.assertQueueValid();query.then(__localFn0__,__localFn1__);var service=this.map_queryToService.get(query);if(service){if(weavejs.net.AsyncInvocationQueue.debug)weavejs.util.JS.log('Query sent: ',query);service.invokeDeferred(query)}else if(weavejs.net.AsyncInvocationQueue.debug)weavejs.util.JS.log('Query had no associated service: ',
query)};weavejs.net.AsyncInvocationQueue.prototype.handleQueryResultOrFault=function(result,query){if(Weave.wasDisposed(this))return;weavejs.WeaveAPI.ProgressIndicator.removeTask(query);var index=this._downloadQueue.indexOf(query);if(index<0){weavejs.util.JS.log('Query not found in queue: ',query);return}this._downloadQueue.splice(index,1);if(index==0&&this._downloadQueue.length>0)this.performQuery(this._downloadQueue[0]);return};
weavejs.net.AsyncInvocationQueue.prototype.assertQueueValid=function(){if(Weave.wasDisposed(this))throw new Error('AsyncInvocationQueue was already disposed');};weavejs.net.AsyncInvocationQueue.prototype.FLEXJS_CLASS_INFO={names:[{name:'AsyncInvocationQueue',qName:'weavejs.net.AsyncInvocationQueue'}],interfaces:[weavejs.api.core.ILinkableObjectWithBusyStatus,weavejs.api.core.IDisposableObject]};goog.exportSymbol('weavejs.net.AsyncInvocationQueue',weavejs.net.AsyncInvocationQueue);
weavejs.net.AsyncInvocationQueue.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'AsyncInvocationQueue':{type:'',declaredBy:'weavejs.net.AsyncInvocationQueue'},'isBusy':{type:'Boolean',declaredBy:'weavejs.net.AsyncInvocationQueue'},'dispose':{type:'void',declaredBy:'weavejs.net.AsyncInvocationQueue'},'begin':{type:'void',declaredBy:'weavejs.net.AsyncInvocationQueue'},'addToQueue':{type:'void',declaredBy:'weavejs.net.AsyncInvocationQueue'}}}}};goog.provide('weavejs.net.beans.ConnectionInfo');weavejs.net.beans.ConnectionInfo=function(){};weavejs.net.beans.ConnectionInfo.prototype.name='';weavejs.net.beans.ConnectionInfo.prototype.pass='';weavejs.net.beans.ConnectionInfo.prototype.folderName='';weavejs.net.beans.ConnectionInfo.prototype.connectString='';weavejs.net.beans.ConnectionInfo.prototype.is_superuser=false;weavejs.net.beans.ConnectionInfo.MYSQL='MySQL';weavejs.net.beans.ConnectionInfo.POSTGRESQL='PostGreSQL';
weavejs.net.beans.ConnectionInfo.SQLSERVER='Microsoft SQL Server';weavejs.net.beans.ConnectionInfo.ORACLE='Oracle';weavejs.net.beans.ConnectionInfo.SQLITE='SQLite';weavejs.net.beans.ConnectionInfo.DIRECTORY_SERVICE_CONNECTION_NAME='Directory Service';
weavejs.net.beans.ConnectionInfo.getDefaultPort=function(dbms){switch(dbms){case weavejs.net.beans.ConnectionInfo.MYSQL:return 3306;case weavejs.net.beans.ConnectionInfo.POSTGRESQL:return 5432;case weavejs.net.beans.ConnectionInfo.SQLSERVER:return 1433;case weavejs.net.beans.ConnectionInfo.ORACLE:return 1521;case weavejs.net.beans.ConnectionInfo.SQLITE:return 0}return 0};
Object.defineProperties(weavejs.net.beans.ConnectionInfo,{dbmsList:{get:function(){return[weavejs.net.beans.ConnectionInfo.MYSQL,weavejs.net.beans.ConnectionInfo.POSTGRESQL,weavejs.net.beans.ConnectionInfo.SQLSERVER,weavejs.net.beans.ConnectionInfo.ORACLE,weavejs.net.beans.ConnectionInfo.SQLITE]}}});weavejs.net.beans.ConnectionInfo.prototype.FLEXJS_CLASS_INFO={names:[{name:'ConnectionInfo',qName:'weavejs.net.beans.ConnectionInfo'}]};goog.exportSymbol('weavejs.net.beans.ConnectionInfo',weavejs.net.beans.ConnectionInfo);
weavejs.net.beans.ConnectionInfo.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'name':{type:'String'},'pass':{type:'String'},'folderName':{type:'String'},'connectString':{type:'String'},'is_superuser':{type:'Boolean'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.beans.DatabaseConfigInfo');weavejs.net.beans.DatabaseConfigInfo=function(){};weavejs.net.beans.DatabaseConfigInfo.prototype.connection='';weavejs.net.beans.DatabaseConfigInfo.prototype.schema='weave';weavejs.net.beans.DatabaseConfigInfo.prototype.idFields=null;weavejs.net.beans.DatabaseConfigInfo.prototype.FLEXJS_CLASS_INFO={names:[{name:'DatabaseConfigInfo',qName:'weavejs.net.beans.DatabaseConfigInfo'}]};goog.exportSymbol('weavejs.net.beans.DatabaseConfigInfo',weavejs.net.beans.DatabaseConfigInfo);
weavejs.net.beans.DatabaseConfigInfo.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'connection':{type:'String'},'schema':{type:'String'},'idFields':{type:'Array'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.beans.WeaveFileInfo');weavejs.net.beans.WeaveFileInfo=function(){};weavejs.net.beans.WeaveFileInfo.prototype.lastModified;weavejs.net.beans.WeaveFileInfo.prototype.fileSize;weavejs.net.beans.WeaveFileInfo.prototype.thumb;weavejs.net.beans.WeaveFileInfo.prototype.fileName;weavejs.net.beans.WeaveFileInfo.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveFileInfo',qName:'weavejs.net.beans.WeaveFileInfo'}]};goog.exportSymbol('weavejs.net.beans.WeaveFileInfo',weavejs.net.beans.WeaveFileInfo);
weavejs.net.beans.WeaveFileInfo.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'lastModified':{type:'Number'},'fileSize':{type:'Number'},'thumb':{type:'JSByteArray'},'fileName':{type:'String'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.WeaveAdminService');goog.require('weavejs.net.AsyncInvocationQueue');goog.require('weavejs.net.beans.ConnectionInfo');goog.require('weavejs.net.beans.DatabaseConfigInfo');goog.require('weavejs.net.beans.WeaveFileInfo');goog.require('weavejs.api.net.IWeaveEntityManagementService');
weavejs.net.WeaveAdminService=function(url){this.map_method_name=new weavejs.util.JS.Map;this.methodHooks={};this.authenticated=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(false));this.adminService=Weave.linkableChild(this,new weavejs.net.AMF3Servlet(url+'/AdminService',false));this.dataService=Weave.linkableChild(this,new weavejs.net.AMF3Servlet(url+'/DataService',false));this.resetQueue();this.initializeAdminService()};weavejs.net.WeaveAdminService.WEAVE_AUTHENTICATION_EXCEPTION='WeaveAuthenticationException';
weavejs.net.WeaveAdminService._map_url_instance=new weavejs.util.JS.Map;weavejs.net.WeaveAdminService.getInstance=function(url){if(weavejs.net.WeaveAdminService._map_url_instance.has(url))return weavejs.net.WeaveAdminService._map_url_instance.get(url);var serviceInstance=new weavejs.net.WeaveAdminService(url);weavejs.net.WeaveAdminService._map_url_instance.set(url,serviceInstance);return serviceInstance};weavejs.net.WeaveAdminService.messageLog=new Array;
weavejs.net.WeaveAdminService.messageLogCallbacks=new weavejs.core.CallbackCollection;weavejs.net.WeaveAdminService.messageDisplay=function(messageTitle,message,showPopup){if(showPopup)weavejs.util.JS.global.alert(message,messageTitle);if(messageTitle==null)weavejs.net.WeaveAdminService.messageLog.push(message);else weavejs.net.WeaveAdminService.messageLog.push(messageTitle+': '+message);weavejs.net.WeaveAdminService.messageLogCallbacks.triggerCallbacks()};
weavejs.net.WeaveAdminService.clearMessageLog=function(){weavejs.net.WeaveAdminService.messageLog.length=0;weavejs.net.WeaveAdminService.messageLogCallbacks.triggerCallbacks()};weavejs.net.WeaveAdminService.prototype.map_method_name;
weavejs.net.WeaveAdminService.prototype.getMethodName=function(method){if(org.apache.flex.utils.Language.is(method,String))return org.apache.flex.utils.Language.as(method,String);if(!this.map_method_name.has(method)){var foreachiter0_target=weavejs.util.JS.getPropertyNames(this,true);for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(this[name]===method){this.map_method_name.set(method,name);return name}}}return this.map_method_name.get(method)};
weavejs.net.WeaveAdminService.prototype.resetQueue=function(){if(this.queue)Weave.dispose(this.queue);this.queue=Weave.linkableChild(this,new weavejs.net.AsyncInvocationQueue(!this.initialized))};weavejs.net.WeaveAdminService.prototype.queue;weavejs.net.WeaveAdminService.prototype.adminService;weavejs.net.WeaveAdminService.prototype.dataService;weavejs.net.WeaveAdminService.prototype.methodHooks;weavejs.net.WeaveAdminService.prototype.initialized=false;
weavejs.net.WeaveAdminService.prototype.migrationProgress='';weavejs.net.WeaveAdminService.prototype.authenticated;weavejs.net.WeaveAdminService.prototype.user='';weavejs.net.WeaveAdminService.prototype.pass='';
weavejs.net.WeaveAdminService.prototype.initializeAdminService=function(){var req=new weavejs.net.URLRequest(this.adminService.servletURL);return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.initializeAdminService,this,'initializeAdminService'),arguments,false).then(org.apache.flex.utils.Language.closure(this.initializeAdminServiceComplete,this,'initializeAdminServiceComplete'),org.apache.flex.utils.Language.closure(this.initializeAdminServiceError,this,'initializeAdminServiceError'))};
weavejs.net.WeaveAdminService.prototype.initializeAdminServiceComplete=function(result){this.initialized=true;this.queue.begin()};weavejs.net.WeaveAdminService.prototype.initializeAdminServiceError=function(error){weavejs.net.WeaveAdminService.messageDisplay(null,error,false)};
weavejs.net.WeaveAdminService.prototype.addHook=function(method,captureHandler,resultHandler,faultHandler){faultHandler=typeof faultHandler!=='undefined'?faultHandler:null;var methodName=this.getMethodName(method);if(!methodName)throw new Error('method must be a member of WeaveAdminService');var hooks=this.methodHooks[methodName];if(!hooks)this.methodHooks[methodName]=hooks=[];var hook=new weavejs.net.WeaveAdminService.MethodHook;hook.captureHandler=captureHandler;hook.resultHandler=resultHandler;
hook.faultHandler=faultHandler;hooks.push(hook)};weavejs.net.WeaveAdminService.prototype.hookCaptureHandler=function(methodName,methodParams,query){var foreachiter1_target=this.methodHooks[methodName];for(var foreachiter1 in foreachiter1_target){var hook=foreachiter1_target[foreachiter1];if(hook.captureHandler==null)continue;var args=methodParams?methodParams.concat():[];args.length=hook.captureHandler.length;hook.captureHandler.apply(query,args)}};
weavejs.net.WeaveAdminService.prototype.hookHandler=function(methodName,methodParams,result){var handler;var foreachiter2_target=this.methodHooks[methodName];for(var foreachiter2 in foreachiter2_target){var hook=foreachiter2_target[foreachiter2];if(!org.apache.flex.utils.Language.is(result,Error))handler=hook.resultHandler;else handler=hook.faultHandler;if(handler==null)continue;var args=[result,methodParams];args.length=handler.length;handler.apply(null,args)}};
weavejs.net.WeaveAdminService.prototype.invokeAdmin=function(method,parameters,queued,returnType){queued=typeof queued!=='undefined'?queued:true;returnType=typeof returnType!=='undefined'?returnType:null;var methodName=this.getMethodName(method);if(!methodName)throw new Error('method must be a member of WeaveAdminService');return this.generateQuery(this.adminService,methodName,weavejs.util.JS.global.Array.from(parameters),queued,returnType)};
weavejs.net.WeaveAdminService.prototype.invokeDataService=function(method,parameters,queued,returnType){queued=typeof queued!=='undefined'?queued:true;returnType=typeof returnType!=='undefined'?returnType:null;var methodName=this.getMethodName(method);if(!methodName)throw new Error('method must be a member of WeaveAdminService');return this.generateQuery(this.dataService,methodName,weavejs.util.JS.global.Array.from(parameters),queued,returnType)};
weavejs.net.WeaveAdminService.prototype.generateQuery=function(service,methodName,parameters,queued,returnType){var query=service.invokeAsyncMethod(methodName,parameters);var castedQuery;if(queued)this.queue.addToQueue(query,service);this.hookCaptureHandler(methodName,parameters,query);if([null,Array,String,Number].indexOf(returnType)<0)castedQuery=query.then(weavejs.net.WeaveDataServlet.castResult.bind(this,returnType));else castedQuery=query;castedQuery.then(this.hookHandler.bind(this,methodName,
parameters),org.apache.flex.utils.Language.closure(this.interceptFault,this,'interceptFault'));if(!queued)service.invokeDeferred(query);return castedQuery};weavejs.net.WeaveAdminService.prototype.alertResult=function(result,token){token=typeof token!=='undefined'?token:null;weavejs.net.WeaveAdminService.messageDisplay(null,result,false)};weavejs.net.WeaveAdminService.PREVENT_FAULT_ALERT=new weavejs.util.JS.WeakMap;
weavejs.net.WeaveAdminService.prototype.hideFaultMessage=function(query){weavejs.net.WeaveAdminService.PREVENT_FAULT_ALERT.set(query,true)};weavejs.net.WeaveAdminService.prototype.interceptFault=function(error){if(error==weavejs.net.WeaveAdminService.WEAVE_AUTHENTICATION_EXCEPTION&&this.authenticated.value){this.resetQueue();this.authenticated.value=false;this.user='';this.pass=''}};
weavejs.net.WeaveAdminService.prototype.alertFault=function(methodName,methodParams,query,error){var self=this;var __localFn0__=function(p,i,a){return Weave.stringify(p)};if(weavejs.net.WeaveAdminService.PREVENT_FAULT_ALERT.has(query)){weavejs.net.WeaveAdminService.PREVENT_FAULT_ALERT['delete'](query);return}var paramDebugStr='';if(org.apache.flex.utils.Language.is(methodParams,Array)&&methodParams.length>0)paramDebugStr=methodParams.map(__localFn0__).join(', ');else paramDebugStr+=Weave.stringify(methodParams);
weavejs.util.JS.error(weavejs.util.StandardLib.substitute('Received error on {0}({1}):\n\t{2}',methodName,paramDebugStr,error));var msg=error.toString();if(msg=='ioError')msg='Received no response from the servlet.\n'+'Has the WAR file been deployed correctly?\n'+'Expected servlet URL: '+this.adminService.servletURL;weavejs.net.WeaveAdminService.messageDisplay(error,msg,false)};
weavejs.net.WeaveAdminService.prototype.getVersion=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getVersion,this,'getVersion'),arguments)};weavejs.net.WeaveAdminService.prototype.checkDatabaseConfigExists=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.checkDatabaseConfigExists,this,'checkDatabaseConfigExists'),arguments)};
weavejs.net.WeaveAdminService.prototype.getAuthenticatedUser=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getAuthenticatedUser,this,'getAuthenticatedUser'),arguments)};weavejs.net.WeaveAdminService.prototype.authenticate=function(user,pass){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.authenticate,this,'authenticate'),arguments)};
weavejs.net.WeaveAdminService.prototype.keepAlive=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.keepAlive,this,'keepAlive'),arguments)};weavejs.net.WeaveAdminService.prototype.getWeaveFileNames=function(showAllFiles){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getWeaveFileNames,this,'getWeaveFileNames'),arguments)};
weavejs.net.WeaveAdminService.prototype.saveWeaveFileByteArray=function(fileContent,fileName,overwriteFile){var base64=weavejs.util.JS.global.btoa(weavejs.util.StandardLib.byteArrayToString(fileContent));return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.saveWeaveFileByteArray,this,'saveWeaveFileByteArray'),[base64,fileName,overwriteFile])};
weavejs.net.WeaveAdminService.prototype.removeWeaveFile=function(fileName){var query=this.invokeAdmin(org.apache.flex.utils.Language.closure(this.removeWeaveFile,this,'removeWeaveFile'),arguments);return query};weavejs.net.WeaveAdminService.prototype.getWeaveFileInfo=function(fileName){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getWeaveFileInfo,this,'getWeaveFileInfo'),arguments,false,weavejs.net.beans.WeaveFileInfo)};
weavejs.net.WeaveAdminService.prototype.getConnectionNames=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getConnectionNames,this,'getConnectionNames'),arguments)};weavejs.net.WeaveAdminService.prototype.getConnectionInfo=function(userToGet){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getConnectionInfo,this,'getConnectionInfo'),arguments,true,weavejs.net.beans.ConnectionInfo)};
weavejs.net.WeaveAdminService.prototype.saveConnectionInfo=function(info,configOverwrite){var query=this.invokeAdmin(org.apache.flex.utils.Language.closure(this.saveConnectionInfo,this,'saveConnectionInfo'),[info.name,info.pass,info.folderName,info.is_superuser,info.connectString,configOverwrite]);return query};
weavejs.net.WeaveAdminService.prototype.removeConnectionInfo=function(connectionNameToRemove){var query=this.invokeAdmin(org.apache.flex.utils.Language.closure(this.removeConnectionInfo,this,'removeConnectionInfo'),arguments);return query};weavejs.net.WeaveAdminService.prototype.getDatabaseConfigInfo=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getDatabaseConfigInfo,this,'getDatabaseConfigInfo'),arguments,true,weavejs.net.beans.DatabaseConfigInfo)};
weavejs.net.WeaveAdminService.prototype.setDatabaseConfigInfo=function(connectionName,password,schema,idFields){var query=this.invokeAdmin(org.apache.flex.utils.Language.closure(this.setDatabaseConfigInfo,this,'setDatabaseConfigInfo'),arguments);return query};weavejs.net.WeaveAdminService.prototype.newEntity=function(metadata,parentId,insertAtIndex){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.newEntity,this,'newEntity'),arguments)};
weavejs.net.WeaveAdminService.prototype.updateEntity=function(entityId,diff){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.updateEntity,this,'updateEntity'),arguments)};weavejs.net.WeaveAdminService.prototype.removeEntities=function(entityIds){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.removeEntities,this,'removeEntities'),arguments)};
weavejs.net.WeaveAdminService.prototype.addChild=function(parentId,childId,insertAtIndex){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.addChild,this,'addChild'),arguments)};weavejs.net.WeaveAdminService.prototype.removeChild=function(parentId,childId){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.removeChild,this,'removeChild'),arguments)};
weavejs.net.WeaveAdminService.prototype.getHierarchyInfo=function(publicMetadata){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getHierarchyInfo,this,'getHierarchyInfo'),arguments,true,weavejs.api.net.beans.EntityHierarchyInfo)};weavejs.net.WeaveAdminService.prototype.getEntities=function(entityIds){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getEntities,this,'getEntities'),arguments,true,weavejs.api.net.beans.Entity)};
weavejs.net.WeaveAdminService.prototype.findEntityIds=function(publicMetadata,wildcardFields){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.findEntityIds,this,'findEntityIds'),arguments)};weavejs.net.WeaveAdminService.prototype.findPublicFieldValues=function(fieldName,valueSearch){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.findPublicFieldValues,this,'findPublicFieldValues'),arguments)};
weavejs.net.WeaveAdminService.prototype.getSQLSchemaNames=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getSQLSchemaNames,this,'getSQLSchemaNames'),arguments,false)};weavejs.net.WeaveAdminService.prototype.getSQLTableNames=function(schemaName){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getSQLTableNames,this,'getSQLTableNames'),arguments,false)};
weavejs.net.WeaveAdminService.prototype.getSQLColumnNames=function(schemaName,tableName){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getSQLColumnNames,this,'getSQLColumnNames'),arguments,false)};
weavejs.net.WeaveAdminService.prototype.uploadFileByteArray=function(fileName,bytes){var MB=1024*1024;var maxChunkSize=20*MB;var chunkSize=bytes.length>5*MB?Math.min(bytes.length/10,maxChunkSize):MB;var offset=0;var promise;do{var chunkLength=Math.min(chunkSize,bytes.length-offset);var chunk=bytes.subarray(offset,offset+chunkLength);offset+=chunkLength;var base64=weavejs.util.JS.global.btoa(weavejs.util.StandardLib.byteArrayToString(chunk));promise=this.invokeAdmin(org.apache.flex.utils.Language.closure(this.uploadFileByteArray,
this,'uploadFileByteArray'),[fileName,base64,offset>0],true)}while(offset<bytes.length);return promise};weavejs.net.WeaveAdminService.prototype.getUploadedCSVFiles=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getUploadedCSVFiles,this,'getUploadedCSVFiles'),arguments,false,weavejs.net.beans.WeaveFileInfo)};
weavejs.net.WeaveAdminService.prototype.getUploadedSHPFiles=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getUploadedSHPFiles,this,'getUploadedSHPFiles'),arguments,false,weavejs.net.beans.WeaveFileInfo)};weavejs.net.WeaveAdminService.prototype.getCSVColumnNames=function(csvFiles){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getCSVColumnNames,this,'getCSVColumnNames'),arguments)};
weavejs.net.WeaveAdminService.prototype.getDBFColumnNames=function(dbfFileNames){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getDBFColumnNames,this,'getDBFColumnNames'),arguments)};weavejs.net.WeaveAdminService.prototype.checkKeyColumnsForSQLImport=function(schemaName,tableName,keyColumns){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.checkKeyColumnsForSQLImport,this,'checkKeyColumnsForSQLImport'),arguments)};
weavejs.net.WeaveAdminService.prototype.checkKeyColumnsForCSVImport=function(csvFileName,keyColumns){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.checkKeyColumnsForCSVImport,this,'checkKeyColumnsForCSVImport'),arguments)};weavejs.net.WeaveAdminService.prototype.checkKeyColumnsForDBFImport=function(dbfFileNames,keyColumns){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.checkKeyColumnsForDBFImport,this,'checkKeyColumnsForDBFImport'),arguments)};
weavejs.net.WeaveAdminService.prototype.importCSV=function(csvFile,csvKeyColumn,csvSecondaryKeyColumn,sqlSchema,sqlTable,sqlOverwrite,configDataTableName,configKeyType,nullValues,filterColumnNames,configAppend){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.importCSV,this,'importCSV'),arguments)};
weavejs.net.WeaveAdminService.prototype.importSQL=function(schemaName,tableName,keyColumnName,secondaryKeyColumnName,configDataTableName,keyType,filterColumns,configAppend){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.importSQL,this,'importSQL'),arguments)};
weavejs.net.WeaveAdminService.prototype.importSHP=function(configfileNameWithoutExtension,keyColumns,sqlSchema,sqlTablePrefix,sqlOverwrite,configTitle,configKeyType,configProjection,nullValues,importDBFAsDataTable,configAppend){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.importSHP,this,'importSHP'),arguments)};
weavejs.net.WeaveAdminService.prototype.importDBF=function(fileNameWithoutExtension,sqlSchema,sqlTableName,sqlOverwrite,nullValues){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.importDBF,this,'importDBF'),arguments)};weavejs.net.WeaveAdminService.prototype.testAllQueries=function(tableId){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.testAllQueries,this,'testAllQueries'),arguments,false)};
weavejs.net.WeaveAdminService.prototype.getKeyTypes=function(){return this.invokeAdmin(org.apache.flex.utils.Language.closure(this.getKeyTypes,this,'getKeyTypes'),arguments)};weavejs.net.WeaveAdminService.prototype.ping=function(){return'pong'};weavejs.net.WeaveAdminService.prototype.getAttributeColumn=function(metadata){return this.invokeDataService(org.apache.flex.utils.Language.closure(this.getAttributeColumn,this,'getAttributeColumn'),arguments,false)};
Object.defineProperties(weavejs.net.WeaveAdminService.prototype,{entityServiceInitialized:{get:function(){return this.authenticated.value}}});weavejs.net.WeaveAdminService.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveAdminService',qName:'weavejs.net.WeaveAdminService'}],interfaces:[weavejs.api.net.IWeaveEntityManagementService]};goog.exportSymbol('weavejs.net.WeaveAdminService',weavejs.net.WeaveAdminService);
weavejs.net.WeaveAdminService.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'initialized':{type:'Boolean'},'migrationProgress':{type:'String'},'authenticated':{type:'LinkableBoolean'},'user':{type:'String'},'pass':{type:'String'}}},accessors:function(){return{'entityServiceInitialized':{type:'Boolean',declaredBy:'weavejs.net.WeaveAdminService'}}},methods:function(){return{'WeaveAdminService':{type:'',declaredBy:'weavejs.net.WeaveAdminService'},'initializeAdminService':{type:'WeavePromise',
declaredBy:'weavejs.net.WeaveAdminService'},'addHook':{type:'void',declaredBy:'weavejs.net.WeaveAdminService'},'hideFaultMessage':{type:'void',declaredBy:'weavejs.net.WeaveAdminService'},'getVersion':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'checkDatabaseConfigExists':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getAuthenticatedUser':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'authenticate':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},
'keepAlive':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getWeaveFileNames':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'saveWeaveFileByteArray':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'removeWeaveFile':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getWeaveFileInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getConnectionNames':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},
'getConnectionInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'saveConnectionInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'removeConnectionInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getDatabaseConfigInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'setDatabaseConfigInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'newEntity':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},
'updateEntity':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'removeEntities':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'addChild':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'removeChild':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getHierarchyInfo':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getEntities':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'findEntityIds':{type:'WeavePromise',
declaredBy:'weavejs.net.WeaveAdminService'},'findPublicFieldValues':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getSQLSchemaNames':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getSQLTableNames':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getSQLColumnNames':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'uploadFileByteArray':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getUploadedCSVFiles':{type:'WeavePromise',
declaredBy:'weavejs.net.WeaveAdminService'},'getUploadedSHPFiles':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getCSVColumnNames':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getDBFColumnNames':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'checkKeyColumnsForSQLImport':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'checkKeyColumnsForCSVImport':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'checkKeyColumnsForDBFImport':{type:'WeavePromise',
declaredBy:'weavejs.net.WeaveAdminService'},'importCSV':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'importSQL':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'importSHP':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'importDBF':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'testAllQueries':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},'getKeyTypes':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'},
'ping':{type:'String',declaredBy:'weavejs.net.WeaveAdminService'},'getAttributeColumn':{type:'WeavePromise',declaredBy:'weavejs.net.WeaveAdminService'}}}}};weavejs.net.WeaveAdminService.MethodHook=function(){};weavejs.net.WeaveAdminService.MethodHook.prototype.captureHandler;weavejs.net.WeaveAdminService.MethodHook.prototype.resultHandler;weavejs.net.WeaveAdminService.MethodHook.prototype.faultHandler;
weavejs.net.WeaveAdminService.MethodHook.prototype.FLEXJS_CLASS_INFO={names:[{name:'MethodHook',qName:'weavejs.net.WeaveAdminService.MethodHook'}]};goog.exportSymbol('weavejs.net.WeaveAdminService.MethodHook',weavejs.net.WeaveAdminService.MethodHook);
weavejs.net.WeaveAdminService.MethodHook.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'captureHandler':{type:'Function'},'resultHandler':{type:'Function'},'faultHandler':{type:'Function'}}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.net.Admin');goog.require('weavejs.net.WeaveAdminService');goog.require('weavejs.net.beans.DatabaseConfigInfo');
weavejs.net.Admin=function(){var self=this;this.connectionNames=[];this.weaveFileNames=[];this.privateWeaveFileNames=[];this.keyTypes=[];this.databaseConfigInfo=new weavejs.net.beans.DatabaseConfigInfo;this.uploadedCSVFiles=[];this.uploadedShapeFiles=[];var __localFn0__=function(result,_){self.databaseConfigExists=org.apache.flex.utils.Language.as(result,Boolean);if(!self.databaseConfigExists)self.service.getConnectionNames()};var __localFn1__=function(connectionName,password){if(self.userHasAuthenticated)self.userHasAuthenticated=
false;self.activeConnectionName=connectionName;self.activePassword=password};var __localFn2__=function(result,_){self.userHasAuthenticated=true;self.currentUserIsSuperuser=org.apache.flex.utils.Language.as(result,Boolean);self.service.getWeaveFileNames(false);self.service.getWeaveFileNames(true);self.service.getConnectionNames();self.service.getDatabaseConfigInfo();self.service.getKeyTypes()};var __localFn3__=function(result,_){weavejs.net.WeaveAdminService.messageDisplay(null,org.apache.flex.utils.Language.as(result,
String),false);self.service.getWeaveFileNames(false);self.service.getWeaveFileNames(true)};var __localFn4__=function(_){_=Array.prototype.slice.call(arguments,0);self.service.getWeaveFileNames(false);self.service.getWeaveFileNames(true)};var __localFn5__=function(result,args){var showAllFiles=args[0];if(showAllFiles)self.weaveFileNames=org.apache.flex.utils.Language.as(result,Array)||[];else self.privateWeaveFileNames=org.apache.flex.utils.Language.as(result,Array)||[]};var __localFn6__=function(result,
_){self.connectionNames=org.apache.flex.utils.Language.as(result,Array)||[]};var __localFn7__=function(result,args){var saveName=args[0];var savePass=args[1];if(!self.userHasAuthenticated){self.activeConnectionName=saveName;self.activePassword=savePass}else if(self.activeConnectionName==saveName)self.activePassword=savePass;self.service.getConnectionNames();self.service.getDatabaseConfigInfo();self.service.getWeaveFileNames(false)};var __localFn8__=function(result,args){var removedUser=args[0];if(self.activeConnectionName==
removedUser){self.activeConnectionName='';self.activePassword=''}else{self.service.getConnectionNames();self.service.getDatabaseConfigInfo()}};var __localFn9__=function(result,_){self.databaseConfigInfo=org.apache.flex.utils.Language.as(result,weavejs.net.beans.DatabaseConfigInfo,true)||new weavejs.net.beans.DatabaseConfigInfo};var __localFn10__=function(result,_){self.databaseConfigExists=Boolean(result);if(self.activeConnectionName&&self.activePassword){if(!self.userHasAuthenticated)self.service.authenticate(self.activeConnectionName,
self.activePassword);self.service.getDatabaseConfigInfo()}self.entityCache.invalidateAll(true)};var __localFn11__=function(result,_){self.uploadedCSVFiles=org.apache.flex.utils.Language.as(result,Array)||[]};var __localFn12__=function(result,_){self.uploadedShapeFiles=org.apache.flex.utils.Language.as(result,Array)||[]};var __localFn13__=function(result,_){if(self.userHasAuthenticated)self.keyTypes=org.apache.flex.utils.Language.as(result,Array)||[]};var __localFn14__=function(result,meta0_parent1_index2){var id=
org.apache.flex.utils.Language._int(result);self.focusEntityId=id;self.entityCache.invalidate(id);var parentId=meta0_parent1_index2[1];self.entityCache.invalidate(parentId)};var __localFn15__=function(result,_){self.activeConnectionName=org.apache.flex.utils.Language.as(result,String);self.userHasAuthenticated=!!self.activeConnectionName};this.service.addHook(org.apache.flex.utils.Language.closure(this.service.checkDatabaseConfigExists,this.service,'checkDatabaseConfigExists'),null,__localFn0__);
this.service.addHook(org.apache.flex.utils.Language.closure(this.service.authenticate,this.service,'authenticate'),__localFn1__,__localFn2__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.saveWeaveFileByteArray,this.service,'saveWeaveFileByteArray'),null,__localFn3__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.removeWeaveFile,this.service,'removeWeaveFile'),null,__localFn4__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.getWeaveFileNames,
this.service,'getWeaveFileNames'),null,__localFn5__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.getConnectionNames,this.service,'getConnectionNames'),null,__localFn6__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.saveConnectionInfo,this.service,'saveConnectionInfo'),null,__localFn7__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.removeConnectionInfo,this.service,'removeConnectionInfo'),null,__localFn8__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.getDatabaseConfigInfo,
this.service,'getDatabaseConfigInfo'),null,__localFn9__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.setDatabaseConfigInfo,this.service,'setDatabaseConfigInfo'),null,__localFn10__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.getUploadedCSVFiles,this.service,'getUploadedCSVFiles'),null,__localFn11__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.getUploadedSHPFiles,this.service,'getUploadedSHPFiles'),null,__localFn12__);
this.service.addHook(org.apache.flex.utils.Language.closure(this.service.importSQL,this.service,'importSQL'),null,org.apache.flex.utils.Language.closure(this.handleTableImportResult,this,'handleTableImportResult'));this.service.addHook(org.apache.flex.utils.Language.closure(this.service.importCSV,this.service,'importCSV'),null,org.apache.flex.utils.Language.closure(this.handleTableImportResult,this,'handleTableImportResult'));this.service.addHook(org.apache.flex.utils.Language.closure(this.service.importSHP,
this.service,'importSHP'),null,org.apache.flex.utils.Language.closure(this.handleTableImportResult,this,'handleTableImportResult'));this.service.addHook(org.apache.flex.utils.Language.closure(this.service.getKeyTypes,this.service,'getKeyTypes'),null,__localFn13__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.newEntity,this.service,'newEntity'),null,__localFn14__);this.service.addHook(org.apache.flex.utils.Language.closure(this.service.getAuthenticatedUser,this.service,
'getAuthenticatedUser'),null,__localFn15__);this.service.checkDatabaseConfigExists()};weavejs.net.Admin._thisInstance=null;weavejs.net.Admin.prototype._service=null;weavejs.net.Admin.prototype.focusEntityId=-1;weavejs.net.Admin.prototype.getFocusEntityId=function(){if(!Weave.isBusy(this.entityCache)&&!this.entityCache.entityIsCached(this.focusEntityId))this.focusEntityId=-1;return this.focusEntityId};
weavejs.net.Admin.prototype.setFocusEntityId=function(id){this.entityCache.getEntity(id);this.focusEntityId=id};weavejs.net.Admin.prototype.clearFocusEntityId=function(){this.focusEntityId=-1};weavejs.net.Admin.prototype._entityCache=null;weavejs.net.Admin.prototype.databaseConfigExists=true;weavejs.net.Admin.prototype.currentUserIsSuperuser=false;weavejs.net.Admin.prototype._userHasAuthenticated=false;weavejs.net.Admin.prototype.connectionNames;weavejs.net.Admin.prototype.weaveFileNames;weavejs.net.Admin.prototype.privateWeaveFileNames;
weavejs.net.Admin.prototype.keyTypes;weavejs.net.Admin.prototype.databaseConfigInfo;weavejs.net.Admin.prototype.uploadedCSVFiles;weavejs.net.Admin.prototype.uploadedShapeFiles;
weavejs.net.Admin.prototype.handleTableImportResult=function(result,_){var tableId=org.apache.flex.utils.Language._int(result);var exists=false;var title;var info=this.entityCache.getBranchInfo(tableId);if(info){exists=true;title=info.title}else if(this.entityCache.entityIsCached(tableId)){exists=true;var entity=this.entityCache.getEntity(tableId);title=entity.publicMetadata[weavejs.api.data.ColumnMetadata.TITLE]}if(exists)weavejs.util.JS.error(Weave.lang('Existing data table "{0}" was updated successfully.',
title));else weavejs.util.JS.error(Weave.lang('New data table created successfully.'));this.focusEntityId=tableId;this.entityCache.invalidate(tableId,true);var foreachiter0_target=this.entityCache.getEntity(tableId).childIds;for(var foreachiter0 in foreachiter0_target){var id=foreachiter0_target[foreachiter0];this.entityCache.invalidate(id)}this.service.getKeyTypes()};
weavejs.net.Admin.prototype.getSuggestedPropertyValues=function(propertyName){var suggestions=weavejs.api.data.ColumnMetadata.getSuggestedPropertyValues(propertyName);switch(propertyName){case 'connection':return this.connectionNames;case weavejs.api.data.ColumnMetadata.KEY_TYPE:return this.keyTypes;case weavejs.api.data.ColumnMetadata.DATA_TYPE:return suggestions.concat(this.keyTypes);default:return suggestions}};
Object.defineProperties(weavejs.net.Admin.prototype,{service:{get:function(){if(!this._service)this._service=weavejs.net.WeaveAdminService.getInstance('/WeaveServices');return this._service}},entityCache:{get:function(){if(!this._entityCache)this._entityCache=new weavejs.net.EntityCache(this.service,true);return this._entityCache}},userHasAuthenticated:{get:function(){return this._userHasAuthenticated},set:function(value){this._userHasAuthenticated=value;if(!this._userHasAuthenticated){this.entityCache.invalidateAll(true);
this.currentUserIsSuperuser=false;this.connectionNames=[];this.weaveFileNames=[];this.privateWeaveFileNames=[];this.keyTypes=[];this.databaseConfigInfo=new weavejs.net.beans.DatabaseConfigInfo}}},activeConnectionName:{get:function(){return this.service.user},set:function(value){if(this.service.user==value)return;this.service.user=value;this.userHasAuthenticated=false}},activePassword:{get:function(){return this.service.pass},set:function(value){this.service.pass=value}}});
Object.defineProperties(weavejs.net.Admin,{instance:{get:function(){if(weavejs.net.Admin._thisInstance==null)weavejs.net.Admin._thisInstance=new weavejs.net.Admin;return weavejs.net.Admin._thisInstance}},service:{get:function(){return weavejs.net.Admin.instance.service}},entityCache:{get:function(){return weavejs.net.Admin.instance.entityCache}}});weavejs.net.Admin.prototype.FLEXJS_CLASS_INFO={names:[{name:'Admin',qName:'weavejs.net.Admin'}]};goog.exportSymbol('weavejs.net.Admin',weavejs.net.Admin);
weavejs.net.Admin.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'databaseConfigExists':{type:'Boolean'},'currentUserIsSuperuser':{type:'Boolean'},'connectionNames':{type:'Array'},'weaveFileNames':{type:'Array'},'privateWeaveFileNames':{type:'Array'},'keyTypes':{type:'Array'},'databaseConfigInfo':{type:'DatabaseConfigInfo'},'uploadedCSVFiles':{type:'Array'},'uploadedShapeFiles':{type:'Array'}}},accessors:function(){return{'service':{type:'WeaveAdminService',declaredBy:'weavejs.net.Admin'},
'entityCache':{type:'EntityCache',declaredBy:'weavejs.net.Admin'},'userHasAuthenticated':{type:'Boolean',declaredBy:'weavejs.net.Admin'},'activeConnectionName':{type:'String',declaredBy:'weavejs.net.Admin'},'activePassword':{type:'String',declaredBy:'weavejs.net.Admin'}}},methods:function(){return{'getFocusEntityId':{type:'int',declaredBy:'weavejs.net.Admin'},'setFocusEntityId':{type:'void',declaredBy:'weavejs.net.Admin'},'clearFocusEntityId':{type:'void',declaredBy:'weavejs.net.Admin'},'Admin':{type:'',
declaredBy:'weavejs.net.Admin'},'getSuggestedPropertyValues':{type:'Array',declaredBy:'weavejs.net.Admin'}}}}};goog.provide('weavejs.path.ExternalTool');goog.require('weavejs.core.LinkableHashMap');weavejs.path.ExternalTool=function(){this.windowName=weavejs.path.ExternalTool.generateWindowName();weavejs.path.ExternalTool.base(this,'constructor');this.toolUrl=this.requestObject('toolUrl',weavejs.core.LinkableString,true);this.toolUrl.addGroupedCallback(this,org.apache.flex.utils.Language.closure(this.toolPropertiesChanged,this,'toolPropertiesChanged'))};goog.inherits(weavejs.path.ExternalTool,weavejs.core.LinkableHashMap);
weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS='WeaveExternalTools';weavejs.path.ExternalTool.prototype.toolUrl;weavejs.path.ExternalTool.prototype.windowName;weavejs.path.ExternalTool.prototype.toolPropertiesChanged=function(){if(this.toolUrl.value)this.launch()};weavejs.path.ExternalTool.prototype.launch=function(){return weavejs.path.ExternalTool.launch(this,this.toolUrl.value,this.windowName,'menubar\x3dno,status\x3dno,toolbar\x3dno')};
weavejs.path.ExternalTool.generateWindowName=function(){return weavejs.util.StandardLib.replace(weavejs.util.StandardLib.guid(),'-','')};
weavejs.path.ExternalTool.launch=function(owner,url,windowName,features){windowName=typeof windowName!=='undefined'?windowName:'';features=typeof features!=='undefined'?features:null;var __localFn0__=function(){for(var key in weavejs.util.JS.global[weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS])try{weavejs.util.JS.global[weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS][key].window.close()}catch(e){}};var path=Weave.getPath(owner);if(!weavejs.util.JS.global[weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS]){weavejs.util.JS.global[weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS]=
{};if(weavejs.util.JS.global.addEventListener)weavejs.util.JS.global.addEventListener('unload',__localFn0__)}var popup=weavejs.util.JS.global.open(url,windowName,features);weavejs.util.JS.global[weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS][windowName]={'path':path,'window':popup};if(!popup)weavejs.util.JS.error('External tool popup was blocked by the web browser.');return!!popup};
weavejs.path.ExternalTool.prototype.dispose=function(){weavejs.path.ExternalTool.base(this,'dispose');try{weavejs.util.JS.global[weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS][this.windowName].window.close();delete weavejs.util.JS.global[weavejs.path.ExternalTool.WEAVE_EXTERNAL_TOOLS][this.windowName]}catch(e){}};weavejs.path.ExternalTool.prototype.getSelectableAttributeNames=function(){return this.getSelectableAttributes().map(org.apache.flex.utils.Language.closure(this.getLabel,this,'getLabel'))};
weavejs.path.ExternalTool.prototype.getLabel=function(obj,i,a){var label=weavejs.WeaveAPI.EditorManager.getLabel(obj);if(!label){var path=Weave.findPath(this,obj);if(path)label=path.join('/')}return label};
weavejs.path.ExternalTool.prototype.getSelectableAttributes=function(){var self=this;var __localFn0__=function(hm,i,a){return hm.getObjects(weavejs.api.data.IAttributeColumn)};var __localFn1__=function(item,i,a){return self.getLabel(item,i,a)&&true};var hashMaps=[this].concat(Weave.getDescendants(this,weavejs.api.core.ILinkableHashMap));var flatList=Array.prototype.concat.apply([],hashMaps.map(__localFn0__));return flatList.filter(__localFn1__)};
weavejs.path.ExternalTool.prototype.FLEXJS_CLASS_INFO={names:[{name:'ExternalTool',qName:'weavejs.path.ExternalTool'}]};goog.exportSymbol('weavejs.path.ExternalTool',weavejs.path.ExternalTool);
weavejs.path.ExternalTool.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'windowName':{type:'String'}}},accessors:function(){return{}},methods:function(){return{'ExternalTool':{type:'',declaredBy:'weavejs.path.ExternalTool'},'launch':{type:'Boolean',declaredBy:'weavejs.path.ExternalTool'},'dispose':{type:'void',declaredBy:'weavejs.path.ExternalTool'},'getSelectableAttributeNames':{type:'Array',declaredBy:'weavejs.path.ExternalTool'},'getSelectableAttributes':{type:'Array',
declaredBy:'weavejs.path.ExternalTool'}}}}};goog.provide('weavejs.util.BackwardsCompatibility');weavejs.util.BackwardsCompatibility=function(){};weavejs.util.BackwardsCompatibility.forceDeprecatedState=function(classDef){weavejs.util.BackwardsCompatibility.map_class_ignore.set(classDef,true)};weavejs.util.BackwardsCompatibility.map_class_ignore=new weavejs.util.JS.Map;weavejs.util.BackwardsCompatibility.CLASS='class';
weavejs.util.BackwardsCompatibility.updateSessionState=function(state){var key;if(!weavejs.api.core.DynamicState.isDynamicStateArray(state)){if(typeof state==='object')for(key in state)state[key]=weavejs.util.BackwardsCompatibility.updateSessionState(state[key]);return state}var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){var typedState=foreachiter0_target[foreachiter0];var className=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(!weavejs.util.BackwardsCompatibility.classLookup.hasOwnProperty(className))continue;
var classDef=Weave.getDefinition(className);var externalToolClass=weavejs.api.core.DynamicState.traverseState(typedState[weavejs.api.core.DynamicState.SESSION_STATE],[weavejs.util.BackwardsCompatibility.CLASS]);if(classDef==weavejs.path.ExternalTool&&Weave.getDefinition(externalToolClass)){typedState[weavejs.api.core.DynamicState.CLASS_NAME]=externalToolClass;var newState={};var foreachiter1_target=typedState[weavejs.api.core.DynamicState.SESSION_STATE];for(var foreachiter1 in foreachiter1_target){var item=
foreachiter1_target[foreachiter1];var itemName=item[weavejs.api.core.DynamicState.OBJECT_NAME];if(itemName!=weavejs.util.BackwardsCompatibility.CLASS)newState[itemName]=item[weavejs.api.core.DynamicState.SESSION_STATE]}typedState[weavejs.api.core.DynamicState.SESSION_STATE]=newState}if(classDef&&!weavejs.util.BackwardsCompatibility.map_class_ignore.get(classDef))continue;if(!weavejs.util.BackwardsCompatibility.classLookup[className]){typedState[weavejs.api.core.DynamicState.CLASS_NAME]=Weave.className(weavejs.core.LinkableVariable);
continue}typedState[weavejs.api.core.DynamicState.CLASS_NAME]=Weave.className(weavejs.core.LinkableHashMap);var classNameState=weavejs.api.core.DynamicState.create(weavejs.util.BackwardsCompatibility.CLASS,Weave.className(weavejs.core.LinkableString),className);var childState=typedState[weavejs.api.core.DynamicState.SESSION_STATE];if(weavejs.api.core.DynamicState.isDynamicStateArray(childState))childState.unshift(classNameState);else{var typedChildState=[classNameState];var childStateKeys=weavejs.util.JS.objectKeys(childState).sort();
var foreachiter2_target=childStateKeys;for(var foreachiter2 in foreachiter2_target){key=foreachiter2_target[foreachiter2];var propType=weavejs.util.BackwardsCompatibility.classLookup[className][key];if(propType){if(propType.indexOf('weave.api.')==0){var name=propType.split('::').pop();if(name.charAt(0)==='I'&&name.charAt(1)===name.charAt(1).toUpperCase()){name=name.substr(1);classDef=Weave.getDefinition(name);if(classDef)propType=Weave.className(classDef)}}typedChildState.push(weavejs.api.core.DynamicState.create(key,
propType,weavejs.util.BackwardsCompatibility.updateSessionState(childState[key])))}}childState=typedChildState}typedState[weavejs.api.core.DynamicState.SESSION_STATE]=weavejs.util.BackwardsCompatibility.updateSessionState(childState)}return state};
weavejs.util.BackwardsCompatibility.classLookup={'weave.core::CallbackCollection':null,'weave.core::ChildListCallbackInterface':{'lastObjectAdded':'weave.api.core::ILinkableObject','lastObjectRemoved':'weave.api.core::ILinkableObject'},'weave.core::EditorManager':null,'weave.core::ErrorManager':null,'weave.core::GlobalObjectReference':null,'weave.core::LinkableBoolean':null,'weave.core::LinkableCallbackScript':{'delayWhileBusy':'weave.core::LinkableBoolean','groupedCallback':'weave.core::LinkableBoolean',
'script':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap'},'weave.core::LinkableDisplayObject':{'children':'weave.api.core::ILinkableHashMap','className':'weave.core::LinkableString','events':'weave.core::UntypedLinkableVariable','parentLDO':'weave.core::LinkableDisplayObject','properties':'weave.core::UntypedLinkableVariable'},'weave.core::LinkableDynamicDisplayObject':null,'weave.core::LinkableDynamicObject':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},
'weave.core::LinkableFile':null,'weave.core::LinkableFunction':null,'weave.core::LinkableHashMap':{'childListCallbacks':'weave.api.core::IChildListCallbackInterface'},'weave.core::LinkableNumber':null,'weave.core::LinkablePromise':null,'weave.core::LinkableString':null,'weave.core::LinkableSynchronizer':{'primaryPath':'weave.core::LinkableVariable','primaryTransform':'weave.core::LinkableFunction','secondaryPath':'weave.core::LinkableVariable','secondaryTransform':'weave.core::LinkableFunction'},
'weave.core::LinkableVariable':null,'weave.core::LinkableWatcher':{'target':'weave.api.core::ILinkableObject'},'weave.core::LinkableWrapper':{'objectType':'weave.core::LinkableString','properties':'weave.core::UntypedLinkableVariable'},'weave.core::LinkableXML':null,'weave.core::ProgressIndicator':null,'weave.core::SessionStateLog':{'enableLogging':'weave.core::LinkableBoolean'},'weave.core::UntypedLinkableVariable':null,'weave.data.AttributeColumns::AbstractAttributeColumn':null,'weave.data.AttributeColumns::AlwaysDefinedColumn':{'defaultValue':'weave.core::UntypedLinkableVariable',
'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::BinnedColumn':{'binningDefinition':'weave.data.BinningDefinitions::DynamicBinningDefinition','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::CSVColumn':{'data':'weave.core::LinkableVariable','keyType':'weave.core::LinkableString','numericMode':'weave.core::LinkableBoolean','title':'weave.core::LinkableString'},'weave.data.AttributeColumns::ColorColumn':{'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn',
'ramp':'weave.primitives::ColorRamp','rampCenterAtZero':'weave.core::LinkableBoolean','recordColors':'weave.core::LinkableVariable'},'weave.data.AttributeColumns::CombinedColumn':{'columns':'weave.api.core::ILinkableHashMap','useFirstColumnMetadata':'weave.core::LinkableBoolean'},'weave.data.AttributeColumns::DateColumn':null,'weave.data.AttributeColumns::DynamicColumn':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::EquationColumn':{'equation':'weave.core::LinkableString',
'filterByKeyType':'weave.core::LinkableBoolean','metadata':'weave.core::UntypedLinkableVariable','variables':'weave.core::LinkableHashMap'},'weave.data.AttributeColumns::ExtendedDynamicColumn':{'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::FilteredColumn':{'filter':'weave.api.data::IDynamicKeyFilter','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::GeometryColumn':null,'weave.data.AttributeColumns::ImageColumn':{'internalObject':'weave.api.core::ILinkableObject',
'target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::KeyColumn':{'keyType':'weave.core::LinkableString'},'weave.data.AttributeColumns::NormalizedColumn':{'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn','max':'weave.core::LinkableNumber','min':'weave.core::LinkableNumber'},'weave.data.AttributeColumns::NumberColumn':null,'weave.data.AttributeColumns::ProxyColumn':null,'weave.data.AttributeColumns::ReferencedColumn':{'dataSourceName':'weave.core::LinkableString',
'metadata':'weave.core::LinkableVariable'},'weave.data.AttributeColumns::ReprojectedGeometryColumn':{'boundingBoxCallbacks':'weave.api.core::ICallbackCollection','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn','projectionSRS':'weave.core::LinkableString'},'weave.data.AttributeColumns::SecondaryKeyNumColumn':null,'weave.data.AttributeColumns::SortedColumn':{'ascending':'weave.core::LinkableBoolean','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::SortedIndexColumn':{'internalObject':'weave.api.core::ILinkableObject',
'target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::StreamedGeometryColumn':{'boundingBoxCallbacks':'weave.api.core::ICallbackCollection'},'weave.data.AttributeColumns::StringColumn':null,'weave.data.AttributeColumns::StringLookup':null,'weave.data.AttributeColumns::StringLookupColumn':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::WordCountColumn':{'wordData':'weave.core::LinkableString'},'weave.data.BinClassifiers::NumberClassifier':{'max':'weave.core::LinkableNumber',
'maxInclusive':'weave.core::LinkableBoolean','min':'weave.core::LinkableNumber','minInclusive':'weave.core::LinkableBoolean'},'weave.data.BinClassifiers::SingleValueClassifier':null,'weave.data.BinClassifiers::StringClassifier':null,'weave.data.BinningDefinitions::AbstractBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::CategoryBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::CustomSplitBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber','splitValues':'weave.core::LinkableString'},'weave.data.BinningDefinitions::DynamicBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.BinningDefinitions::EqualIntervalBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','dataInterval':'weave.core::LinkableNumber','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::ExplicitBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'childListCallbacks':'weave.api.core::IChildListCallbackInterface'},'weave.data.BinningDefinitions::NaturalJenksBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','numOfBins':'weave.core::LinkableNumber','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::QuantileBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','overrideBinNames':'weave.core::LinkableString',
'overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber','refQuantile':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::SimpleBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','numberOfBins':'weave.core::LinkableNumber','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::StandardDeviationBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.DataSources::AbstractDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::AbstractDataSource_old':{'attributeHierarchy':'weave.core::LinkableXML','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::AnnotationDataSource':{'annotations':'weave.core::LinkableVariable','hierarchyRefresh':'weave.api.core::ICallbackCollection'},
'weave.data.DataSources::CKANDataSource':{'apiVersion':'weave.core::LinkableNumber','hierarchyRefresh':'weave.api.core::ICallbackCollection','showGroups':'weave.core::LinkableBoolean','showPackages':'weave.core::LinkableBoolean','showTags':'weave.core::LinkableBoolean','url':'weave.core::LinkableString','useDataStore':'weave.core::LinkableBoolean','useHttpPost':'weave.core::LinkableBoolean'},'weave.data.DataSources::CSVDataSource':{'csvData':'weave.core::LinkableVariable','delimiter':'weave.core::LinkableString',
'hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColName':'weave.core::LinkableString','keyType':'weave.core::LinkableString','metadata':'weave.core::LinkableVariable','url':'weave.core::LinkableFile'},'weave.data.DataSources::CachedDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','state':'weave.core::LinkableVariable','type':'weave.core::LinkableString'},'weave.data.DataSources::CensusApi':null,'weave.data.DataSources::CensusDataSource':{'apiKey':'weave.core::LinkableString',
'dataSet':'weave.core::LinkableString','geographicFilters':'weave.core::LinkableVariable','geographicScope':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection','keyType':'weave.core::LinkableString'},'weave.data.DataSources::DBFDataSource':{'dbfUrl':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColName':'weave.core::LinkableString','keyType':'weave.core::LinkableString','projection':'weave.core::LinkableString','shpUrl':'weave.core::LinkableString'},
'weave.data.DataSources::FREDDataSource':{'apiKey':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::GeoJSONDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','keyProperty':'weave.core::LinkableString','keyType':'weave.core::LinkableString','projection':'weave.core::LinkableString','url':'weave.core::LinkableFile'},'weave.data.DataSources::GraphMLDataSource':{'edgeKeyPropertyName':'weave.core::LinkableString','edgeKeyType':'weave.core::LinkableString',
'hierarchyRefresh':'weave.api.core::ICallbackCollection','nodeKeyPropertyName':'weave.core::LinkableString','nodeKeyType':'weave.core::LinkableString','sourceUrl':'weave.core::LinkableString'},'weave.data.DataSources::HealthIndicatorsDataSource':{'apiKey':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::IDataSource_old':{'attributeHierarchy':'weave.core::LinkableXML'},'weave.data.DataSources::SocrataDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection',
'jsonCache':'weave.services::JsonCache','showCategories':'weave.core::LinkableBoolean','showTags':'weave.core::LinkableBoolean','showViewTypes':'weave.core::LinkableBoolean','url':'weave.core::LinkableString'},'weave.data.DataSources::TransposedDataSource':{'attributeHierarchy':'weave.core::LinkableXML','columns':'weave.api.core::ILinkableHashMap','filteredKeySet':'weave.api.data::IFilteredKeySet','hierarchyRefresh':'weave.api.core::ICallbackCollection','metadata':'weave.api.core::ILinkableHashMap'},
'weave.data.DataSources::WFSDataSource':{'attributeHierarchy':'weave.core::LinkableXML','hierarchyRefresh':'weave.api.core::ICallbackCollection','swapXY':'weave.core::LinkableBoolean','url':'weave.core::LinkableString','useURLsInGetCapabilities':'weave.core::LinkableBoolean'},'weave.data.DataSources::WeaveAnalystDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','inputKeyFilter':'weave.core::LinkableDynamicObject','inputs':'weave.core::LinkableHashMap','outputKeyColumn':'weave.core::LinkableString',
'outputKeyType':'weave.core::LinkableString','scriptName':'weave.core::LinkableString','url':'weave.core::LinkableString'},'weave.data.DataSources::WeaveDataSource':{'attributeHierarchy':'weave.core::LinkableXML','entityCache':'weave.services::EntityCache','hierarchyRefresh':'weave.api.core::ICallbackCollection','hierarchyURL':'weave.core::LinkableString','rootId':'weave.core::LinkableVariable','url':'weave.core::LinkableString'},'weave.data.DataSources::XLSDataSource':{'attributeHierarchy':'weave.core::LinkableXML',
'hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColName':'weave.core::LinkableString','keyType':'weave.core::LinkableString','url':'weave.core::LinkableString'},'weave.data.KeySets::ColumnDataFilter':{'column':'weave.data.AttributeColumns::DynamicColumn','enabled':'weave.core::LinkableBoolean','includeMissingKeyTypes':'weave.core::LinkableBoolean','values':'weave.core::LinkableVariable'},'weave.data.KeySets::DynamicKeyFilter':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},
'weave.data.KeySets::DynamicKeySet':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.KeySets::FilteredKeySet':{'keyFilter':'weave.api.data::IDynamicKeyFilter'},'weave.data.KeySets::KeyFilter':{'excluded':'weave.data.KeySets::KeySet','filters':'weave.api.core::ILinkableHashMap','includeMissingKeyTypes':'weave.core::LinkableBoolean','includeMissingKeys':'weave.core::LinkableBoolean','included':'weave.data.KeySets::KeySet'},'weave.data.KeySets::KeySet':{'keyCallbacks':'weave.api.data::IKeySetCallbackInterface'},
'weave.data.KeySets::KeySetCallbackInterface':null,'weave.data.KeySets::KeySetUnion':{'busyStatus':'weave.api.core::ICallbackCollection'},'weave.data.KeySets::SortedKeySet':null,'weave.data.Transforms::ForeignDataMappingTransform':{'dataColumns':'weave.api.core::ILinkableHashMap','hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.Transforms::GroupedDataTransform':{'aggregationModes':'weave.api.core::ILinkableVariable','dataColumns':'weave.api.core::ILinkableHashMap',
'groupByColumn':'weave.data.AttributeColumns::DynamicColumn','groupKeyType':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.Transforms::PartitionDataTransform':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','inputColumns':'weave.api.core::ILinkableHashMap','partitionColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.hierarchy::EntityNodeSearch':null,'weave.data.hierarchy::GlobalColumnDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection'},
'weave.data.hierarchy::WeaveRootDataTreeNode':{'dependency':'weave.api.core::ILinkableObject'},'weave.data::CSVParser':null,'weave.editors.managers::AddDataSourcePanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.editors.managers::DataSourceManager':{'browser':'weave.editors::DynamicColumnEditor','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.editors.managers::EditDataGridPanel':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.editors::DiscreteValuesDataFilterEditor':{'filter':'weave.data.KeySets::ColumnDataFilter','labelFunction':'weave.core::LinkableFunction','layoutMode':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean',
'showToggle':'weave.core::LinkableBoolean','showToggleLabel':'weave.core::LinkableBoolean','thumbColor':'weave.core::LinkableNumber'},'weave.editors::DynamicColumnEditor':{'explorer':'weave.ui::HierarchyExplorer','referencedColumn':'weave.data.AttributeColumns::ReferencedColumn','target':'weave.data.AttributeColumns::DynamicColumn'},'weave.editors::ForeignDataMappingTransformEditor':{'dataColumnsEditor':'weave.ui::ColumnListComponent','keyColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::GroupedDataTransformEditor':{'dataColumnsEditor':'weave.ui::ColumnListComponent',
'groupByColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::NumericRangeDataFilterEditor':{'discreteValueLabelInterval':'weave.core::LinkableNumber','filter':'weave.data.KeySets::ColumnDataFilter','forceDiscreteValues':'weave.core::LinkableBoolean','labelFunction':'weave.core::LinkableFunction','playStep':'weave.core::LinkableNumber','showMaxThumb':'weave.core::LinkableBoolean','showMinThumb':'weave.core::LinkableBoolean','showPlayButton':'weave.core::LinkableBoolean','showToggle':'weave.core::LinkableBoolean',
'showToggleLabel':'weave.core::LinkableBoolean','thumbColor':'weave.core::LinkableNumber'},'weave.editors::PartitionDataTransformEditor':{'inputColumnsEditor':'weave.ui::ColumnListComponent','partitionColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::PrincipalComponentEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.editors::SessionHistorySlider':{'squashActive':'weave.core::LinkableBoolean'},'weave.editors::TransposedDataSourceEditor':{'columns':'weave.api.core::ILinkableHashMap','columnsEditor':'weave.ui::ColumnListComponent','metadata':'weave.api.core::ILinkableHashMap','metadataEditor':'weave.ui::ColumnListComponent',
'titleColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::WeavePropertiesEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.graphs::AbstractGraphAlgorithm':null,'weave.graphs::DynamicGraphAlgorithm':{'internalObject':'weave.api.graphs::IGraphAlgorithm'},
'weave.graphs::ForceDirectedLayout':null,'weave.graphs::GridForceDirectedLayout':null,'weave.graphs::KamadaKawaiLayout':null,'weave.graphs::LargeGraphLayout':null,'weave.primitives::ColorRamp':null,'weave.primitives::LinkableBounds2D':null,'weave.primitives::LinkableNumberFormatter':{'decimalSeparatorFrom':'weave.core::LinkableString','decimalSeparatorTo':'weave.core::LinkableString','precision':'weave.core::LinkableNumber','rounding':'weave.core::LinkableString','thousandsSeparatorFrom':'weave.core::LinkableString',
'thousandsSeparatorTo':'weave.core::LinkableString','useNegativeSign':'weave.core::LinkableBoolean','useThousandsSeparator':'weave.core::LinkableBoolean'},'weave.primitives::ZoomBounds':null,'weave.radviz::AbstractLayoutAlgorithm':null,'weave.radviz::BruteForceLayoutAlgorithm':null,'weave.radviz::ClassDiscriminationLayoutAlgorithm':null,'weave.radviz::GreedyLayoutAlgorithm':null,'weave.radviz::IncrementalLayoutAlgorithm':null,'weave.radviz::NearestNeighborLayoutAlgorithm':null,'weave.radviz::RandomLayoutAlgorithm':{'iterations':'weave.core::LinkableNumber'},
'weave.services.wms::AbstractWMS':null,'weave.services.wms::CustomWMS':{'creditInfo':'weave.core::LinkableString','maxZoom':'weave.core::LinkableNumber','tileBounds':'weave.core::LinkableVariable','tileProjectionSRS':'weave.core::LinkableString','wmsURL':'weave.core::LinkableString'},'weave.services.wms::ModestMapsWMS':{'providerName':'weave.core::LinkableString'},'weave.services.wms::OnEarthProvider':null,'weave.services.wms::WMSTile':null,'weave.services::AMF3Servlet':null,'weave.services::AsyncInvocationQueue':null,
'weave.services::EntityCache':null,'weave.services::JsonCache':null,'weave.services::LocalAsyncService':null,'weave.services::Servlet':null,'weave.services::WFSServlet':null,'weave.services::WeaveDataServlet':null,'weave.services::WeaveRServlet':null,'weave.services::WebServiceWrapper':null,'weave.ui.CustomDataGrid::IFilterComponent':null,'weave.ui.CustomDataGrid::SearchFilterComponent':{'strToSearch':'weave.core::LinkableString'},'weave.ui.CustomDataGrid::SliderFilterComponent':{'maximum':'weave.core::LinkableNumber',
'minimum':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::ClusteringCollection':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumns':'weave.core::LinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::DataMiningPlatter':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','columns':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputVariables':'weave.api.core::ILinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::FuzzyKMeansClustering':{'inputColumns':'weave.core::LinkableHashMap'},'weave.ui.DataMiningEditors::FuzzyKMeansClusteringEditor':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','fkMeansColumns':'weave.ui::ColumnListComponent','fuzzyKMeans':'weave.ui.DataMiningEditors::FuzzyKMeansClustering','inputColumns':'weave.core::LinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::KMeansClusteringEditor':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumns':'weave.core::LinkableHashMap','kMeansColumns':'weave.ui::ColumnListComponent','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::PamClusteringEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumns':'weave.core::LinkableHashMap','kMeansColumns':'weave.ui::ColumnListComponent','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber',
'panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::PartitionAroundMedoidsClustering':{'inputColumns':'weave.core::LinkableHashMap'},'weave.ui.collaboration::CollaborationEditor':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.collaboration::CollaborationTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.controlBars::VisTaskbar':{'taskbarLargeIconSize':'weave.core::LinkableNumber','taskbarShrinkGrow':'weave.core::LinkableBoolean','taskbarSmallIconSize':'weave.core::LinkableNumber'},'weave.ui::AttributeMenuTool':{'alwaysShowPrompt':'weave.core::LinkableBoolean','autoPlayRepeat':'weave.core::LinkableBoolean',
'buttonRadius':'weave.core::LinkableNumber','choices':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','labelFunction':'weave.core::LinkableFunction','layoutMode':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','prompt':'weave.core::LinkableString','selectedAttribute':'weave.core::LinkableString',
'showPlayButton':'weave.core::LinkableBoolean','targetAttribute':'weave.core::LinkableVariable','targetToolPath':'weave.core::LinkableVariable','useChoiceIndex':'weave.core::LinkableBoolean','zOrder':'weave.core::LinkableNumber'},'weave.ui::AttributeSelectorPanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','editor':'weave.editors::DynamicColumnEditor','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::BasicLinkableLayoutManager':null,'weave.ui::BinningDefinitionEditor':{'_simple':'weave.data.BinningDefinitions::SimpleBinningDefinition'},'weave.ui::CirclePlotterSettings':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel',
'enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotter':'weave.visualization.plotters::CirclePlotter','zOrder':'weave.core::LinkableNumber'},'weave.ui::ColorController':{'binEditor':'weave.ui::BinningDefinitionEditor','buttonRadius':'weave.core::LinkableNumber','cRampEditor':'weave.ui::ColorRampEditor','closeable':'weave.core::LinkableBoolean',
'colorOverrideEditor':'weave.ui::ColorOverrideEditor','controlPanel':'weave.ui::ControlPanel','dataColumnComponent':'weave.ui::DynamicColumnComponent','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::ColorOverrideEditor':{'recordColors':'weave.core::LinkableVariable'},'weave.ui::ColorRampEditor':{'colorRamp':'weave.primitives::ColorRamp',
'colorRampList':'weave.ui::ColorRampList'},'weave.ui::ColorRampList':{'colorRamp':'weave.primitives::ColorRamp'},'weave.ui::ColumnListComponent':{'hashMap':'weave.api.core::ILinkableHashMap'},'weave.ui::ControlPanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::DataFilterTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','editor':'weave.core::LinkableDynamicObject','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filter':'weave.core::LinkableDynamicObject','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.ui::DimensionDropList':{'hashMap':'weave.core::LinkableHashMap'},'weave.ui::DraggablePanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::DynamicColumnComponent':null,'weave.ui::EquationEditor':{'_EquationEditor_ColumnListComponent1':'weave.ui::ColumnListComponent',
'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','dynamicColumn':'weave.data.AttributeColumns::DynamicColumn','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::ErrorLogPanel':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::FlexibleLayout':null,'weave.ui::HierarchyExplorer':{'fileView':'weave.ui::WeaveTree','folderView':'weave.ui::WeaveTree'},'weave.ui::JRITextEditor':{'assignTALinkable':'weave.core::LinkableString','buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumnList':'weave.ui::ColumnListComponent','inputTALinkable':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'outputTALinkable':'weave.core::LinkableString','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotTALinkable':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},
'weave.ui::JavaScriptCanvas':{'elementId':'weave.core::LinkableString'},'weave.ui::NumberClassifierEditor':{'binClassifiers':'weave.data.BinningDefinitions::ExplicitBinningDefinition'},'weave.ui::ObjectViewer':{'treeView':'weave.ui::WeaveTree'},'weave.ui::PenTool':{'coords':'weave.core::LinkableString','drawingMode':'weave.core::LinkableString','lineAlpha':'weave.core::LinkableNumber','lineColor':'weave.core::LinkableNumber','lineWidth':'weave.core::LinkableNumber','polygonFillAlpha':'weave.core::LinkableNumber',
'polygonFillColor':'weave.core::LinkableNumber'},'weave.ui::ProbeToolTipEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','headerList':'weave.ui::ColumnListComponent','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.ui::ProbeToolTipWindow':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','dynamicKeySet':'weave.core::LinkableDynamicObject','editor':'weave.ui::ProbeToolTipEditor','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','htmlFormatter':'weave.core::LinkableFunction','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','useHtmlText':'weave.core::LinkableBoolean',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::RTextEditor':{'assignTALinkable':'weave.core::LinkableString','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumnList':'weave.ui::ColumnListComponent','inputTALinkable':'weave.core::LinkableString',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','outputTALinkable':'weave.core::LinkableString','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','plotTALinkable':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.ui::RecordDataTable':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::SchafersMissingDataTool':{'assignTALinkable':'weave.core::LinkableString','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumnList':'weave.ui::ColumnListComponent','inputTALinkable':'weave.core::LinkableString',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','outputTALinkable':'weave.core::LinkableString','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.ui::SelectionManager':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.ui::SelectionSelector':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeAllRecordsOption':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','prompt':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::SessionNavigator':{'rootObject':'weave.api.core::ILinkableObject'},
'weave.ui::SessionStateEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','sessionNav':'weave.ui::SessionNavigator','zOrder':'weave.core::LinkableNumber'},'weave.ui::SessionStateMenuTool':{'alwaysShowPrompt':'weave.core::LinkableBoolean',
'autoRecord':'weave.core::LinkableBoolean','buttonRadius':'weave.core::LinkableNumber','choices':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','layoutMode':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','promptText':'weave.core::LinkableString','selectedChoice':'weave.core::LinkableString',
'showPlayButton':'weave.core::LinkableBoolean','targets':'weave.core::LinkableHashMap','thumbColor':'weave.core::LinkableNumber','zOrder':'weave.core::LinkableNumber'},'weave.ui::SubsetManager':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::SubsetSelector':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','displayRecordInfo':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeAllRecordsOption':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','prompt':'weave.core::LinkableString',
'sliderMode':'weave.core::LinkableBoolean','zOrder':'weave.core::LinkableNumber'},'weave.ui::TextTool':{'backgroundAlpha':'weave.core::LinkableNumber','borderColor':'weave.core::LinkableNumber','borderThickness':'weave.core::LinkableNumber','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','cornerRadius':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean',
'enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','htmlText':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','padding':'weave.core::LinkableNumber','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::TranslationPanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::UITest':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::UITestBitmapText':{'buttonRadius':'weave.core::LinkableNumber',
'children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber',
'panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::VariableListController':{'dynamicObject':'weave.api.core::ILinkableDynamicObject','hashMap':'weave.api.core::ILinkableHashMap'},'weave.ui::WeavePodLayoutManager':{'scale':'weave.core::LinkableNumber'},
'weave.ui::WeaveTree':null,'weave.utils::AsyncSort':null,'weave.utils::GeometryStreamDecoder':{'metadataCallbacks':'weave.api.core::ICallbackCollection'},'weave.utils::LinkableTextFormat':{'bold':'weave.core::LinkableBoolean','color':'weave.core::LinkableNumber','font':'weave.core::LinkableString','italic':'weave.core::LinkableBoolean','size':'weave.core::LinkableNumber','underline':'weave.core::LinkableBoolean'},'weave.utils::ShpFileReader':null,'weave.utils::SpatialIndex':null,'weave.utils::VisToolGroup':{'colorColumn':'weave.api.data::IColumnWrapper',
'probeKeySet':'weave.api.data::IDynamicKeySet','selectionKeySet':'weave.api.data::IDynamicKeySet','subsetKeyFilter':'weave.api.data::IDynamicKeyFilter'},'weave.visualization.layers.filters::LinkableDropShadowFilter':{'alpha':'weave.core::LinkableNumber','angle':'weave.core::LinkableNumber','blurX':'weave.core::LinkableNumber','blurY':'weave.core::LinkableNumber','color':'weave.core::LinkableNumber','distance':'weave.core::LinkableNumber','strength':'weave.core::LinkableNumber'},'weave.visualization.layers.filters::LinkableGlowFilter':{'alpha':'weave.core::LinkableNumber',
'blurX':'weave.core::LinkableNumber','blurY':'weave.core::LinkableNumber','color':'weave.core::LinkableNumber','strength':'weave.core::LinkableNumber'},'weave.visualization.layers::InteractionController':{'defaultDragMode':'weave.core::LinkableString','pan':'weave.core::LinkableString','probe':'weave.core::LinkableString','select':'weave.core::LinkableString','selectAdd':'weave.core::LinkableString','selectAll':'weave.core::LinkableString','selectRemove':'weave.core::LinkableString','zoom':'weave.core::LinkableString',
'zoomIn':'weave.core::LinkableString','zoomOut':'weave.core::LinkableString','zoomToExtent':'weave.core::LinkableString'},'weave.visualization.layers::InteractiveVisualization':{'enableProbe':'weave.core::LinkableBoolean','enableSelection':'weave.core::LinkableBoolean','enableZoomAndPan':'weave.core::LinkableBoolean','plotManager':'weave.visualization.layers::PlotManager','zoomFactor':'weave.core::LinkableNumber'},'weave.visualization.layers::LayerSettings':{'alpha':'weave.core::LinkableNumber','alwaysRenderSelection':'weave.core::LinkableBoolean',
'maxVisibleScale':'weave.core::LinkableNumber','minVisibleScale':'weave.core::LinkableNumber','probeFilter':'weave.api.data::IDynamicKeyFilter','selectable':'weave.core::LinkableBoolean','selectionFilter':'weave.api.data::IDynamicKeyFilter','visible':'weave.core::LinkableBoolean'},'weave.visualization.layers::LinkableEventListener':{'event':'weave.core::LinkableString','script':'weave.core::LinkableFunction','target':'weave.core::LinkableDynamicObject'},'weave.visualization.layers::PlotManager':{'enableAutoZoomToExtent':'weave.core::LinkableBoolean',
'enableAutoZoomToSelection':'weave.core::LinkableBoolean','enableFixedAspectRatio':'weave.core::LinkableBoolean','includeNonSelectableLayersInAutoZoom':'weave.core::LinkableBoolean','layerSettings':'weave.core::LinkableHashMap','marginBottom':'weave.core::LinkableString','marginBottomNumber':'weave.core::LinkableNumber','marginLeft':'weave.core::LinkableString','marginLeftNumber':'weave.core::LinkableNumber','marginRight':'weave.core::LinkableString','marginRightNumber':'weave.core::LinkableNumber',
'marginTop':'weave.core::LinkableString','marginTopNumber':'weave.core::LinkableNumber','maxZoomLevel':'weave.core::LinkableNumber','minScreenSize':'weave.core::LinkableNumber','minZoomLevel':'weave.core::LinkableNumber','overrideXMax':'weave.core::LinkableNumber','overrideXMin':'weave.core::LinkableNumber','overrideYMax':'weave.core::LinkableNumber','overrideYMin':'weave.core::LinkableNumber','plotters':'weave.core::LinkableHashMap','zoomBounds':'weave.primitives::ZoomBounds'},'weave.visualization.layers::PlotTask':null,
'weave.visualization.layers::SimpleInteractiveVisualization':{'axesAlpha':'weave.core::LinkableNumber','axesColor':'weave.core::LinkableNumber','axesThickness':'weave.core::LinkableNumber','bottomMarginClickCallbacks':'weave.api.core::ICallbackCollection','bottomMarginColumn':'weave.api.data::IAttributeColumn','enableAutoZoomXToNiceNumbers':'weave.core::LinkableBoolean','enableAutoZoomYToNiceNumbers':'weave.core::LinkableBoolean','enableProbe':'weave.core::LinkableBoolean','enableSelection':'weave.core::LinkableBoolean',
'enableZoomAndPan':'weave.core::LinkableBoolean','gridLineAlpha':'weave.core::LinkableNumber','gridLineColor':'weave.core::LinkableNumber','gridLineThickness':'weave.core::LinkableNumber','leftMarginClickCallbacks':'weave.api.core::ICallbackCollection','leftMarginColumn':'weave.api.data::IAttributeColumn','plotManager':'weave.visualization.layers::PlotManager','rightMarginClickCallbacks':'weave.api.core::ICallbackCollection','rightMarginColumn':'weave.api.data::IAttributeColumn','topMarginClickCallbacks':'weave.api.core::ICallbackCollection',
'topMarginColumn':'weave.api.data::IAttributeColumn','zoomFactor':'weave.core::LinkableNumber'},'weave.visualization.layers::Visualization':{'plotManager':'weave.visualization.layers::PlotManager'},'weave.visualization.plotters.styles::DynamicFillStyle':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.visualization.plotters.styles::DynamicLineStyle':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},
'weave.visualization.plotters.styles::ExtendedFillStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean','enableMissingDataGradient':'weave.core::LinkableBoolean','imageURL':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters.styles::ExtendedLineStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','caps':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean','joints':'weave.data.AttributeColumns::AlwaysDefinedColumn','miterLimit':'weave.data.AttributeColumns::AlwaysDefinedColumn','normalizedWeightColumn':'weave.data.AttributeColumns::NormalizedColumn','pixelHinting':'weave.data.AttributeColumns::AlwaysDefinedColumn','scaleMode':'weave.data.AttributeColumns::AlwaysDefinedColumn','weight':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters.styles::SolidFillStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean'},'weave.visualization.plotters.styles::SolidLineStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','caps':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean','joints':'weave.data.AttributeColumns::AlwaysDefinedColumn','miterLimit':'weave.data.AttributeColumns::AlwaysDefinedColumn','normalizedWeightColumn':'weave.data.AttributeColumns::NormalizedColumn',
'pixelHinting':'weave.data.AttributeColumns::AlwaysDefinedColumn','scaleMode':'weave.data.AttributeColumns::AlwaysDefinedColumn','weight':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters::AbstractGlyphPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','sourceProjection':'weave.core::LinkableString',
'spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::AbstractPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::AnchorPlotter':{'anchorFillStyle':'weave.visualization.plotters.styles::SolidFillStyle','anchorLineStyle':'weave.visualization.plotters.styles::SolidLineStyle','anchorRadius':'weave.core::LinkableNumber','barycenterFillStyle':'weave.visualization.plotters.styles::SolidFillStyle',
'barycenterLineStyle':'weave.visualization.plotters.styles::SolidLineStyle','barycenterRadius':'weave.core::LinkableNumber','circleLineStyle':'weave.visualization.plotters.styles::SolidLineStyle','colorMap':'weave.primitives::ColorRamp','enableWedgeColoring':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','labelAngleRatio':'weave.core::LinkableNumber','showBarycenter':'weave.core::LinkableBoolean','showConvexHull':'weave.core::LinkableBoolean','showVoronoi':'weave.core::LinkableBoolean',
'spatialCallbacks':'weave.api.core::ICallbackCollection','unrestrictAnchors':'weave.core::LinkableBoolean','wordWrap':'weave.core::LinkableNumber'},'weave.visualization.plotters::AnchorPoint':{'classDiscriminationMetric':'weave.core::LinkableNumber','classType':'weave.core::LinkableString','polarRadians':'weave.core::LinkableNumber','radius':'weave.core::LinkableNumber','title':'weave.core::LinkableString','x':'weave.core::LinkableNumber','y':'weave.core::LinkableNumber'},'weave.visualization.plotters::AxisLabelPlotter':{'alignToDataMax':'weave.core::LinkableBoolean',
'alongXAxis':'weave.core::LinkableBoolean','angle':'weave.core::LinkableNumber','begin':'weave.core::LinkableNumber','color':'weave.core::LinkableNumber','end':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','hAlign':'weave.core::LinkableString','hideOverlappingText':'weave.core::LinkableBoolean','interval':'weave.core::LinkableNumber','labelFunction':'weave.core::LinkableFunction','maxWidth':'weave.core::LinkableNumber','offset':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection',
'text':'weave.data.AttributeColumns::DynamicColumn','textFormatAlign':'weave.core::LinkableString','vAlign':'weave.core::LinkableString','xScreenOffset':'weave.core::LinkableNumber','yScreenOffset':'weave.core::LinkableNumber'},'weave.visualization.plotters::AxisPlotter':{'axisGridLineAlpha':'weave.core::LinkableNumber','axisGridLineColor':'weave.core::LinkableNumber','axisGridLineThickness':'weave.core::LinkableNumber','axisLabelDistance':'weave.core::LinkableNumber','axisLabelRelativeAngle':'weave.core::LinkableNumber',
'axisLineAlpha':'weave.core::LinkableNumber','axisLineColor':'weave.core::LinkableNumber','axisLineDataBounds':'weave.primitives::LinkableBounds2D','axisLineMaxValue':'weave.core::LinkableNumber','axisLineMinValue':'weave.core::LinkableNumber','axisLineThickness':'weave.core::LinkableNumber','axisTickAlpha':'weave.core::LinkableNumber','axisTickColor':'weave.core::LinkableNumber','axisTickLength':'weave.core::LinkableNumber','axisTickThickness':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet',
'forceTickCount':'weave.core::LinkableBoolean','labelDistanceIsVertical':'weave.core::LinkableBoolean','labelHorizontalAlign':'weave.core::LinkableString','labelNumberFormatter':'weave.primitives::LinkableNumberFormatter','labelTextAlignment':'weave.core::LinkableString','labelVerticalAlign':'weave.core::LinkableString','showAxisName':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection','tickCountRequested':'weave.core::LinkableNumber','tickMaxValue':'weave.core::LinkableNumber',
'tickMinValue':'weave.core::LinkableNumber'},'weave.visualization.plotters::BackgroundTextPlotter':{'dependency':'weave.core::LinkableDynamicObject','filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection','textFormat':'weave.utils::LinkableTextFormat','textFunction':'weave.core::LinkableFunction'},'weave.visualization.plotters::BarChartLegendPlotter':{'chartColors':'weave.primitives::ColorRamp','colorIndicatesDirection':'weave.core::LinkableBoolean',
'columns':'weave.api.core::ILinkableHashMap','filteredKeySet':'weave.api.data::IFilteredKeySet','itemLabelFunction':'weave.core::LinkableFunction','legendTitleFunction':'weave.core::LinkableFunction','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','maxColumns':'weave.core::LinkableNumber','reverseOrder':'weave.core::LinkableBoolean','shapeSize':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::BoundsPlotter':{'fill':'weave.visualization.plotters.styles::SolidFillStyle',
'filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','xMaxData':'weave.data.AttributeColumns::DynamicColumn','xMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','xMinData':'weave.data.AttributeColumns::DynamicColumn','xMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','yMaxData':'weave.data.AttributeColumns::DynamicColumn','yMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'yMinData':'weave.data.AttributeColumns::DynamicColumn','yMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters::CircleGlyphPlotter':{'absoluteValueColorEnabled':'weave.core::LinkableBoolean','absoluteValueColorMax':'weave.core::LinkableNumber','absoluteValueColorMin':'weave.core::LinkableNumber','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','defaultScreenRadius':'weave.core::LinkableNumber','destinationProjection':'weave.core::LinkableString',
'enabledSizeBy':'weave.core::LinkableBoolean','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle','maxScreenRadius':'weave.core::LinkableNumber','minScreenRadius':'weave.core::LinkableNumber','screenRadius':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},
'weave.visualization.plotters::CirclePlotter':{'dataX':'weave.core::LinkableNumber','dataY':'weave.core::LinkableNumber','fillAlpha':'weave.core::LinkableNumber','fillColor':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','lineAlpha':'weave.core::LinkableNumber','lineColor':'weave.core::LinkableNumber','polygonVertexCount':'weave.core::LinkableNumber','radius':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection','thickness':'weave.core::LinkableNumber'},
'weave.visualization.plotters::ColorBinLegendPlotter':{'dynamicColorColumn':'weave.data.AttributeColumns::DynamicColumn','filteredKeySet':'weave.api.data::IFilteredKeySet','itemLabelFunction':'weave.core::LinkableFunction','legendTitleFunction':'weave.core::LinkableFunction','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','maxColumns':'weave.core::LinkableNumber','reverseOrder':'weave.core::LinkableBoolean','shapeSize':'weave.core::LinkableNumber','shapeType':'weave.core::LinkableString',
'spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::CompoundBarChartPlotter':{'barSpacing':'weave.core::LinkableNumber','chartColors':'weave.primitives::ColorRamp','colorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','colorIndicatesDirection':'weave.core::LinkableBoolean','errorIsRelative':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','groupBySortColumn':'weave.core::LinkableBoolean','groupingMode':'weave.core::LinkableString',
'heightColumns':'weave.core::LinkableHashMap','horizontalMode':'weave.core::LinkableBoolean','labelColor':'weave.core::LinkableNumber','labelColumn':'weave.data.AttributeColumns::DynamicColumn','labelDataCoordinate':'weave.core::LinkableNumber','labelFormatter':'weave.core::LinkableFunction','labelHorizontalAlign':'weave.core::LinkableString','labelMaxWidth':'weave.core::LinkableNumber','labelRelativeAngle':'weave.core::LinkableNumber','labelVerticalAlign':'weave.core::LinkableString','line':'weave.visualization.plotters.styles::SolidLineStyle',
'negativeErrorColumns':'weave.core::LinkableHashMap','positiveErrorColumns':'weave.core::LinkableHashMap','recordLabelColoring':'weave.core::LinkableBoolean','recordValueLabelColoring':'weave.core::LinkableBoolean','showLabels':'weave.core::LinkableBoolean','showValueLabels':'weave.core::LinkableBoolean','sortColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','stackedMissingDataGap':'weave.core::LinkableBoolean','valueLabelColor':'weave.core::LinkableNumber',
'valueLabelDataCoordinate':'weave.core::LinkableNumber','valueLabelHorizontalAlign':'weave.core::LinkableString','valueLabelMaxWidth':'weave.core::LinkableNumber','valueLabelRelativeAngle':'weave.core::LinkableNumber','valueLabelVerticalAlign':'weave.core::LinkableString','zoomToSubset':'weave.core::LinkableBoolean','zoomToSubsetBars':'weave.core::LinkableBoolean'},'weave.visualization.plotters::CompoundRadVizPlotter':{'alphaColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','anchors':'weave.core::LinkableHashMap',
'colorMap':'weave.primitives::ColorRamp','columns':'weave.core::LinkableHashMap','currentAlgorithm':'weave.core::LinkableString','enableJitter':'weave.core::LinkableBoolean','enableWedgeColoring':'weave.core::LinkableBoolean','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','iterations':'weave.core::LinkableNumber','jitterLevel':'weave.core::LinkableNumber','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','localNormalization':'weave.core::LinkableBoolean',
'radiusColumn':'weave.data.AttributeColumns::DynamicColumn','radiusConstant':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::CustomGlyphPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','function_drawBackground':'weave.core::LinkableFunction','function_drawPlot':'weave.core::LinkableFunction',
'function_getBackgroundDataBounds':'weave.core::LinkableFunction','function_getDataBoundsFromRecordKey':'weave.core::LinkableFunction','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','vars':'weave.api.core::ILinkableHashMap','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::EquationPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection',
'tBegin':'weave.core::LinkableNumber','tEnd':'weave.core::LinkableNumber','tStep':'weave.core::LinkableNumber','xEquation':'weave.core::LinkableFunction','yEquation':'weave.core::LinkableFunction'},'weave.visualization.plotters::GaugePlotter':{'binningDefinition':'weave.data.BinningDefinitions::DynamicBinningDefinition','colorRamp':'weave.primitives::ColorRamp','filteredKeySet':'weave.api.data::IFilteredKeySet','meterColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},
'weave.visualization.plotters::GeometryLabelPlotter':{'angle':'weave.data.AttributeColumns::AlwaysDefinedColumn','bold':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','font':'weave.data.AttributeColumns::AlwaysDefinedColumn','geometryColumn':'weave.data.AttributeColumns::ReprojectedGeometryColumn',
'hAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','hideOverlappingText':'weave.core::LinkableBoolean','italic':'weave.data.AttributeColumns::AlwaysDefinedColumn','maxWidth':'weave.core::LinkableNumber','size':'weave.data.AttributeColumns::AlwaysDefinedColumn','sortColumn':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','text':'weave.data.AttributeColumns::DynamicColumn','underline':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'vAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','xScreenOffset':'weave.core::LinkableNumber','yScreenOffset':'weave.core::LinkableNumber','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::GeometryPlotter':{'fill':'weave.visualization.plotters.styles::ExtendedFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','geometryColumn':'weave.data.AttributeColumns::ReprojectedGeometryColumn','iconSize':'weave.core::LinkableNumber','line':'weave.visualization.plotters.styles::ExtendedLineStyle',
'pixellation':'weave.core::LinkableNumber','pointDataImageColumn':'weave.data.AttributeColumns::ImageColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','symbolPlotters':'weave.api.core::ILinkableHashMap','useFixedImageSize':'weave.core::LinkableBoolean','zOrderAscending':'weave.core::LinkableBoolean','zOrderColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::GeometryRelationPlotter':{'destinationKeyColumn':'weave.data.AttributeColumns::DynamicColumn',
'filteredKeySet':'weave.api.data::IFilteredKeySet','fontColor':'weave.core::LinkableNumber','fontSize':'weave.core::LinkableNumber','geometryColumn':'weave.data.AttributeColumns::ReprojectedGeometryColumn','lineWidth':'weave.core::LinkableNumber','negLineColor':'weave.core::LinkableNumber','posLineColor':'weave.core::LinkableNumber','showValue':'weave.core::LinkableBoolean','sourceKeyColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','valueColumn':'weave.data.AttributeColumns::DynamicColumn'},
'weave.visualization.plotters::GraphLabelPlotter':{'currentAlgorithm':'weave.core::LinkableString','edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','labelColumn':'weave.data.AttributeColumns::DynamicColumn','layoutAlgorithm':'weave.api.graphs::IGraphAlgorithm','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle',
'nodesColumn':'weave.data.AttributeColumns::DynamicColumn','radius':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::GraphPlotter':{'algorithmRunning':'weave.core::LinkableBoolean','alphaColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','colorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','currentAlgorithm':'weave.core::LinkableString','drawCurvedLines':'weave.core::LinkableBoolean','edgeColorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeStyle':'weave.core::LinkableString','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','edgeThicknessColumn':'weave.data.AttributeColumns::DynamicColumn','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','labelColumn':'weave.data.AttributeColumns::DynamicColumn','layoutAlgorithm':'weave.core::LinkableDynamicObject','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle',
'nodeRadiusColumn':'weave.data.AttributeColumns::DynamicColumn','nodesColumn':'weave.data.AttributeColumns::DynamicColumn','radius':'weave.core::LinkableNumber','shouldStop':'weave.core::LinkableBoolean','sizeColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::GridLinePlotter':{'bounds':'weave.primitives::LinkableBounds2D','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle',
'spatialCallbacks':'weave.api.core::ICallbackCollection','xInterval':'weave.core::LinkableNumber','xOffset':'weave.core::LinkableNumber','yInterval':'weave.core::LinkableNumber','yOffset':'weave.core::LinkableNumber'},'weave.visualization.plotters::Histogram2DPlotter':{'binColors':'weave.primitives::ColorRamp','colorColumn':'weave.data.AttributeColumns::DynamicColumn','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','showAverageColorData':'weave.core::LinkableBoolean',
'spatialCallbacks':'weave.api.core::ICallbackCollection','xBinnedColumn':'weave.data.AttributeColumns::BinnedColumn','xColumn':'weave.data.AttributeColumns::DynamicColumn','yBinnedColumn':'weave.data.AttributeColumns::BinnedColumn','yColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::HistogramPlotter':{'aggregationMethod':'weave.core::LinkableString','binnedColumn':'weave.data.AttributeColumns::BinnedColumn','columnToAggregate':'weave.data.AttributeColumns::DynamicColumn',
'drawPartialBins':'weave.core::LinkableBoolean','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','horizontalMode':'weave.core::LinkableBoolean','internalColorColumn':'weave.data.AttributeColumns::ColorColumn','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','showValueLabels':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection','valueLabelColor':'weave.core::LinkableNumber','valueLabelHorizontalAlign':'weave.core::LinkableString',
'valueLabelMaxWidth':'weave.core::LinkableNumber','valueLabelRelativeAngle':'weave.core::LinkableNumber','valueLabelVerticalAlign':'weave.core::LinkableString'},'weave.visualization.plotters::ImageGlyphPlotter':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','dataInDegrees':'weave.core::LinkableBoolean','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString',
'filteredKeySet':'weave.api.data::IFilteredKeySet','imageSize':'weave.data.AttributeColumns::AlwaysDefinedColumn','imageURL':'weave.data.AttributeColumns::AlwaysDefinedColumn','reverseRotation':'weave.core::LinkableBoolean','rotation':'weave.data.AttributeColumns::DynamicColumn','rotationOffset':'weave.core::LinkableNumber','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::LineChartPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn',
'dataY':'weave.data.AttributeColumns::DynamicColumn','filteredKeySet':'weave.api.data::IFilteredKeySet','group':'weave.data.AttributeColumns::DynamicColumn','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','order':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','useFilteredDataGaps':'weave.core::LinkableBoolean'},'weave.visualization.plotters::LinePlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle',
'spatialCallbacks':'weave.api.core::ICallbackCollection','x1Data':'weave.data.AttributeColumns::DynamicColumn','x1ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','x2Data':'weave.data.AttributeColumns::DynamicColumn','x2ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','y1Data':'weave.data.AttributeColumns::DynamicColumn','y1ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','y2Data':'weave.data.AttributeColumns::DynamicColumn','y2ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn'},
'weave.visualization.plotters::MeterPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','meterColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::OldParallelCoordinatesPlotter':{'columns':'weave.core::LinkableHashMap','curveType':'weave.core::LinkableString','enableGroupBy':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','groupBy':'weave.data.AttributeColumns::DynamicColumn',
'groupKeyType':'weave.core::LinkableString','lineStyle':'weave.visualization.plotters.styles::ExtendedLineStyle','normalize':'weave.core::LinkableBoolean','shapeBorderAlpha':'weave.core::LinkableNumber','shapeBorderColor':'weave.core::LinkableNumber','shapeBorderThickness':'weave.core::LinkableNumber','shapeSize':'weave.core::LinkableNumber','shapeToDraw':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','xColumns':'weave.core::LinkableHashMap','xData':'weave.data.AttributeColumns::DynamicColumn',
'xValues':'weave.core::LinkableString','yData':'weave.data.AttributeColumns::DynamicColumn','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::PieChartHistogramPlotter':{'_beginRadians':'weave.data.AttributeColumns::EquationColumn','_binLookup':'weave.data.AttributeColumns::StringLookupColumn','_binLookupStats':'weave.api.data::IColumnStatistics','_binnedData':'weave.data.AttributeColumns::BinnedColumn','_filteredData':'weave.data.AttributeColumns::FilteredColumn','_spanRadians':'weave.data.AttributeColumns::EquationColumn',
'binnedData':'weave.data.AttributeColumns::BinnedColumn','chartColors':'weave.primitives::ColorRamp','filteredKeySet':'weave.api.data::IFilteredKeySet','innerRadius':'weave.core::LinkableNumber','labelAngleRatio':'weave.core::LinkableNumber','line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','unfilteredData':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::PieChartPlotter':{'data':'weave.data.AttributeColumns::DynamicColumn',
'fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','innerRadius':'weave.core::LinkableNumber','label':'weave.data.AttributeColumns::DynamicColumn','labelAngleRatio':'weave.core::LinkableNumber','line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::ProbeLinePlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection'},
'weave.visualization.plotters::RadVizPlotter':{'RSampling':'weave.core::LinkableBoolean','absNorm':'weave.core::LinkableBoolean','alphaColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','anchorLabelFunction':'weave.core::LinkableFunction','anchors':'weave.core::LinkableHashMap','colorMap':'weave.primitives::ColorRamp','columns':'weave.core::LinkableHashMap','currentAlgorithm':'weave.core::LinkableString','dataSetName':'weave.core::LinkableString','enableJitter':'weave.core::LinkableBoolean',
'fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','iterations':'weave.core::LinkableNumber','jitterLevel':'weave.core::LinkableNumber','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','localNormalization':'weave.core::LinkableBoolean','normMax':'weave.core::LinkableNumber','normMin':'weave.core::LinkableNumber','pointSensitivitySelection':'weave.core::LinkableVariable','probeLineNormalizedThreshold':'weave.core::LinkableNumber',
'radiusColumn':'weave.data.AttributeColumns::DynamicColumn','radiusConstant':'weave.core::LinkableNumber','regularSampling':'weave.core::LinkableBoolean','sampleSizeColumns':'weave.core::LinkableNumber','sampleSizeRows':'weave.core::LinkableNumber','sampleTitle':'weave.core::LinkableString','showAnchorProbeLines':'weave.core::LinkableBoolean','showAnnulusCenter':'weave.core::LinkableBoolean','showValuesForAnchorProbeLines':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection'},
'weave.visualization.plotters::RamachandranBackgroundPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::RectanglePlotter':{'centerX':'weave.core::LinkableBoolean','centerY':'weave.core::LinkableBoolean','drawEllipse':'weave.core::LinkableBoolean','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','heightData':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','widthData':'weave.data.AttributeColumns::AlwaysDefinedColumn','xData':'weave.data.AttributeColumns::AlwaysDefinedColumn','xMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','xMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','yData':'weave.data.AttributeColumns::AlwaysDefinedColumn','yMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'yMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters::RegressionLinePlotter':{'currentTrendline':'weave.core::LinkableString','drawLine':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','polynomialDegree':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection','xColumn':'weave.data.AttributeColumns::DynamicColumn','yColumn':'weave.data.AttributeColumns::DynamicColumn'},
'weave.visualization.plotters::ScatterPlotPlotter':{'colorBySize':'weave.core::LinkableBoolean','colorNegative':'weave.core::LinkableNumber','colorPositive':'weave.core::LinkableNumber','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','defaultScreenRadius':'weave.core::LinkableNumber','destinationProjection':'weave.core::LinkableString','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet',
'line':'weave.visualization.plotters.styles::SolidLineStyle','maxScreenRadius':'weave.core::LinkableNumber','minScreenRadius':'weave.core::LinkableNumber','showSquaresForMissingSize':'weave.core::LinkableBoolean','sizeBy':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::SimpleAxisPlotter':{'axesAlpha':'weave.core::LinkableNumber',
'axesColor':'weave.core::LinkableNumber','axesThickness':'weave.core::LinkableNumber','axisGridLineAlpha':'weave.core::LinkableNumber','axisGridLineColor':'weave.core::LinkableNumber','axisGridLineThickness':'weave.core::LinkableNumber','axisLabelHorizontalDistance':'weave.core::LinkableNumber','axisLabelRelativeAngle':'weave.core::LinkableNumber','axisLabelVerticalDistance':'weave.core::LinkableNumber','axisLineDataBounds':'weave.primitives::LinkableBounds2D','axisLineMaxValue':'weave.core::LinkableNumber',
'axisLineMinValue':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','forceTickCount':'weave.core::LinkableBoolean','labelFunction':'weave.core::LinkableFunction','labelHorizontalAlign':'weave.core::LinkableString','labelNumberFormatter':'weave.primitives::LinkableNumberFormatter','labelTextAlignment':'weave.core::LinkableString','labelVerticalAlign':'weave.core::LinkableString','labelWordWrapSize':'weave.core::LinkableNumber','overrideAxisName':'weave.core::LinkableString',
'showAxisName':'weave.core::LinkableBoolean','showLabels':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection','tickCountRequested':'weave.core::LinkableNumber','tickMaxValue':'weave.core::LinkableNumber','tickMinValue':'weave.core::LinkableNumber'},'weave.visualization.plotters::SimpleGlyphPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','drawEllipse':'weave.core::LinkableBoolean',
'fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','horizontalPosition':'weave.core::LinkableString','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','screenSize':'weave.data.AttributeColumns::AlwaysDefinedColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','verticalPosition':'weave.core::LinkableString','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::SimpleParallelCoordinatesAxesPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet',
'lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','mainPlotter':'weave.core::LinkableDynamicObject','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::SimpleParallelCoordinatesPlotter':{'columns':'weave.core::LinkableHashMap','curvedLines':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','normalize':'weave.core::LinkableBoolean','selectableLines':'weave.core::LinkableBoolean',
'spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::SingleImagePlotter':{'dataHeight':'weave.core::LinkableNumber','dataWidth':'weave.core::LinkableNumber','dataX':'weave.core::LinkableNumber','dataY':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','horizontalAlign':'weave.core::LinkableString','imageURL':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','useImageSize':'weave.core::LinkableBoolean',
'verticalAlign':'weave.core::LinkableString'},'weave.visualization.plotters::SizeBinLegendPlotter':{'colorBySize':'weave.core::LinkableBoolean','colorNegative':'weave.core::LinkableNumber','colorPositive':'weave.core::LinkableNumber','customCircleRadiuses':'weave.core::LinkableString','defaultScreenRadius':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','maxScreenRadius':'weave.core::LinkableNumber',
'minScreenRadius':'weave.core::LinkableNumber','numberOfCircles':'weave.core::LinkableNumber','radiusColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','typeRadio':'weave.core::LinkableString'},'weave.visualization.plotters::StickFigureGlyphPlotter':{'curvature':'weave.core::LinkableNumber','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString',
'filteredKeySet':'weave.api.data::IFilteredKeySet','limbLength':'weave.data.AttributeColumns::AlwaysDefinedColumn','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','theta1':'weave.data.AttributeColumns::DynamicColumn','theta2':'weave.data.AttributeColumns::DynamicColumn','theta3':'weave.data.AttributeColumns::DynamicColumn','theta4':'weave.data.AttributeColumns::DynamicColumn',
'zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::TextGlyphPlotter':{'angle':'weave.data.AttributeColumns::AlwaysDefinedColumn','bold':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','font':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'hAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','hideOverlappingText':'weave.core::LinkableBoolean','italic':'weave.data.AttributeColumns::AlwaysDefinedColumn','maxWidth':'weave.core::LinkableNumber','size':'weave.data.AttributeColumns::AlwaysDefinedColumn','sortColumn':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','text':'weave.data.AttributeColumns::DynamicColumn','underline':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'vAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','xScreenOffset':'weave.core::LinkableNumber','yScreenOffset':'weave.core::LinkableNumber','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::ThermometerPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','meterColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::WMSPlotter':{'creditInfoAlpha':'weave.core::LinkableNumber',
'creditInfoBackgroundColor':'weave.core::LinkableNumber','creditInfoTextColor':'weave.core::LinkableNumber','displayMissingImage':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','gridSpacing':'weave.core::LinkableNumber','preferLowerQuality':'weave.core::LinkableBoolean','service':'weave.core::LinkableDynamicObject','spatialCallbacks':'weave.api.core::ICallbackCollection','srs':'weave.core::LinkableString','styles':'weave.core::LinkableString'},'weave.visualization.plotters::WeaveWordlePlotter':{'fillStyle':'weave.visualization.plotters.styles::SolidFillStyle',
'filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','wordColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::WedgePlotter':{'beginRadians':'weave.data.AttributeColumns::DynamicColumn','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle',
'spanRadians':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.tools::AdvancedTableTool':{'backgroundColor1':'weave.core::LinkableNumber','backgroundColor2':'weave.core::LinkableNumber','buttonRadius':'weave.core::LinkableNumber','cellColorFunction':'weave.core::LinkableFunction','closeable':'weave.core::LinkableBoolean','colorRamp':'weave.primitives::ColorRamp','columnWidths':'weave.core::LinkableHashMap','columns':'weave.core::LinkableHashMap',
'controlPanel':'weave.ui::ControlPanel','dataGridHorizontalScrollPosition':'weave.core::LinkableNumber','dataGridVerticalScrollPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterComponents':'weave.core::LinkableHashMap','filteredKeySet':'weave.data.KeySets::FilteredKeySet',
'lockedColumns':'weave.core::LinkableNumber','maxHeaderHeight':'weave.core::LinkableNumber','maxRows':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString',
'panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showColors':'weave.core::LinkableBoolean','showControls':'weave.core::LinkableBoolean','showFilters':'weave.core::LinkableBoolean','show_clearSelection':'weave.core::LinkableBoolean','show_editColumns':'weave.core::LinkableBoolean','show_exportData':'weave.core::LinkableBoolean','show_moveSelectedToTop':'weave.core::LinkableBoolean','sortFieldIndex':'weave.core::LinkableNumber','sortInDescendingOrder':'weave.core::LinkableBoolean',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::BarChartLegendTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','dynamicBarChartTool':'weave.core::LinkableDynamicObject','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ColorBinLegendTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean',
'enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString',
'panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ColormapHistogramTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','heightAxisTickCountRequested':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CompoundBarChartTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber',
'chartColors':'weave.primitives::ColorRamp','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorIndicatesDirection':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','heightAxisForceTickCount':'weave.core::LinkableBoolean',
'heightAxisTickCountRequested':'weave.core::LinkableNumber','heightColumns':'weave.api.core::ILinkableHashMap','linkHeightAndColorColumns':'weave.core::LinkableBoolean','linkHeightAndSortColumns':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotter':'weave.visualization.plotters::CompoundBarChartPlotter','showAllLabels':'weave.core::LinkableBoolean','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CompoundRadVizTool':{'buttonRadius':'weave.core::LinkableNumber',
'children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorComponent':'weave.ui::DynamicColumnComponent','colormapGrid':'weave.ui::ColorRampList','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','size':'weave.ui::DynamicColumnComponent',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CustomGraphicsTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','drawScript':'weave.core::LinkableFunction','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'vars':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CustomTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CytoscapeWebTool':{'_cytoscapeReady':'weave.core::LinkableBoolean','_edgeFilteredKeys':'weave.data.KeySets::FilteredKeySet','_nodeFilteredKeys':'weave.data.KeySets::FilteredKeySet','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','edgeColorColumn':'weave.data.AttributeColumns::DynamicColumn',
'edgeLabelColumn':'weave.data.AttributeColumns::DynamicColumn','edgeLabelComponent':'weave.ui::DynamicColumnComponent','edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeSourceComponent':'weave.ui::DynamicColumnComponent','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','edgeTargetComponent':'weave.ui::DynamicColumnComponent','edgeThicknessColumn':'weave.data.AttributeColumns::DynamicColumn','edgeThicknessComponent':'weave.ui::DynamicColumnComponent','edgeWeightColumn':'weave.data.AttributeColumns::DynamicColumn',
'edgeWeightComponent':'weave.ui::DynamicColumnComponent','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','layoutSeed':'weave.core::LinkableNumber','layoutType':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','nodeColorColumn':'weave.data.AttributeColumns::DynamicColumn','nodeColorComponent':'weave.ui::DynamicColumnComponent','nodeLabelColumn':'weave.data.AttributeColumns::DynamicColumn','nodeLabelComponent':'weave.ui::DynamicColumnComponent','nodeParentColumn':'weave.data.AttributeColumns::DynamicColumn','nodeParentComponent':'weave.ui::DynamicColumnComponent','nodeRadiusColumn':'weave.data.AttributeColumns::DynamicColumn','nodeRadiusComponent':'weave.ui::DynamicColumnComponent',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::DataStatisticsTool':{'_variables':'weave.api.core::ILinkableHashMap',
'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputVariables':'weave.api.core::ILinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::DatagridDisplay':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::DimensionSliderTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','currentSliderPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterValues':'weave.core::LinkableVariable','layoutMode':'weave.core::LinkableString','linkGlobalColumns':'weave.core::LinkableBoolean','linkLineCharts':'weave.core::LinkableBoolean','maxLabelCount':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean','timerDelay':'weave.core::LinkableNumber','unlinkedTools':'weave.core::LinkableVariable','zOrder':'weave.core::LinkableNumber'},
'weave.visualization.tools::ExternalTool':{'childListCallbacks':'weave.api.core::IChildListCallbackInterface'},'weave.visualization.tools::GaugeTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean',
'enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::GraphTool':{'_labelPlotter':'weave.visualization.plotters::GraphLabelPlotter','_plotter':'weave.visualization.plotters::GraphPlotter','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorColumn':'weave.data.AttributeColumns::DynamicColumn',
'colorComponent':'weave.ui::DynamicColumnComponent','controlPanel':'weave.ui::ControlPanel','edgeColorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','edgeColorComponent':'weave.ui::DynamicColumnComponent','edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeSourceComponent':'weave.ui::DynamicColumnComponent','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','edgeTargetComponent':'weave.ui::DynamicColumnComponent','edgeThicknessColumn':'weave.data.AttributeColumns::DynamicColumn',
'edgeThicknessComponent':'weave.ui::DynamicColumnComponent','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeToolAttributesInProbe':'weave.core::LinkableBoolean','labelColumn':'weave.data.AttributeColumns::DynamicColumn','labelComponent':'weave.ui::DynamicColumnComponent','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','nodeComponent':'weave.ui::DynamicColumnComponent','nodeRadiusColumn':'weave.data.AttributeColumns::DynamicColumn','nodeRadiusComponent':'weave.ui::DynamicColumnComponent','nodesColumn':'weave.data.AttributeColumns::DynamicColumn','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::Histogram2DTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','customTickCounts':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::HistogramTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable',
'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','heightAxisTickCountRequested':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::KeyMappingTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean','enableSelection':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','isBidirectional':'weave.core::LinkableBoolean',
'limitRecursion':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','sourceKeyType':'weave.core::LinkableString','sourceLocalNameColumn':'weave.data.AttributeColumns::DynamicColumn','sourceLocalNameColumnComponent':'weave.ui::DynamicColumnComponent','targetKeyType':'weave.core::LinkableString','targetLocalNameColumn':'weave.data.AttributeColumns::DynamicColumn','targetLocalNameColumnComponent':'weave.ui::DynamicColumnComponent','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::LayerSettingsTool':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','listForegroundFirst':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber',
'panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showAlphaSlider':'weave.core::LinkableBoolean','showSelectableCheck':'weave.core::LinkableBoolean','showVisibleCheck':'weave.core::LinkableBoolean','shownLayers':'weave.core::LinkableVariable','targetPath':'weave.core::LinkableVariable',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::LineChartTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::MapOverviewWindow':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean',
'enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','parentZoomBounds':'weave.primitives::ZoomBounds','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::MapTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBackground':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableOverview':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeToolAttributesInProbe':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','overviewPanel':'weave.visualization.tools::MapOverviewWindow',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','projectionSRS':'weave.core::LinkableString','showMouseModeControls':'weave.core::LinkableBoolean','showZoomControls':'weave.core::LinkableBoolean','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber','zoomControlsLocation':'weave.core::LinkableString','zoomSliderHeight':'weave.core::LinkableNumber','zoomToBaseMap':'weave.core::LinkableBoolean'},'weave.visualization.tools::ParallelCoordinatesTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean',
'enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeAllAttributesInProbe':'weave.core::LinkableBoolean','includeColorAttributeInProbe':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::PieChartHistogramTool':{'_plotter':'weave.visualization.plotters::PieChartHistogramPlotter','attributesToIncludeInProbe':'weave.core::LinkableVariable',
'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},
'weave.visualization.tools::PieChartTool':{'_plotter':'weave.visualization.plotters::PieChartPlotter','attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean',
'enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RInterfaceTool':{'RPlotscriptTALinkabletext':'weave.core::LinkableString','RScriptTAtext':'weave.core::LinkableString','Rservice':'weave.services::WeaveRServlet','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','queryObjectDisplayString':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RScriptTool':{'_RScriptTool_DynamicColumnComponent1':'weave.ui::DynamicColumnComponent','_RScriptTool_DynamicColumnComponent2':'weave.ui::DynamicColumnComponent','buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','xRcolumn':'weave.data.AttributeColumns::DynamicColumn','yRcolumn':'weave.data.AttributeColumns::DynamicColumn','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RadVizTool':{'_anchorPlotter':'weave.visualization.plotters::AnchorPlotter',
'_plotter':'weave.visualization.plotters::RadVizPlotter','buttonRadius':'weave.core::LinkableNumber','cdLayout':'weave.radviz::ClassDiscriminationLayoutAlgorithm','children':'weave.core::LinkableHashMap','classDiscriminatorColumn':'weave.data.AttributeColumns::DynamicColumn','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enabelAnnuliCircles':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean',
'enableProbeLines':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RamachandranPlotTool':{'_RamachandranPlotTool_DynamicColumnComponent1':'weave.ui::DynamicColumnComponent','_plotter':'weave.visualization.plotters::ScatterPlotPlotter','buttonRadius':'weave.core::LinkableNumber',
'children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorColumn':'weave.data.AttributeColumns::DynamicColumn','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','histogramColumn':'weave.data.AttributeColumns::DynamicColumn','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ScatterPlotTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'isVisibleEquationTextBoolean':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString',
'panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotter':'weave.visualization.plotters::ScatterPlotPlotter','regressionPlotter':'weave.visualization.plotters::RegressionLinePlotter','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::SimpleVisTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel',
'enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::SizeBinLegendTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','dynamicScatterPlotTool':'weave.core::LinkableDynamicObject','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::SliderTool':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','currentSliderPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterValues':'weave.core::LinkableVariable','layoutMode':'weave.core::LinkableString','linkGlobalColumns':'weave.core::LinkableBoolean','linkLineCharts':'weave.core::LinkableBoolean',
'maxLabelCount':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean','timerDelay':'weave.core::LinkableNumber','unlinkedTools':'weave.core::LinkableVariable','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::StickFigureGlyphTool':{'_plotter':'weave.visualization.plotters::StickFigureGlyphPlotter','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeToolAttributesInProbe':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::TableTool':{'backgroundColor1':'weave.core::LinkableNumber','backgroundColor2':'weave.core::LinkableNumber',
'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','colorRamp':'weave.primitives::ColorRamp','columnWidths':'weave.core::LinkableHashMap','columns':'weave.core::LinkableHashMap','controlPanel':'weave.ui::ControlPanel','dataGridHorizontalScrollPosition':'weave.core::LinkableNumber','dataGridVerticalScrollPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean',
'enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filteredKeySet':'weave.data.KeySets::FilteredKeySet','lockedColumns':'weave.core::LinkableNumber','maxHeaderHeight':'weave.core::LinkableNumber','maxRows':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','mouseoverKeySet':'weave.data.KeySets::DynamicKeySet',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','selectionKeySet':'weave.data.KeySets::DynamicKeySet','sortFieldIndex':'weave.core::LinkableNumber','sortInDescendingOrder':'weave.core::LinkableBoolean',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ThermometerTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::TimeSliderTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','currentSliderPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterValues':'weave.core::LinkableVariable','layoutMode':'weave.core::LinkableString',
'linkGlobalColumns':'weave.core::LinkableBoolean','linkLineCharts':'weave.core::LinkableBoolean','maxLabelCount':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean','timerDelay':'weave.core::LinkableNumber','unlinkedTools':'weave.core::LinkableVariable','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::TransposedTableTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columns':'weave.core::LinkableHashMap',
'controlPanel':'weave.ui::ControlPanel','dataColumnWidth':'weave.core::LinkableString','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','headerAttributeColumn':'weave.data.AttributeColumns::DynamicColumn','headerColumnWidth':'weave.core::LinkableString','headerText':'weave.core::LinkableString','keySet':'weave.data.KeySets::FilteredKeySet','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.visualization.tools::TreeTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','expandToShowSelected':'weave.core::LinkableBoolean','expandedItems':'weave.data.KeySets::KeySet','iconColumn':'weave.data.AttributeColumns::DynamicColumn',
'iconColumnComponent':'weave.ui::DynamicColumnComponent','labelColumn':'weave.data.AttributeColumns::DynamicColumn','labelColumnComponent':'weave.ui::DynamicColumnComponent','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','parentColumn':'weave.data.AttributeColumns::DynamicColumn','parentColumnComponent':'weave.ui::DynamicColumnComponent','probeIncludesChildren':'weave.core::LinkableBoolean','selectIncludesChildren':'weave.core::LinkableBoolean','sortColumn':'weave.data.AttributeColumns::DynamicColumn','sortColumnComponent':'weave.ui::DynamicColumnComponent',
'valueToIconMapping':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::WeaveAnalyst':{'analystMap':'weave.core::LinkableHashMap','inputColumnList':'weave.ui::ColumnListComponent','inputColumns':'weave.core::LinkableHashMap','results':'weave.core::LinkableHashMap','statModule':'weave.visualization.tools::WeaveAnalystStatisticsModule'},'weave.visualization.tools::WeaveAnalystStatisticsModule':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::WeaveWordleTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave::WeaveProperties':{'SecondaryKeyNumColumn_useGlobalMinMaxValues':'weave.core::LinkableBoolean','axisTitleTextFormat':'weave.utils::LinkableTextFormat','backgroundColor':'weave.core::LinkableNumber','collabServerIP':'weave.core::LinkableString',
'collabServerName':'weave.core::LinkableString','collabServerPort':'weave.core::LinkableString','collabServerRoom':'weave.core::LinkableString','collabSpectating':'weave.core::LinkableBoolean','cssStyleSheetName':'weave.core::LinkableString','dashboardMode':'weave.core::LinkableBoolean','dashedLengths':'weave.core::LinkableVariable','dashedSelectionColor':'weave.core::LinkableNumber','dashedZoomColor':'weave.core::LinkableNumber','dataInfoURL':'weave.core::LinkableString','debugScreenBounds':'weave.core::LinkableBoolean',
'enableAnnuliCircles':'weave.core::LinkableBoolean','enableAxisToolTips':'weave.core::LinkableBoolean','enableBitmapFilters':'weave.core::LinkableBoolean','enableBrowseData':'weave.core::LinkableBoolean','enableCascadeAllWindows':'weave.core::LinkableBoolean','enableClearCurrentSelection':'weave.core::LinkableBoolean','enableCloseAllWindows':'weave.core::LinkableBoolean','enableCollaborationBar':'weave.core::LinkableBoolean','enableCreateSubsets':'weave.core::LinkableBoolean','enableDataMenu':'weave.core::LinkableBoolean',
'enableDrawCircle':'weave.core::LinkableBoolean','enableDynamicTools':'weave.core::LinkableBoolean','enableExportApplicationScreenshot':'weave.core::LinkableBoolean','enableExportCSV':'weave.core::LinkableBoolean','enableExportToolImage':'weave.core::LinkableBoolean','enableFullScreen':'weave.core::LinkableBoolean','enableGeometryProbing':'weave.core::LinkableBoolean','enableManageDataSources':'weave.core::LinkableBoolean','enableManagePlugins':'weave.core::LinkableBoolean','enableManageSavedSelections':'weave.core::LinkableBoolean',
'enableManageSavedSubsets':'weave.core::LinkableBoolean','enableMarker':'weave.core::LinkableBoolean','enableMenuBar':'weave.core::LinkableBoolean','enableMinimizeAllWindows':'weave.core::LinkableBoolean','enableMouseWheel':'weave.core::LinkableBoolean','enablePenTool':'weave.core::LinkableBoolean','enableProbeLines':'weave.core::LinkableBoolean','enableProbeToolTip':'weave.core::LinkableBoolean','enableRefreshHierarchies':'weave.core::LinkableBoolean','enableRemoveSubsets':'weave.core::LinkableBoolean',
'enableRestoreAllMinimizedWindows':'weave.core::LinkableBoolean','enableRightClick':'weave.core::LinkableBoolean','enableSaveCurrentSelection':'weave.core::LinkableBoolean','enableSaveCurrentSubset':'weave.core::LinkableBoolean','enableSearchForRecord':'weave.core::LinkableBoolean','enableSelectionSelectorBox':'weave.core::LinkableBoolean','enableSelectionsMenu':'weave.core::LinkableBoolean','enableSessionHistoryControls':'weave.core::LinkableBoolean','enableSessionMenu':'weave.core::LinkableBoolean',
'enableShowAllRecords':'weave.core::LinkableBoolean','enableSubsetControls':'weave.core::LinkableBoolean','enableSubsetSelectionBox':'weave.core::LinkableBoolean','enableSubsetsMenu':'weave.core::LinkableBoolean','enableTileAllWindows':'weave.core::LinkableBoolean','enableToolAttributeEditing':'weave.core::LinkableBoolean','enableToolControls':'weave.core::LinkableBoolean','enableToolProbe':'weave.core::LinkableBoolean','enableToolSelection':'weave.core::LinkableBoolean','enableUserPreferences':'weave.core::LinkableBoolean',
'enableWeaveAnalystMode':'weave.core::LinkableBoolean','enableWindowMenu':'weave.core::LinkableBoolean','eventListeners':'weave.core::LinkableHashMap','externalTools':'weave.core::LinkableHashMap','filter_callbacks':'weave.api.core::ICallbackCollection','geometryMetadataRequestMode':'weave.core::LinkableString','geometryMinimumScreenArea':'weave.core::LinkableNumber','isTemplate':'weave.core::LinkableBoolean','macroLibraries':'weave.core::LinkableVariable','macros':'weave.api.core::ILinkableHashMap',
'maxComputationTimePerFrame':'weave.core::LinkableNumber','maxTooltipRecordsShown':'weave.core::LinkableNumber','menuToggles':'weave.api.core::ILinkableHashMap','mouseoverTextFormat':'weave.utils::LinkableTextFormat','panelBackgroundColor':'weave.core::LinkableNumber','panelTitleTextFormat':'weave.utils::LinkableTextFormat','pdbServiceURL':'weave.core::LinkableString','probeBufferSize':'weave.core::LinkableNumber','probeHeaderSeparator':'weave.core::LinkableString','probeInnerGlow':'weave.visualization.layers.filters::LinkableGlowFilter',
'probeLineFormatter':'weave.core::LinkableFunction','probeOuterGlow':'weave.visualization.layers.filters::LinkableGlowFilter','probeToolTipBackgroundAlpha':'weave.core::LinkableNumber','probeToolTipBackgroundColor':'weave.core::LinkableNumber','probeToolTipFontColor':'weave.core::LinkableNumber','probeToolTipMaxWidth':'weave.core::LinkableNumber','rServiceURL':'weave.core::LinkableString','recordsTooltipLocation':'weave.core::LinkableString','searchServiceURLs':'weave.core::LinkableString','selectionAlphaAmount':'weave.core::LinkableNumber',
'selectionDropShadow':'weave.visualization.layers.filters::LinkableDropShadowFilter','selectionMode':'weave.core::LinkableString','showAddExternalTools':'weave.core::LinkableBoolean','showBackgroundImage':'weave.core::LinkableBoolean','showCollaborationEditor':'weave.core::LinkableBoolean','showCollaborationMenuItem':'weave.core::LinkableBoolean','showColorController':'weave.core::LinkableBoolean','showCreateTemplateMenuItem':'weave.core::LinkableBoolean','showEmptyProbeRecordIdentifiers':'weave.core::LinkableBoolean',
'showEquationEditor':'weave.core::LinkableBoolean','showErrors':'weave.core::LinkableBoolean','showKMeansClustering':'weave.core::LinkableBoolean','showKeyTypeInColumnTitle':'weave.core::LinkableBoolean','showProbeToolTipEditor':'weave.core::LinkableBoolean','showProbeWindow':'weave.core::LinkableBoolean','showSelectedRecordsText':'weave.core::LinkableBoolean','showVisToolCloseDialog':'weave.core::LinkableBoolean','startupJavaScript':'weave.core::LinkableString','toolInteractions':'weave.visualization.layers::InteractionController',
'version':'weave.core::LinkableString','visTextFormat':'weave.utils::LinkableTextFormat','visTitleTextFormat':'weave.utils::LinkableTextFormat','windowSnapGridSize':'weave.core::LinkableString','workspaceHeight':'weave.core::LinkableNumber','workspaceMultiplier':'weave.core::LinkableNumber','workspaceWidth':'weave.core::LinkableNumber'}};weavejs.util.BackwardsCompatibility.prototype.FLEXJS_CLASS_INFO={names:[{name:'BackwardsCompatibility',qName:'weavejs.util.BackwardsCompatibility'}]};
goog.exportSymbol('weavejs.util.BackwardsCompatibility',weavejs.util.BackwardsCompatibility);weavejs.util.BackwardsCompatibility.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.util.WeaveMenuItem');goog.require('weavejs.util.WeaveTreeItem');weavejs.util.WeaveMenuItem=function(params){this.childItemClass=weavejs.util.WeaveMenuItem;if(params==weavejs.util.WeaveMenuItem.TYPE_SEPARATOR){this.type=weavejs.util.WeaveMenuItem.TYPE_SEPARATOR;params=null}weavejs.util.WeaveMenuItem.base(this,'constructor',params)};goog.inherits(weavejs.util.WeaveMenuItem,weavejs.util.WeaveTreeItem);
weavejs.util.WeaveMenuItem.createMenuItems=function(items){var flattened=[];var foreachiter0_target=items;for(var foreachiter0 in foreachiter0_target){var param=foreachiter0_target[foreachiter0];if(org.apache.flex.utils.Language.is(param,Array)){var groupedItems=weavejs.util.WeaveTreeItem.createItems(weavejs.util.WeaveMenuItem,org.apache.flex.utils.Language.as(param,Array));weavejs.util.WeaveMenuItem._pushSeparator(flattened);flattened.push.apply(flattened,groupedItems);weavejs.util.WeaveMenuItem._pushSeparator(flattened)}else flattened.push(param)}weavejs.util.WeaveMenuItem._pushSeparator(flattened);
flattened.pop();return weavejs.util.WeaveTreeItem.createItems(weavejs.util.WeaveMenuItem,flattened)};weavejs.util.WeaveMenuItem._pushSeparator=function(output){if(!output.length)return;var last=output[output.length-1];if(last==weavejs.util.WeaveMenuItem.TYPE_SEPARATOR)return;if(org.apache.flex.utils.Language.is(last,weavejs.util.WeaveMenuItem)&&org.apache.flex.utils.Language.as(last,weavejs.util.WeaveMenuItem).type==weavejs.util.WeaveMenuItem.TYPE_SEPARATOR)return;output.push(weavejs.util.WeaveMenuItem.TYPE_SEPARATOR)};
weavejs.util.WeaveMenuItem.TYPE_SEPARATOR='separator';weavejs.util.WeaveMenuItem.TYPE_CHECK='check';weavejs.util.WeaveMenuItem.TYPE_RADIO='radio';weavejs.util.WeaveMenuItem.prototype.click=null;weavejs.util.WeaveMenuItem.prototype.type=null;weavejs.util.WeaveMenuItem.prototype.groupName=null;weavejs.util.WeaveMenuItem.prototype._enabled=true;weavejs.util.WeaveMenuItem.prototype._shown=true;weavejs.util.WeaveMenuItem.prototype._toggled=false;
weavejs.util.WeaveMenuItem.prototype._filterShown=function(item,index,array){return item.shown};weavejs.util.WeaveMenuItem.prototype.runClickFunction=function(){if(org.apache.flex.utils.Language.is(this.click,Function))this.evalFunction(org.apache.flex.utils.Language.as(this.click,Function));var lv=org.apache.flex.utils.Language.as(this.click,weavejs.api.core.ILinkableVariable);if(lv&&lv!=this._toggled)lv.setSessionState(!lv.getSessionState())};
Object.defineProperties(weavejs.util.WeaveMenuItem.prototype,{label:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.util.WeaveMenuItem,this,'label')||' '},set:function(value){org.apache.flex.utils.Language.superSetter(weavejs.util.WeaveMenuItem,this,'label',value)}},toggled:{get:function(){return this.getBoolean(this._toggled,'toggled')},set:function(value){if(org.apache.flex.utils.Language.is(value,Boolean)){if(org.apache.flex.utils.Language.is(this._toggled,weavejs.api.core.ILinkableVariable)){org.apache.flex.utils.Language.as(this._toggled,
weavejs.api.core.ILinkableVariable).setSessionState(value);return}if(org.apache.flex.utils.Language.is(this._toggled,Function))return}this._toggled=value}},enabled:{get:function(){return this.getBoolean(this._enabled,'enabled')},set:function(value){this._enabled=value}},shown:{get:function(){return this.getBoolean(this._shown,'shown')},set:function(value){this._shown=value}},children:{get:function(){var items=org.apache.flex.utils.Language.as(org.apache.flex.utils.Language.superGetter(weavejs.util.WeaveMenuItem,
this,'children'),Array);if(!items)return null;items=items.filter(org.apache.flex.utils.Language.closure(this._filterShown,this,'_filterShown'));while(items.length&&org.apache.flex.utils.Language.as(items[0],weavejs.util.WeaveMenuItem,true).type==weavejs.util.WeaveMenuItem.TYPE_SEPARATOR)items.shift();while(items.length&&org.apache.flex.utils.Language.as(items[items.length-1],weavejs.util.WeaveMenuItem,true).type==weavejs.util.WeaveMenuItem.TYPE_SEPARATOR)items.pop();for(var i=items.length-1;i>1;i--)if(org.apache.flex.utils.Language.as(items[i],
weavejs.util.WeaveMenuItem,true).type==weavejs.util.WeaveMenuItem.TYPE_SEPARATOR&&org.apache.flex.utils.Language.as(items[i-1],weavejs.util.WeaveMenuItem,true).type==weavejs.util.WeaveMenuItem.TYPE_SEPARATOR)items.splice(i,1);return items},set:function(value){org.apache.flex.utils.Language.superSetter(weavejs.util.WeaveMenuItem,this,'children',value)}}});weavejs.util.WeaveMenuItem.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveMenuItem',qName:'weavejs.util.WeaveMenuItem'}]};
goog.exportSymbol('weavejs.util.WeaveMenuItem',weavejs.util.WeaveMenuItem);
weavejs.util.WeaveMenuItem.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'click':{type:'*'},'type':{type:'String'},'groupName':{type:'String'}}},accessors:function(){return{'label':{type:'*',declaredBy:'weavejs.util.WeaveMenuItem'},'toggled':{type:'*',declaredBy:'weavejs.util.WeaveMenuItem'},'enabled':{type:'*',declaredBy:'weavejs.util.WeaveMenuItem'},'shown':{type:'*',declaredBy:'weavejs.util.WeaveMenuItem'},'children':{type:'*',declaredBy:'weavejs.util.WeaveMenuItem'}}},
methods:function(){return{'WeaveMenuItem':{type:'',declaredBy:'weavejs.util.WeaveMenuItem'},'runClickFunction':{type:'void',declaredBy:'weavejs.util.WeaveMenuItem'}}}}};goog.provide('WeaveTest');goog.require('weavejs.core.EventCallbackCollection');goog.require('weavejs.core.LinkableCallbackScript');goog.require('weavejs.core.LinkableFunction');goog.require('weavejs.core.LinkableNumber');goog.require('weavejs.core.LinkableSynchronizer');goog.require('weavejs.data.bin.CategoryBinningDefinition');goog.require('weavejs.data.bin.CustomSplitBinningDefinition');goog.require('weavejs.data.bin.DynamicBinningDefinition');goog.require('weavejs.data.bin.EqualIntervalBinningDefinition');
goog.require('weavejs.data.bin.ExplicitBinningDefinition');goog.require('weavejs.data.bin.NaturalJenksBinningDefinition');goog.require('weavejs.data.bin.NumberClassifier');goog.require('weavejs.data.bin.QuantileBinningDefinition');goog.require('weavejs.data.bin.SimpleBinningDefinition');goog.require('weavejs.data.bin.SingleValueClassifier');goog.require('weavejs.data.bin.StandardDeviationBinningDefinition');goog.require('weavejs.data.bin.StringClassifier');goog.require('weavejs.data.column.AlwaysDefinedColumn');
goog.require('weavejs.data.column.BinnedColumn');goog.require('weavejs.data.column.ColorColumn');goog.require('weavejs.data.column.ColumnDataTask');goog.require('weavejs.data.column.CombinedColumn');goog.require('weavejs.data.column.DateColumn');goog.require('weavejs.data.column.FilteredColumn');goog.require('weavejs.data.column.GeometryColumn');goog.require('weavejs.data.column.KeyColumn');goog.require('weavejs.data.column.NormalizedColumn');goog.require('weavejs.data.column.NumberColumn');goog.require('weavejs.data.column.ProxyColumn');
goog.require('weavejs.data.column.SortedColumn');goog.require('weavejs.data.column.SortedIndexColumn');goog.require('weavejs.data.column.StringColumn');goog.require('weavejs.data.column.StringLookup');goog.require('weavejs.data.hierarchy.WeaveRootDataTreeNode');goog.require('weavejs.data.key.ColumnDataFilter');goog.require('weavejs.data.key.DynamicKeyFilter');goog.require('weavejs.data.key.DynamicKeySet');goog.require('weavejs.data.key.FilteredKeySet');goog.require('weavejs.data.key.KeyFilter');goog.require('weavejs.data.key.KeySet');
goog.require('weavejs.data.key.KeySetCallbackInterface');goog.require('weavejs.data.key.KeySetUnion');goog.require('weavejs.data.key.SortedKeySet');goog.require('weavejs.data.source.CKANDataSource');goog.require('weavejs.data.source.CSVDataSource');goog.require('weavejs.data.source.CensusDataSource');goog.require('weavejs.data.source.DBFDataSource');goog.require('weavejs.data.source.ForeignDataMappingTransform');goog.require('weavejs.data.source.GeoJSONDataSource');goog.require('weavejs.data.source.GroupedDataTransform');
goog.require('weavejs.data.source.WeaveDataSource');goog.require('weavejs.data.source.WebSocketDataSource');goog.require('weavejs.geom.LinkableBounds2D');goog.require('weavejs.geom.Range');goog.require('weavejs.geom.TempHack_SolidFillStyle');goog.require('weavejs.geom.TempHack_SolidLineStyle');goog.require('weavejs.geom.ZoomBounds');goog.require('weavejs.net.Admin');goog.require('weavejs.path.ExternalTool');goog.require('weavejs.util.BackwardsCompatibility');goog.require('weavejs.util.WeaveMenuItem');
WeaveTest=function(){};
WeaveTest.dependencies=[weavejs.api.core.ILinkableVariable,weavejs.core.LinkableNumber,weavejs.core.LinkableString,weavejs.core.LinkableBoolean,weavejs.core.LinkableVariable,weavejs.core.LinkableHashMap,weavejs.core.LinkableDynamicObject,weavejs.core.LinkableWatcher,weavejs.core.LinkableCallbackScript,weavejs.core.LinkableSynchronizer,weavejs.core.LinkableFunction,weavejs.data.key.ColumnDataFilter,weavejs.data.key.DynamicKeyFilter,weavejs.data.key.DynamicKeySet,weavejs.data.key.FilteredKeySet,weavejs.data.key.KeyFilter,
weavejs.data.key.KeySet,weavejs.data.key.KeySetCallbackInterface,weavejs.data.key.KeySetUnion,weavejs.data.key.SortedKeySet,weavejs.data.bin.AbstractBinningDefinition,weavejs.data.bin.CategoryBinningDefinition,weavejs.data.bin.CustomSplitBinningDefinition,weavejs.data.bin.DynamicBinningDefinition,weavejs.data.bin.EqualIntervalBinningDefinition,weavejs.data.bin.ExplicitBinningDefinition,weavejs.data.bin.NaturalJenksBinningDefinition,weavejs.data.bin.NumberClassifier,weavejs.data.bin.QuantileBinningDefinition,
weavejs.data.bin.SimpleBinningDefinition,weavejs.data.bin.SingleValueClassifier,weavejs.data.bin.StandardDeviationBinningDefinition,weavejs.data.bin.StringClassifier,weavejs.data.column.AbstractAttributeColumn,weavejs.data.column.AlwaysDefinedColumn,weavejs.data.column.BinnedColumn,weavejs.data.column.ColorColumn,weavejs.data.column.ColumnDataTask,weavejs.data.column.CombinedColumn,weavejs.data.column.CSVColumn,weavejs.data.column.DateColumn,weavejs.data.column.DynamicColumn,weavejs.data.column.EquationColumn,
weavejs.data.column.ExtendedDynamicColumn,weavejs.data.column.FilteredColumn,weavejs.data.column.GeometryColumn,weavejs.data.column.NormalizedColumn,weavejs.data.column.NumberColumn,weavejs.data.column.ProxyColumn,weavejs.data.column.ReferencedColumn,weavejs.data.column.SecondaryKeyNumColumn,weavejs.data.column.SortedColumn,weavejs.data.column.SortedIndexColumn,weavejs.data.column.StringColumn,weavejs.data.column.StringLookup,weavejs.data.source.GeoJSONDataSource,weavejs.data.source.WeaveDataSource,
weavejs.data.source.ForeignDataMappingTransform,weavejs.data.source.CensusDataSource,weavejs.data.source.DBFDataSource,weavejs.data.source.GroupedDataTransform,weavejs.data.source.WebSocketDataSource,weavejs.data.source.CKANDataSource,weavejs.data.column.KeyColumn,weavejs.path.ExternalTool,weavejs.util.WeaveMenuItem,weavejs.geom.ZoomBounds,weavejs.data.hierarchy.WeaveRootDataTreeNode,weavejs.geom.TempHack_SolidLineStyle,weavejs.geom.TempHack_SolidFillStyle,weavejs.net.Admin,weavejs.core.EventCallbackCollection,
weavejs.util.BackwardsCompatibility,weavejs.geom.Range,weavejs.geom.LinkableBounds2D,null];
WeaveTest.test=function(weave){var __localFn0__=function(){weavejs.util.JS.log('immediate',lv.state)};var __localFn1__=function(){weavejs.util.JS.log('grouped',lv.state)};var __localFn2__=function(){weavejs.util.JS.log(this+'',this.getState())};var __localFn3__=function(){weavejs.util.JS.log(this.weave.path('ls2').getState())};var __localFn4__=function(){weavejs.util.JS.log('column',this.getMetadata('title'));var foreachiter0_target=this.keys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];
weavejs.util.JS.log(key,this.getValueFromKey(key),this.getValueFromKey(key,Number),this.getValueFromKey(key,String))}};var __localFn5__=function(){weavejs.util.JS.log(this+'');var csv=org.apache.flex.utils.Language.as(this.getObject(),weavejs.data.source.CSVDataSource);var ids=csv.getColumnIds();var foreachiter1_target=ids;for(var foreachiter1 in foreachiter1_target){var id=foreachiter1_target[foreachiter1];var col=csv.getColumnById(id);col.addGroupedCallback(col,print,true)}};weavejs.core.SessionStateLog.debug=
true;var lv=weave.root.requestObject('ls',weavejs.core.LinkableString,false);lv.addImmediateCallback(weave,__localFn0__,true);lv.addGroupedCallback(weave,__localFn1__,true);lv.state='hello';lv.state='hello';weave.path('ls').state('hi').addCallback(null,__localFn2__);lv.state='world';weave.path('script').request('LinkableCallbackScript').state('script','console.log(Weave.className(this), this.get("ldo").target.value, Weave.getState(this));').push('variables','ldo').request('LinkableDynamicObject').state(['ls']);
lv.state='2';lv.state=2;lv.state='3';weave.path('ls2').request('LinkableString');weave.path('sync').request('LinkableSynchronizer').state('primaryPath',['ls']).state('primaryTransform','state + "_transformed"').state('secondaryPath',['ls2']).call(__localFn3__);var print=__localFn4__;weave.path('csv').request(weavejs.data.source.CSVDataSource).state('csvData',[['a','b'],[1,'one'],[2,'two']]).addCallback(null,__localFn5__)};WeaveTest.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveTest',qName:'WeaveTest'}]};
goog.exportSymbol('WeaveTest',WeaveTest);WeaveTest.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{}}}};goog.provide('weavejs.core.EditorManager');goog.require('weavejs.api.ui.IEditorManager');weavejs.core.EditorManager=function(){this.labels=new weavejs.util.JS.WeakMap};weavejs.core.EditorManager.prototype.labels;weavejs.core.EditorManager.prototype.setLabel=function(object,label){this.labels.set(object,label);Weave.getCallbacks(this).triggerCallbacks()};weavejs.core.EditorManager.prototype.getLabel=function(object){return this.labels.get(object)};
weavejs.core.EditorManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'EditorManager',qName:'weavejs.core.EditorManager'}],interfaces:[weavejs.api.ui.IEditorManager]};goog.exportSymbol('weavejs.core.EditorManager',weavejs.core.EditorManager);weavejs.core.EditorManager.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'setLabel':{type:'void',declaredBy:'weavejs.core.EditorManager'},'getLabel':{type:'String',declaredBy:'weavejs.core.EditorManager'}}}}};goog.provide('weavejs.core.Locale');goog.require('weavejs.api.core.ILocale');weavejs.core.Locale=function(){this._data={}};weavejs.core.Locale.prototype._reverseLayout=false;weavejs.core.Locale.prototype.loadFromUrl=function(jsonUrl){var self=this;var __localFn0__=function(data){self.data=data};var request=new weavejs.net.URLRequest(jsonUrl);request.responseType=weavejs.net.ResponseType.JSON;var self=this;return weavejs.WeaveAPI.URLRequestUtils.request(this,request).then(__localFn0__)};weavejs.core.Locale.prototype._data;
weavejs.core.Locale.prototype.getText=function(text){if(!text)return'';var result;if(this._data.hasOwnProperty(text))result=this._data[text];else this._data[text]=null;return result||text};Object.defineProperties(weavejs.core.Locale.prototype,{reverseLayout:{get:function(){return this._reverseLayout},set:function(value){this._reverseLayout=value}},data:{get:function(){return this._data},set:function(value){this._data=value}}});
weavejs.core.Locale.prototype.FLEXJS_CLASS_INFO={names:[{name:'Locale',qName:'weavejs.core.Locale'}],interfaces:[weavejs.api.core.ILocale]};goog.exportSymbol('weavejs.core.Locale',weavejs.core.Locale);
weavejs.core.Locale.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{'reverseLayout':{type:'Boolean',declaredBy:'weavejs.core.Locale'},'data':{type:'Object',declaredBy:'weavejs.core.Locale'}}},methods:function(){return{'loadFromUrl':{type:'WeavePromise',declaredBy:'weavejs.core.Locale'},'getText':{type:'String',declaredBy:'weavejs.core.Locale'}}}}};goog.provide('weavejs.core.ProgressIndicator');goog.require('weavejs.api.core.IProgressIndicator');weavejs.core.ProgressIndicator=function(){this.map_task_progress=new weavejs.util.JS.Map;this.map_task_description=new weavejs.util.JS.Map;this.map_task_stackTrace=new weavejs.util.JS.Map};
weavejs.core.ProgressIndicator.prototype.debugTasks=function(){var result=[];var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter0_target=tasks;for(var foreachiter0 in foreachiter0_target){var task=foreachiter0_target[foreachiter0];result.push(weavejs.util.DebugUtils.debugId(task))}return result};
weavejs.core.ProgressIndicator.prototype.getDescriptions=function(){var result=[];var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter1_target=tasks;for(var foreachiter1 in foreachiter1_target){var task=foreachiter1_target[foreachiter1];var desc=this.map_task_description.get(task)||'Unnamed task';if(desc)result.push([task,this.map_task_progress.get(task),desc])}return result};weavejs.core.ProgressIndicator.prototype.getTaskCount=function(){return this._taskCount};
weavejs.core.ProgressIndicator.prototype.addTask=function(taskToken,busyObject,description){busyObject=typeof busyObject!=='undefined'?busyObject:null;description=typeof description!=='undefined'?description:null;var cc=Weave.getCallbacks(this);cc.delayCallbacks();var isNewTask=!this.map_task_progress.has(taskToken);this.map_task_description.set(taskToken,description);this.updateTask(taskToken,NaN);if(isNewTask&&weavejs.util.WeavePromise.isThenable(taskToken)){var remove=this.removeTask.bind(this,
taskToken);taskToken.then(remove,remove)}if(busyObject)weavejs.WeaveAPI.SessionManager.assignBusyTask(taskToken,busyObject);cc.resumeCallbacks()};weavejs.core.ProgressIndicator.prototype.hasTask=function(taskToken){return this.map_task_progress.has(taskToken)};
weavejs.core.ProgressIndicator.prototype.updateTask=function(taskToken,progress){if(!this.map_task_progress.has(taskToken)){if(!isNaN(progress))throw new Error('updateTask() called, but task was not previously added with addTask()');if(weavejs.WeaveAPI.debugAsyncStack)this.map_task_stackTrace.set(taskToken,new Error('Stack trace'));this._taskCount++;this._maxTaskCount++}if(this.map_task_progress.get(taskToken)!==progress){this.map_task_progress.set(taskToken,progress);Weave.getCallbacks(this).triggerCallbacks()}};
weavejs.core.ProgressIndicator.prototype.removeTask=function(taskToken){if(!this.map_task_progress.has(taskToken))return;var stackTrace=this.map_task_stackTrace.get(taskToken);this.map_task_progress['delete'](taskToken);this.map_task_description['delete'](taskToken);this.map_task_stackTrace['delete'](taskToken);this._taskCount--;if(this._taskCount==1)this._maxTaskCount=this._taskCount;weavejs.WeaveAPI.SessionManager.unassignBusyTask(taskToken);Weave.getCallbacks(this).triggerCallbacks()};
weavejs.core.ProgressIndicator.prototype.getNormalizedProgress=function(){var sum=0;var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter2_target=tasks;for(var foreachiter2 in foreachiter2_target){var task=foreachiter2_target[foreachiter2];var stackTrace=this.map_task_stackTrace.get(task);var progress=this.map_task_progress.get(task);if(isFinite(progress))sum+=progress}sum+=this._maxTaskCount-this._taskCount;if(sum)return sum/this._maxTaskCount;return this._taskCount?0:1};
weavejs.core.ProgressIndicator.prototype._taskCount=0;weavejs.core.ProgressIndicator.prototype._maxTaskCount=1;weavejs.core.ProgressIndicator.prototype.map_task_progress;weavejs.core.ProgressIndicator.prototype.map_task_description;weavejs.core.ProgressIndicator.prototype.map_task_stackTrace;
weavejs.core.ProgressIndicator.prototype.test=function(){var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter3_target=tasks;for(var foreachiter3 in foreachiter3_target){var task=foreachiter3_target[foreachiter3];var stackTrace=this.map_task_stackTrace.get(task);var description=this.map_task_description.get(task);weavejs.util.JS.log(weavejs.util.DebugUtils.debugId(task),description,stackTrace)}};
weavejs.core.ProgressIndicator.prototype.FLEXJS_CLASS_INFO={names:[{name:'ProgressIndicator',qName:'weavejs.core.ProgressIndicator'}],interfaces:[weavejs.api.core.IProgressIndicator]};goog.exportSymbol('weavejs.core.ProgressIndicator',weavejs.core.ProgressIndicator);
weavejs.core.ProgressIndicator.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'debugTasks':{type:'Array',declaredBy:'weavejs.core.ProgressIndicator'},'getDescriptions':{type:'Array',declaredBy:'weavejs.core.ProgressIndicator'},'getTaskCount':{type:'int',declaredBy:'weavejs.core.ProgressIndicator'},'addTask':{type:'void',declaredBy:'weavejs.core.ProgressIndicator'},'hasTask':{type:'Boolean',declaredBy:'weavejs.core.ProgressIndicator'},
'updateTask':{type:'void',declaredBy:'weavejs.core.ProgressIndicator'},'removeTask':{type:'void',declaredBy:'weavejs.core.ProgressIndicator'},'getNormalizedProgress':{type:'Number',declaredBy:'weavejs.core.ProgressIndicator'},'test':{type:'void',declaredBy:'weavejs.core.ProgressIndicator'}}}}};goog.provide('weavejs.data.source.CachedDataSource');goog.require('weavejs.data.source.AbstractDataSource');weavejs.data.source.CachedDataSource=function(){weavejs.data.source.CachedDataSource.base(this,'constructor');this.type=Weave.linkableChild(this,weavejs.core.LinkableString);this.state=Weave.linkableChild(this,weavejs.core.LinkableVariable)};goog.inherits(weavejs.data.source.CachedDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.CachedDataSource.prototype.type;weavejs.data.source.CachedDataSource.prototype.state;
weavejs.data.source.CachedDataSource.prototype.refreshHierarchy=function(){var root=Weave.getRoot(this);var names=root.getNames();var name=root.getName(this);var classDef=Weave.getDefinition(this.type.value);var state=this.state.state;var dataSource=root.requestObject(name,classDef,false);Weave.setState(dataSource,state);root.setNameOrder(names)};Object.defineProperties(weavejs.data.source.CachedDataSource.prototype,{isLocal:{get:function(){return true}}});
weavejs.data.source.CachedDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'CachedDataSource',qName:'weavejs.data.source.CachedDataSource'}]};goog.exportSymbol('weavejs.data.source.CachedDataSource',weavejs.data.source.CachedDataSource);
weavejs.data.source.CachedDataSource.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'type':{type:'LinkableString'},'state':{type:'LinkableVariable'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.CachedDataSource'}}},methods:function(){return{'CachedDataSource':{type:'',declaredBy:'weavejs.data.source.CachedDataSource'}}}}};goog.provide('weavejs.data.AttributeColumnCache');goog.require('weavejs.data.source.CachedDataSource');goog.require('weavejs.api.data.IAttributeColumnCache');weavejs.data.AttributeColumnCache=function(){this.d2d_dataSource_metadataHash_column=new weavejs.util.Dictionary2D;this.map_root_saveCache=new weavejs.util.JS.WeakMap};
weavejs.data.AttributeColumnCache.prototype.getColumn=function(dataSource,metadata){var self=this;var __localFn0__=function(){this.d2d_dataSource_metadataHash_column.map['delete'](dataSource)};var __localFn1__=function(){this.d2d_dataSource_metadataHash_column.remove(dataSource,hashCode)};if(dataSource==null||metadata==null)return null;var hashCode=Weave.stringify(metadata);var column=this.d2d_dataSource_metadataHash_column.get(dataSource,hashCode);if(!column){if(!this.d2d_dataSource_metadataHash_column.map.has(dataSource))Weave.getCallbacks(dataSource).addDisposeCallback(this,
__localFn0__);column=dataSource.generateNewAttributeColumn(metadata);if(column)column.addDisposeCallback(this,__localFn1__);this.d2d_dataSource_metadataHash_column.set(dataSource,hashCode,column)}return column};weavejs.data.AttributeColumnCache.prototype.d2d_dataSource_metadataHash_column;weavejs.data.AttributeColumnCache.prototype.map_root_saveCache;
weavejs.data.AttributeColumnCache.prototype.convertToCachedDataSources=function(root){var self=this;var __localFn0__=function(_){promise.dispose()};var __localFn1__=function(root){var column;var columns=Weave.getDescendants(root,weavejs.api.data.IAttributeColumn);var foreachiter0_target=columns;for(var foreachiter0 in foreachiter0_target){column=foreachiter0_target[foreachiter0];if(column.keys.length)column.getValueFromKey(column.keys[0]);promise.depend(column)}return root};var promise=(new weavejs.util.WeavePromise(root)).setResult(root);
var dispose=__localFn0__;var promiseThen=promise.then(__localFn1__).then(org.apache.flex.utils.Language.closure(this._convertToCachedDataSources,this,'_convertToCachedDataSources'));promiseThen.then(dispose,dispose);return promiseThen};
weavejs.data.AttributeColumnCache.prototype._convertToCachedDataSources=function(root){var output=[];var dataSource;var dataSources=this.d2d_dataSource_metadataHash_column.primaryKeys();var foreachiter1_target=dataSources;for(var foreachiter1 in foreachiter1_target){dataSource=foreachiter1_target[foreachiter1];if(dataSource.isLocal)continue;var dataSourceName=root.getName(dataSource);if(!dataSourceName)continue;var metadataHashes=this.d2d_dataSource_metadataHash_column.secondaryKeys(dataSource);var foreachiter2_target=
metadataHashes;for(var foreachiter2 in foreachiter2_target){var metadataHash=foreachiter2_target[foreachiter2];var column=this.d2d_dataSource_metadataHash_column.get(dataSource,metadataHash);if(!column||Weave.wasDisposed(column))continue;var metadata=weavejs.api.data.ColumnMetadata.getAllMetadata(column);var dataType=column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);var keys=[];var data=[];var foreachiter3_target=column.keys;for(var foreachiter3 in foreachiter3_target){var key=foreachiter3_target[foreachiter3];
var values=column.getValueFromKey(key,Array);if(values!=null&&!org.apache.flex.utils.Language.is(values,Array))values=[values];var foreachiter4_target=values;for(var foreachiter4 in foreachiter4_target){var value=foreachiter4_target[foreachiter4];if(dataType==weavejs.api.data.DataType.GEOMETRY){keys.push(key.localName);data.push(org.apache.flex.utils.Language.as(value,weavejs.geom.GeneralizedGeometry).toGeoJson())}else{keys.push(key.localName);data.push(value)}}}output.push([dataSourceName,metadataHash,
metadata,keys,data])}}dataSources=root.getObjects(weavejs.api.data.IDataSource);var foreachiter5_target=dataSources;for(var foreachiter5 in foreachiter5_target){dataSource=foreachiter5_target[foreachiter5];if(dataSource.isLocal)continue;var type=Weave.className(dataSource);var state=Weave.getState(dataSource);var cds=root.requestObject(root.getName(dataSource),weavejs.data.source.CachedDataSource,false);cds.label.value=Weave.lang('{0} (Cached)',dataSource.getLabel());cds.type.value=type;cds.state.state=
state}this.restoreCache(root,output);this.map_root_saveCache.set(root,output);return output};weavejs.data.AttributeColumnCache.prototype.restoreCache=function(root,cacheData){this.map_root_saveCache.set(root,cacheData);var foreachiter6_target=cacheData;for(var foreachiter6 in foreachiter6_target){var args=foreachiter6_target[foreachiter6];this.addToColumnCache.apply(this,[root].concat(args))}};
weavejs.data.AttributeColumnCache.prototype.addToColumnCache=function(root,dataSourceName,metadataHash,metadata,keyStrings,data){var self=this;var __localFn0__=function(keys){if(org.apache.flex.utils.Language.is(column,weavejs.data.column.GeometryColumn)){var geomKeys=[];var geoms=[];for(var i=0;i<data.length;i++){var geomsFromGeoJson=weavejs.geom.GeneralizedGeometry.fromGeoJson(data[i]);var foreachiter7_target=geomsFromGeoJson;for(var foreachiter7 in foreachiter7_target){var geom=foreachiter7_target[foreachiter7];
geomKeys.push(keys[i]);geoms.push(geom)}}keys=geomKeys;data=geoms}column.setRecords(keys,data)};var dataSource=org.apache.flex.utils.Language.as(root.getObject(dataSourceName),weavejs.api.data.IDataSource);if(!dataSource){if(dataSourceName)weavejs.util.JS.error('Data source not found: '+dataSourceName);return}var column;var keyType=metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE];var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];if(dataType==weavejs.api.data.DataType.GEOMETRY)column=
Weave.disposableChild(dataSource,column=new weavejs.data.column.GeometryColumn(metadata));else if(dataType==weavejs.api.data.DataType.DATE)column=Weave.disposableChild(dataSource,column=new weavejs.data.column.DateColumn(metadata));else if(dataType==weavejs.api.data.DataType.NUMBER)column=Weave.disposableChild(dataSource,column=new weavejs.data.column.NumberColumn(metadata));else column=Weave.disposableChild(dataSource,column=new weavejs.data.column.StringColumn(metadata));org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,
weavejs.data.key.QKeyManager).getQKeysPromise(column,keyType,keyStrings).then(__localFn0__);this.d2d_dataSource_metadataHash_column.set(dataSource,metadataHash,column)};weavejs.data.AttributeColumnCache.prototype.restoreFromCachedDataSources=function(root){var foreachiter8_target=root.getObjects(weavejs.data.source.CachedDataSource);for(var foreachiter8 in foreachiter8_target){var cds=foreachiter8_target[foreachiter8];this.d2d_dataSource_metadataHash_column.removeAllPrimary(cds);cds.hierarchyRefresh.triggerCallbacks()}};
weavejs.data.AttributeColumnCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'AttributeColumnCache',qName:'weavejs.data.AttributeColumnCache'}],interfaces:[weavejs.api.data.IAttributeColumnCache]};goog.exportSymbol('weavejs.data.AttributeColumnCache',weavejs.data.AttributeColumnCache);
weavejs.data.AttributeColumnCache.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'map_root_saveCache':{type:'Object'}}},accessors:function(){return{}},methods:function(){return{'getColumn':{type:'IAttributeColumn',declaredBy:'weavejs.data.AttributeColumnCache'},'convertToCachedDataSources':{type:'WeavePromise',declaredBy:'weavejs.data.AttributeColumnCache'},'restoreCache':{type:'void',declaredBy:'weavejs.data.AttributeColumnCache'},'restoreFromCachedDataSources':{type:'void',
declaredBy:'weavejs.data.AttributeColumnCache'}}}}};goog.provide('weavejs.data.source.SpatialJoinTransform');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.api.data.ISelectableAttributes');
weavejs.data.source.SpatialJoinTransform=function(){weavejs.data.source.SpatialJoinTransform.base(this,'constructor');this.geometryColumn=Weave.linkableChild(this,weavejs.data.column.DynamicColumn);this.xColumn=Weave.linkableChild(this,weavejs.data.column.DynamicColumn);this.yColumn=Weave.linkableChild(this,weavejs.data.column.DynamicColumn);this.pointProjection=Weave.linkableChild(this,weavejs.core.LinkableString);this._source=new weavejs.util.StandardLib.ol.source.Vector;this._parser=new weavejs.util.StandardLib.ol.format.GeoJSON};
goog.inherits(weavejs.data.source.SpatialJoinTransform,weavejs.data.source.AbstractDataSource);weavejs.data.source.SpatialJoinTransform.prototype.geometryColumn;weavejs.data.source.SpatialJoinTransform.prototype.xColumn;weavejs.data.source.SpatialJoinTransform.prototype.yColumn;weavejs.data.source.SpatialJoinTransform.prototype.pointProjection;weavejs.data.source.SpatialJoinTransform.prototype._source;weavejs.data.source.SpatialJoinTransform.prototype._parser;
weavejs.data.source.SpatialJoinTransform.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;weavejs.data.source.SpatialJoinTransform.base(this,'initialize',true)};
weavejs.data.source.SpatialJoinTransform.prototype.getHierarchyRoot=function(){if(!this._rootNode)this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,data:this,'label':org.apache.flex.utils.Language.closure(this.getLabel,this,'getLabel'),hasChildBranches:false,children:[this.generateHierarchyNode({})]});return this._rootNode};
weavejs.data.source.SpatialJoinTransform.prototype.generateHierarchyNode=function(metadata){metadata[weavejs.api.data.ColumnMetadata.TITLE]=weavejs.data.ColumnUtils.getTitle(this.geometryColumn);metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.xColumn.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.geometryColumn.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,
idFields:[],data:metadata})};
weavejs.data.source.SpatialJoinTransform.prototype.requestColumnFromSource=function(proxyColumn){var metadata=proxyColumn.getProxyMetadata();var geomKeys=this.geometryColumn.keys;var rawGeometries=weavejs.data.ColumnUtils.getGeoJsonGeometries(this.geometryColumn,this.geometryColumn.keys);var key;var feature;this._source.clear();for(var idx=0;idx<geomKeys.length;idx++){var rawGeom=rawGeometries[idx];key=org.apache.flex.utils.Language.as(geomKeys[idx],weavejs.api.data.IQualifiedKey);var geometry=this._parser.readGeometry(rawGeom,
{dataProjection:weavejs.util.StandardLib.ol.proj.get(this.geometryColumn.getMetadata(weavejs.api.data.ColumnMetadata.PROJECTION)),featureProjection:weavejs.util.StandardLib.ol.proj.get(this.pointProjection.value)});if(geometry.getExtent().some(weavejs.util.StandardLib.lodash.isNaN)){weavejs.util.JS.error('Dropping feature',key,'due to containing NaN coordinates. Possibly misconfigured projection?');continue}feature=new weavejs.util.StandardLib.ol.Feature(geometry);feature.setId(key);this._source.addFeature(feature)}var keys=
[];var data=[];var foreachiter0_target=weavejs.util.ArrayUtils.union(this.xColumn.keys,this.yColumn.keys);for(var foreachiter0 in foreachiter0_target){key=foreachiter0_target[foreachiter0];var x=this.xColumn.getValueFromKey(key,Number);var y=this.yColumn.getValueFromKey(key,Number);var features=this._source.getFeaturesAtCoordinate([x,y]);var foreachiter1_target=features;for(var foreachiter1 in foreachiter1_target){feature=foreachiter1_target[foreachiter1];var featureKey=feature.getId();keys.push(key);
data.push(featureKey.localName)}}var column=new weavejs.data.column.StringColumn(metadata);column.setRecords(keys,data);proxyColumn.setInternalColumn(column)};Object.defineProperties(weavejs.data.source.SpatialJoinTransform.prototype,{isLocal:{get:function(){return!weavejs.data.DataSourceUtils.hasRemoteColumnDependencies(this)}},selectableAttributes:{get:function(){return(new weavejs.util.JS.Map).set('Join Geometry',this.geometryColumn).set('Datapoint X',this.xColumn).set('Datapoint Y',this.yColumn)}}});
weavejs.data.source.SpatialJoinTransform.prototype.FLEXJS_CLASS_INFO={names:[{name:'SpatialJoinTransform',qName:'weavejs.data.source.SpatialJoinTransform'}],interfaces:[weavejs.api.data.ISelectableAttributes]};goog.exportSymbol('weavejs.data.source.SpatialJoinTransform',weavejs.data.source.SpatialJoinTransform);
weavejs.data.source.SpatialJoinTransform.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{'geometryColumn':{type:'DynamicColumn'},'xColumn':{type:'DynamicColumn'},'yColumn':{type:'DynamicColumn'},'pointProjection':{type:'LinkableString'}}},accessors:function(){return{'isLocal':{type:'Boolean',declaredBy:'weavejs.data.source.SpatialJoinTransform'},'selectableAttributes':{type:'Object',declaredBy:'weavejs.data.source.SpatialJoinTransform'}}},methods:function(){return{'SpatialJoinTransform':{type:'',
declaredBy:'weavejs.data.source.SpatialJoinTransform'},'getHierarchyRoot':{type:'IWeaveTreeNode',declaredBy:'weavejs.data.source.SpatialJoinTransform'}}}}};goog.provide('org.apache.flex.utils.Language');org.apache.flex.utils.Language=function(){};
org.apache.flex.utils.Language.as=function(leftOperand,rightOperand,coercion){coercion=typeof coercion!=='undefined'?coercion:null;var error,itIs,message;coercion=coercion!==undefined?coercion:false;itIs=org.apache.flex.utils.Language.is(leftOperand,rightOperand);if(!itIs&&coercion){message='Type Coercion failed';if(TypeError)error=new TypeError(message);else error=new Error(message);throw error;}return itIs?leftOperand:null};org.apache.flex.utils.Language._int=function(value){return value>>0};
org.apache.flex.utils.Language.is=function(leftOperand,rightOperand){var superClass;if(leftOperand==null||rightOperand==null)return false;if(leftOperand instanceof rightOperand)return true;if(rightOperand===Object)return true;if(typeof leftOperand==='string')return rightOperand===String;if(typeof leftOperand==='number')return rightOperand===Number;if(typeof leftOperand==='boolean')return rightOperand===Boolean;if(rightOperand===Array)return Array.isArray(leftOperand);if(leftOperand.FLEXJS_CLASS_INFO===
undefined)return false;if(leftOperand.FLEXJS_CLASS_INFO.interfaces)if(org.apache.flex.utils.Language.checkInterfaces(leftOperand,rightOperand))return true;superClass=leftOperand.constructor;superClass=superClass.superClass_;if(superClass)while(superClass&&superClass.FLEXJS_CLASS_INFO){if(superClass.FLEXJS_CLASS_INFO.interfaces)if(org.apache.flex.utils.Language.checkInterfaces(superClass,rightOperand))return true;superClass=superClass.constructor;superClass=superClass.superClass_}return false};
org.apache.flex.utils.Language.checkInterfaces=function(leftOperand,rightOperand){var i,interfaces;interfaces=leftOperand.FLEXJS_CLASS_INFO.interfaces;for(i=interfaces.length-1;i>-1;i--){if(interfaces[i]===rightOperand)return true;if(interfaces[i].prototype.FLEXJS_CLASS_INFO.interfaces){var isit=org.apache.flex.utils.Language.checkInterfaces(interfaces[i].prototype,rightOperand);if(isit)return true}}return false};
org.apache.flex.utils.Language.prototype.isClass=function(classDef){return typeof classDef==='function'&&classDef.prototype&&classDef.prototype.constructor===classDef};org.apache.flex.utils.Language.prototype.asClass=function(classDef){return this.isClass(classDef)?classDef:null};org.apache.flex.utils.Language.postdecrement=function(obj,prop){var value=obj[prop];obj[prop]=value-1;return value};org.apache.flex.utils.Language.postincrement=function(obj,prop){var value=obj[prop];obj[prop]=value+1;return value};
org.apache.flex.utils.Language.predecrement=function(obj,prop){var value=obj[prop]-1;obj[prop]=value;return value};org.apache.flex.utils.Language.preincrement=function(obj,prop){var value=obj[prop]+1;obj[prop]=value;return value};
org.apache.flex.utils.Language.superGetter=function(clazz,pthis,prop){var superClass=clazz.superClass_;var superdesc=Object.getOwnPropertyDescriptor(superClass,prop);while(superdesc==null){superClass=superClass.constructor;superClass=superClass.superClass_;superdesc=Object.getOwnPropertyDescriptor(superClass,prop)}return superdesc.get.call(pthis)};
org.apache.flex.utils.Language.superSetter=function(clazz,pthis,prop,value){var superClass=clazz.superClass_;var superdesc=Object.getOwnPropertyDescriptor(superClass,prop);while(superdesc==null){superClass=superClass.constructor;superClass=superClass.superClass_;superdesc=Object.getOwnPropertyDescriptor(superClass,prop)}superdesc.set.apply(pthis,[value])};
org.apache.flex.utils.Language.trace=function(rest){rest=Array.prototype.slice.call(arguments,0);var theConsole;theConsole=goog.global.console;if(theConsole===undefined)if(typeof window!=='undefined')theConsole=window.console;else if(typeof console!=='undefined')theConsole=console;try{if(theConsole&&theConsole.log)theConsole.log.apply(theConsole,rest)}catch(e){}};org.apache.flex.utils.Language.uint=function(value){return value>>>0};
org.apache.flex.utils.Language.closure=function(fn,object,boundMethodName){if(object.hasOwnProperty(boundMethodName))return object[boundMethodName];var boundMethod=goog.bind(fn,object);Object.defineProperty(object,boundMethodName,{value:boundMethod});return boundMethod};org.apache.flex.utils.Language.prototype.FLEXJS_CLASS_INFO={names:[{name:'Language',qName:'org.apache.flex.utils.Language'}]};goog.exportSymbol('org.apache.flex.utils.Language',org.apache.flex.utils.Language);
org.apache.flex.utils.Language.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'isClass':{type:'Boolean',declaredBy:'org.apache.flex.utils.Language'},'asClass':{type:'Class',declaredBy:'org.apache.flex.utils.Language'}}}}};goog.provide('WeaveJS');goog.require('Weave');goog.require('WeaveTest');goog.require('weavejs.WeaveAPI');goog.require('weavejs.core.EditorManager');goog.require('weavejs.core.Locale');goog.require('weavejs.core.ProgressIndicator');goog.require('weavejs.core.Scheduler');goog.require('weavejs.core.SessionManager');goog.require('weavejs.data.AttributeColumnCache');goog.require('weavejs.data.CSVParser');goog.require('weavejs.data.StatisticsCache');goog.require('weavejs.data.key.QKeyManager');goog.require('weavejs.data.source.CKANDataSource');
goog.require('weavejs.data.source.CSVDataSource');goog.require('weavejs.data.source.CensusDataSource');goog.require('weavejs.data.source.DBFDataSource');goog.require('weavejs.data.source.ForeignDataMappingTransform');goog.require('weavejs.data.source.GeoJSONDataSource');goog.require('weavejs.data.source.GroupedDataTransform');goog.require('weavejs.data.source.SpatialJoinTransform');goog.require('weavejs.data.source.WeaveDataSource');goog.require('weavejs.geom.TempHack_SolidFillStyle');goog.require('weavejs.geom.TempHack_SolidLineStyle');
goog.require('weavejs.net.URLRequestUtils');goog.require('org.apache.flex.utils.Language');WeaveJS=function(){};
WeaveJS.prototype.start=function(){weavejs.WeaveAPI.ClassRegistry['defaultPackages'].push('','weavejs','weavejs.api','weavejs.api.core','weavejs.api.data','weavejs.api.service','weavejs.api.ui','weavejs.core','weavejs.data','weavejs.data.bin','weavejs.data.column','weavejs.data.hierarchy','weavejs.data.key','weavejs.data.source','weavejs.geom','weavejs.path','weavejs.util');weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.net.IURLRequestUtils,weavejs.net.URLRequestUtils);
weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.IAttributeColumnCache,weavejs.data.AttributeColumnCache);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.core.ISessionManager,weavejs.core.SessionManager);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.IQualifiedKeyManager,weavejs.data.key.QKeyManager);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.core.IScheduler,weavejs.core.Scheduler);
weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.core.IProgressIndicator,weavejs.core.ProgressIndicator);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.IStatisticsCache,weavejs.data.StatisticsCache);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.ui.IEditorManager,weavejs.core.EditorManager);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.ICSVParser,weavejs.data.CSVParser);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.core.ILocale,
weavejs.core.Locale);weavejs.WeaveAPI.ClassRegistry.registerImplementation(weavejs.api.core.ILinkableHashMap,weavejs.core.LinkableHashMap);weavejs.WeaveAPI.ClassRegistry.registerImplementation(weavejs.api.core.ILinkableDynamicObject,weavejs.core.LinkableDynamicObject);var IDataSource_File=weavejs.api.data.IDataSource;var IDataSource_Service=weavejs.api.data.IDataSource;var IDataSource_Transform=weavejs.api.data.IDataSource;weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_File,weavejs.data.source.CSVDataSource,
'CSV file');weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_File,weavejs.data.source.DBFDataSource,'SHP/DBF files');weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_File,weavejs.data.source.GeoJSONDataSource,'GeoJSON file');weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_Service,weavejs.data.source.WeaveDataSource,'Weave server');weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_Service,weavejs.data.source.CKANDataSource,'CKAN server');
weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_Service,weavejs.data.source.CensusDataSource,'Census.gov');weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_Transform,weavejs.data.source.ForeignDataMappingTransform,'Foreign data mapping');weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_Transform,weavejs.data.source.GroupedDataTransform,'Grouped data transform');weavejs.WeaveAPI.ClassRegistry.registerImplementation(IDataSource_Transform,weavejs.data.source.SpatialJoinTransform,
'Spatial Join transform');Weave.registerClass(weavejs.geom.TempHack_SolidFillStyle,'ExtendedFillStyle');Weave.registerClass(weavejs.geom.TempHack_SolidLineStyle,'ExtendedLineStyle');WeaveTest};WeaveJS.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveJS',qName:'WeaveJS'}]};goog.exportSymbol('WeaveJS',WeaveJS);
WeaveJS.prototype.FLEXJS_REFLECTION_INFO=function(){return{variables:function(){return{}},accessors:function(){return{}},methods:function(){return{'WeaveJS':{type:'',declaredBy:'WeaveJS'},'start':{type:'void',declaredBy:'WeaveJS'}}}}};
//# sourceMappingURL=./WeaveJS.js.map